(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9389],{38444:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var o,n=i(32735);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},a.apply(this,arguments)}const r=function(e){return n.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 8",width:"1em",height:"1em"},e),o||(o=n.createElement("path",{d:"M0 8c7 0 10-8 12-8s5 8 12 8z"})))}},67287:(e,t,i)=>{"use strict";i(35842);var o=i(74512),n=i(30718),a=i(10207),r=i(69327),s=i(87308),l=i(57856),d=i(13581),c=i.n(d),p=i(12788),u=i(68316),g=i(31191);const m=["fetch"],h=["includes"],_=["values","entries","getOwnPropertyDescriptors"];var v=i(65156);function y(e){var t,i,o,n,a,s,l;const d=null!==(n=null!==(o=null===(i=null===(t=window.SIGI_STATE)||void 0===t?void 0:t.I18n)||void 0===i?void 0:i.lang)&&void 0!==o?o:document.documentElement.getAttribute("lang"))&&void 0!==n?n:"en",c=null!==(l=null===(s=null===(a=window.SIGI_STATE)||void 0===a?void 0:a.I18n)||void 0===s?void 0:s.translations)&&void 0!==l?l:{};return new Promise(((t,i)=>{r.ZP.use(u.CJ).init({debug:!1,fallbackLng:["en"],initImmediate:!0,defaultNS:null!=e?e:"Webapp"},(e=>{e?i(e):t()})),r.ZP.setLang(d)})).then((()=>{Object.entries(c).forEach((([e,t])=>{Object.entries(t).forEach((([t,i])=>{r.ZP.addResourceBundle(e,t,i,!0)}))}))}))}var f=i(83503);i(15362),window[f.ho];var b=i(75453),x=i.n(b),k=i(77810),S=i(35002),w=i(32735),C=i(30582),j=i(22538);const T={Primary:"rgba(255, 59, 92, 1.0)",Primary2:"rgba(255, 255, 255, 0.9)",Secondary:"rgba(32, 213, 236, 1.0)",Secondary2:"rgba(0, 198, 233, 1.0)",Link:"rgba(255, 59, 92, 1.0)",Link2:"rgba(255, 59, 92, 1.0)",Link3:"rgba(255, 59, 92, 1.0)",Positive:"rgba(11, 224, 155, 1.0)",Negative:"rgba(255, 76, 58, 1.0)",ToastDefault:"rgba(84, 84, 84, 0.92)",ToastNegative:"rgba(255, 76, 58, 0.92)",TextPrimary:"rgba(255, 255, 255, 0.9)",TextSecondary:"rgba(255, 255, 255, 0.75)",TextTertiary:"rgba(255, 255, 255, 0.5)",TextTertiary2:"rgba(255, 255, 255, 0.75)",TextQuaternary:"rgba(255, 255, 255, 0.34)",TextReverse:"rgba(255, 255, 255, 0.9)",TextReverse2:"rgba(255, 255, 255, 0.75)",TextReverse3:"rgba(255, 255, 255, 0.5)",TextReverse4:"rgba(255, 255, 255, 0.34)",ConstTextInverse:"rgba(255, 255, 255, 1.0)",ConstTextInverse2:"rgba(255, 255, 255, 0.9)",ConstTextInverse3:"rgba(255, 255, 255, 0.75)",ConstTextInverse4:"rgba(255, 255, 255, 0.5)",ConstTextInverse5:"rgba(255, 255, 255, 0.34)",BGPrimary:"rgba(18, 18, 18, 1.0)",BGPrimary2:"rgba(255, 255, 255, 0.04)",BGSecondary2:"rgba(255, 255, 255, 0.08)",BGSecondary:"rgba(37, 37, 37, 1.0)",BGTertiary:"rgba(46, 46, 46, 1.0)",BGTertiary2:"rgba(255, 255, 255, 0.12)",BGQuaternary:"rgba(56, 56, 56, 1.0)",BGInput:"rgba(255, 255, 255, 0.12)",BGInput2:"rgba(255, 255, 255, 0.08)",BGPlaceholderDefault:"rgba(255, 255, 255, 0.08)",BGPlaceholderOpaque:"rgba(37, 37, 37, 1.0)",BGView:"rgba(255, 255, 255, 0.04)",BGView2:"rgba(255, 255, 255, 0.0)",BGCreation:"rgba(18, 18, 18, 1.0)",BGCreation2:"rgba(27, 27, 27, 1.0)",BGCreation3:"rgba(18, 18, 18, 1.0)",ConstBGInverse:"rgba(0, 0, 0, 1.0)",ConstBGInverse2:"rgba(0, 0, 0, 0.6)",BGInverse3:"rgba(37, 37, 37, 0.6)",ConstBGContainer:"rgba(255, 255, 255, 0.12)",ConstBGContainer2:"rgba(255, 255, 255, 0.08)",ConstBGContainer3:"rgba(255, 255, 255, 0.04)",BGReverse:"rgba(18, 18, 18, 1.0)",BGBrand:"rgba(254, 44, 85, 0.34)",BGReverse2:"rgba(18, 18, 18, 0.9)",SDPrimary:"rgba(0, 0, 0, 0.8)",SDSecondary:"rgba(0, 0, 0, 0.68)",SDTertiary:"rgba(0, 0, 0, 0.5)",ShadowPrimary:"rgba(0, 0, 0, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineInput:"rgba(255, 255, 255, 0.5)",LinePrimary:"rgba(255, 255, 255, 0.0)",LinePrimary2:"rgba(255, 255, 255, 0.2)",LineSecondary:"rgba(255, 255, 255, 0.12)",LineSecondary2:"rgba(255, 255, 255, 0.0)",LineSecondary3:"rgba(255, 255, 255, 0.0)",LineReverse2:"rgba(255, 255, 255, 0.12)",LineReverse3:"rgba(255, 255, 255, 0.0)",LineInverse:"rgba(255, 255, 255, 0.0)",ConstLineInverse:"rgba(255, 255, 255, 0.2)",ConstLineInverse2:"rgba(255, 255, 255, 0.12)",TagGreenText:"rgba(178, 255, 217, 1.0)",TagGreenBG:"rgba(89, 128, 102, 1.0)",TagPurpleText:"rgba(255, 178, 217, 1.0)",TagPurpleBG:"rgba(128, 89, 108, 1.0)",TagBrownText:"rgba(255, 179, 179, 1.0)",TagBrownBG:"rgba(128, 89, 89, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1)",ConstSecondary2:"rgba(16, 162, 197, 1)",AssistColorYellow:"rgba(250, 206, 21, 1)",BGMessageIcon:"rgba(255, 255, 255, 0.08)",BGMessageOperateHover:"rgba(255, 255, 255, 0.12)"},O={Proxima:'"IBM Plex Sans", ProximaNova, Arial, Tahoma, PingFangSC, sans-serif',Sofia:'"IBM Plex Sans", SofiaPro, Arial, Tahoma, PingFangSC, sans-serif'},I={P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}},P={direction:"ltr",isDark:!1,colors:{Primary:"rgba(254, 44, 85, 1.0)",Primary2:"rgba(22, 24, 35, 1.0)",Secondary:"rgba(32, 213, 236, 1.0)",Secondary2:"rgba(0, 198, 233, 1.0)",Link:"rgba(254, 44, 85, 1.0)",Link2:"rgba(254, 44, 85, 1.0)",Link3:"rgba(254, 44, 85, 1.0)",Positive:"rgba(11, 224, 155, 1.0)",Negative:"rgba(255, 76, 58, 1.0)",ToastDefault:"rgba(84, 84, 84, 0.92)",ToastNegative:"rgba(255, 76, 58, 0.92)",TextPrimary:"rgba(22, 24, 35, 1.0)",TextSecondary:"rgba(22, 24, 35, 0.75)",TextTertiary:"rgba(22, 24, 35, 0.5)",TextTertiary2:"rgba(22, 24, 35, 0.5)",TextQuaternary:"rgba(22, 24, 35, 0.34)",TextReverse:"rgba(22, 24, 35, 1.0)",TextReverse2:"rgba(22, 24, 35, 0.75)",TextReverse3:"rgba(22, 24, 35, 0.5)",TextReverse4:"rgba(22, 24, 35, 0.34)",ConstTextInverse:"rgba(255, 255, 255, 1.0)",ConstTextInverse2:"rgba(255, 255, 255, 0.9)",ConstTextInverse3:"rgba(255, 255, 255, 0.75)",ConstTextInverse4:"rgba(255, 255, 255, 0.5)",ConstTextInverse5:"rgba(255, 255, 255, 0.34)",BGPrimary:"rgba(255, 255, 255, 1.0)",BGPrimary2:"rgba(255, 255, 255, 1.0)",BGSecondary2:"rgba(255, 255, 255, 1.0)",BGSecondary:"rgba(255, 255, 255, 1.0)",BGTertiary:"rgba(255, 255, 255, 1.0)",BGTertiary2:"rgba(255, 255, 255, 1.0)",BGQuaternary:"rgba(255, 255, 255, 1.0)",BGInput:"rgba(22, 24, 35, 0.06)",BGInput2:"rgba(22, 24, 35, 0.06)",BGPlaceholderDefault:"rgba(22, 24, 35, 0.06)",BGPlaceholderOpaque:"rgba(241, 241, 241, 1.0)",BGView:"rgba(22, 24, 35, 0.03)",BGView2:"rgba(22, 24, 35, 0.03)",BGCreation:"rgba(18, 18, 18, 1.0)",BGCreation2:"rgba(27, 27, 27, 1.0)",BGCreation3:"rgba(248, 248, 248, 1.0)",ConstBGInverse:"rgba(0, 0, 0, 1.0)",ConstBGInverse2:"rgba(0, 0, 0, 0.6)",BGInverse3:"rgba(37, 37, 37, 0.6)",ConstBGContainer:"rgba(255, 255, 255, 0.12)",ConstBGContainer2:"rgba(255, 255, 255, 0.08)",ConstBGContainer3:"rgba(255, 255, 255, 0.04)",BGReverse:"rgba(255, 255, 255, 1.0)",BGBrand:"rgba(254, 44, 85, 0.06)",BGReverse2:"rgba(255, 255, 255, 0.9)",SDPrimary:"rgba(0, 0, 0, 0.8)",SDSecondary:"rgba(0, 0, 0, 0.5)",SDTertiary:"rgba(0, 0, 0, 0.2)",ShadowPrimary:"rgba(0, 0, 0, 0.12)",ShadowSecondary:"rgba(0, 0, 0, 0.06)",LineInput:"rgba(22, 24, 35, 0.5)",LinePrimary:"rgba(22, 24, 35, 0.2)",LinePrimary2:"rgba(22, 24, 35, 0.2)",LineSecondary:"rgba(22, 24, 35, 0.12)",LineSecondary2:"rgba(22, 24, 35, 0.12)",LineSecondary3:"rgba(22, 24, 35, 0.03)",LineReverse2:"rgba(22, 24, 35, 0.12)",LineReverse3:"rgba(22, 24, 35, 0.12)",LineInverse:"rgba(22, 24, 35, 0.2)",ConstLineInverse:"rgba(255, 255, 255, 0.2)",ConstLineInverse2:"rgba(255, 255, 255, 0.12)",TagGreenText:"rgba(89, 128, 108, 1.0)",TagGreenBG:"rgba(239, 245, 242, 1.0)",TagPurpleText:"rgba(128, 89, 121, 1.0)",TagPurpleBG:"rgba(246, 240, 245, 1.0)",TagBrownText:"rgba(128, 89, 89, 1.0)",TagBrownBG:"rgba(245, 240, 240, 1.0)",LiveColorStart:"rgba(255, 23, 100, 1.0)",LiveColorEnd:"rgba(237, 52, 149, 1.0)",ConstSecondary:"rgba(32, 213, 236, 1.0)",ConstSecondary2:"rgba(16, 162, 197, 1.0)",AssistColorYellow:"rgba(250, 206, 21, 1)",BGMessageIcon:"rgb(241, 241, 242)",BGMessageOperateHover:"rgba(196, 196, 196, .425)"},link:{color:"#0078d4",hoverColor:"#004578",activeColor:"#004578",focusColor:"#0078d4",visitedColor:"#0078d4"},selection:{background:"rgba(141, 214, 249, 0.35)"},text:{fontFamily:'"SofiaPro", PingFangSC, sans-serif',fontSize:"14px",color:"#000"},border:{radius:"3px"},boxShadowBase:"0 1.6px 3.6px 0 rgba(0,0,0,.132), 0 0.3px 0.9px 0 rgba(0,0,0,.108)",markdown:{blockquote:{color:"#4e7182",backgroundColor:"#eaf8ff"},inlineCode:{color:"hotpink",background:"rgba(70, 94, 105, 0.05)"}},typography:{P0:{fontSize:"24px",lineHeight:"32px"},P1:{fontSize:"18px",lineHeight:"25px"},P2:{fontSize:"16px",lineHeight:"22px"},P3:{fontSize:"14px",lineHeight:"20px"},P4:{fontSize:"12px",lineHeight:"17px"},H0:{fontSize:"96px",lineHeight:"115px"},H1:{fontSize:"72px",lineHeight:"86px"},H2:{fontSize:"56px",lineHeight:"68px"},H3:{fontSize:"32px",lineHeight:"38px"},H4:{fontSize:"24px",lineHeight:"28px"},H5:{fontSize:"18px",lineHeight:"22px"},H6:{fontSize:"14px",lineHeight:"17px"}},fontFamilies:{Proxima:"ProximaNova, Arial, Tahoma, PingFangSC, sans-serif",Sofia:"SofiaPro, Arial, Tahoma, PingFangSC, sans-serif"},fontWeights:{normal:400,medium:500,semiBold:600,bold:700}};function E(e,t){var i;const o=Object.create(null);for(const[n,a]of Object.entries(e)){const e=t[n];o[n]="object"==typeof e?E(a,e):null!==(i=t[n])&&void 0!==i?i:a}return o}function L(e){const{isDark:t,isMobile:i,lang:o}=e,n={};return t&&(n.colors=T,n.isDark=!0),i&&(n.typography=I),"vi-VN"===o?n.fontFamilies=O:"ar"!==o&&"he-IL"!==o&&"ur"!==o||(n.direction="rtl"),E(P,n)}const A=(0,w.createContext)({value:!1,toggle:c()});var R=i(29607),M=i(50193),D=i.n(M);function F({children:e,supportRoutes:t}){const i=function(e,t){const i=(0,R.lX)(t);function o(t){return(o,n)=>{const{pathname:a,href:r}=function(e){var t;if("string"==typeof e){const t=new URL(e,window.location.origin);return{pathname:t.pathname,href:t.href}}return{pathname:null!==(t=e.pathname)&&void 0!==t?t:"",href:`${e.pathname}${e.search}${e.hash}`}}(o);!function(e,t){return t.some((t=>D()(t).test(e)))}(a,e)?t?window.location.replace(r):window.location.href=r:t?i.replace(o,n):i.push(o,n)}}return Object.create(i,{push:{enumerable:!0,value:o(!1)},replace:{enumerable:!0,value:o(!0)}})}(t);return(0,o.jsx)(j.F0,Object.assign({history:i},{children:e}),void 0)}function N({children:e}){const t=(0,j.k6)();return(0,o.jsx)(k.o,Object.assign({history:t},{children:e}),void 0)}function B({children:e}){const t=(0,w.useMemo)((()=>matchMedia("(prefers-color-schema: dark)")),[]),i=(0,w.useMemo)((()=>"1"===S.parse(window.location.search)._r),[]),[n,a]=(0,w.useState)(!i&&t.matches),r=(0,w.useCallback)((e=>{i||a(e.matches)}),[i]);(0,w.useEffect)((()=>(t.addListener(r),()=>{t.removeListener(r)})),[t,r]);const s=(0,w.useMemo)((()=>({value:n,toggle:a})),[n]);return(0,o.jsx)(A.Provider,Object.assign({value:s},{children:e}),void 0)}const z=({children:e,supportRoutes:t})=>{var i,n,a,r;const s=null!==(r=null!==(a=null===(n=null===(i=window.SIGI_STATE)||void 0===i?void 0:i.I18n)||void 0===n?void 0:n.lang)&&void 0!==a?a:document.documentElement.getAttribute("lang"))&&void 0!==r?r:"en";return(0,w.useEffect)((()=>{(null===history||void 0===history?void 0:history.scrollRestoration)&&(history.scrollRestoration="manual")})),(0,o.jsx)(C.B6,{children:(0,o.jsx)(u.bd,Object.assign({lang:s},{children:(0,o.jsx)(w.StrictMode,{children:(0,o.jsx)(F,Object.assign({supportRoutes:t},{children:(0,o.jsx)(N,{children:(0,o.jsx)(B,{children:e},void 0)},void 0)}),void 0)},void 0)}),void 0)},void 0)};var $=i(54348),U=i(24246),W=i(36773),G=i(88916),H=i(17941),q=i(53551),Z=i(73323),V=i(14722),Q=i(3585),Y=i(59719),K=i(86303),J=i(90674),X=i(14656),ee=i(32321),te=i(88423),ie=i.n(te),oe=i(86987),ne=i(21296);let ae=class{constructor(){this.handlePolicyConfirmOnFYP=e=>{Q.WB.event("tns_web_trending_setting",e)},this.handleAgeGateResponse=(e,t)=>{Q.WB.event("age_gate_response",{enter_type:"click_sign_up",is_success:e?1:0,error_code:t})}}handleUniversalPopShow(e){Q.WB.event("tns_general_dialog_show",e)}handleUniversalPopClick(e){Q.WB.event("qa_tns_general_dialog_click",e)}};ae=(0,g.__decorate)([(0,ne.G)()],ae);var re=i(40200),se=i(29984);const le=(0,re.Z)("a",{target:"e1k110iq0"})((({theme:e})=>(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"TextPrimary"})),"label:ALink;");var de=i(6229),ce=i(16219),pe=i(11359),ue=i(2355),ge=i(31144),me=i(71011),he=i(51166),_e=i(81104),ve=i(70336);let ye=class{constructor(e){this.fetch=e}getUniversalPopConfig(e){return this.fetch.get("/api/policy/notice/",{query:e})}setUniversalPopOperation(e){return this.fetch.post("https://www.tiktok.com/api/policy/notice/approve/",{body:(0,S.stringify)(e)})}getPolicyContent(e){return this.fetch.get("https://www.tiktok.com/web/api/v2/project/articleContent/",{query:e})}};ye=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],ye);let fe=class extends de.D{constructor(e,t){super(),this.service=e,this.appContext=t,this.defaultState={popupConfig:null}}setPopupConfig(e,t){e.popupConfig=t}getPopupConfig(e){return e.pipe((0,ge.M)(this.appContext.state$),(0,me.U)((([e,t])=>{var i;return{locale:null!==(i=t.lang)&&void 0!==i?i:"en"}})),(0,he.z)((({locale:e})=>this.service.getUniversalPopConfig({locale:e}).pipe((0,me.U)((({policy_notices:e})=>{var t;return this.getActions().setPopupConfig(null!==(t=null==e?void 0:e[0])&&void 0!==t?t:null)}))))),(0,_e.n)({}))}};function be({link:e,lang:t}){return e.replace("${locale}",t)}function xe({onHide:e,report:t,popupService:i,common:{business:o,policy_version:n,style:a},action:{text:r,approve:s,operation:l,dismiss:d,link:c,extra:p,new_web_tab:u,link_type:g}}){return m=>{if(null==m||m.preventDefault(),t.handleUniversalPopClick({style:a,business:o,button_info:r}),"callback"===g||s)return i.setUniversalPopOperation({business:o,extra:p,policy_version:n,style:a,operation:null==l?void 0:l.toString()}).subscribe(),void(null==e||e());d?null==e||e():g&&"h5"!==g||!c||(u?window.open(c):window.location.href=c)}}(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],fe.prototype,"setPopupConfig",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],fe.prototype,"getPopupConfig",null),fe=(0,g.__decorate)([(0,pe.Y)("UniversalPop"),(0,g.__metadata)("design:paramtypes",[ye,G.G])],fe);const ke=function(){return(0,o.jsxs)(C.ql,{children:[(0,o.jsx)("meta",{name:"google",content:"notranslate"},"google"),",",(0,o.jsx)("meta",{name:"format-detection",content:"telephone=no"},"format-detection"),",",(0,o.jsx)("link",{rel:"shortcut icon",href:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/logo_144c91a.png",type:"image/x-icon"},"shortcut")]},void 0)},Se=["//v16.tiktokcdn.com","//p16-va.tiktokcdn.com","//s20.tiktokcdn.com"],we=function(){return(0,o.jsx)(C.ql,{children:Se.map(((e,t)=>(0,o.jsx)("link",{rel:"dns-prefetch",href:e},`prefetch-${t+1}`)))},void 0)};var Ce=i(81275),je=i(33586),Te=i(24489);const Oe=function({appContext:e,slardarBid:t}){const{$abTestVersion:i,$env:n,$botType:a,$appType:r,$user:s,$wid:l,$region:d,$isMobile:c,$domains:p}=null!=e?e:{},{pathname:u}=(0,j.TH)(),g=(0,w.useMemo)((()=>{var e;return Object.assign(Object.assign({region:null!=d?d:"",botType:null!=a?a:"",isMobile:Boolean(c).toString(),isDowngrade:(0,Ce.W)().toString(),isLogin:Boolean(s).toString()},((e={parameters:{},versionName:""})=>{const t={};try{const i=e.parameters||{};Object.entries(i).forEach((([e,i])=>{t[e]=i.vid}))}catch(e){console.error("Abtest config parse error",e)}return t})(i)),{uid:null!==(e=null==s?void 0:s.uid)&&void 0!==e?e:""})}),[i,a,c,s,d]),m=(0,je.A)(null!=r?r:"m",{bid:t,userId:l,pid:(0,Te.BB)(u),context:g,env:"boe"===(null==n?void 0:n.type)?"test":"production",domain:null==p?void 0:p.slardar});return(0,o.jsx)(C.ql,{children:(0,o.jsx)("script",{children:m},void 0)},void 0)},Ie=function({appContext:e,slardarBid:t}){const{$language:i,$botType:n}=(0,H.m7)(e),a=t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(C.ql,{htmlAttributes:{lang:i}},void 0),(0,o.jsx)(ke,{},void 0),(0,o.jsx)(Oe,{appContext:e,slardarBid:a},void 0),(0,o.jsx)(we,{},void 0)]},void 0)};var Pe=i(93990),Ee=i(90152),Le=i(28698),Ae=i(49904);function Re(e){return null==e||"number"==typeof e||"boolean"==typeof e?e:"string"==typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):Array.isArray(e)?e.map((e=>Re(e))):"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).reduce(((t,i)=>(t[i]=Re(e[i]),t)),{}):Re(String(e))}class Me extends w.PureComponent{dynamicAddCompKey(e=[]){return e&&e.length?e.map(Re).reduce(((e,t,i)=>{const[n="",a={}]=t;return""!==n&&0!==Object.keys(a).length&&e.push((0,o.jsx)(Ae.wd,Object.assign({dangerouslyExposeHtml:!0,id:n},{children:(0,o.jsx)(Ae.TV,{genericType:n,genericKey:n,schema:a},void 0)}),`${n}-${i}`)),e}),[]):null}render(){const{wrappedHead:e,metaParams:t={},jsonldList:i=[],children:n}=this.props,{title:a="",keywords:r="",description:s="",robotsContent:l="",canonicalHref:d="",alternateHref:c="",amphtmlHref:p="",applicableDevice:u="",hreflangList:g=[]}=t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e,{children:[(0,o.jsx)("title",{children:a},void 0),r&&(0,o.jsx)("meta",{name:"keywords",content:r},"keywords"),s&&(0,o.jsx)("meta",{name:"description",content:s},"description"),l&&(0,o.jsx)("meta",{name:"robots",content:l},"robots"),u&&(0,o.jsx)("meta",{name:"applicable-device",content:u},"applicable-device"),d&&(0,o.jsx)("link",{rel:"canonical",href:d},"canonical"),p&&(0,o.jsx)("link",{rel:"amphtml",href:p},"amphtml"),c&&(0,o.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:c},"alternate-media"),g.length?g.map((({hreflang:e,href:t})=>(0,o.jsx)("link",{rel:"alternate",hrefLang:e,href:t},e))):null,n]},void 0),this.dynamicAddCompKey(i)]},void 0)}}const De=Me;var Fe=i(47159);const Ne=function({appContext:e}){const{metaParams:t,jsonldList:i}=(0,U.mp)(Fe.q),{pathname:n}=(0,j.TH)();let a=n;try{a=encodeURI(decodeURI(n))}catch(e){}const r=(0,w.useMemo)((()=>{let i=[];const{robotsContent:o}=null!=t?t:{};if(o&&!o.includes("noindex")){const{$host:t}=null!=e?e:{},o=(0,Le.Hg)(a);i=[{hreflang:"x-default",href:o?`https://${t}`:`https://${t}${a}`}],Ee.LANGUAGE_LIST.forEach((({value:e})=>{const n=e.replace(/(^zh([_-]\w+)*)/g,"zh-Hant"),r=o?`https://${t}/${n}/`:`https://${t}${a}?lang=${n}`;i.push({hreflang:n,href:r})}))}return Object.assign(Object.assign({},t),{hreflangList:i})}),[e,t,a]);return(0,o.jsx)(De,{wrappedHead:C.ql,metaParams:r,jsonldList:i},void 0)};var Be=i(12115);const ze=function(e){const{appContext:t}=e,{location:i}=(0,j.k6)(),n=`https://${null==t?void 0:t.$host}${i.pathname}${i.search}`,a=Object.assign(Object.assign({},(0,U.mp)(Be.I).value),{"og:url":n});return(0,o.jsx)(C.ql,{children:Object.keys(a).map((e=>(0,o.jsx)("meta",{property:e,content:a[e]},e)))},void 0)};var $e=i(958);const Ue=(0,re.Z)("div",{target:"eyt76ed0"})({width:"100vw",top:se.Mz-1+"px",left:"0",marginTop:"1px",position:"fixed",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",zIndex:999,background:"#fff",display:"flex",justifyContent:"center",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,se.Cx)("bottom"))},"label:DivBannerContainer;"),We=(0,re.Z)("div",{target:"eyt76ed1"})([{width:se.XP,maxWidth:se.XP,paddingTop:"16px",paddingBottom:"16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,se.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),Ge=(0,re.Z)("div",{target:"eyt76ed2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginEnd:"24px"})],"label:DivLeftContainer;"),He=(0,re.Z)("div",{target:"eyt76ed3"})([{display:"flex",alignItems:"center"}],"label:DivRightContainer;"),qe="48px",Ze=(0,re.Z)("div",{target:"eyt76ed4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:"inline-block",width:qe,height:qe,flex:"0 0 48px",padding:"0"},(0,se.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),Ve=(0,re.Z)("img",{target:"eyt76ed5"})({width:qe,height:qe},"label:ImgIcon;"),Qe=(0,re.Z)("div",{target:"eyt76ed6"})([({theme:e})=>(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P2",color:"TextSecondary"}),{alignSelf:"center"}],"label:DivContentWrapper;"),Ye=(0,re.Z)("h4",{target:"eyt76ed8"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:H4Title;"),Ke=(0,re.Z)($e.Z,{target:"eyt76ed9"})({width:"24px",height:"24px",cursor:"pointer"},"label:StyledCloseIcon;"),Je=(0,re.Z)("div",{target:"eyt76ed10"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-of-type)":(0,se.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),Xe=(0,re.Z)("a",{target:"eyt76ed11"})((({theme:e})=>[(0,se.GI)({theme:e,color:"Primary",typography:"P2"}),{":link, :active, :hover, :visited":{color:e.colors.Primary}}]),{textDecoration:"none",whiteSpace:"nowrap",":hover":{textDecoration:"none"}},"label:AButtonLink;"),et=(0,w.memo)((function({title:e,content:t,icon:i,buttons:n,onShow:a}){const r=(0,w.useRef)(null);return(0,w.useEffect)((()=>{var e,t;null==a||a(null!==(t=null===(e=r.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,o.jsx)(Ue,Object.assign({ref:r},{children:(0,o.jsxs)(We,{children:[(0,o.jsxs)(Ge,{children:[(0,o.jsx)(Ze,{children:i&&(0,o.jsx)(Ve,{alt:"icon",src:i},void 0)},void 0),(0,o.jsxs)(Qe,{children:[e&&(0,o.jsx)(Ye,{},void 0),(0,o.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,o.jsx)(w.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,o.jsx)(He,{children:n.map((({text:e,link:t,onClick:i,isCloseStyle:n})=>n?(0,o.jsx)("div",Object.assign({onClick:i},{children:(0,o.jsx)(Ke,{},void 0)}),e):(0,o.jsx)(Je,{children:t?(0,o.jsx)(Xe,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,o.jsx)(Xe,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)})),tt="inline-block",it=(0,re.Z)("div",{target:"e1qek5np0"})((({theme:{colors:e}})=>({width:"100vw",top:0,left:0,position:"fixed",zIndex:999,background:e.ConstBGInverse2,display:"flex",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, .06)",":after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,se.Cx)("bottom"))})),"label:DivBannerContainer;"),ot=(0,re.Z)("div",{target:"e1qek5np1"})([{width:se.XP,maxWidth:se.XP,padding:"12px 12px 12px 16px",display:"flex",justifyContent:"space-between"},({theme:{direction:e}})=>(0,se.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})],"label:DivBannerWrapper;"),nt=(0,re.Z)("div",{target:"e1qek5np2"})([{display:"flex",alignItems:"center"},({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginEnd:"8px"})],"label:DivLeftContainer;"),at=(0,re.Z)("div",{target:"e1qek5np3"})([{display:"flex",alignItems:"flex-start"}],"label:DivRightContainer;"),rt="48px",st=(0,re.Z)("div",{target:"e1qek5np4"})((({theme:{direction:e}})=>({":not(:empty)":Object.assign({display:tt,width:rt,height:rt,flex:"0 0 48px",padding:"0"},(0,se.YJ)({direction:e,marginEnd:"16px"}))})),"label:DivImgWrapper;"),lt=(0,re.Z)("img",{target:"e1qek5np5"})({width:rt,height:rt},"label:ImgIcon;"),dt=(0,re.Z)("div",{target:"e1qek5np6"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",color:"ConstTextInverse"}),{display:tt,fontSize:"15px",lineHeight:"18px",alignSelf:"center",a:{display:tt,alignSelf:"center",fontSize:"15px",lineHeight:"18px",fontWeight:700,color:`${e.colors.ConstTextInverse} !important`}}]),"label:DivContentWrapper;"),ct=(0,re.Z)("h4",{target:"e1qek5np7"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",color:"ConstTextInverse"})]),"label:H4Title;"),pt=(0,re.Z)($e.Z,{target:"e1qek5np8"})({width:"24px",height:"24px",display:"flex",justifyContent:"center",alignItems:"center"},"label:StyledCloseIcon;"),ut=(0,re.Z)("div",{target:"e1qek5np9"})((({theme:{direction:e}})=>({margin:"9px 0","&:not(:last-child)":(0,se.YJ)({direction:e,marginEnd:"24px"})})),"label:DivButton;"),gt=(0,re.Z)("a",{target:"e1qek5np10"})((({theme:e})=>[(0,se.GI)({theme:e,color:"Primary",typography:"P2"})]),{textDecoration:"none",whiteSpace:"nowrap",textAlign:"center"},"label:AButtonLink;"),mt=(0,w.memo)((function({title:e,content:t,icon:i,buttons:n,onShow:a}){const r=(0,w.useRef)(null);return(0,w.useEffect)((()=>{var e,t;null==a||a(null!==(t=null===(e=r.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0)}),[]),(0,o.jsx)(it,Object.assign({ref:r},{children:(0,o.jsxs)(ot,{children:[(0,o.jsxs)(nt,{children:[(0,o.jsx)(st,{children:i&&(0,o.jsx)(lt,{alt:"icon",src:i},void 0)},void 0),(0,o.jsxs)(dt,{children:[e&&(0,o.jsx)(ct,{children:e},void 0),(0,o.jsx)("p",{children:Array.isArray(t)?t.map(((e,t)=>(0,o.jsx)(w.Fragment,{children:e},t))):t},void 0)]},void 0)]},void 0),(0,o.jsx)(at,{children:n.map((({text:e,link:t,onClick:i,isCloseStyle:n})=>n?(0,o.jsx)("div",Object.assign({onClick:i},{children:(0,o.jsx)(pt,{fill:"#fff"},void 0)}),e):(0,o.jsx)(ut,{children:t?(0,o.jsx)(gt,Object.assign({target:"_blank",onClick:i,rel:"noopener noreferer noreferrer",href:t},{children:e}),void 0):(0,o.jsx)(gt,Object.assign({onClick:i},{children:e}),void 0)},e)))},void 0)]},void 0)}),void 0)}));var ht=i(473),_t=i(48504);const vt=(0,re.Z)("div",{target:"es36pgp0"})({pointerEvents:"auto",position:"absolute",boxSizing:"border-box",left:"0",bottom:"0",width:"100%",background:"#fff",borderRadius:"12px 12px 0 0",padding:"16px 20px 20px"},"label:DivContainer;"),yt=(0,re.Z)("div",{target:"es36pgp1"})({textAlign:"center",position:"relative",":not(:empty)":{paddingBottom:"16px",marginBottom:"12px","::after":Object.assign({content:'""',background:"rgba(33, 33, 33, .08)"},(0,se.Cx)("bottom"))}},"label:DivTitleContainer;"),ft=(0,re.Z)("img",{target:"es36pgp2"})({display:"inline-block"},"label:ImgIcon;"),bt=(0,re.Z)("h4",{target:"es36pgp3"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"semiBold"})),"label:H4Title;"),xt=(0,re.Z)("p",{target:"es36pgp4"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{marginBottom:"32px"},"label:PContent;"),kt=(0,re.Z)("div",{target:"es36pgp5"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},"label:DivButtonWrapper;"),St=(0,re.Z)(_t.W,{target:"es36pgp6"})((({theme:{direction:e}})=>({"& + &":(0,se.YJ)({direction:e,marginStart:"24px"})})),"label:StyledButton;"),wt=(0,w.memo)((function({icon:e,title:t,content:i,buttons:n}){return(0,o.jsx)(ht.u,Object.assign({closeStyle:0,visible:!0},{children:(0,o.jsxs)(vt,{children:[(0,o.jsxs)(yt,{children:[e&&(0,o.jsx)(ft,{src:e},void 0),t&&(0,o.jsx)(bt,{children:t},void 0)]},void 0),(0,o.jsx)(xt,{children:i},void 0),(0,o.jsx)(kt,{children:n.map((({text:e,highlight:t,line:i,onClick:n})=>(0,o.jsx)(St,Object.assign({size:"medium",buttonTheme:t?"primary":i?"line":"default",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0)})),Ct=(0,re.Z)("div",{target:"e1uf1l9s0"})((({theme:e,theme:{colors:t}})=>[{position:"relative",width:"400px",background:t.BGTertiary,display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"32px",borderRadius:"8px",whiteSpace:"pre-line"},(0,se.GI)({theme:e,fontFamily:"Proxima"})]),"label:DivContainer;"),jt=(0,re.Z)(Ct,{target:"e1uf1l9s1"})({width:"84vw",maxWidth:"360px",maxHeight:"480px",overflow:"auto",paddingTop:"20px"},"label:DivContainerMobile;"),Tt=(0,re.Z)("img",{target:"e1uf1l9s2"})({height:"48px"},"label:ImgIcon;"),Ot=(0,re.Z)("h4",{target:"e1uf1l9s3"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P0",fontWeight:"bold"}),{textAlign:"center",padding:"0 32px",flex:"0 0 auto",order:0,wordBreak:"break-word"}]),"label:H4Title;"),It=(0,re.Z)("h2",{target:"e1uf1l9s4"})((({theme:e})=>[(0,se.GI)({theme:e,fontWeight:"bold"}),{textAlign:"center",padding:"0 20px",flex:"0 0 auto",order:0,wordBreak:"break-word",fontSize:"20px",lineHeight:"24px"}]),"label:H2Title;"),Pt=(0,re.Z)("p",{target:"e1uf1l9s5"})((({theme:e})=>({color:e.colors.TextSecondary,fontSize:"15px",lineHeight:"18px",padding:"0 32px",textAlign:"center",marginTop:"7px"})),"label:PContent;"),Et=(0,re.Z)(Pt,{target:"e1uf1l9s6"})({maxHeight:"300px",overflow:"auto",padding:"0 20px"},"label:PContentMobile;"),Lt=(0,re.Z)("div",{target:"e1uf1l9s7"})({display:"flex",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"24px 32px 32px"},"label:DivButtonWrapper;"),At=(0,re.Z)(Lt,{target:"e1uf1l9s8"})((({theme:{colors:e}})=>({borderTop:`.5px solid ${e.LineSecondary}`,padding:0,marginTop:"20px",boxSizing:"border-box"})),"label:DivButtonWrapperMobile;"),Rt=(0,re.Z)("div",{target:"e1uf1l9s9"})({display:"flex",width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-between",boxSizing:"border-box",padding:"22px 20px 6px"},"label:DivButtonWrapperVertical;"),Mt=(0,re.Z)(_t.W,{target:"e1uf1l9s10"})((({theme:e,theme:{direction:t}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",":not(:first-of-type)":(0,se.YJ)({direction:t,marginStart:"16px"})},(0,se.GI)({theme:e,typography:"P2"})]),"label:StyledButton;"),Dt=(0,re.Z)(_t.W,{target:"e1uf1l9s11"})((({theme:{colors:e}})=>[{flex:"1 1 0%",minWidth:"initial",width:"100%",padding:"0 16px",whiteSpace:"nowrap",overflow:"hidden",fontSize:"15px",lineHeight:"18px",":not(:first-child)":{marginTop:"2px",border:"none",color:e.TextTertiary}}]),"label:StyledButtonMobile;"),Ft=(0,re.Z)(Mt,{target:"e1uf1l9s12"})((({isBold:e=!1,theme:{colors:t}})=>({width:"50%",border:"none",borderRadius:0,borderRight:`.5px solid ${t.LineSecondary}`,margin:"0 !important",color:e?t.TextPrimary:t.TextTertiary})),"label:StyledButtonLine;"),Nt=(0,w.memo)((function({title:e,content:t,isMobile:i=!1,icon:n,buttons:a}){const r=i&&a.some((e=>e.highlight)),s=i?r?Rt:At:Lt,l=i?r?Dt:Ft:Mt;return i?(0,o.jsx)(ht.u,Object.assign({maskCloseable:!1,visible:!0},{children:(0,o.jsxs)(jt,{children:[n&&(0,o.jsx)(Tt,{src:n},void 0),e&&(0,o.jsx)(It,{children:e},void 0),t&&(0,o.jsx)(Et,{children:t},void 0),(0,o.jsx)(s,{children:a.map((({text:e,isBold:t,highlight:i,line:n,onClick:a})=>(0,o.jsx)(l,Object.assign({isBold:t,buttonTheme:i?"primary":n?"default":"line",onClick:a},{children:e}),e)))},void 0)]},void 0)}),void 0):(0,o.jsx)(ht.u,Object.assign({maskCloseable:!1,visible:!0},{children:(0,o.jsxs)(Ct,{children:[n&&(0,o.jsx)(Tt,{src:n},void 0),e&&(0,o.jsx)(Ot,{children:e},void 0),t&&(0,o.jsx)(Pt,{children:t},void 0),(0,o.jsx)(s,{children:a.map((({text:e,highlight:t,line:i,onClick:n})=>(0,o.jsx)(l,Object.assign({buttonTheme:t?"primary":i?"default":"line",onClick:n},{children:e}),e)))},void 0)]},void 0)}),void 0)})),Bt=function(e){var t;const{onHide:i}=e,[n,a]=(0,w.useState)(!0),r=(0,w.useCallback)((()=>{null==i||i(),a(!1)}),[i]),{$isMobile:s}=null!==(t=(0,oe.L)((()=>["$isMobile"]),[]))&&void 0!==t?t:{},l=function({onHide:e}){var t;const{popupConfig:i}=(0,U.mp)(fe),{$language:n="en",$isMobile:a=!1}=null!==(t=(0,oe.L)((()=>["$language","$isMobile"]),[]))&&void 0!==t?t:{},r=function({onHide:e,lang:t,$isMobile:i}){const{popupConfig:o}=(0,U.mp)(fe),n=(0,ee.fz)(ye),a=(0,ee.fz)(ae);return(0,w.useMemo)((()=>{if(!o)return[];const r=i?0:1,s=i?-1:0,{actions:l=[],first_button_highlight:d,business:c,policy_version:p,style:u}=o;return(d&&i?l:[...l].reverse()).map((({text:i,is_bold:o=!1,link:l,link_type:g,approve:m,extra:h,operation:_,dismiss:v,is_close_style:y,new_web_tab:f},b)=>{const x="string"==typeof l?be({link:l,lang:t}):void 0;return{text:i,isBold:o,highlight:Boolean(d)&&r===b,line:!d||s===b,link:x,isCloseStyle:y,onClick:xe({onHide:e,report:a,popupService:n,common:{business:c,policy_version:p,style:u},action:{text:i,approve:m,dismiss:v,extra:h,link:l,link_type:g,new_web_tab:f,operation:_}})}}))}),[i,t,e,o,n,a])}({onHide:e,lang:n,$isMobile:a}),s=function({lang:e,onHide:t}){const{popupConfig:i}=(0,U.mp)(fe),n=(0,ee.fz)(ye),a=(0,ee.fz)(ae);return(0,w.useMemo)((()=>{if(!i)return null;const{body_link_list:r,body:s}=i;if(!(null==r?void 0:r.length)||!/%s/.test(s))return s;const l=[],d=s;let c=0;const p=/%s/g;return r.forEach((({link:r="",name:s,dismiss:u,approve:g,operation:m,new_web_tab:h})=>{const _=p.exec(d);if(!_)return;const v=be({link:r,lang:e}),y=xe({onHide:t,popupService:n,report:a,common:ie()(i,["business","policy_version","style"]),action:{text:s,approve:g,dismiss:u,operation:m,new_web_tab:h,link:v}}),f=(0,o.jsx)(le,Object.assign({target:"_blank",rel:"noopener noreferer",href:v,onClick:y},{children:s}),void 0);l.push(d.slice(c,_.index)),l.push(f),c=Number(_.index)+_[0].length})),l.push(d.slice(c)),l}),[e,t,i,n,a])}({lang:n,onHide:e});if(!i)return null;const{title:l,icon_url:d,body:c,style:p}=i;return{title:l,icon:d,body:c,style:p,content:s,buttons:r}}({onHide:r}),d=(0,U.qj)(fe);if((0,w.useEffect)((()=>{d.getPopupConfig()}),[d]),!l||"none"===l.style||!n)return null;const{title:c,icon:p,content:u,style:g,buttons:m}=l;switch(g){case"pc_banner":return(0,o.jsx)(et,{title:c,content:u,icon:p,buttons:m,onShow:e.onShow},void 0);case"mobile_banner":return(0,o.jsx)(mt,{title:c,content:u,icon:p,buttons:m,onShow:e.onShow},void 0);case"pop":return(0,o.jsx)(Nt,{isMobile:s,title:c,content:u,icon:p,buttons:m},void 0);case"float":case"bottom":return(0,o.jsx)(wt,{title:c,content:u,icon:p,buttons:m},void 0);default:return null}};var zt=i(35129);const $t=function({path:e}){const t=(0,w.useCallback)((()=>(window.location.href=`/404?fromUrl=${encodeURIComponent(window.location.pathname)}`,null)),[]);return(0,o.jsx)(j.AW,{path:e,render:t},void 0)};var Ut=i(55643),Wt=i(80829);const Gt=(0,re.Z)("div",{target:"eaxh4gs0"})((({showGoogleOneTap:e,theme:{direction:t}})=>[{position:e?"fixed":"relative",right:e?"12px":"unset",top:e?"70px":"unset",borderRadius:"8px",overflow:"hidden"},(0,se.YJ)({direction:t,start:"unset",end:e?"24px":"unset"})]),"label:DivFrameContainer;");Gt.defaultProps=Object.assign(Object.assign({},Gt.defaultProps),{"data-e2e":"login-frame"});const Ht=(0,re.Z)("button",{target:"eaxh4gs1"})((({theme:{direction:e}})=>[se.Ph,{position:"absolute",top:"24px",width:"40px",height:"40px",cursor:"pointer",background:"rgba(22, 24, 35, .06)",borderRadius:"100%",transition:"all ease-in-out 200ms",":hover":{background:"rgba(22, 24, 35, .1)"},":active":{background:"rgba(22, 24, 35, .14)"}},(0,se.YJ)({direction:e,end:"24px"})]),"label:ButtonCloseWrapper;"),qt=(0,re.Z)($e.Z,{target:"eaxh4gs2"})({position:"absolute",top:"8px",right:"8px",width:"24px",height:"24px"},"label:StyledXMark;"),Zt=(0,re.Z)("iframe",{target:"eaxh4gs3"})((({showGoogleOneTap:e})=>({overflow:"hidden",display:"block",width:e?"391px":"472px",height:e?"0px":"calc(100vh - 64px)",maxHeight:e?"unset":"660px",background:"transparent",border:"none"})),"label:IframeLoginSite;"),Vt=function(){const[e,t]=(0,U.b7)(K.r),i=(0,w.useCallback)(((e="click_x")=>{t.closeModal({enter_method:e})}),[t]),n=(0,w.useCallback)((()=>{i("click_x")}),[i]),a=(0,w.useCallback)((e=>{let i="click_x";i=0===e||2===e?"click_x":"click_blank",t.closeModal({enter_method:i})}),[t]);return(0,w.useEffect)((()=>{function e(e){var o;if("object"==typeof e.data&&e.origin===location.origin)switch(e.data.event){case"deleteSuccess":i(),window.location.href=null!==(o=e.data.redirectUrl)&&void 0!==o?o:"/";break;case"loginCancel":i();break;case"hasLogin":i(),window.location.reload();break;case"loginSuccess":if(i("login_success"),e.data.message)return Ut.h.open({content:e.data.message,duration:3,widthType:"half",style:{zIndex:10011}}),void setTimeout((()=>{e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload()}),3e3);e.data.redirectUrl&&e.data.redirectUrl!==location.href?/^https?:\/\//.test(e.data.redirectUrl)&&(window.location.href=e.data.redirectUrl):window.location.reload();break;case"hideOuterClose":t.setCloseable(!1);break;case"googleOneTapFailed":i(),Ut.h.open({content:e.data.message,duration:3,widthType:"half"});break;case"googleOneTapChangeHeight":t.setIframeHeight(e.data.height);break;case"googleOneTapShowSignup":t.setShowGoogleOneTap(!1),t.setIframeHeight(0),t.setCloseable(!0)}}return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e,!1)}}),[t,i]),(0,o.jsx)(ht.u,Object.assign({visible:e.isOpen,zIndex:e.showGoogleOneTap?100:10010,maskCloseable:!1,keyboardCloseable:e.closeable,onClose:a,mask:!e.showGoogleOneTap,fixed:!e.showGoogleOneTap},{children:(0,o.jsxs)(Gt,Object.assign({showGoogleOneTap:e.showGoogleOneTap},{children:[e.closeable&&(0,o.jsx)(Ht,Object.assign({onClick:n},{children:(0,o.jsx)(qt,{},void 0)}),void 0),(0,o.jsx)(Zt,{src:e.url,showGoogleOneTap:e.showGoogleOneTap,style:Object.assign(Object.assign({},e.iframeStyle),{height:e.iframeHeight?e.iframeHeight+"px":""})},e.url)]}),void 0)}),void 0)};var Qt=i(78378),Yt=i(3565),Kt=i(44141),Jt=i(40804),Xt=i(29866),ei=i(60194),ti=i(30526);let ii=class{constructor(e){this.fetch=e}getNewestReply(){return this.fetch.get("/api/feedback/v1/newest_reply/",{query:{aid:1284,appkey:"tiktok-web"}})}};ii=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],ii);let oi=class extends de.D{constructor(e){super(),this.service=e,this.defaultState={hasNewFeedbackReply:!1,lastFeedbackReplyId:0}}setReply(e,t){e.lastFeedbackReplyId=t.feedback_id,e.hasNewFeedbackReply=t.has_reply}getNewestReply(e){return e.pipe((0,Xt.w)((()=>(0,Jt.F)(6e5).pipe((0,ei.O)(0)).pipe((0,Xt.w)((()=>this.service.getNewestReply().pipe((0,ti.b)((e=>{e.data||console.warn("There is no data in response.")})),(0,me.U)((e=>e.data?this.getActions().setReply(e.data):this.noop())),(0,_e.n)({}))))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],oi.prototype,"setReply",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],oi.prototype,"getNewestReply",null),oi=(0,g.__decorate)([(0,pe.Y)("Feedback"),(0,g.__metadata)("design:paramtypes",[ii])],oi);var ni=i(3192),ai=i(92007),ri=i(70221);const si=()=>{const e=(0,w.useRef)(""),t=[$.Ad.searchHome,$.Ad.searchUser,$.Ad.searchVideo],{pathname:i}=(0,j.TH)(),o=t.includes(i)&&!t.includes(e.current)||!t.includes(i),n=(0,w.useCallback)((t=>e.current=t),[]);return{needRefresh:o,setPathname:n,pathname:i}};var li=i(33259),di=i.n(li),ci=i(34525),pi=i(94473);function ui(){const{pathname:e}=(0,j.TH)();return(0,w.useMemo)((()=>(0,j.LX)(e,{path:pi.$J.liveGoLive,exact:!0})),[e])}var gi=i(52702),mi=i(37674),hi=i(61080),_i=i(2480),vi=i(35370);let yi=class{constructor(e){this.service=e,this.reportErrorLog=e=>{this.service.sendLog(null==e?void 0:e.message,"error")}}};yi=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[vi.n])],yi);let fi=class{constructor(e){this.service=e,this.defaultTag={where:"GoLive"},this.defaultMetrics={count:1},this.isGoLiveFirstFrameReported=!1,this.handlePlayerError=(e,t)=>{this.service.emitEvent("live_sdk_go_live_player_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{roomId:String(t),code:String(e.status),message:e.message}))},this.handleTraceSuccess=()=>{this.service.emitEvent("live_sdk_go_live_trace_success",this.defaultMetrics,this.defaultTag)},this.handleTraceError=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_trace_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomSuccess=()=>{this.service.emitEvent("live_sdk_openLive_success",this.defaultMetrics,this.defaultTag)},this.handleCreateRoomFirstFrameSuccess=()=>{this.isGoLiveFirstFrameReported||(this.service.emitEvent("live_sdk_openLive_preview_first_frame_success",this.defaultMetrics,this.defaultTag),this.isGoLiveFirstFrameReported=!0)},this.reportGoLiveError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleCreateRoomFail=({errorCode:e,errorMessage:t})=>{this.service.sendLog(null!=t?t:"","error"),this.service.emitEvent("live_sdk_openLive_error",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleCreateRoomWarning=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_openLive_warning",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleGoLiveStreamkeyError=()=>{this.service.emitEvent("live_sdk_openLive_streamkey_error",this.defaultMetrics,this.defaultTag)},this.handleGoLiveStreamurlError=()=>{this.service.emitEvent("live_sdk_openLive_serverUrl_error",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoSuccess=()=>{this.service.emitEvent("live_sdk_create_room_info_success",this.defaultMetrics,this.defaultTag)},this.handleGetCreateRoomInfoFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_craete_room_info_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveSuccess=()=>{this.service.emitEvent("live_sdk_end_live_success",this.defaultMetrics,this.defaultTag)},this.handleEndLiveFail=()=>{this.service.emitEvent("live_sdk_end_live_fail",this.defaultMetrics,this.defaultTag)},this.handleLoadingTooLong=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_go_live_page_loading_too_long",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataFail=({errorCode:e,errorMessage:t})=>{this.service.emitEvent("live_sdk_end_live_data_fail",this.defaultMetrics,Object.assign(Object.assign({},this.defaultTag),{errorCode:e,errorMessage:t}))},this.handleEndLiveDataSuccess=()=>{this.service.emitEvent("live_sdk_end_live_data_success",this.defaultMetrics,this.defaultTag)}}};function bi(e){return(0,gi.z)((t=>{var i,o;return 0!==t.status_code&&(null===(i=t.data)||void 0===i?void 0:i.prompts)?((!e||e&&t.status_code&&(null==e?void 0:e(t.status_code)))&&Ut.h.open({content:null===(o=t.data)||void 0===o?void 0:o.prompts,duration:3}),(0,mi.of)(Object.assign(Object.assign({},t),{error:t}))):(0,mi.of)(t)}))}fi=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[vi.n])],fi);let xi=class{constructor(e){this.fetch=e,this.getLivePermission=()=>this.fetch.get("/webcast/room/live_podcast/",{baseUrlType:4}).pipe(bi()),this.applyPermission=e=>this.fetch.post("/webcast/room/live_permission/apply/",{query:e,baseUrlType:4}).pipe(bi()),this.getApplyInfo=e=>this.fetch.get("/webcast/room/live_permission/apply_info/",{query:e,baseUrlType:4}).pipe(bi())}};xi=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],xi);let ki=class extends de.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.goLiveSlardar=i,this.defaultState={}}setPermissionData(e,t){e.permissionInfo={showComputerLiveEntrance:t.showComputerLiveEntrance,hasOBSLivePermission:t.hasOBSLivePermission,hasLiveApplyPermission:t.hasLiveApplyPermission}}getLivePermission(e){return e.pipe((0,gi.z)((()=>this.service.getLivePermission().pipe((0,gi.z)((({data:e,error:t})=>{var i,o,n,a;if(t)return(0,mi.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}));if(null==e?void 0:e.can_be_live_podcast){const t=null!==(o=null===(i=null==e?void 0:e.live_scenario)||void 0===i?void 0:i.enable_live_third_party)&&void 0!==o&&o,r=!t&&null!==(a=null===(n=null==e?void 0:e.live_permission_apply)||void 0===n?void 0:n.enable_third_party)&&void 0!==a&&a;return(0,mi.of)(this.getActions().setPermissionData({showComputerLiveEntrance:t||r,hasOBSLivePermission:t,hasLiveApplyPermission:r}))}return(0,mi.of)(this.getActions().setPermissionData({showComputerLiveEntrance:!1,hasOBSLivePermission:!1,hasLiveApplyPermission:!1}))})),(0,hi.K)((e=>(this.goLiveSlardar.handleTraceError({errorCode:"1001",errorMessage:e.message}),this.errorSlardar.reportErrorLog(e),_i.E)))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],ki.prototype,"setPermissionData",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ki.prototype,"getLivePermission",null),ki=(0,g.__decorate)([(0,pe.Y)("LivePermission"),(0,g.__metadata)("design:paramtypes",[xi,yi,fi])],ki);var Si=i(86319),wi=i(60083);const Ci=6048e5;let ji=class{constructor(){this.getGoLiveStreamKeyInfo=(e,t)=>{const i=(0,Y.le)("__tiktok_stream_key");if(i){const{streamKey:e,expiration:o,roomId:n}=JSON.parse(i);if(o-Date.now()>1e3&&t===n)return{streamKey:e,expiration:o-Date.now(),roomId:n}}return{streamKey:e,roomId:t,expiration:Ci}},this.setGoLiveStreamKeyInfo=(e,t)=>{const i={streamKey:e,roomId:t,expiration:Date.now()+Ci};return(0,Y.D$)("__tiktok_stream_key",JSON.stringify(i))},this.getGoLiveTopicId=e=>(0,Y.le)("goLive_topic_id"+e),this.setGoLiveTopicId=(e,t)=>(0,Y.D$)("goLive_topic_id"+t,e),this.getGoLiveGameTagId=e=>(0,Y.le)("goLive_game_tag_id"+e),this.setGoLiveGameTagId=(e,t)=>(0,Y.D$)("goLive_game_tag_id"+t,e),this.getGoLiveTopicShow=e=>!!e&&"0"===(0,Y.le)(`__tiktok_topic_info${e}`,"0"),this.setGoLiveTopicShow=e=>(0,Y.D$)(`__tiktok_topic_info${e}`,"1"),this.setGoLiveEndStreamSetting=e=>(0,Y.D$)("go_live_stream_setting",e?"1":"0"),this.getGoLiveEndStreamSetting=()=>"1"===(0,Y.le)("go_live_stream_setting","0"),this.setHideGoLiveMatureThemesRedDot=()=>(0,Y.D$)("hide_go_live_mature_themes_red_dot","1"),this.getHideGoLiveMatureThemesRedDot=()=>"1"===(0,Y.le)("hide_go_live_mature_themes_red_dot","0"),this.getLiveRoomPreviousPage=()=>{try{const{twoPrev:e}=JSON.parse((0,Y.St)(J.m8));return!(0,Y.St)(J.vN)&&e}catch(e){return!1}}}setHasAppliedPermission(e){return(0,Y.D$)(`go_live_permission_apply${e}`,"1")}getHasApplyPermissionBefore(e){return"1"===(0,Y.le)(`go_live_permission_apply${e}`,"0")}getHasCompleteSubscriptionGuide(){return"1"===(0,Y.le)("live_anchor_complete_subscription_guide","0")}setHasCompleteSubscriptionGuide(){return(0,Y.D$)("live_anchor_complete_subscription_guide","1")}getSubscriptionSubOnlyChat(){return"1"===(0,Y.le)("live_subscription_sub_only_chat","0")}setSubscriptionSubOnlyChat(e){return(0,Y.D$)("live_subscription_sub_only_chat",e?"1":"0")}get studioDownloadVisited(){return"1"===(0,Y.le)("studio_download_visited","0")}setStudioDownloadVisited(){return(0,Y.D$)("studio_download_visited","1")}getSharePlatform(e){const t=(0,Y.le)("webapp-share-platform");return t?JSON.parse(t)[e]:{}}setSharePlatform(e,t){return(0,Y.D$)("webapp-share-platform",JSON.stringify({[e]:t}))}sortSharePlatform(e,t){var i,o;const n=null!==(i=this.getSharePlatform(e))&&void 0!==i?i:{},a=null!==(o=n[t])&&void 0!==o?o:0;if(n[t]=a+1,a===Number.MAX_SAFE_INTEGER){const e=Object.keys(n).sort(((e,t)=>{var i,o;return(null!==(i=n[e])&&void 0!==i?i:0)-(null!==(o=n[t])&&void 0!==o?o:0)}));e.forEach(((e,t)=>{n[e]=t}))}this.setSharePlatform(e,n)}getLiveCreatorHubPopup(){return"0"===(0,Y.le)("webapp-live-creator-hub-popup","0")}setLiveCreatorHubPopup(e){return(0,Y.D$)("webapp-live-creator-hub-popup",e?"1":"0")}};ji=(0,g.__decorate)([(0,ne.G)()],ji);let Ti=class{constructor(){this.handlePlayerError=(e,t)=>{Q.WB.event("livesdk_go_live_player_error",{roomId:String(t),code:String(e.status),message:e.message})},this.getHashTagname=(e,t)=>{var i,o;return null!==(o=null===(i=e.find((e=>e.id===t)))||void 0===i?void 0:i.title)&&void 0!==o?o:"none"},this.handleScreenshotStatusClick=e=>{Q.WB.event("livesdk_cover_modify_screenshot_click",Object.assign(Object.assign({},e),{live_type:"third_party"}))},this.handleScreenshotButtonShow=e=>{Q.WB.event("livesdk_cover_modify_screenshot_show",Object.assign(Object.assign({},e),{live_type:"third_party"}))},this.handlePageShow=e=>{Q.WB.event("livesdk_pm_live_takepage_show",Object.assign(Object.assign({},e),{shoot_way:"",device:"web",live_type:"third_party"}))},this.handleCoverChange=()=>{Q.WB.event("livesdk_cover_modify_click")},this.OBSRevokeAnchorPop=e=>{Q.WB.event("livesdk_obs_revoke_anchor_pop",e)},this.OBSRevokeRemindShow=e=>{Q.WB.event("livesdk_obs_revoke_remind",e)},this.handleTopicClick=e=>{Q.WB.event("livesdk_web_topic_click",e)},this.handleAutoStopChange=e=>{Q.WB.event("livesdk_thirdparty_auto_stop",e)},this.handleServerUrlCopyClick=e=>{Q.WB.event("livesdk_server_url_copy",e)},this.handleStreamKeyCopyClick=e=>{Q.WB.event("livesdk_stream_key_copy",e)},this.handleStreamKeyChangePop=e=>{Q.WB.event("livesdk_stream_key_change_pop",e)},this.handleAppealClick=e=>{Q.WB.event("livesdk_anchor_appeal_click",e)},this.handleEndLiveClick=()=>{Q.WB.event("livesdk_end_live_click")},this.handleLiveOver=e=>{Q.WB.event("livesdk_live_over",e)},this.handleShareLinkCopy=()=>{Q.WB.event("livesdk_anchor_link_copy")},this.handleLiveStreamReport=e=>{Q.WB.event("livesdk_live_take",Object.assign({live_type:"third_party",send_gift_type:"open",event_type:"click",is_active_fans_show:0,show_active_user_ucnt:0,event_page:"live_take_button",game_label:e.game_label,game_label_id:e.game_label_id},e))},this.handleLiveCenterShow=e=>{Q.WB.event("livesdk_anchor_live_center_entrance_show",{anchor_id:e.anchor_id,enter_from:"profile_hover",app_name:"webapp"})},this.handleGoLiveShow=()=>{Q.WB.event("livesdk_pm_live_takepage_show")},this.handleLiveContentClick=e=>{Q.WB.event("livesdk_live_content_click",{anchor_id:e.anchor_id})},this.handleLiveContentConfirm=e=>{Q.WB.event("livesdk_live_content_result_show",{anchor_id:e.anchor_id,game_label:e.game_label,game_label_id:e.game_label_id})},this.handleLiveTopicClick=e=>{Q.WB.event("livesdk_live_topic_click",{anchor_id:e.anchor_id})},this.handleLiveMatureThemeIconClick=e=>{Q.WB.event("livesdk_mature_theme_icon_click",{action_type:e.action_type,enter_from:"live",anchor_id:e.anchor_id,source:"web"})},this.handleLiveMatureThemePopup=e=>{Q.WB.event("livesdk_mature_theme_popup",{enter_from:"live",anchor_id:e.anchor_id,source:"web"})},this.handleLiveMatureThemePopupClick=e=>{Q.WB.event("livesdk_mature_theme_popup_click",{action_type:e.action_type,enter_from:"live",anchor_id:e.anchor_id,source:"web"})}}};Ti=(0,g.__decorate)([(0,ne.G)()],Ti);const Oi=Object.values(pi.$J);function Ii(e){return[1,2,3].includes(e)}function Pi(e){return Oi.some((t=>D()(t).test(e.replace(/\?(.*)/,""))))}var Ei=i(53899),Li=i(80002);const Ai="ls_golive_livecontent_othergame",Ri="ls_golive_livecontent_other";var Mi=i(65723);let Di=class{constructor(e){this.fetch=e,this.getRoomInfo=e=>this.fetch.get("/webcast/room/info/",{query:e,baseUrlType:4}),this.getTopicTagsAndGameTags=()=>this.fetch.get("/webcast/room/hashtag/list/",{baseUrlType:4}),this.sendLiveChat=e=>this.fetch.post("/webcast/room/chat/",{query:e,baseUrlType:4,headers:{"Content-Type":Mi.zv.FORM_ENCODE}}).pipe(bi()),this.sendLiveEmoteChat=e=>this.fetch.post("/webcast/room/emote_chat/",{query:e,baseUrlType:4,headers:{"Content-Type":Mi.zv.FORM_ENCODE}}).pipe(bi())}};Di=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Di);let Fi=class extends de.D{constructor(e,t,i){super(),this.service=e,this.errorSlardar=t,this.t=i,this.defaultState={roomTopics:[],roomGameTags:[],roomGameTopic:null,roomInfo:null,hotLiveRoomInfo:null,loadingState:{roomInfo:0,roomTopics:0}}}setRoomInfo(e,t){e.roomInfo=t}setHotLiveRoomInfo(e,t){e.hotLiveRoomInfo=t}setRoomTopicsAndGameTags(e,t){var i,o,n,a,r,s,l;e.roomTopics=null!==(n=null===(o=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.hashtag)||void 0===o?void 0:o.map((e=>Object.assign({id:0,title:"",image:{},namespace:0},e))))&&void 0!==n?n:[];const d={id:"0",show_name:(c=this.t)(Ri),short_name:c(Ri),full_name:c(Ri),game_category:[{game_type:0,title:""}]};var c;const p=function(e){return{id:"-1",show_name:e(Ai),short_name:e(Ai),full_name:e(Ai),game_category:[{game_type:3,title:""},{game_type:2,title:""},{game_type:1,title:""}]}}(this.t);e.roomGameTags=(null!==(r=null===(a=null==t?void 0:t.data)||void 0===a?void 0:a.game_tag_list)&&void 0!==r?r:[]).concat([d,p]).map((e=>Object.assign(Object.assign({},e),{id:`${e.id}`}))),e.roomGameTopic=null!==(l=null===(s=null==t?void 0:t.data)||void 0===s?void 0:s.game_hashtag)&&void 0!==l?l:null}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}getRoomInfo(e){return e.pipe((0,Xt.w)((e=>this.service.getRoomInfo(e).pipe((0,ti.b)((({status_code:e})=>{(0,wi.k)(e,[0])})),(0,gi.z)((({status_code:e,data:t})=>0!==e?_i.E:(0,mi.of)(this.getActions().setRoomInfo(t)))),(0,ei.O)(this.getActions().setLoadingState({roomInfo:1})),(0,Si.l)(this.getActions().setLoadingState({roomInfo:2})),(0,hi.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,mi.of)(this.getActions().setLoadingState({roomInfo:3})))))))))}getRoomTopics(e){return e.pipe((0,Xt.w)((()=>this.service.getTopicTagsAndGameTags().pipe((0,gi.z)((e=>(0,mi.of)(this.getActions().setRoomTopicsAndGameTags(e)))),(0,ei.O)(this.getActions().setLoadingState({roomTopics:1})),(0,Si.l)(this.getActions().setLoadingState({roomTopics:2})),(0,hi.K)((e=>(this.errorSlardar.reportErrorLog(e),(0,mi.of)(this.getActions().setLoadingState({roomTopics:3})))))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Fi.prototype,"setRoomInfo",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Fi.prototype,"setHotLiveRoomInfo",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Fi.prototype,"setRoomTopicsAndGameTags",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Fi.prototype,"setLoadingState",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Fi.prototype,"getRoomInfo",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Fi.prototype,"getRoomTopics",null),Fi=(0,g.__decorate)([(0,pe.Y)("Room"),(0,g.__param)(2,(0,Ei.t)(Li.s)),(0,g.__metadata)("design:paramtypes",[Di,yi,Function])],Fi);let Ni=class{constructor(){this.setDefinitionSelectKey=e=>(0,Y.D$)("definition_selected_key",e),this.getDefinitionSelectKey=()=>(0,Y.le)("definition_selected_key",""),this.removeDefinitionSelectKey=()=>(0,Y.e8)("definition_selected_key"),this.setHideDefinitionRedDot=()=>(0,Y.D$)("hide_definition_red_dot","1"),this.getHideDefinitionRedDot=()=>"1"===(0,Y.le)("hide_definition_red_dot","0"),this.setVolume=e=>(0,Y.D$)("live_player_volume",e.toString()),this.getVolume=()=>{let e=+(0,Y.le)("live_player_volume","60");return(e<0||e>1e3||isNaN(e))&&(e=60),e},this.setDailyFrequencyControlCount=(e,t)=>{const i=new Date,o=`${i.getFullYear()}${i.getMonth()}${i.getDate()}`;return(0,Y.D$)(e,`${o}-${t.toString()}`)},this.getDailyFrequencyControlCount=e=>{const t=new Date,i=`${t.getFullYear()}${t.getMonth()}${t.getDate()}`,o=(0,Y.le)(e);if(!o)return 0;const[n,a]=o.split("-");return n===i?Number(a):0}}};Ni=(0,g.__decorate)([(0,ne.G)()],Ni);let Bi=class{constructor(e){this.service=e,this.handleStreamNotSupported=({roomId:e,streamData:t})=>{this.service.emitEvent("livesdk_stream_not_support",{count:1},{roomId:e,streamData:t})}}};Bi=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[vi.n])],Bi);let zi=class{constructor(){this.handleStreamNotSupported=e=>{Q.WB.event("livesdk_stream_not_supported",e)}}};zi=(0,g.__decorate)([(0,ne.G)()],zi);var $i,Ui=i(98978),Wi=i.n(Ui);!function(e){e.H264="h264",e.Bytevc1="bytevc1"}($i||($i={}));const Gi=Object.freeze(["auto","origin","uhd_60","uhd","hd_60","hd","sd","ld"]);function Hi(e){return $i.Bytevc1===e.VCodec}function qi(e,t){const i=function(e){return e.map((e=>{var t;return{key:e.sdkKey,label:null!==(t=e.definition)&&void 0!==t?t:""}}))}(e).map((e=>e.key)),o=function(e,t){return e.find((e=>e.sdkKey===t))}(e,t&&i.includes(t)?t:i[0]);return o||(console.error(`[stream] getMainStream: no stream found by ${t}`),null)}let Zi=class extends de.D{constructor(e,t,i,o){super(),this.livePlayerStorage=e,this.liveStreamSlardar=t,this.liveStreamReport=i,this.appContext=o,this.defaultState={streamItems:[],isSupportDefinition:!1,currentDefinitionKey:"auto",abrDefinitionLabel:"",abrDefinitionKey:void 0,abrBitrate:0,networkStatus:"normal",isFatal:!1}}setNetworkStatus(e,t){e.networkStatus=t}setStreamInfo(e,t){e.streamItems=t}clearStreamInfo(e){e.streamItems=[],e.abrDefinitionLabel="",e.currentDefinitionKey="auto",e.isSupportDefinition=!1,e.isFatal=!1}setActiveStream(e,t){const{key:i,url:o}=t;e.streamItems=e.streamItems.map((e=>Object.assign(Object.assign({},e),{isActive:i===e.sdkKey,activeUrl:o})))}setSupportDefinition(e,t){e.isSupportDefinition=t}setCurrentDefinitionKey(e,t){e.currentDefinitionKey=t}setAbrDefinitionLabel(e,t){e.abrDefinitionLabel=t}setAbrDefinitionKey(e,t){e.abrDefinitionKey=t}setAbrBitrate(e,t){e.abrBitrate=t}setIsFatal(e,t){e.isFatal=t}updateAbrDefition(e){return e.pipe((0,gi.z)((e=>{var t,i;return(0,mi.of)(this.getActions().setAbrDefinitionLabel(null!==(t=null==e?void 0:e.definition)&&void 0!==t?t:""),this.getActions().setAbrDefinitionKey(null==e?void 0:e.sdkKey),this.getActions().setAbrBitrate(null!==(i=null==e?void 0:e.bitrate)&&void 0!==i?i:0))})))}updateDefinition(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>{var i,o;if("auto"===e)return(0,mi.of)(this.getActions().setCurrentDefinitionKey(e));{const n=qi(t.streamItems,e),a={key:null!==(i=null==n?void 0:n.sdkKey)&&void 0!==i?i:"",url:null!==(o=null==n?void 0:n.url.mainFLV)&&void 0!==o?o:""};return this.livePlayerStorage.setDefinitionSelectKey(a.key),(0,mi.of)(this.getActions().setCurrentDefinitionKey(e),this.getActions().setActiveStream(a),this.getActions().updateAbrDefition(n))}})))}updateDefinitionByBitrate(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>{const i=(o=t.streamItems,n=e,o.find((e=>e.bitrate===n)));var o,n;return(null==i?void 0:i.sdkKey)?(0,mi.of)(this.getActions().updateAbrDefition(i)):_i.E})))}updateStreamInfoByRoomInfo(e){return e.pipe((0,ge.M)(this.appContext.state$),(0,gi.z)((([e,{appContext:t}])=>{var i,o,n,a,r,s,l,d,c,p,u,g,m,h,_,v;const{streamData:y,notSupportData:f}=function(e){var t,i,o,n;try{const a={common:{},data:{}},r={},s=e?JSON.parse(null!==(n=null===(o=null===(i=null===(t=e.stream_url)||void 0===t?void 0:t.live_core_sdk_data)||void 0===i?void 0:i.pull_data)||void 0===o?void 0:o.stream_data)&&void 0!==n?n:""):{};if(a.common=s.common,s.data)for(const e in s.data)if(s.data[e].main){const t=JSON.parse(s.data[e].main.sdk_params);Hi(t)?(r[e]={},r[e].main=s.data[e].main):(a.data[e]={},a.data[e].main=s.data[e].main,a.data[e].main.sdk_params=t),s.data[e].backup&&(Hi(JSON.parse(s.data[e].backup.sdk_params))?r[e].backup=s.data[e].backup:(a.data[e].backup=s.data[e].backup,a.data[e].backup.sdk_params=t))}return{streamData:a,notSupportData:r}}catch(e){return{streamData:{},notSupportData:{}}}}(e),b=function(e){return Wi()(e,(e=>Gi.indexOf(e.sdkKey)))}((w=y,C=null!==(r=null===(a=null===(n=null===(o=null===(i=e.stream_url)||void 0===i?void 0:i.live_core_sdk_data)||void 0===o?void 0:o.pull_data)||void 0===n?void 0:n.options)||void 0===a?void 0:a.qualities)&&void 0!==r?r:[],Object.keys(w.data).map((e=>{var t,i,o;const n=w.data[e],a=null===(t=C.find((t=>t.sdk_key===e)))||void 0===t?void 0:t.name;let r=n.main.sdk_params.vbitrate;return"origin"===e&&(r=2e6),{sdkKey:e,definition:a,bitrate:r,url:{mainFLV:n.main.flv,mainHLS:n.main.hls,backupFLV:null===(i=n.backup)||void 0===i?void 0:i.flv,backupHLS:null===(o=n.backup)||void 0===o?void 0:o.hls},activeUrl:"",isActive:!1,pullFailedCount:0}})))),x="v2"===(0,X.x)(null==t?void 0:t.$abTestVersion,"live_player_enable_1080p"),k=null!==(s=(0,X.x)(null==t?void 0:t.$abTestVersion,"live_auto_definition_tips"))&&void 0!==s?s:"v1",S=x?b:b.filter((e=>!e.sdkKey.includes("_60")));var w,C;if(Object.keys(f).length){const t=JSON.stringify(f);this.liveStreamReport.handleStreamNotSupported({roomId:null!==(l=e.id_str)&&void 0!==l?l:"",streamData:t}),this.liveStreamSlardar.handleStreamNotSupported({roomId:null!==(d=e.id_str)&&void 0!==d?d:"",streamData:t})}const j=!!(null==e?void 0:e.live_room_mode)&&[1,4,6].includes(e.live_room_mode);let T=null!==(h=null===(m=null===(g=null===(u=null===(p=null===(c=e.stream_url)||void 0===c?void 0:c.live_core_sdk_data)||void 0===p?void 0:p.pull_data)||void 0===u?void 0:u.options)||void 0===g?void 0:g.default_quality)||void 0===m?void 0:m.sdk_key)&&void 0!==h?h:S[0].sdkKey,O="auto";"v1"===k&&j&&(T=this.livePlayerStorage.getDefinitionSelectKey()||T,O=T);const I=qi(S,T);return(0,mi.of)(this.getActions().setStreamInfo(S),this.getActions().setSupportDefinition(j),this.getActions().setCurrentDefinitionKey(O),this.getActions().updateAbrDefition(I),this.getActions().setActiveStream({key:null!==(_=null==I?void 0:I.sdkKey)&&void 0!==_?_:"",url:null!==(v=null==I?void 0:I.url.mainFLV)&&void 0!==v?v:""}),this.getActions().setIsFatal(!1))})))}changeAvailableStream(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>{const i=t.streamItems.map((e=>e.isActive?Object.assign(Object.assign({},e),{pullFailedCount:e.pullFailedCount+1}):e)),o="auto"===t.currentDefinitionKey,n=[],a=function(e){let t=0;const i=function(e){return e.reduce(((e,t)=>(e.push(t.url.mainFLV),e.push(t.url.mainHLS),t.url.backupFLV&&e.push(t.url.backupFLV),t.url.backupHLS&&e.push(t.url.backupHLS),e)),[])}(e).length;let o;const n=4*(2*e.length<i?2:1);for(;!o&&t<n;)o=e.find((e=>e.pullFailedCount===t)),t++;if(o){const t=function(e,t){var i,o;let n=e.url.mainFLV;switch(t){case 1:n=null!==(i=e.url.backupFLV)&&void 0!==i?i:e.url.mainHLS;break;case 2:n=e.url.backupFLV?e.url.mainHLS:e.url.mainFLV;break;case 3:n=null!==(o=e.url.backupHLS)&&void 0!==o?o:e.url.mainHLS;break;default:n=e.url.mainFLV}return n}(o,o.pullFailedCount%4);return function(e,t,i){return e.map((e=>Object.assign(Object.assign({},e),{isActive:t===e.sdkKey,activeUrl:i})))}(e,o.sdkKey,t)}return e.map((e=>Object.assign(Object.assign({},e),{isActive:!1})))}(i),r=a.find((e=>e.isActive));return r?o?n.push(this.getActions().updateAbrDefition(r)):n.push(this.getActions().setCurrentDefinitionKey(r.sdkKey)):t.streamItems.length>0&&n.push(this.getActions().setIsFatal(!0)),(0,mi.of)(this.getActions().setStreamInfo(a),...n)})))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setNetworkStatus",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Array]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setStreamInfo",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"clearStreamInfo",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setActiveStream",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setSupportDefinition",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setCurrentDefinitionKey",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setAbrDefinitionLabel",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setAbrDefinitionKey",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setAbrBitrate",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"setIsFatal",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"updateAbrDefition",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"updateDefinition",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"updateDefinitionByBitrate",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"updateStreamInfoByRoomInfo",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Zi.prototype,"changeAvailableStream",null),Zi=(0,g.__decorate)([(0,pe.Y)("Stream"),(0,g.__metadata)("design:paramtypes",[Ni,Bi,zi,G.G])],Zi);let Vi=class{constructor(e){this.fetch=e,this.getCreateInfo=()=>this.fetch.get("/webcast/room/create_info/",{query:{aid:J.CO},baseUrlType:5}),this.updateScreenshotStatus=e=>this.fetch.post("/webcast/room/screenshot_cover/update/",{query:e,baseUrlType:5,headers:{"Content-Type":Mi.zv.FORM_ENCODE}}),this.createRoom=e=>this.fetch.post("/webcast/room/create/",{query:e,baseUrlType:5,headers:{"Content-Type":Mi.zv.FORM_ENCODE}}).pipe(bi((e=>[4003035,20063].includes(e)))),this.endLive=()=>this.fetch.post("/webcast/room/finish_abnormal/",{baseUrlType:5}),this.setTopicTag=e=>this.fetch.post("/webcast/room/hashtag/set/",{query:e,baseUrlType:4,headers:{"Content-Type":Mi.zv.FORM_ENCODE}}),this.uploadImage=e=>{const t=new FormData;return t.append("image",e),this.fetch.post("/webcast/room/upload/image/",{body:t,omitContentType:!0,baseUrlType:5})},this.getEndLiveInfo=e=>this.fetch.get("/webcast/data/data_center/room_stats/",{query:e,baseUrlType:5}),this.getLastBanRecord=e=>this.fetch.get("/webcast/review/get_latest_ban_record/",{query:Object.assign(Object.assign({},e),{ban_type:2}),baseUrlType:5})}};Vi=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Vi);let Qi=class extends de.D{constructor(e,t,i,o,n,a,r){super(),this.service=e,this.roomModule=t,this.roomService=i,this.streamModule=o,this.slardar=n,this.storage=a,this.teaReport=r,this.defaultState={liveStatus:0,roomCreateInfo:null,showSuicidePrevention:!1,showAppealModal:!1,roomStats:null,isTempPermission:!1,streamKey:"",streamKeyExpiration:Ci,loadingState:{createRoomInfo:0,roomCreateInfo:0,OBSAccessRecallInfo:0}}}setLiveStatus(e,t){e.liveStatus=t}setIsTempPermission(e,t){e.isTempPermission=t}setRoomCreateInfo(e,t){e.roomCreateInfo=t}setRoomStatsData(e,t){e.roomStats=t}setLoadingState(e,t){e.loadingState=Object.assign(Object.assign({},e.loadingState),t)}setSuicidePrevention(e,t){e.showSuicidePrevention=t}setStreamKey(e,t){e.streamKey=t.streamKey,e.streamKeyExpiration=t.expiration}setAppealVisible(e,t){e.showAppealModal=t}getCreateRoomInfo(e){return e.pipe((0,Xt.w)((e=>{const{shouldGetRoomInfo:t}=e;return this.service.getCreateInfo().pipe((0,ti.b)((({status_code:e})=>{(0,wi.k)(e,[0])})),(0,gi.z)((({data:e,status_code:i})=>{if(0!==i)return this.slardar.handleGetCreateRoomInfoFail({errorCode:i.toString(),errorMessage:""}),this.slardar.handleTraceError({errorCode:"1002",errorMessage:`status_code: ${i}`}),_i.E;const{last_room_id_str:o,live_status:n,ban_status:a}=e,r=!(null==a?void 0:a.is_ban),s=[2,1,3].includes(n);return r&&s&&t?this.roomService.getRoomInfo({is_anchor:!0,room_id:o}).pipe((0,gi.z)((({data:t})=>(this.slardar.handleGetCreateRoomInfoSuccess(),(0,mi.of)(this.getActions().setRoomCreateInfo(e),...this.setRoomInfo(t),this.getActions().setLiveStatus(n)))))):(0,mi.of)(this.getActions().setRoomCreateInfo(e),this.getActions().setLiveStatus(n))})),(0,ei.O)(this.getActions().setLoadingState({roomCreateInfo:1})),(0,Si.l)(this.getActions().setLoadingState({roomCreateInfo:2})),(0,hi.K)((e=>(this.slardar.reportGoLiveError(e),this.slardar.handleTraceError({errorCode:"1002",errorMessage:e.message}),this.slardar.handleGetCreateRoomInfoFail({errorCode:"-1",errorMessage:e.message}),(0,mi.of)(this.getActions().setLoadingState({roomCreateInfo:3}))))))})))}createRoomInfo(e){return e.pipe((0,ge.M)(this.roomModule.state$),(0,gi.z)((([e,t])=>this.service.createRoom(e).pipe((0,gi.z)((({data:i,status_code:o})=>{var n,a;if(o&&0!==o)switch(o){case 2403:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,mi.of)(this.getActions().setSuicidePrevention(!0),this.getActions().setLoadingState({createRoomInfo:3}));case 10018:case 4003035:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,mi.of)(this.getActions().setLiveStatus(-1),this.getActions().setLoadingState({createRoomInfo:3}));case 50004:case 20063:case 30009:return this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,mi.of)(this.getActions().setLoadingState({createRoomInfo:3}));case 4003105:return i.prompts&&Ut.h.open({content:i.prompts,duration:3}),this.slardar.handleCreateRoomWarning({errorCode:o.toString(),errorMessage:""}),(0,mi.of)(this.getActions().setLoadingState({createRoomInfo:3}));default:throw new Error(`status_code: ${o}`)}this.slardar.handleCreateRoomSuccess(),this.slardar.handleTraceSuccess();const r=t.roomGameTags.find((t=>t.id===e.game_tag_id));return this.teaReport.handleLiveStreamReport({anchor_id:null===(n=i.owner)||void 0===n?void 0:n.id_str,room_id:i.id_str,live_type:(null==i?void 0:i.live_type_third_party)?"third_party":"video_live",game_label:null==r?void 0:r.show_name,game_label_id:null==r?void 0:r.id,choose_hashtag_id:e.hashtag_id,choose_hashtag_name:null===(a=t.roomTopics.find((t=>t.id===e.hashtag_id)))||void 0===a?void 0:a.title,cover_type:1===e.screenshot_cover_status?"screen_shot":"user_upload"}),(0,mi.of)(...this.setRoomInfo(i),this.getActions().setLiveStatus(1),this.getActions().setLoadingState({createRoomInfo:2}))})),(0,ei.O)(this.getActions().setLoadingState({createRoomInfo:1})),(0,hi.K)((e=>(this.slardar.handleTraceError({errorCode:"1003",errorMessage:e.message}),this.slardar.handleCreateRoomFail({errorCode:"-1",errorMessage:e.message}),(0,mi.of)(this.getActions().setLoadingState({createRoomInfo:3})))))))))}setRoomInfo(e){const t=[],[,i]=function(e){if(e){const t=e.lastIndexOf("/");return[e.substr(0,t),e.substr(t+1)]}return[]}(function(e){var t,i;const o=null==e?void 0:e.stream_url,n=null===(t=null==o?void 0:o.push_urls)||void 0===t?void 0:t[0];return null!==(i=null!=n?n:null==o?void 0:o.rtmp_push_url)&&void 0!==i?i:""}(e));if(i&&e.id_str){let o=i;const{streamKey:n,expiration:a}=this.storage.getGoLiveStreamKeyInfo(o,e.id_str);o!==n?o=n:this.storage.setGoLiveStreamKeyInfo(o,e.id_str),t.push(this.getActions().setStreamKey({streamKey:o,expiration:a}))}return t.push(this.roomModule.getActions().setRoomInfo(e)),t.push(this.streamModule.getActions().updateStreamInfoByRoomInfo(e)),t}endLive(e){return e.pipe((0,gi.z)((()=>this.service.endLive().pipe((0,gi.z)((()=>(this.slardar.handleEndLiveSuccess(),(0,mi.of)(this.getActions().setLiveStatus(4),this.streamModule.getActions().setStreamInfo([]))))),(0,hi.K)((e=>(this.slardar.handleEndLiveFail(),this.slardar.reportGoLiveError(e),_i.E)))))))}setTopicTag(e){return e.pipe((0,Xt.w)((e=>this.service.setTopicTag(e).pipe((0,me.U)((()=>this.noop())),(0,hi.K)((e=>(this.slardar.reportGoLiveError(e),_i.E)))))))}getRoomStatsData(e){return e.pipe((0,gi.z)((e=>this.service.getEndLiveInfo({room_id:e}).pipe((0,ti.b)((({status_code:e})=>{(0,wi.k)(e,[0])})),(0,gi.z)((({data:e})=>(0,mi.of)(this.getActions().setRoomStatsData(e.room_stats)))),(0,hi.K)((e=>(this.slardar.reportGoLiveError(e),_i.E)))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setLiveStatus",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setIsTempPermission",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setRoomCreateInfo",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setRoomStatsData",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setLoadingState",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setSuicidePrevention",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setStreamKey",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setAppealVisible",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"getCreateRoomInfo",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"createRoomInfo",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"endLive",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"setTopicTag",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Qi.prototype,"getRoomStatsData",null),Qi=(0,g.__decorate)([(0,pe.Y)("GoLive"),(0,g.__metadata)("design:paramtypes",[Vi,Fi,Di,Zi,fi,ji,Ti])],Qi);var Yi=i(89793),Ki=i.n(Yi),Ji=i(90938),Xi=i(43942),eo=i(11166),to=i(90883);let io=class{constructor(){this.handleAccountModalShow=e=>{Q.WB.event("enter_following_tab",e)}}};io=(0,g.__decorate)([(0,ne.G)()],io);var oo=i(18643),no=i(24448),ao=i(99350),ro=i(48689),so=i(34011),lo=i(65768),co=i(39917),po=i(99971);const uo=(0,re.Z)("div",{target:"e797se20"})((({theme:e})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",":hover":{textDecoration:"none"}},(0,se.VZ)({theme:e})]),"label:DivUserLinkContainer;"),go=(0,re.Z)(po.k,{target:"e797se22"})((({isSmall:e=!1})=>[({theme:{direction:t}})=>[(0,se.YJ)({direction:t,marginEnd:e?"6px":"12px"}),(0,se.f1)({max:1071,style:(0,se.YJ)({direction:t,marginStart:"2px",marginEnd:"0"})})],{flex:"0 0 48px"}]),"label:StyledUserAvatar;"),mo=(0,re.Z)(so.D,{target:"e797se24"})([{flexGrow:1,height:"32px",":hover":{textDecoration:"none"}},(0,se.f1)({max:1071,style:{display:"none"}})],"label:StyledUserContentLink;"),ho=(se.wj,(0,re.Z)("div",{target:"e797se26"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:DivUserTitleWrapper;")),_o=(0,re.Z)("h4",{target:"e797se27"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P2",color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia"}),{marginTop:"-2px",maxWidth:"260px"}]),se.wj,"label:H4UserTitle;"),vo=(0,re.Z)("p",{target:"e797se29"})((({theme:e})=>[(0,se.GI)({theme:e,fontWeight:"normal",typography:"P4",fontFamily:"Proxima",color:"TextSecondary"}),{lineHeight:"15px",maxWidth:"260px"}]),se.wj,"label:PUserDesc;"),yo=(0,re.Z)("div",{target:"e797se213"})((({theme:{direction:e}})=>[{padding:"8px",display:"flex",flexDirection:"row",alignItems:"center",height:"48px"},(0,se.f1)({max:1071,style:[{justifyContent:"center",width:"48px",height:"48px",marginBottom:"0",padding:"0 8px",borderRadius:"4px"},(0,se.YJ)({direction:e,marginStart:"2px"})]})]),"label:DivUserSkeletonContainerV2;"),fo=(0,re.Z)("div",{target:"e797se214"})((({theme:{direction:e}})=>[{display:"flex",flexDirection:"column",justifyContent:"space-around",height:"48px"},(0,se.YJ)({direction:e,marginStart:"12px"}),(0,se.f1)({max:1071,style:{display:"none"}})]),"label:DivSkeletonTitleGroup;"),bo=(0,w.memo)((0,w.forwardRef)((function(e,t){const{uniqueId:i,e2ePrefix:n="",style:a,enterMethod:r="click_panel"}=e,s=(0,U.mp)(no.z,{selector:e=>{const t=e.users[i];if(!t)return null;const{verified:o,avatarThumb:n,secUid:a,nickname:r,roomId:s,id:l,relation:d}=t;return{avatarThumb:n,secUid:a,verified:o,nickname:r,roomId:s,id:l,uniqueId:i,relation:d}},dependencies:[i]}),{secUid:l,verified:d,nickname:c,relation:p}=(0,H.m7)(s),u=(0,ao.zW)(s),{isShowLive:g}=u,m=g?ro.G:so.D,h=(0,w.useRef)(null);(0,w.useImperativeHandle)(t,(()=>({get offsetTop(){var e,t;return null!==(t=null===(e=h.current)||void 0===e?void 0:e.offsetTop)&&void 0!==t?t:0},get offsetLeft(){var e,t;return null!==(t=null===(e=h.current)||void 0===e?void 0:e.offsetLeft)&&void 0!==t?t:0}})),[]),(0,ao.TB)({isShowLive:g,autoReport:!0,once:!0,enterMethod:"suggested_others_photo",reportTrigger:g,reportValidator:()=>void 0!==p,user:s});const _=(0,ao.CN)({user:s,enterMethod:r}),{isInVideoFeedRedesign:v}=(0,lo.y7)(),{isDetailPageCoverQuantityTestGroup:y}=(0,lo.t1)(),{isInNewVideoDetail:f}=(0,lo.xy)(),b=v||y||f,x=(0,w.useMemo)((()=>b?{maxWidth:"145px"}:{}),[b]),k=(0,ee.fz)(to._),S=(0,w.useCallback)((()=>{k.handleEnterPage("enter_personal_detail",{to_user_id:null==s?void 0:s.id,enter_method:r}),k.handleClickNav({target:g?"live_detail":"others_homepage"})}),[k,g,null==s?void 0:s.id,r]);return(0,o.jsxs)(uo,Object.assign({onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,ref:h,onClick:S,style:a},{children:[(0,o.jsx)(m,Object.assign({uniqueId:i,secUid:l,teaParams:_,"data-e2e":`${n}-user-avatar`,onClick:Y.UW},{children:(0,o.jsx)(go,Object.assign({liveTheme:6,size:32},u,{isShowLiveTag:!1}),void 0)}),void 0),(0,o.jsxs)(mo,Object.assign({uniqueId:i,secUid:l,teaParams:_,onClick:Y.UW},{children:[(0,o.jsxs)(ho,{children:[(0,o.jsx)(_o,Object.assign({style:x,"data-e2e":`${n}-user-title`},{children:i}),void 0),d&&(0,o.jsx)("div",Object.assign({"data-e2e":`${n}-user-bluev`},{children:(0,o.jsx)(co.Q,{width:14,height:14},void 0)}),void 0)]},void 0),(0,o.jsx)(vo,Object.assign({style:x,"data-e2e":`${n}-user-desc`},{children:c}),void 0)]}),void 0)]}),void 0)})));var xo=i(69612);const ko=(0,w.memo)((function(){return(0,o.jsxs)(yo,{children:[(0,o.jsx)(xo.Od.Avatar,{style:{width:32,height:32}},void 0),(0,o.jsxs)(fo,{children:[(0,o.jsx)(xo.Od.Title,{style:{width:107,height:12}},void 0),(0,o.jsx)(xo.Od.Title,{style:{width:66,height:12}},void 0)]},void 0)]},void 0)}));var So=i(1127);const wo=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),Co=(0,re.Z)("div",{target:"e4a681b0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),wo({color:t.LineSecondary}),(0,se.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivUserContainer;"),jo=(0,re.Z)("p",{target:"e4a681b1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,se.GI)({theme:e,typography:"P3"}),(0,se.f1)({max:1071,style:{display:"none"}})],"label:PTitle;"),To=(0,re.Z)("div",{target:"e4a681b2"})((({isAtBottom:e=!0,theme:{direction:t}})=>[{display:"flex",flexDirection:"row",alignItems:"center",padding:"0 8px",marginTop:"8px",cursor:"pointer"},e?null:[{position:"absolute",top:"8px"},(0,se.YJ)({direction:t,end:"0"})],(0,se.f1)({max:1071,style:{display:"none"}})]),"label:DivShowMoreTextContainer;");To.defaultProps=Object.assign(Object.assign({},To.defaultProps),{"data-e2e":"see-all"});const Oo=(0,re.Z)("p",{target:"e4a681b3"})((({theme:e})=>(0,se.GI)({theme:e,color:"Primary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"})),"label:PShowMoreText;"),Io=(0,re.Z)(So.Z,{target:"e4a681b4"})((({up:e,theme:{direction:t}})=>[(0,se.YJ)({direction:t,marginStart:"4px"}),{transition:"all 0.3s",transform:e?"rotate(180deg)":"none",display:"none"}]),"label:StyledArrowDown;"),Po=(0,re.Z)("p",{target:"e4a681b5"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{padding:"0 8px"},(0,se.f1)({max:1071,style:{display:"none"}})]),"label:PFollowEmptyHint;"),Eo=(0,w.forwardRef)((function({title:e,listType:t,loading:i=!0,children:n},a){const r=(0,U.mp)(Xi.G,{selector:e=>0===e[t].list.length,dependencies:[t]});return(0,o.jsxs)(Co,Object.assign({bottomBar:"following"===t,ref:a},{children:[(0,o.jsx)(jo,Object.assign({"data-e2e":`${t}-accounts`},{children:e}),void 0),r&&i?Array(1).fill("").map(((e,t)=>(0,o.jsx)(ko,{},t))):n]}),void 0)})),Lo=(0,w.memo)((0,w.forwardRef)((function(e,t){var i;const n=(0,a.u)(),r=(0,Ji.Q)(),{$abTestVersion:s}=null!==(i=(0,oe.L)((()=>["$abTestVersion"]),[]))&&void 0!==i?i:{},[l,d]=(0,w.useState)(!1),[p,u]=(0,w.useState)(!1),g=10,[{authorIdList:m,loading:h,hasMore:_,totalLength:v},y]=(0,U.b7)(Xi.G,{selector:e=>{const{list:t,loading:i,maxCursor:o}=e.following;return{authorIdList:l?t:t.slice(0,g),loading:i,hasMore:-1!==o,totalLength:t.length}},dependencies:[l],equalFn:(e,t)=>Ki()(e,t)});(0,w.useImperativeHandle)(t,(()=>({handleHitBottom:c()})),[]);const{needRefresh:f,setPathname:b,pathname:x}=si();(0,w.useEffect)((()=>{f&&y.getFollowingList({count:g}),b(x)}),[y,f,g]);const{setPlaying:k}=(0,U.qj)(eo.x),S=(0,ee.fz)(to._),C=(0,ee.fz)(io),j=(0,X.x)(s,"em_follow_p2_test"),T="v1"===j||"v3"===j,O=(0,w.useCallback)((()=>{if(!T)return u(!0),k(!1),void C.handleAccountModalShow({enter_method:"click_following_panel"});_&&l||d(!l),_&&y.getFollowingList({count:g}),!l||(_||!l)&&S.handleClickNav({target:"see_more"})}),[y,S,_,l,g,T,C,k]),{shouldShowToggle:I,showMoreText:P}=(({hasMore:e,isShowingMore:t,totalLength:i,showNum:o,loading:n})=>({shouldShowToggle:!!i&&(e&&!t||!e&&i>o||!n),showMoreText:(0,Ji.Q)()(e||!t?"feed_caption_see_more":"see_less")}))({hasMore:_,isShowingMore:l,totalLength:v,showNum:g,loading:h}),E=r("desktop_logged_in_profile"),L=(0,w.useCallback)((()=>{u(!1),k(!0)}),[k]);return(0,o.jsxs)(Eo,Object.assign({loading:h,listType:"following",title:E},{children:[v?m.map((e=>e?(0,o.jsx)(bo,{uniqueId:e,e2ePrefix:"following",enterMethod:"click_navigation"},e):null)):(0,o.jsx)(Po,{children:r("sidenav_follow_hint")},void 0),h&&T?(0,o.jsx)("div",Object.assign({style:{marginTop:"4px"}},{children:(0,o.jsx)(ko,{},void 0)}),void 0):null,I&&(0,o.jsxs)(To,Object.assign({isAtBottom:T,onClick:O,"data-e2e":"following-see-all"},{children:[(0,o.jsx)(Oo,{children:T?P:r("feed_caption_see_more")},void 0),T&&(0,o.jsx)(Io,{fill:n.colors.Primary,width:16,height:16,up:l},void 0)]}),void 0),(0,o.jsx)(oo.U,{visible:p,type:"following",onClose:L},void 0)]}),void 0)})));var Ao=i(86494);const Ro=(0,w.memo)((function(e){var t;const{onEnterItem:i,onLeaveItem:n}=e,{$abTestVersion:a}=null!==(t=(0,oe.L)((()=>["$abTestVersion"]),[]))&&void 0!==t?t:{},r=(0,Ji.Q)(),{pathname:s}=(0,j.TH)(),l=(0,U.mp)(Ao.R,{selector:e=>e.uniqueId,dependencies:[]}),d=(0,U.mp)(no.z,{selector:e=>e.users[null!=l?l:""],dependencies:[l]}),c=(0,w.useRef)(""),[p,u]=(0,w.useState)(!1),[g,m]=(0,w.useState)(!1),[{list:h,totalLength:_},v]=(0,U.b7)(Xi.G,{selector:e=>{const{list:t}=e.suggest;return{list:t,totalLength:t.length}},dependencies:[p]}),{needRefresh:y,setPathname:f}=si();(0,w.useEffect)((()=>{var e;(0,Le.bf)(s)?c.current!==(null==d?void 0:d.id)&&d&&(c.current=null!==(e=d.id)&&void 0!==e?e:"",v.getRecommendList({pathname:s,userId:null==d?void 0:d.id})):(c.current="-1",y&&v.getRecommendList({pathname:s})),f(s)}),[v,y,s,f,d]);const{setPlaying:b}=(0,U.qj)(eo.x),x=(0,ee.fz)(to._),k=(0,ee.fz)(io),S=(0,X.x)(a,"em_follow_p2_test"),C="v1"===S||"v3"===S,T=("v3"===S||"v4"===S)&&(0,Le.bf)(s),O=(0,w.useCallback)((()=>{if(!C)return m(!0),b(!1),void k.handleAccountModalShow({enter_method:"click_suggested_panel"});u(!p),!p&&x.handleClickNav({target:"see_more"})}),[x,p,C,k,b]),I=(0,w.useRef)([]),P=(0,w.useRef)(null),E=(0,w.useCallback)((e=>t=>{I.current[e]=t}),[]),L=(0,w.useCallback)(((e,t)=>()=>{var o,n,a,r;null==i||i(e,(null!==(n=null===(o=I.current[t])||void 0===o?void 0:o.offsetTop)&&void 0!==n?n:0)+(null!==(r=null===(a=P.current)||void 0===a?void 0:a.offsetTop)&&void 0!==r?r:0),0)}),[i]),A=(0,w.useCallback)((e=>()=>{null==n||n(e)}),[n]),R=(0,w.useCallback)((()=>{m(!1),b(!0)}),[b]),M=(({pathname:e,user:t})=>{var i;const{$user:o}=null!==(i=(0,oe.L)((()=>["$user"]),[]))&&void 0!==i?i:{};return!((0,Le.BL)(e)||(0,Le.ws)(e)||(0,Le.Dj)(e)||(0,Le.FZ)(e)&&!o||(0,Le.bf)(e)&&((null==t?void 0:t.secret)||void 0!==t&&(null==t?void 0:t.uniqueId)===(null==o?void 0:o.uniqueId)))})({pathname:s,user:d});return!M||T?null:(0,o.jsxs)(Eo,Object.assign({ref:P,listType:"suggest",title:r("sug_accounts")},{children:[h.map(((e,t)=>e?(0,o.jsx)(bo,{ref:E(t),onMouseEnter:L(e,t),onMouseLeave:A(e),uniqueId:e,e2ePrefix:"suggest",style:!p&&t>=5?{display:"none"}:void 0,enterMethod:"click_panel"},e):null)),_>5&&(0,o.jsx)(To,Object.assign({isAtBottom:C,isRecommend:!0,onClick:O},{children:(0,o.jsx)(Oo,Object.assign({"data-e2e":"suggest-see-all"},{children:r(C&&p?"see_less":"see_all")}),void 0)}),void 0),(0,o.jsx)(oo.U,{visible:g,type:"suggest",onClose:R},void 0)]}),void 0)}));let Mo=class{constructor(){this.handleLinkShow=e=>{Q.WB.event("discover_link_show",e)},this.handleClickLink=e=>{Q.WB.event("click_discover_link",e)},this.handleEnterTagDetail=()=>{Q.WB.event("enter_tag_detail",{enter_method:"discover"})},this.handleEnterMusicDetail=()=>{Q.WB.event("enter_music_detail",{enter_method:"discover"})},this.handleDiscoveryPage=()=>{Q.WB.event("enter_discovery_page",{enter_method:"discover"})}}};Mo=(0,g.__decorate)([(0,ne.G)()],Mo);let Do=class{constructor(e){this.fetch=e}getDiscoverList(e){return this.fetch.get("/node/share/discover/list",{query:{pageType:e}}).pipe((0,me.U)((e=>e.body.discoverList)))}};Do=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Do);let Fo=class extends de.D{constructor(e,t){super(),this.service=e,this.discoverReport=t,this.defaultState={list:[],loading:!1}}setList(e,t){const{list:i}=t;e.list=i}setLoading(e,t){const{loading:i}=t;e.loading=i}getDiscoverList(e){return e.pipe((0,he.z)((({pageType:e})=>this.service.getDiscoverList(e).pipe((0,ti.b)((e=>{e.forEach(((e,t)=>{const{type:i,title:o,isInternalLink:n}=e;this.discoverReport.handleLinkShow({link_type:i,order:t,content:o,is_experiment:n?1:0})}))})),(0,me.U)((e=>this.getActions().setList({list:e}))),(0,ei.O)(this.getActions().setLoading({loading:!0})),(0,Si.l)(this.getActions().setLoading({loading:!1}),this.terminate()),(0,_e.n)({})))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Fo.prototype,"setList",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Fo.prototype,"setLoading",null),(0,g.__decorate)([(0,ce.Qm)({payloadGetter:1}),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Fo.prototype,"getDiscoverList",null),Fo=(0,g.__decorate)([(0,pe.Y)("DiscoverList"),(0,g.__metadata)("design:paramtypes",[Do,Mo])],Fo);var No=i(48979),Bo=i(28365),zo=i(55917),$o=i(75246),Uo=i(14911),Wo=i(59230);const Go=(0,$o.F4)({"0%":{transform:"translateX(-240px)"},"100%":{transform:"translateX(328px)"}}),Ho=(0,re.Z)("div",{target:"eikhr9j0"})((({theme:{colors:e}})=>({overflow:"hidden",width:"208px",height:"24px",marginBottom:"12px",borderRadius:"12px",background:e.BGPlaceholderOpaque})),"label:DivDiscoverSkeletonItem;"),qo=(0,re.Z)("div",{target:"eikhr9j1"})({width:"120px",height:"24px",background:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .06) 50.52%, rgba(22, 24, 35, 0) 100%)",animation:`${Go} 1.5s cubic-bezier(0, 0, 1, 1) infinite`},"label:DivLinearGradient;"),Zo=(0,re.Z)("div",{target:"eikhr9j2"})((({theme:{colors:e}})=>[{position:"relative",boxSizing:"border-box",width:"100%",padding:"16px 8px 8px 8px","::after":{content:'""',position:"absolute",top:"0",width:"calc(100% - 16px)",height:"1px",background:e.LineSecondary,transform:"scaleY(.5)"}},(0,se.f1)({max:1071,style:{display:"none"}})]),"label:DivDiscoverContainer;"),Vo=(0,re.Z)("p",{target:"eikhr9j3"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{paddingBottom:"16px"}]),"label:PDiscoverTitle;");Vo.defaultProps=Object.assign(Object.assign({},Vo.defaultProps),{"data-e2e":"nav-discover-title"});const Qo=(0,re.Z)("div",{target:"eikhr9j4"})({display:"flex",flexWrap:"wrap",width:"100%"},"label:DivDiscoverListContainer;");Qo.defaultProps=Object.assign(Object.assign({},Qo.defaultProps),{"data-e2e":"nav-discover-list"});const Yo={display:"block",width:"fit-content",maxWidth:"100%",":hover":{textDecoration:"none"}},Ko=(0,re.Z)(Uo.rU,{target:"eikhr9j5"})(Yo,"label:StyledLink;");Ko.defaultProps=Object.assign(Object.assign({},Ko.defaultProps),{"data-e2e":"nav-discover-href"});const Jo=(0,re.Z)(Wo.v,{target:"eikhr9j6"})(Yo,"label:StyledTmpLink;");Jo.defaultProps=Object.assign(Object.assign({},Jo.defaultProps),{"data-e2e":"nav-discover-href"});const Xo=(0,re.Z)("div",{target:"eikhr9j7"})((({theme:e,theme:{colors:t,direction:i}})=>[{display:"flex",boxSizing:"border-box",width:"fit-content",maxWidth:"100%",height:"24px",marginBottom:"12px",padding:"3px 10px",border:"1px solid "+t.LinePrimary,borderRadius:"12px"},(0,se.VZ)({theme:e}),(0,se.YJ)({direction:i,marginEnd:"8px"})]),"label:DivDiscoverItemContainer;"),en=(0,re.Z)(No.Z,{target:"eikhr9j9"})({flexShrink:0},"label:StyledNumber;"),tn=(0,re.Z)(Bo.Z,{target:"eikhr9j10"})({flexShrink:0},"label:StyledMusicNote;"),on=(0,re.Z)(zo.Z,{target:"eikhr9j11"})({flexShrink:0},"label:StyledMagnifyingGlass;"),nn=(0,re.Z)("p",{target:"eikhr9j12"})(se.wj,(({theme:e,theme:{direction:t}})=>[(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"18px"},(0,se.YJ)({direction:t,paddingStart:"6px"})]),"label:PText;"),an=function(){var e;const t=(0,Ji.Q)(),{pathname:i}=(0,j.TH)(),{$language:n}=null!==(e=(0,oe.L)((()=>["$language"]),[]))&&void 0!==e?e:{},[{list:a,loading:r},s]=(0,U.b7)(Fo,{selector:e=>{const{list:t,loading:i}=e;return{list:t,loading:i}},dependencies:[]}),{needRefresh:l,setPathname:d}=si();(0,w.useEffect)((()=>{const e=(0,Le.C2)(i);l&&s.getDiscoverList({pageType:e}),d(i)}),[s,i]);const c=(0,ee.fz)(Mo),p=(0,w.useCallback)(((e,t)=>()=>{const{type:i,title:o,isInternalLink:n}=e;switch(c.handleClickLink({link_type:i,order:t,content:o,is_experiment:n?1:0}),i){case 3:c.handleEnterTagDetail();break;case 4:c.handleEnterMusicDetail();break;default:c.handleDiscoveryPage()}}),[c]);return!r&&a.length<4?null:(0,o.jsxs)(Zo,{children:[(0,o.jsx)(Vo,{children:t("Discover")},void 0),r?(0,o.jsxs)("div",{children:[(0,o.jsx)(Ho,{children:(0,o.jsx)(qo,{},void 0)},void 0),(0,o.jsx)(Ho,{children:(0,o.jsx)(qo,{},void 0)},void 0)]},void 0):(0,o.jsx)(Qo,{children:a.map(((e,t)=>{const{type:i,title:a}=e;let{link:r}=e,s=null;switch(r=`${r.replace("https://www.tiktok.com","")}?lang=${n}`,i){case 3:s=(0,o.jsx)(en,{width:16,height:16},void 0);break;case 4:s=(0,o.jsx)(tn,{width:16,height:16},void 0);break;default:s=(0,o.jsx)(on,{width:16,height:16},void 0)}return(0,o.jsx)(Jo,Object.assign({to:r,onClick:p(e,t)},{children:(0,o.jsxs)(Xo,{children:[s,(0,o.jsx)(nn,{children:a},void 0)]},void 0)}),t)}))},void 0)]},void 0)};var rn=i(41967),sn=i(25491);const ln=(0,re.Z)("div",{target:"el3hfgg0"})((({theme:{colors:e,direction:t}})=>[{position:"relative",paddingTop:"16px","::before":{content:'""',position:"absolute",left:"8px",right:"8px",top:0,height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,se.YJ)({direction:t,paddingStart:"8px"}),(0,se.f1)({max:1071,style:{display:"none"}})]),"label:DivFooterContainer;"),dn=(0,re.Z)("div",{target:"el3hfgg1"})({marginBottom:"8px"},"label:DivLinkContainer;"),cn=e=>[(0,se.GI)({theme:e,color:"TextTertiary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P4",isLink:!0}),{display:"inline-block",marginRight:"6px",marginTop:"5px"}],pn=(0,re.Z)("span",{target:"el3hfgg2"})((({theme:e})=>cn(e)),"label:SpanCopyright;");pn.defaultProps=Object.assign(Object.assign({},pn.defaultProps),{"data-e2e":"copyright"});const un=(0,re.Z)(Wo.v,{target:"el3hfgg3"})((({theme:e})=>cn(e)),"label:StyledNavLink;"),gn=(0,re.Z)("div",{target:"el3hfgg4"})({marginBottom:"8px",position:"relative"},"label:DivMoreContainer;"),mn=(0,re.Z)("span",{target:"el3hfgg5"})((({theme:e})=>cn(e)),{cursor:"pointer"},"label:SpanMoreText;");mn.defaultProps=Object.assign(Object.assign({},mn.defaultProps),{"data-e2e":"more-link"});const hn=(0,re.Z)("div",{target:"el3hfgg6"})({padding:"15px 16px 20px",width:"fit-content",maxWidth:"200px"},"label:DivMorePopupWrapper;"),_n=(0,re.Z)(Wo.v,{target:"el3hfgg7"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P2",fontWeight:"semiBold"}),{display:"block",":hover":{textDecoration:"none",color:e.colors.Primary},"& + &":{marginTop:"20px"}}]),"label:StyledMoreLink;"),vn=(0,w.memo)((function({navList:e,translateText:t=!1,e2e:i}){const n=(0,Ji.Q)();return(0,o.jsx)(dn,{children:e.map((e=>(0,o.jsx)(un,Object.assign({forceSSR:!0,to:e.href,"data-e2e":i,target:"_blank"},{children:t?n(e.title):e.title}),e.href)))},void 0)})),yn="copyright-policy",fn=[{title:"terms",key:"terms-of-service",href:""},{title:"privacy",key:"privacy-policy-row",href:""},{title:"copyright",key:"copyright-policy",href:""}];function bn(e){var t;return null!==(t=null==e?void 0:e.children.filter((({placements:e=[]})=>0===e.length||e.includes("sidebar"))))&&void 0!==t?t:[]}const xn=(0,w.memo)((function({lang:e}){const t=(0,Ji.Q)(),{active:i,handleMouseEnter:n,handleMouseLeave:a}=(0,rn.R)(),{navList:r=[],$legalList:s,$region:l}=(0,U.mp)(G.G,{selector:e=>{var i,o,n,a;return{$legalList:null===(o=null===(i=e.appContext)||void 0===i?void 0:i.$navList.find((({title:e})=>e===t("Legal"))))||void 0===o?void 0:o.children,navList:null===(n=e.appContext)||void 0===n?void 0:n.$navList,$region:null===(a=e.appContext)||void 0===a?void 0:a.$region}},dependencies:[]}),{pageList:d,programList:c,legalList:p}=(0,w.useMemo)((()=>{const i=[{title:"help",key:"help-center",href:`https://support.tiktok.com/${e}`},{title:"safety",key:"safety-center",href:`https://www.tiktok.com/safety?lang=${e}`},...fn.reduce(((t,i)=>{var o;const n=(null!=s?s:[]).map((({key:e})=>e)).indexOf(i.key);return i.key===yn&&(t.push({title:"Creator Portal",key:"create-portal",href:"https://www.tiktok.com/creators/creator-portal/en-us/"}),t.push({title:"Community Guidelines",key:"community-guidelines",href:`https://www.tiktok.com/community-guidelines?lang=${e}`})),n>=0&&t.push(Object.assign(Object.assign({},i),{href:null!==(o=null==s?void 0:s[n].href)&&void 0!==o?o:""})),t}),[])],o=bn(r[0]);"US"===l&&o.push({href:`https://www.tiktok.com/directory?lang=${e}`,key:"creatorDirectory",title:t("SEO_CD_name")});const n=bn(r[1]);return n.splice(3,0,{href:`https://www.tiktok.com/transparency?lang=${e}`,key:"transparency",title:"Transparency"}),{pageList:o,programList:n,legalList:i}}),[s,l,e,r,t]),u=`${(new Date).getFullYear()} TikTok`,g=(null!=s?s:[]).filter((e=>-1===p.findIndex((({key:t})=>t===e.key))||e.key===yn));return"DE"===(null==l?void 0:l.trim().toUpperCase())&&g.splice(3,0,{href:"https://www.tiktok.com/transparency/de-de/netzdg/",key:"netzdg",title:"NetzDG"}),"AT"===(null==l?void 0:l.trim().toUpperCase())&&g.push({href:"https://www.tiktok.com/transparency/de-de/koplg-about/",key:"kopig",title:"KoPi-G"}),(0,o.jsxs)(ln,{children:[(0,o.jsx)(vn,{navList:d,e2e:"page-link"},void 0),(0,o.jsx)(vn,{navList:c,e2e:"program-link"},void 0),(0,o.jsx)(vn,{translateText:!0,navList:p,e2e:"legal-link"},void 0),g.length>0&&(0,o.jsx)(gn,{children:(0,o.jsxs)(mn,Object.assign({onMouseEnter:n,onMouseLeave:a},{children:[t("more"),(0,o.jsx)(sn.G,Object.assign({active:i,placement:"topLeft",verticalOffset:5},{children:(0,o.jsx)(hn,{children:g.map((({title:e,href:t})=>(0,o.jsx)(_n,Object.assign({forceSSR:!0,to:t,target:"_blank"},{children:e}),e)))},void 0)}),void 0)]}),void 0)},void 0),(0,o.jsxs)(pn,{children:[" ",u]},void 0)]},void 0)}));var kn=i(74509);const Sn="=+~#$@",wn={"[]":/\[([^[\]]+)\]/g,"{}":/\{([^{}]*)\}/g,"%s":/%s/g},Cn=({text:e,matchArr:t,replaceComponents:i})=>{const[n,a]=(0,w.useState)([]);return(0,w.useEffect)((()=>{let n=[];const r=[],s=wn[t];let l=e;l=e.replace(s,((...e)=>(r.push(e[1]),Sn))),n=l.split(Sn);const d=[];n.forEach(((e,t)=>{if(d.push(e),r.length>t&&i.length>0){const e=i[t%i.length];d.push((0,o.jsx)(e,{text:r[t],matchIndex:t},t))}})),a(d)}),[e,t,i]),(0,o.jsx)(o.Fragment,{children:n},void 0)};var jn,Tn,On,In,Pn;function En(){return En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},En.apply(this,arguments)}const Ln=function(e){return w.createElement("svg",En({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 84 81",width:"1em",height:"1em"},e),jn||(jn=w.createElement("path",{fill:"white",d:"M36.802 9.019c2.308-4.005 8.088-4.005 10.396 0l31.117 53.985c2.305 4-.582 8.996-5.199 8.996H10.884c-4.617 0-7.504-4.996-5.199-8.996L36.802 9.019z"})),Tn||(Tn=w.createElement("path",{fill:"url(#video-warning_svg__paint0_linear_1104_6141)",d:"M38.522 10.121c1.534-2.699 5.422-2.699 6.956 0l30.627 53.903C77.62 66.69 75.694 70 72.627 70H11.373c-3.067 0-4.993-3.31-3.478-5.976l30.627-53.903z"})),On||(On=w.createElement("path",{fill:"white",d:"M38.5 28a1 1 0 011-1h4a1 1 0 011 1v23a1 1 0 01-1 1h-4a1 1 0 01-1-1V28z"})),In||(In=w.createElement("circle",{cx:41.5,cy:59,r:3,fill:"white"})),Pn||(Pn=w.createElement("defs",null,w.createElement("linearGradient",{id:"video-warning_svg__paint0_linear_1104_6141",x1:33.5,x2:64,y1:20.5,y2:67,gradientUnits:"userSpaceOnUse"},w.createElement("stop",{stopColor:"#FF796B"}),w.createElement("stop",{offset:1,stopColor:"#FF4C3A"})))))},An=(0,re.Z)("div",{target:"e1m9td0x0"})({width:400,display:"flex",flexDirection:"column",alignItems:"center",padding:"36px 19px 32px 19px"},"label:DivContainer;"),Rn=(0,re.Z)(Ln,{target:"e1m9td0x1"})([{width:83,height:81,marginBottom:24}],"label:StyledVideoWarningIcon;"),Mn=(0,re.Z)("div",{target:"e1m9td0x2"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"TextPrimary"}),{textAlign:"center",marginBottom:24}]),"label:DivContent;"),Dn=(0,re.Z)("div",{target:"e1m9td0x3"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"TextTertiary"}),{marginBottom:24}]),"label:DivTips;"),Fn=(0,re.Z)("span",{target:"e1m9td0x4"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P4",fontFamily:"Proxima",color:"Primary"}),{marginBottom:24}]),"label:SpanTipsHighlight;"),Nn=(0,re.Z)(_t.W,{target:"e1m9td0x5"})((({theme:e,theme:{colors:t}})=>[(0,se.GI)({theme:e,typography:"P3",fontFamily:"Proxima",color:"ConstTextInverse",fontWeight:"semiBold"}),{padding:"12px auto",textAlign:"center",width:"100%",backgroundColor:t.Primary,":hover":{backgroundColor:t.Primary}}]),"label:StyledButton;"),Bn=function({onOkClick:e,visible:t,duration:i}){const n=(0,Ji.Q)(),a=(0,w.useMemo)((()=>[({text:e})=>(0,o.jsx)(Fn,{children:e},void 0)]),[]);return(0,o.jsx)(ht.u,Object.assign({visible:t,maskClosable:!1},{children:(0,o.jsxs)(An,{children:[(0,o.jsx)(Rn,{},void 0),(0,o.jsx)(Mn,{children:n("pm_mt_obs_revoke_desc")},void 0),(0,o.jsx)(Dn,{children:(0,o.jsx)(Cn,{text:n("pm_mt_revoke_duration",{num:i,number:i}).replace("%s",i),matchArr:"%s",replaceComponents:a},void 0)},void 0),(0,o.jsx)(Nn,Object.assign({type:"submit",onClick:e},{children:n("pm_mt_modal_revoke_confirm_btn")}),void 0)]},void 0)}),void 0)};var zn=i(66164);function $n({containerRef:e,scrollRef:t}){const{direction:i}=(0,a.u)(),[o,n]=(0,w.useState)(-1e3),[r,s]=(0,w.useState)(-1e3),l=()=>{var t,o;if(!e.current)return;const a=e.current.getBoundingClientRect();s(null!==(t="ltr"===i?a.left+a.width+12:a.left-12)&&void 0!==t?t:0),n(null!==(o=a.top+a.height/2)&&void 0!==o?o:0)},d=(0,zn.fB)(l,[e,i],200),c=(0,w.useCallback)(l,[e,i]);return(0,w.useEffect)((()=>{var e;const i=null===(e=t.current)||void 0===e?void 0:e.dom;return window.addEventListener("resize",d),null==i||i.addEventListener("scroll",c),window.addEventListener("recalculate-tip-position",c),d(),()=>{window.removeEventListener("resize",d),window.removeEventListener("recalculate-tip-position",c),null==i||i.removeEventListener("scroll",c)}}),[e,d,c,t]),{top:o,left:r,transform:`translate(${"ltr"===i?"0":"-100%"}, -50%) translate(${r}px, ${o}px)`}}const Un=(0,re.Z)("div",{target:"enmnmya0"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"normal"}),{display:"none",position:"fixed",left:0,top:0,padding:"12px",borderRadius:"8px",zIndex:100,background:"#4b4b4b"},(0,se.f1)({max:1071,style:{display:"block"}})]),"label:DivNavHintContainer;"),Wn=function({text:e,active:t,containerRef:i,scrollRef:n}){const{transform:a}=$n({containerRef:i,scrollRef:n});return t?(0,p.createPortal)((0,o.jsx)(Un,Object.assign({style:{transform:a}},{children:e}),void 0),document.body):null};var Gn=i(38444);const Hn=(0,re.Z)("div",{target:"e10dtyqb0"})((({active:e,theme:t,theme:{colors:i}})=>[(0,se.GI)({theme:t,fontFamily:"Proxima",typography:"H6",fontWeight:"semiBold",color:"ConstTextInverse"}),{position:"fixed",left:0,top:0,padding:"12px",borderRadius:"8px",zIndex:100,background:i.ConstSecondary2,maxWidth:"300px"},(0,se.f1)({max:767,style:{display:e?"block":"none"}})]),"label:DivLiveHintContainer;"),qn=(0,re.Z)(Gn.Z,{target:"e10dtyqb1"})((({theme:{colors:e,direction:t}})=>[{position:"absolute",left:"-16px",top:"50%",transform:`translateY(-50%) rotate(${"ltr"===t?"-90deg":"90deg"})`,width:24,height:8,fill:e.ConstSecondary2},(0,se.YJ)({direction:t,start:"-16px"})]),"label:StyledArrowIcon;"),Zn=(0,re.Z)("p",{target:"e10dtyqb2"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2"})),"label:PLiveStreamTitle;"),Vn=(0,re.Z)("p",{target:"e10dtyqb3"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P3",fontWeight:"normal"})),{marginBottom:"4px"},"label:PLiveStreamDesc;"),Qn=(0,re.Z)("div",{target:"e10dtyqb4"})({display:"flex",justifyContent:"flex-end",marginTop:"4px"},"label:DivLiveStreamConfirm;"),Yn=function({active:e,containerRef:t,scrollRef:i}){const n=(0,Ji.Q)(),{delayMounted:a,isLiving:r,needShowLiveStream:s,isTipShowing:l,setIsTipShowing:d}=function({delay:e=1e3}={}){const{isLiving:t,needShowLiveStream:i}=(0,U.mp)(Qi,{dependencies:[],selector:({roomCreateInfo:e,liveStatus:t})=>{const i=Ii(t);return{isLiving:i,needShowLiveStream:i&&1===(null==e?void 0:e.stream_status)}}}),o=(0,Y.le)(J.AH),[n,a]=(0,w.useState)(!o),[r,s]=(0,w.useState)(!1),[l,d]=(0,w.useState)(!1);(0,w.useEffect)((()=>{s(!0)}),[]),(0,w.useEffect)((()=>{setTimeout((()=>{d(!0)}),e)}),[e]),(0,w.useEffect)((()=>{i&&a(!0)}),[i]);const c=(0,w.useRef)();return(0,w.useEffect)((()=>{n&&!i&&(c.current=window.setTimeout((()=>{a(!1)}),1e4)),i&&clearTimeout(c.current)}),[n,i]),{mounted:r,delayMounted:l,isLiving:t,needShowLiveStream:i,isTipShowing:n,setIsTipShowing:a}}(),{transform:c}=$n({containerRef:t,scrollRef:i});(0,w.useEffect)((()=>{a&&window.dispatchEvent(new Event("recalculate-tip-position"))}),[a]);const u=(0,w.useMemo)((()=>s?n("live_obs_string_get_tips"):r?"":n("start_live_guide")),[r,s,n]),g=(0,w.useCallback)((()=>{d(!1)}),[d]);return a&&l&&u?(0,p.createPortal)((0,o.jsxs)(Hn,Object.assign({active:e,style:{transform:c}},{children:[(0,o.jsx)(qn,{},void 0),s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Zn,{children:n("live_obs_string_get_title")},void 0),(0,o.jsx)(Vn,{children:u},void 0),(0,o.jsx)(Qn,{children:(0,o.jsx)(Zn,Object.assign({onClick:g,style:{cursor:"pointer"}},{children:n("live_close")}),void 0)},void 0)]},void 0):(0,o.jsx)("p",{children:u},void 0)]}),void 0),document.body):null},Kn=(0,re.Z)("div",{target:"e1k5k7j00"})((({theme:{colors:e,direction:t}})=>[{padding:"8px",position:"relative","::before":{content:'""',position:"absolute",left:"8px",top:"0px",right:"8px",height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)"}},(0,se.f1)({max:1071,style:{[`${ea}`]:{display:"none"},[`${ia}`]:[(0,se.YJ)({direction:t,marginEnd:"0"})]}})]),"label:DivGoLiveEntranceContainer;"),Jn=(0,re.Z)(Wo.v,{target:"e1k5k7j01"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,se.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:StyledLink;"),Xn=(0,re.Z)("div",{target:"e1k5k7j02"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"}),{textAlign:"center",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",height:"36px",background:e.colors.BGInput,":hover":{textDecoration:"none"}},(0,se.VZ)({theme:e,hover:"rgba(22, 24, 35, 0.1)",active:"rgba(22, 24, 35, 0.14)"})]),"label:DivText;"),ea=(0,re.Z)("span",{target:"e1k5k7j03"})((({theme:{colors:e},isLiveStreaming:t,isDisabled:i})=>({color:i?e.TextQuaternary:t?e.Primary:e.TextPrimary})),"label:SpanText;"),ta=[(0,$o.F4)({"0%":{y:"4px",height:"10px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"10px"}}),(0,$o.F4)({"0%":{y:"4px",height:"6px"},"40%":{y:"4px",height:"10px"},"70%":{y:"4px",height:"12px"},"100%":{y:"4px",height:"6px"}}),(0,$o.F4)({"0%":{y:"4px",height:"8px"},"40%":{y:"4px",height:"12px"},"70%":{y:"4px",height:"6px"},"100%":{y:"4px",height:"8px"}})],ia=(0,re.Z)("svg",{target:"e1k5k7j04"})((({isLiveStreaming:e,theme:{direction:t}})=>[(0,se.YJ)({direction:t,marginEnd:"4px"}),e?{rect:{transformOrigin:"center",transform:"rotateZ(180deg)",":nth-of-type(1)":{animation:`${ta[0]} .5s ease-out infinite`},":nth-of-type(2)":{animation:`${ta[1]} .5s ease-out infinite`},":nth-of-type(3)":{animation:`${ta[2]} .5s ease-out infinite`}}}:null]),"label:SvgLiveIcon;"),oa=(0,w.memo)((function({isLiveStreaming:e,isDisabled:t}){const{colors:i}=(0,a.u)(),n=t?i.TextQuaternary:e?i.Primary:i.Primary2;return(0,o.jsxs)(ia,Object.assign({isLiveStreaming:!t&&e,width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,o.jsx)("rect",{x:"4.1665",y:"4.16797",width:"2.69231",height:"11.6667",rx:"0.5",fill:n},void 0),(0,o.jsx)("rect",{x:"8.65381",y:"9.02734",width:"2.69231",height:"6.80555",rx:"0.5",fill:n},void 0),(0,o.jsx)("rect",{x:"13.1406",y:"7.08594",width:"2.69231",height:"8.75",rx:"0.5",fill:n},void 0)]}),void 0)})),na=function({hintActive:e,scrollRef:t}){var i,n;const a=(0,Ji.Q)(),[r,s]=(0,w.useState)(!1),[l,d]=(0,w.useState)(!1),c=function(){const{liveStatus:e}=(0,U.mp)(Qi);return Ii(e)}(),{permissionInfo:p}=(0,U.mp)(ki),{roomCreateInfo:u}=(0,U.mp)(Qi),{pathname:g}=(0,j.TH)(),m=1===Number(null===(i=null==u?void 0:u.obs_accees_recall_info)||void 0===i?void 0:i.status),h=(_=Number(null===(n=null==u?void 0:u.obs_accees_recall_info)||void 0===n?void 0:n.duration),parseInt((_/86400).toString())||1).toString();var _;const{user:v,lang:y}=(0,U.mp)(G.G,{dependencies:[],selector:({appContext:e,lang:t})=>{var i,o,n;return{user:{uniqueId:null===(i=null==e?void 0:e.$user)||void 0===i?void 0:i.uniqueId,secUid:null===(o=null==e?void 0:e.$user)||void 0===o?void 0:o.secUid,uid:null===(n=null==e?void 0:e.$user)||void 0===n?void 0:n.uid},lang:t}}}),f=(0,ee.fz)(kn.y),b=(0,ee.fz)(Ti),x=a(m?"go_live":c?"live_on_status":"go_live"),k=(0,w.useRef)(null),C=(0,w.useCallback)((()=>{var e;if(!c&&!m){const t=(0,Y.le)(J.AH);f.handleLiveStreamEntranceClick({anchor_id:null!==(e=v.uid)&&void 0!==e?e:"",is_notified:t?0:1,is_application_needed:(null==p?void 0:p.hasLiveApplyPermission)?1:0})}m&&s(!0),(0,Y.D$)(J.AH,JSON.stringify({name:v.uniqueId}))}),[c,f,v.uid,v.uniqueId,null==p?void 0:p.hasLiveApplyPermission,m]),T=(0,w.useCallback)((()=>{d(!0)}),[]),O=(0,w.useCallback)((()=>{d(!1)}),[]),I=(0,S.stringifyUrl)({url:pi.$J.liveGoLive,query:{lang:y}}),P=Pi(g),E=(0,w.useMemo)((()=>m?(0,o.jsxs)(Xn,Object.assign({onClick:C},{children:[(0,o.jsx)(oa,{isDisabled:!0,isLiveStreaming:c},void 0),(0,o.jsx)(ea,Object.assign({isLiveStreaming:c,"data-e2e":"go-live-entrance-text",isDisabled:!0},{children:x}),void 0)]}),void 0):(0,o.jsxs)(Jn,Object.assign({forceSSR:!P,to:I,onClick:C},{children:[(0,o.jsx)(oa,{isDisabled:!1,isLiveStreaming:c},void 0),(0,o.jsx)(ea,Object.assign({isLiveStreaming:c,"data-e2e":"go-live-entrance-text",isDisabled:!1},{children:x}),void 0)]}),void 0)),[m,P,I,c,C,x]),L=(0,w.useCallback)((()=>s(!1)),[]);return(0,w.useEffect)((()=>{var e;r&&b.OBSRevokeRemindShow({anchor_id:null!==(e=v.uid)&&void 0!==e?e:""})}),[r,v.uid,b]),(0,o.jsxs)(Kn,Object.assign({ref:k,onMouseEnter:T,onMouseLeave:O,"data-e2e":"go-live-entrance"},{children:[E,(0,o.jsx)(Yn,{active:e,containerRef:k,scrollRef:t,"data-e2e":"go-live-entrance-tip"},void 0),(0,o.jsx)(Wn,{active:l,text:x,scrollRef:t,containerRef:k},void 0),(0,o.jsx)(Bn,{visible:r,onOkClick:L,duration:h},void 0)]}),void 0)},aa=(0,re.Z)("div",{target:"efna91q0"})([{position:"relative",padding:"20px 8px 24px 8px",margin:"0","::before":{content:'""',position:"absolute",height:"1px",left:"8px",right:"8px",background:"rgba(22, 24, 35, .12)",transform:"scaleY(.5)",top:"0"}},(0,se.f1)({max:1071,style:{display:"none"}})],"label:DivFrameContainer;"),ra=(0,re.Z)("p",{target:"efna91q1"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",color:"TextTertiary"})),"label:PLoginHint;");ra.defaultProps=Object.assign(Object.assign({},ra.defaultProps),{"data-e2e":"nav-login-tip"});const sa=(0,re.Z)(_t.W,{target:"efna91q2"})({marginTop:"20px",width:"100%"},"label:StyledLogin;");sa.defaultProps=Object.assign(Object.assign({},sa.defaultProps),{"data-e2e":"nav-login-button"});const la=function(){const e=(0,Ji.Q)(),t=(0,U.qj)(K.r),i=(0,ee.fz)(to._),n=(0,w.useCallback)((()=>{t.openModal({query:{enter_method:"click_navigation",enter_from:Q.WB.commonParams.page_name,redirect_url:(0,Te.AY)()}}),i.handleClickNav({target:"login"})}),[i,t]);return(0,o.jsxs)(aa,{children:[(0,o.jsx)(ra,{children:e("sidenav_login_cta")},void 0),(0,o.jsx)(sa,Object.assign({buttonTheme:"line",onClick:n},{children:e("Log In")}),void 0)]},void 0)};var da=i(20789),ca=i(56201),pa=i(43998),ua=i(84774),ga=i(2750),ma=i(45250),ha=i(62904),_a=i(54332);function va(){const{canShowliveEntry:e}=function(){const e=(0,oe.L)((()=>["$user","$liveSuggestConfig","$abTestVersion"]),[]),t=function(){var e;const{$botType:t}=null!==(e=(0,oe.L)((()=>["$botType"]),[]))&&void 0!==e?e:{};return"others"!==t}();return(0,w.useMemo)((()=>{var i,o,n;const a=null!==(i=(0,X.x)(null==e?void 0:e.$abTestVersion,"live_detail_non_logged_in_entry"))&&void 0!==i?i:"v1",r=null===(o=null==e?void 0:e.$liveSuggestConfig)||void 0===o?void 0:o.isBlockedArea,s=null===(n=null==e?void 0:e.$liveSuggestConfig)||void 0===n?void 0:n.isRiskArea,l=!!(null==e?void 0:e.$user),d=Boolean(!l&&"v1"===a),c=Boolean(!l&&"v2"===a),p=Boolean(!l&&"v3"===a),u=Boolean(!l&&s);if(r)return{canShowliveEntry:!1,canLoadFeed:!1,canEnterRoom:!1};if(u)return{canShowliveEntry:!0,canLoadFeed:!1,canEnterRoom:!1};const g=l||t||d;return{canShowliveEntry:!c,canLoadFeed:g||p,canEnterRoom:g}}),[t,e])}();return e}let ya=class{constructor(){this.handleShow=()=>{Q.WB.event("livesdk_live_tab_show")}}};ya=(0,g.__decorate)([(0,ne.G)()],ya);const fa=(0,re.Z)("div",{target:"e1b4u1n0"})({position:"absolute",padding:"0 4px",top:"0",transformOrigin:"right top",transition:"opacity .5s",opacity:0},(({theme:{direction:e}})=>{const t=(0,se.$K)(e,"end");return[(0,se.YJ)({direction:e,end:"0"}),{transformOrigin:`${t} top`}]}),"label:DivScrollBar;"),ba=(0,re.Z)("div",{target:"e1b4u1n1"})({overflowX:"hidden",overflowY:"auto",overscrollBehaviorY:"contain",perspective:"1px",transformStyle:"preserve-3d","::-webkit-scrollbar":{width:0,height:0},[`:hover ${fa}`]:{opacity:1}},(({theme:{direction:e}})=>{const t=(0,se.$K)(e,"end");return[(0,se.YJ)({direction:e,paddingEnd:"12px"}),{perspectiveOrigin:`${t} top`}]}),"label:DivScrollContainer;"),xa=(0,re.Z)("div",{target:"e1b4u1n2"})("label:DivScrollWrapper;"),ka=(0,re.Z)("div",{target:"e1b4u1n3"})({width:"6px",height:"100%",borderRadius:"3px",background:"rgba(22, 24, 35, .06)"},"label:DivScrollBarThumb;"),Sa=(0,w.memo)((0,w.forwardRef)((function({children:e,Wrapper:t=xa,onScroll:i,onScrollBottom:n,bottomThreshold:a=100,className:r},s){const l=(0,w.useRef)(null),[d,c]=(0,w.useState)(0),[p,u]=(0,w.useState)(0),g=(0,w.useMemo)((()=>{const e=d>=p?0:Math.pow(d,2)/p,t=(d-e)/(p-d);return{height:e,transform:`matrix3d(${[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,-1].join(",")}) scale(${1/t}) translateZ(${1-1/t}px) translateZ(-2px)`}}),[d,p]);(0,w.useImperativeHandle)(s,(()=>({get scrollTop(){var e,t;return null!==(t=null===(e=l.current)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0},get dom(){return l.current}})),[]);const m=(0,zn.fB)((()=>{if(!l.current)return;const{current:e}=l,{height:t}=e.getBoundingClientRect(),{scrollHeight:i}=e;c(t),u(i)}),[],300),h=(0,w.useCallback)((()=>{if(!l.current||!n)return;const{scrollTop:e}=l.current;null==i||i({scrollTop:e}),d+e+a>=p&&n()}),[n,i,d,a,p]);return(0,w.useEffect)((()=>{const e=new window.MutationObserver((function(e){e.length&&m()}));return l.current&&e.observe(l.current,{childList:!0,subtree:!0}),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),e.disconnect()}}),[m]),(0,o.jsxs)(ba,Object.assign({ref:l,onScroll:h,className:r},{children:[(0,o.jsx)(t,{children:e},void 0),(0,o.jsx)(fa,Object.assign({style:g},{children:(0,o.jsx)(ka,{},void 0)}),void 0)]}),void 0)}))),wa=(0,re.Z)(Sa,{target:"e14l9ebt0"})((({extraTop:e=0,extraWidth:t,theme:{colors:i,direction:o}})=>[{top:se.Mz+e,bottom:"0",width:`${null!=t?t:356}px`,background:i.BGPrimary,position:"fixed",zIndex:99},(0,se.YJ)({direction:o,paddingEnd:"8px"}),(0,se.f1)({max:1071,style:{padding:"0 8px",width:"72px",flex:"0 0 72px",borderRight:`1px solid ${i.LineSecondary}`,boxShadow:`0px 2px 8px ${i.ShadowSecondary}`}})]),"label:StyledScroll;"),Ca=(0,re.Z)("div",{target:"e14l9ebt1"})((({transStatus:e,extraWidth:t})=>{const i=e===W.d0||e===W.Ix;return[{position:"relative",width:`${null!=t?t:356}px`,flex:`0 0 ${null!=t?t:356}px`},(0,se.f1)({max:767,style:{zIndex:99,[`${wa}`]:[null,i?{transition:"all 0.3s"}:null]}}),(0,se.f1)({max:1071,style:{width:"72px",flex:"0 0 72px"}})]}),"label:DivSideNavContainer;"),ja=(0,re.Z)("div",{target:"e14l9ebt2"})((({theme:{direction:e}})=>[{flexShrink:0,padding:"20px 0 26px",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",minHeight:"100%"},(0,se.YJ)({direction:e,paddingStart:"8px"}),(0,se.f1)({max:1071,style:{padding:"12px 0 26px"}})]),"label:DivWrapper;"),Ta=({theme:e})=>[{position:"relative",display:"flex",justifyContent:"flex-start",alignItems:"center",padding:"8px",boxSizing:"border-box",borderRadius:"4px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},(0,se.VZ)({theme:e}),(0,se.f1)({max:1071,style:{justifyContent:"center"}})],Oa=(0,re.Z)(Wo.v,{target:"e14l9ebt5"})(Ta,"label:StyledTmpLink;"),Ia=(0,re.Z)("div",{target:"e14l9ebt6"})({flex:"1 1 0px"},"label:DivPlaceholder;"),Pa=(0,re.Z)("h2",{target:"e14l9ebt7"})((({active:e,theme:t,theme:{direction:i}})=>[(0,se.GI)({theme:t,fontFamily:"Proxima",fontWeight:"bold",typography:"P1",lineHeight:"32px",color:e?"Primary":"Primary2"}),(0,se.YJ)({direction:i,marginStart:"8px"}),(0,se.f1)({max:1071,style:{display:"none"}})]),"label:H2MainNavText;"),Ea=(0,re.Z)("div",{target:"e14l9ebt8"})([{marginBottom:"8px",padding:"0"},(0,se.f1)({max:1071,style:{padding:"0"}})],"label:DivMainNavContainer;"),La={path:"/",Icon:da.Z,ActiveIcon:ca.Z,text:"for_you",teaParams:{target:"trending",enterPage:"enter_homepage_hot"},linkProps:{"data-e2e":"nav-foryou",disableAutoLang:!0}},Aa={path:"/following",Icon:pa.Z,ActiveIcon:ua.Z,text:"Following",teaParams:{target:"following",enterPage:"enter_homepage_follow"},linkProps:{"data-e2e":"nav-following",disableAutoLang:!1}},Ra={path:"/live",Icon:ga.Z,ActiveIcon:ma.Z,text:"LIVE",teaParams:{target:"live",enterPage:"enter_live_discover"},linkProps:{"data-e2e":"nav-live",disableAutoLang:!1}};function Ma({currentPath:e,configPath:t}){return e===t}const Da=function(e){const{text:t,path:i,onClick:n,onLoad:r,onCheckActive:s=Ma,Container:l=Oa,Icon:d,ActiveIcon:c,linkProps:p,teaParams:u,scrollRef:g,forceSSR:m}=e,h=(0,Ji.Q)(),{pathname:_}=(0,j.TH)(),{colors:v}=(0,a.u)(),[y,f]=(0,w.useState)(s({configPath:i,currentPath:_})),b=y?c:d,x=(0,ee.fz)(to._),[k,S]=(0,w.useState)(!1),C=(0,w.useCallback)((e=>{const{enterPage:t,target:i}=u;null==n||n(e),x.handleEnterPage(t,{enter_method:"navigation_bar"}),x.handleClickNav({target:i})}),[x,n,u]);(0,w.useEffect)((()=>{f(s({configPath:i,currentPath:location.pathname}))}),[s,i,_]),(0,w.useEffect)((()=>{null==r||r()}),[r]);const T=(0,w.useRef)(null),O=(0,w.useCallback)((()=>{S(!0)}),[]),I=(0,w.useCallback)((()=>{S(!1)}),[]);return(0,o.jsx)("div",Object.assign({ref:T},{children:(0,o.jsxs)(l,Object.assign({to:i,onClick:C},p,{forceSSR:m,onMouseEnter:O,onMouseLeave:I},{children:[(0,o.jsx)(b,{fill:y?v.Primary:v.Primary2,width:32,height:32},void 0),(0,o.jsx)(Pa,Object.assign({active:y},{children:h(t)}),void 0),(0,o.jsx)(Wn,{active:k,text:h(t),scrollRef:g,containerRef:T},void 0)]}),void 0)}),void 0)},Fa=(0,w.memo)((function({scrollRef:e}){const t=va(),{pathname:i}=(0,j.TH)(),n=(0,ee.fz)(ya),a=(0,U.qj)(ha.h),[{enterForyou:r},{setEnterForyou:s}]=(0,U.b7)(_a.e),{lang:l=""}=(0,U.mp)(G.G,{selector:({appContext:e})=>{const{$language:t}=null!=e?e:{};return{lang:t}},dependencies:[]});(0,w.useEffect)((()=>{!(0,Le.oC)(i)&&s(!1)}),[s,i]);const d=(0,w.useCallback)((()=>r&&(0,Le.cQ)(i)||(0,Le.oC)(i)),[i,r]),c=(0,w.useCallback)((e=>{(0,Le.oC)(i)&&(e.preventDefault(),a.resetItemList({key:"foryou"}),a.getRecommendList({key:"foryou"}))}),[a,i]);La.path=`/${l}`;const p=Pi(i),u=(0,w.useCallback)((()=>{n.handleShow()}),[n]);return(0,o.jsxs)(Ea,{children:[(0,o.jsx)(Da,Object.assign({},La,{scrollRef:e,onClick:c,onCheckActive:d}),void 0),(0,o.jsx)(Da,Object.assign({},Aa,{scrollRef:e}),void 0),t&&(0,o.jsx)(Da,Object.assign({onLoad:u,forceSSR:!p,Container:Oa,scrollRef:e},Ra),void 0)]},void 0)}));var Na=i(84683),Ba=i(93493);let za=class extends de.D{constructor(){super(...arguments),this.defaultState={profileUserId:null,itemOffset:0,offsetLeft:0}}setShowing(e,t){e.profileUserId=t.userId,t.itemOffset&&(e.itemOffset=t.itemOffset),t.offsetLeft&&(e.offsetLeft=t.offsetLeft)}itemEnter(e){return e.pipe((0,Xt.w)((({userId:e,itemOffset:t,offsetLeft:i,timeout:o})=>(0,Na.H)(o).pipe((0,Ba.h)(this.getActions().setShowing({userId:e,itemOffset:t,offsetLeft:i}))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],za.prototype,"setShowing",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],za.prototype,"itemEnter",null),za=(0,g.__decorate)([(0,pe.Y)("SideNavigation")],za);let $a=class{handleEnterTopic(e){Q.WB.event("enter_topics_page",e)}};var Ua;function Wa(){return Wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Wa.apply(this,arguments)}$a=(0,g.__decorate)([(0,ne.G)()],$a);var Ga,Ha;function qa(){return qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},qa.apply(this,arguments)}var Za,Va,Qa;function Ya(){return Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ya.apply(this,arguments)}var Ka,Ja,Xa;function er(){return er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},er.apply(this,arguments)}var tr;function ir(){return ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ir.apply(this,arguments)}var or,nr;function ar(){return ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},ar.apply(this,arguments)}var rr,sr,lr,dr;function cr(){return cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},cr.apply(this,arguments)}const pr=({color:e,position:t="relative",isBottom:i=!1})=>({position:t,[i?"::after":"::before"]:{content:'""',position:"absolute",left:"8px",right:"8px",[i?"bottom":"top"]:0,height:"1px",background:e,transform:"scaleY(0.5)"}}),ur=(0,re.Z)("div",{target:"ehbc6qq0"})((({theme:e,theme:{colors:t}})=>[{padding:"16px 0"},(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),pr({color:t.LineSecondary}),(0,se.f1)({max:1071,style:{padding:"8px 0"}})]),"label:DivTopicContainer;"),gr=(0,re.Z)("p",{target:"ehbc6qq1"})([{padding:"0 8px",marginBottom:"8px"},({theme:e})=>(0,se.GI)({theme:e,typography:"P3"}),(0,se.f1)({max:1071,style:{display:"none"}})],"label:PTitle;"),mr=(0,re.Z)(Uo.rU,{target:"ehbc6qq2"})([{padding:"4px 8px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",borderRadius:"4px",marginTop:"4px",":hover":{textDecoration:"none"},":active":{textDecoration:"none"}},({theme:e})=>(0,se.VZ)({theme:e})],"label:StyledTopicItemLink;"),hr=(0,re.Z)("h2",{target:"ehbc6qq3"})((({active:e,theme:t,theme:{direction:i}})=>[(0,se.GI)({theme:t,fontFamily:"Proxima",typography:"P2",color:e?"Primary":"Primary2"}),{height:"22px",lineHeight:"24px"},(0,se.YJ)({direction:i,marginStart:"10px"}),(0,se.f1)({max:1071,style:{display:"none"}})]),"label:H2TopicNavText;"),_r=[{key:"topic_foryou_comedy",value:"comedy",Icon:function(e){return w.createElement("svg",Ya({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Za||(Za=w.createElement("path",{fillRule:"evenodd",d:"M24 38c6.29 0 11.45-4.84 11.959-11 .045-.55-.407-1-.959-1H13c-.552 0-1.004.45-.959 1 .508 6.16 5.668 11 11.959 11zm0-4a8 8 0 01-6.93-4h13.86A8 8 0 0124 34z",clipRule:"evenodd"})),Va||(Va=w.createElement("path",{d:"M18.376 20.059c.312.455.738.941 1.29.941H21c.552 0 1.01-.452.901-.994a5.002 5.002 0 00-9.802 0c-.11.542.349.994.901.994h1.333c.553 0 .979-.486 1.291-.941a1.665 1.665 0 012.752 0zM33.667 21c-.553 0-.979-.486-1.291-.941a1.665 1.665 0 00-2.752 0c-.312.455-.738.941-1.29.941H27c-.552 0-1.01-.452-.901-.994a5.002 5.002 0 019.802 0c.11.542-.349.994-.901.994h-1.333z"})),Qa||(Qa=w.createElement("path",{fillRule:"evenodd",d:"M44 24c0 11.046-8.954 20-20 20S4 35.046 4 24 12.954 4 24 4s20 8.954 20 20zm-4 0c0 8.837-7.163 16-16 16S8 32.837 8 24 15.163 8 24 8s16 7.163 16 16z",clipRule:"evenodd"})))}},{key:"topic_foryou_gaming",value:"gaming",Icon:function(e){return w.createElement("svg",ar({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),or||(or=w.createElement("path",{d:"M17 14.5a1 1 0 011 1v2h2a1 1 0 011 1v2a1 1 0 01-1 1h-2v2a1 1 0 01-1 1h-2a1 1 0 01-1-1v-2h-2a1 1 0 01-1-1v-2a1 1 0 011-1h2v-2a1 1 0 011-1h2zM33 17.5a2 2 0 114 0 2 2 0 01-4 0zM31 19.5a2 2 0 100 4 2 2 0 000-4z"})),nr||(nr=w.createElement("path",{fillRule:"evenodd",d:"M14 5.5c-5.523 0-10 4.477-10 10v19.369a7.631 7.631 0 0014.496 3.333l2.631-5.417a.2.2 0 01.18-.113h5.386a.2.2 0 01.18.113l2.63 5.417A7.631 7.631 0 0044 34.87V15.5c0-5.523-4.477-10-10-10H14zm-6 10a6 6 0 016-6h20a6 6 0 016 6v19.369a3.631 3.631 0 01-6.898 1.586l-2.631-5.418a4.2 4.2 0 00-3.778-2.365h-5.386a4.2 4.2 0 00-3.778 2.365l-2.631 5.418A3.632 3.632 0 018 34.869V15.5z",clipRule:"evenodd"})))}},{key:"topic_foryou_food",value:"food",Icon:function(e){return w.createElement("svg",ir({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),tr||(tr=w.createElement("path",{fillRule:"evenodd",d:"M32.573 31.34c-.029-.197-.06-.397-.092-.597-.35-2.196-.869-4.52-1.175-5.489a11.393 11.393 0 00-2.836-4.657 11.31 11.31 0 00-4.668-2.793c-.987-.301-3.444-.95-5.729-1.4a46.377 46.377 0 00-.49-.094L11.06 37.91l21.514-6.569zm11.167.414c-.058.388-.339.703-.713.817L5.672 43.977a.522.522 0 01-.649-.653L16.291 6.023c.112-.372.42-.652.8-.715 3.497-.578 7.081-.34 10.477.695a23.13 23.13 0 019.547 5.712 23.3 23.3 0 015.801 9.525 23.397 23.397 0 01.825 10.514zM26.016 10.47c-2.265-.691-4.117-1.07-5.955-1.06l-.827 2.91.459.096c2.157.456 4.322 1.03 5.332 1.338 2.412.736 4.61 2.05 6.403 3.831a15.628 15.628 0 013.892 6.39c.363 1.152.855 3.368 1.21 5.44l.026.158 2.82-.81c.102-1.968-.152-3.766-.802-5.826a19.063 19.063 0 00-4.747-7.794 18.926 18.926 0 00-7.811-4.673zm-9.223 15.98a2.097 2.097 0 012.977 0 2.124 2.124 0 010 2.993 2.097 2.097 0 01-2.977 0 2.124 2.124 0 010-2.992zm10.42 0a2.097 2.097 0 00-2.977 0 2.124 2.124 0 000 2.993 2.097 2.097 0 002.977 0 2.124 2.124 0 000-2.992z",clipRule:"evenodd"})))}},{key:"topic_foryou_dance",value:"dance",Icon:function(e){return w.createElement("svg",er({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Ka||(Ka=w.createElement("path",{d:"M38.61 4.402c.032-.114.048-.171.06-.196a.368.368 0 01.66 0c.012.025.028.082.06.195l.032.114c.065.23.098.344.133.45.55 1.67 1.897 2.986 3.622 3.54.11.035.228.068.465.133.076.022.114.032.132.039a.344.344 0 010 .646 2.093 2.093 0 01-.132.039c-.236.065-.355.098-.465.134-1.725.553-3.072 1.869-3.622 3.538-.035.107-.068.221-.133.45l-.032.114v.001c-.032.113-.048.17-.06.195a.368.368 0 01-.66 0c-.012-.025-.028-.082-.06-.195l-.032-.114c-.065-.23-.098-.344-.133-.45-.55-1.67-1.897-2.986-3.622-3.54a12.93 12.93 0 00-.465-.133c-.076-.022-.114-.032-.132-.039a.344.344 0 010-.646c.018-.007.056-.017.132-.039.236-.065.355-.098.465-.134 1.725-.553 3.072-1.869 3.622-3.538.035-.107.068-.221.133-.45l.032-.114z"})),Ja||(Ja=w.createElement("path",{fillRule:"evenodd",d:"M24 44c-9.389 0-17-7.611-17-17 0-7.649 5.051-14.118 12-16.253V10a2 2 0 012-2h1V5a1 1 0 011-1h2a1 1 0 011 1v3h1a2 2 0 012 2v.747C35.949 12.882 41 19.351 41 27c0 9.389-7.611 17-17 17zm13.91-17c0 1.062-.12 2.097-.346 3.09H31.6a37.224 37.224 0 000-6.18h5.964c.226.993.345 2.028.345 3.09zm-9.413-3.09c.09.99.14 2.023.14 3.09 0 1.067-.05 2.1-.14 3.09h-8.994c-.09-.99-.14-2.023-.14-3.09 0-1.067.05-2.1.14-3.09h8.994zm2.704-3.092h5.262a13.958 13.958 0 00-7.478-6.807c.975 1.813 1.743 4.147 2.216 6.807zM24 13.091c.176 0 1.346.298 2.65 3.167.573 1.26 1.058 2.804 1.406 4.56h-8.112c.348-1.756.833-3.3 1.406-4.56 1.304-2.869 2.474-3.167 2.65-3.167zm-4.985.92c-.975 1.813-1.743 4.147-2.216 6.807h-5.262a13.958 13.958 0 017.478-6.807zm-2.216 19.17h-5.262a13.958 13.958 0 007.478 6.808c-.975-1.813-1.743-4.147-2.216-6.807zm12.186 6.808l.018-.032-.002.026-.016.006zm-.93-6.807c-.347 1.756-.832 3.3-1.405 4.56-1.304 2.869-2.474 3.167-2.65 3.167-.176 0-1.346-.298-2.65-3.167-.573-1.26-1.058-2.804-1.406-4.56h8.112z",clipRule:"evenodd"})),Xa||(Xa=w.createElement("path",{d:"M7.688 36.322c.026-.092.039-.137.048-.157a.294.294 0 01.528 0c.01.02.022.065.048.157l.026.09c.052.184.078.276.106.36.44 1.336 1.517 2.389 2.897 2.831.088.029.183.055.372.107h.001c.06.018.091.026.105.032a.275.275 0 010 .517l-.105.03h-.002c-.188.053-.283.08-.37.108-1.38.442-2.458 1.495-2.898 2.83a9.43 9.43 0 00-.106.36l-.026.091a1.601 1.601 0 01-.048.157.294.294 0 01-.528 0 1.601 1.601 0 01-.048-.157l-.026-.09a9.431 9.431 0 00-.106-.36c-.44-1.336-1.517-2.389-2.898-2.831a10.268 10.268 0 00-.372-.108l-.105-.03a.275.275 0 010-.517c.014-.006.044-.014.105-.031h.001c.189-.053.284-.08.371-.108 1.38-.442 2.458-1.495 2.898-2.83.028-.086.054-.177.106-.36l.026-.091z"})))}},{key:"topic_foryou_beauty",value:"beauty",Icon:function(e){return w.createElement("svg",qa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Ga||(Ga=w.createElement("path",{fillRule:"evenodd",d:"M24.928 4.25a5.99 5.99 0 011.903.705l13.257 7.654a3.692 3.692 0 011.351 5.043.308.308 0 01-.42.113L30.027 11.42l-10.5 18.186 10.601 6.677a.5.5 0 01.167.673l-1.02 1.765a.5.5 0 01-.665.192l-11.083-5.843-1.25 2.166L27.27 41.58a.308.308 0 01.113.42 3.692 3.692 0 01-5.044 1.352L9.08 35.699a5.99 5.99 0 01-2.9-6.294 5.99 5.99 0 01.704-1.902L18.635 7.15a5.99 5.99 0 016.293-2.9zM12.813 33.236l13.75-23.816-.866-.5a3 3 0 00-4.098 1.098l-10.75 18.62a3 3 0 001.098 4.098l.866.5z",clipRule:"evenodd"})),Ha||(Ha=w.createElement("path",{d:"M28.527 14.017l10.601 6.677a.5.5 0 01.167.673l-1.02 1.765a.5.5 0 01-.665.192l-11.083-5.843 2-3.464zM36.128 25.89l-10.601-6.676-2 3.464L34.61 28.52a.5.5 0 00.666-.192l1.019-1.765a.5.5 0 00-.167-.673zM22.527 24.41l10.601 6.677a.5.5 0 01.167.673l-1.02 1.764a.5.5 0 01-.665.193l-11.083-5.843 2-3.464z"})))}},{key:"topic_foryou_animals",value:"animals",Icon:function(e){return w.createElement("svg",Wa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Ua||(Ua=w.createElement("path",{fillRule:"evenodd",d:"M18 18c3.038 0 5.5-3.134 5.5-7S21.038 4 18 4s-5.5 3.134-5.5 7 2.462 7 5.5 7zm.744-4.521c.4-.51.756-1.373.756-2.479s-.356-1.97-.756-2.478C18.349 8.019 18.056 8 18 8c-.056 0-.349.019-.744.522-.4.509-.756 1.372-.756 2.478s.356 1.97.756 2.479c.395.502.688.521.744.521.056 0 .349-.019.744-.521zM9.5 28c3.038 0 5.5-2.91 5.5-6.5S12.538 15 9.5 15 4 17.91 4 21.5 6.462 28 9.5 28zm.835-4.488c.358-.422.665-1.12.665-2.012 0-.892-.307-1.59-.665-2.012-.35-.414-.66-.488-.835-.488-.176 0-.486.074-.836.488C8.307 19.91 8 20.608 8 21.5c0 .892.307 1.59.664 2.012.35.414.66.488.836.488.176 0 .486-.074.835-.488zM35.5 11c0 3.866-2.462 7-5.5 7s-5.5-3.134-5.5-7 2.462-7 5.5-7 5.5 3.134 5.5 7zm-4 0c0 1.106-.356 1.97-.756 2.479-.395.502-.688.521-.744.521-.056 0-.349-.019-.744-.521-.4-.51-.756-1.373-.756-2.479s.356-1.97.756-2.478C29.651 8.019 29.944 8 30 8c.056 0 .349.019.744.522.4.509.756 1.372.756 2.478zM38.5 28c3.038 0 5.5-2.91 5.5-6.5S41.538 15 38.5 15 33 17.91 33 21.5s2.462 6.5 5.5 6.5zm.836-4.488c.357-.422.664-1.12.664-2.012 0-.892-.307-1.59-.664-2.012-.35-.414-.66-.488-.836-.488-.175 0-.486.074-.836.488-.357.422-.664 1.12-.664 2.012 0 .892.307 1.59.664 2.012.35.414.66.488.836.488.175 0 .486-.074.836-.488zM16.508 25.027c2.978-6.721 12.04-6.697 14.985.04l1.193 2.73a7.78 7.78 0 001.81 2.57C39.586 35.123 36.398 44 29.6 44H18.42c-6.802 0-10.005-8.87-4.93-13.65a7.799 7.799 0 001.777-2.521l1.241-2.802zM29.601 40H18.42c-1.44 0-2.613-.884-3.157-2.391-.548-1.518-.259-3.19.97-4.348a11.8 11.8 0 002.69-3.812l1.242-2.802c1.567-3.537 6.11-3.53 7.662.022l1.193 2.73a11.782 11.782 0 002.744 3.89c1.228 1.147 1.52 2.812.977 4.326-.54 1.504-1.707 2.385-3.14 2.385z",clipRule:"evenodd"})))}},{key:"topic_foryou_sports",value:"sports",Icon:function(e){return w.createElement("svg",cr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em"},e),rr||(rr=w.createElement("mask",{id:"sports_svg__a"},w.createElement("path",{d:"M17.122 8.493c.81.385 1.57.859 2.266 1.408l4.465-7.734a1 1 0 00-.866-1.5h-7.02a1 1 0 00-.868.505L11.586 7.34a12.046 12.046 0 012.92.262l2.43-4.267h3.165l-2.979 5.159zM4.608 9.856a12 12 0 012.275-1.394L3.922 3.333h3.164l2.146 3.77 1.535-2.695-1.843-3.236a1 1 0 00-.87-.505h-7.02a1 1 0 00-.865 1.5l4.44 7.689zM13.092 16.122l-.805-2.48a.333.333 0 00-.634 0l-.806 2.48a.333.333 0 01-.317.23H7.923a.333.333 0 00-.196.603l2.11 1.532a.333.333 0 01.12.373l-.805 2.48c-.1.306.252.562.513.372l2.109-1.532a.333.333 0 01.392 0l2.108 1.532a.333.333 0 00.514-.373l-.806-2.48a.333.333 0 01.121-.372l2.109-1.532a.333.333 0 00-.196-.603H13.41a.333.333 0 01-.317-.23z"}),w.createElement("path",{fillRule:"evenodd",d:"M11.97 27.333a9.333 9.333 0 100-18.666 9.333 9.333 0 000 18.666zm0-2.666a6.667 6.667 0 100-13.334 6.667 6.667 0 000 13.334z",clipRule:"evenodd"}))),sr||(sr=w.createElement("path",{d:"M17.122 8.493c.81.385 1.57.859 2.266 1.408l4.465-7.734a1 1 0 00-.866-1.5h-7.02a1 1 0 00-.868.505L11.586 7.34a12.046 12.046 0 012.92.262l2.43-4.267h3.165l-2.979 5.159zM4.608 9.856a12 12 0 012.275-1.394L3.922 3.333h3.164l2.146 3.77 1.535-2.695-1.843-3.236a1 1 0 00-.87-.505h-7.02a1 1 0 00-.865 1.5l4.44 7.689zM13.092 16.122l-.805-2.48a.333.333 0 00-.634 0l-.806 2.48a.333.333 0 01-.317.23H7.923a.333.333 0 00-.196.603l2.11 1.532a.333.333 0 01.12.373l-.805 2.48c-.1.306.252.562.513.372l2.109-1.532a.333.333 0 01.392 0l2.108 1.532a.333.333 0 00.514-.373l-.806-2.48a.333.333 0 01.121-.372l2.109-1.532a.333.333 0 00-.196-.603H13.41a.333.333 0 01-.317-.23z"})),lr||(lr=w.createElement("path",{fillRule:"evenodd",d:"M11.97 27.333a9.333 9.333 0 100-18.666 9.333 9.333 0 000 18.666zm0-2.666a6.667 6.667 0 100-13.334 6.667 6.667 0 000 13.334z",clipRule:"evenodd"})),dr||(dr=w.createElement("path",{d:"M19.388 9.9l-2.475 3.143 3.63 2.858 2.31-4-3.465-2zm-2.266-1.407l-3.464-2-2.165 3.75 3.91 1.861 1.719-3.611zm6.732-6.326l3.464 2-3.465-2zm-.867-1.5v-4 4zm-7.02 0v4-4zm-.868.505l3.476 1.98-3.476-1.98zM11.586 7.34L8.11 5.36 4.58 11.562l7.133-.224-.126-3.998zm2.92.263l-.842 3.91 2.867.617 1.45-2.548-3.475-1.98zm2.43-4.268v-4h-2.325l-1.15 2.02 3.475 1.98zm3.165 0l3.464 2 3.464-6h-6.928v4zM6.883 8.461l1.697 3.622 3.945-1.85-2.178-3.772-3.464 2zM4.608 9.856l-3.464 2 2.296 3.976 3.624-2.819-2.456-3.157zm-.686-6.523v-4h-6.929l3.465 6 3.464-2zm3.164 0l3.476-1.98-1.15-2.02H7.085v4zm2.146 3.77L5.757 9.081l3.475 6.103 3.476-6.103-3.476-1.98zm1.535-2.695l3.476 1.98 1.127-1.98-1.127-1.98-3.476 1.98zM8.924 1.172L12.4-.808l-3.476 1.98zm-8.755.995l-3.464 2 3.464-2zm12.118 11.475l3.804-1.236-3.804 1.236zm.805 2.48l3.804-1.236-3.804 1.236zm-1.44-2.48l3.805 1.236-3.804-1.236zm-.805 2.48l-3.804-1.236 3.804 1.236zm-3.12.833l2.351-3.236-2.35 3.236zm2.11 1.532l-2.352 3.236 2.351-3.236zm.12.373l3.805 1.236-3.805-1.236zm-.805 2.48l3.804 1.235-3.804-1.236zm.513.372l-2.351-3.236 2.35 3.236zm2.109-1.532l-2.351-3.236 2.35 3.236zm.392 0l2.35-3.236-2.35 3.236zm2.108 1.532l-2.35 3.236 2.35-3.236zm.514-.373l3.804-1.236-3.804 1.236zm-.806-2.48l-3.804 1.237 3.804-1.236zm.121-.372l2.351 3.236-2.351-3.236zm2.109-1.532l-2.351-3.236 2.351 3.236zm5.651-10.197a16.005 16.005 0 00-3.021-1.877l-3.44 7.223a8 8 0 011.511.94l4.95-6.286zM20.39.167L15.924 7.9l6.928 4 4.466-7.734-6.929-4zm2.599 4.5c-2.31 0-3.753-2.5-2.599-4.5l6.929 4c1.924-3.334-.482-7.5-4.33-7.5v8zm-7.02 0h7.02v-8h-7.02v8zm2.607-1.515a3 3 0 01-2.607 1.515v-8a5 5 0 00-4.345 2.526l6.952 3.959zm-3.513 6.167l3.513-6.167-6.952-3.96L8.11 5.36l6.952 3.959zM11.97 3.333c-.17 0-.34.003-.51.008l.252 7.996c.085-.002.171-.004.258-.004v-8zm3.377.358a16.048 16.048 0 00-3.377-.358v8c.585 0 1.152.063 1.694.18l1.683-7.822zm-1.886-2.337L11.03 5.622l6.952 3.96 2.43-4.269-6.951-3.959zm6.64-2.02h-3.165v8h3.165v-8zm.485 11.159l2.979-5.16-6.928-4-2.98 5.16 6.93 4zM5.185 4.84a16 16 0 00-3.033 1.859l4.912 6.314a8.001 8.001 0 011.516-.93L5.185 4.84zm-4.727.493l2.96 5.129 6.929-4-2.961-5.129-6.928 4zm6.628-6H3.922v8h3.164v-8zm5.622 5.79l-2.146-3.77-6.952 3.96 2.147 3.769 6.951-3.96zM7.291 2.428L5.757 5.123l6.951 3.959 1.535-2.694-6.952-3.96zm-1.843.723l1.843 3.236 6.952-3.958L12.4-.808l-6.952 3.96zm2.607 1.516A3 3 0 015.448 3.15L12.4-.808a5 5 0 00-4.345-2.525v8zm-7.02 0h7.02v-8h-7.02v8zm2.598-4.5c1.155 2-.289 4.5-2.598 4.5v-8c-3.85 0-6.255 4.166-4.33 7.5l6.928-4zm4.44 7.689L3.632.166l-6.928 4 4.44 7.69 6.927-4zM14.635 18a2.667 2.667 0 01-2.666 2.667v8c5.89 0 10.666-4.776 10.666-10.667h-8zm-2.666-2.667A2.667 2.667 0 0114.636 18h8c0-5.891-4.775-10.667-10.666-10.667v8zM9.303 18a2.667 2.667 0 012.667-2.667v-8C6.079 7.333 1.303 12.11 1.303 18h8zm2.667 2.667A2.667 2.667 0 019.303 18h-8c0 5.891 4.776 10.667 10.667 10.667v-8zM17.303 18a5.333 5.333 0 01-5.333 5.333v8c7.363 0 13.333-5.97 13.333-13.333h-8zm-5.333-5.333A5.333 5.333 0 0117.303 18h8c0-7.364-5.97-13.333-13.333-13.333v8zM6.636 18a5.333 5.333 0 015.334-5.333v-8C4.606 4.667-1.364 10.637-1.364 18h8zm5.334 5.333A5.333 5.333 0 016.636 18h-8c0 7.364 5.97 13.333 13.334 13.333v-8zm-3.488-8.455l.806 2.48 7.608-2.473-.805-2.479-7.609 2.472zm6.975 0c-1.098 3.379-5.877 3.378-6.975 0l7.609-2.472c-1.297-3.992-6.945-3.992-8.243 0l7.609 2.472zm-.806 2.48l.806-2.48-7.609-2.472-.805 2.48 7.608 2.472zm-4.12 2.994a4.333 4.333 0 004.12-2.994l-7.608-2.473a3.667 3.667 0 013.487-2.533v8zm-2.608 0h2.607v-8H7.923v8zm2.155-6.633c2.874 2.088 1.397 6.633-2.155 6.633v-8c-4.198 0-5.943 5.372-2.547 7.839l4.702-6.472zm2.11 1.532l-2.11-1.532-4.702 6.472 2.11 1.532 4.701-6.472zm1.574 4.845a4.333 4.333 0 00-1.575-4.845l-4.702 6.472a3.667 3.667 0 01-1.332-4.1l7.609 2.473zm-.806 2.48l.806-2.48-7.609-2.472-.805 2.479 7.608 2.472zm-5.642-4.1c2.873-2.088 6.74.721 5.642 4.1l-7.608-2.473c-1.298 3.992 3.272 7.312 6.668 4.845l-4.702-6.472zm2.109-1.532l-2.11 1.532 4.703 6.472 2.109-1.532-4.702-6.473zm5.094 0a4.333 4.333 0 00-5.094 0l4.702 6.472a3.667 3.667 0 01-4.31 0l4.702-6.473zm2.109 1.532l-2.11-1.532-4.702 6.472 2.11 1.532 4.702-6.472zm-5.643 4.1c-1.097-3.379 2.769-6.188 5.643-4.1l-4.703 6.472c3.396 2.467 7.966-.853 6.669-4.845l-7.609 2.472zm-.805-2.48l.805 2.48 7.609-2.473-.806-2.48-7.608 2.473zm1.574-4.845a4.333 4.333 0 00-1.574 4.845l7.608-2.472a3.667 3.667 0 01-1.332 4.1l-4.702-6.473zm2.109-1.532l-2.11 1.532 4.703 6.472 2.11-1.532-4.703-6.472zm2.155 6.633c-3.552 0-5.029-4.545-2.155-6.633l4.702 6.472c3.396-2.467 1.65-7.84-2.547-7.84v8zm-2.607 0h2.607v-8H13.41v8zm-4.121-2.994a4.333 4.333 0 004.121 2.994v-8a3.667 3.667 0 013.487 2.534l-7.608 2.472z",mask:"url(#sports_svg__a)"})))}}],vr=()=>{const e=(0,Ji.Q)(),t=(0,ee.fz)($a),{colors:i}=(0,a.u)(),{pathname:n}=(0,j.TH)(),r=(0,j.LX)(n,{path:$.Ad.topics,exact:!0}),s=null==r?void 0:r.params.name,l=(0,w.useCallback)((e=>{const i=e.currentTarget.dataset.topic;t.handleEnterTopic({topic_name:i})}),[t]);return(0,o.jsxs)(ur,{children:[(0,o.jsx)(gr,{children:e("topic_foryou_topics_header")},void 0),_r.map((({key:t,value:n,Icon:a})=>{const r=s===n;return(0,o.jsxs)(mr,Object.assign({"data-topic":n,to:$.zp.topics({name:n}),onClick:l},{children:[r&&(0,o.jsx)("h1",Object.assign({style:{display:"none"}},{children:e(t)}),void 0),(0,o.jsx)(a,{width:32,height:32,fill:r?i.Primary:i.Primary2},void 0),(0,o.jsx)(hr,Object.assign({active:r},{children:e(t)}),void 0)]}),t)}))]},void 0)},yr=(0,w.memo)((function({lang:e,slot:t,transStatus:i,extraTop:n,extraWidth:a}){const{user:r,isSideNavActive:s,topicLab:l,region:d}=(0,U.mp)(G.G,{selector:e=>{var t,i,o;return{user:null===(t=e.appContext)||void 0===t?void 0:t.$user,isSideNavActive:e.sideNavActive,topicLab:(0,X.x)(null===(i=e.appContext)||void 0===i?void 0:i.$abTestVersion,"video_topic"),region:null===(o=e.appContext)||void 0===o?void 0:o.$region}},dependencies:[]}),{pathname:c}=(0,j.TH)(),p=ui(),{permissionInfo:u}=(0,U.mp)(ki),g=Boolean(r),m=(0,w.useRef)(null),h=(0,w.useRef)(null),[{profileUserId:_,offsetTop:v,offsetLeft:y},f]=(0,U.b7)(za,{selector:({profileUserId:e,itemOffset:t,offsetLeft:i})=>({profileUserId:e,offsetTop:t,offsetLeft:i}),dependencies:[]}),[b,x]=(0,w.useState)(!1),k=(0,w.useCallback)(((e,t,i)=>{var o,n;const a=document.documentElement.scrollTop||document.body.scrollTop,r=null!==(n=null===(o=h.current)||void 0===o?void 0:o.scrollTop)&&void 0!==n?n:0;let s;window.innerWidth<1072?(s=t-r+a-se.Mz+20,x(!0)):(s=t-r+a+10,x(!1)),f.itemEnter({userId:e,itemOffset:s,timeout:1e3,offsetLeft:i})}),[f]),S=(0,w.useCallback)((()=>{f.itemEnter({userId:null,timeout:0})}),[f]),C=(0,w.useCallback)((()=>{f.itemEnter({userId:_,timeout:0})}),[f,_]),T=(0,w.useCallback)((()=>{f.itemEnter({userId:null,timeout:500})}),[f]),O=(0,w.useCallback)((()=>{_&&f.itemEnter({userId:null,timeout:0})}),[f,_]);(0,w.useEffect)((()=>{const e=di()((()=>{f.itemEnter({userId:null,timeout:0})}),1e3);return window.addEventListener("scroll",e),()=>{window.addEventListener("scroll",e)}}),[f]);const I=(0,U.qj)(Qi);(0,w.useEffect)((()=>{(null==r?void 0:r.uid)&&!p&&(null==u?void 0:u.showComputerLiveEntrance)&&I.getCreateRoomInfo({})}),[I,r,null==u?void 0:u.showComputerLiveEntrance,p]);const P=b,E=(0,U.qj)(ki);return(0,w.useEffect)((()=>{(null==r?void 0:r.uid)&&E.getLivePermission()}),[E,r]),(0,w.useEffect)((()=>{_&&T()}),[T,c]),(0,o.jsxs)(Ca,Object.assign({transStatus:i,extraWidth:a},{children:[(0,o.jsxs)(wa,Object.assign({extraTop:n,extraWidth:a,Wrapper:ja,onScroll:O,ref:h},{children:[(0,o.jsx)(Fa,{scrollRef:h},void 0),(null==u?void 0:u.showComputerLiveEntrance)&&(0,o.jsx)(na,{hintActive:s,scrollRef:h},void 0),!g&&(0,o.jsx)(la,{},void 0),"V2"===l&&"US"===d&&(0,o.jsx)(vr,{},void 0),t||(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ro,{onEnterItem:k,onLeaveItem:S},void 0),g&&(0,o.jsx)(Lo,{ref:m},void 0),(0,o.jsx)(an,{},void 0),(0,o.jsx)(Ia,{},void 0)]},void 0),(0,o.jsx)(xn,{lang:e},void 0)]}),void 0),_&&(0,o.jsx)(ci.C,{followTheme:"primary",paddingTop:24,paddingStart:P?20:0,hideSignature:!0,fixedLeft:P?52:y,top:v,uniqueId:_,onMouseEnter:C,onMouseLeave:T},void 0)]}),void 0)}));var fr=i(9086),br=i.n(fr),xr=i(55578),kr=i(82394),Sr=i(45257);const wr=[{"*, *::before, *::after":{boxSizing:"border-box"},"body,h1,h2,h3,h4,p,figure,blockquote,dl,dd":{margin:0},'ul[role="list"], ol[role="list"]':{listStyle:"none"},"html:focus-within":{scrollBehavior:"smooth"},body:{minHeight:"100vh",textRendering:"optimizeSpeed",lineHeight:1.5},"a:not([class])":{textDecorationSkipInk:"auto"},"img, picture":{maxWidth:"100%",display:"block"},"input,button,textarea,select":{font:"inherit"},"@media (prefers-reduced-motion: reduce)":{"html:focus-within":{scrollBehavior:"auto"},"*,*::before,*::after":{animationDuration:"0.01ms !important",animationIterationCount:"1 !important",transitionDuration:"0.01ms !important",scrollBehavior:"auto !important"}},"@supports (-webkit-touch-callout: none)":{body:{minHeight:"-webkit-fill-available"}}}];var Cr=i(73594),jr=i(31418),Tr=i(40809);const Or=(0,re.Z)("div",{target:"eyhjz840"})({height:"100vh",display:"flex",flexDirection:"column"},"label:DivErrorBoundaryContainer;");class Ir extends w.Component{constructor(){super(...arguments),this.state={isNetOffline:!1,hasError:!1},this.handleOnlineStatusChange=()=>{this.setState({isNetOffline:!navigator.onLine})}}get iconElem(){const{hasError:e}=this.state;return e?(0,o.jsx)(Cr.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0):(0,o.jsx)(jr.Z,{width:90,height:90,fill:"rgba(128, 130, 133, 1)"},void 0)}get text(){const{hasError:e}=this.state;return e?{title:"Page not available",desc:"server_error_sub",button:"try_again_btn"}:{title:"network_error_title",desc:"network_error_sub",button:"try_again_btn"}}componentDidMount(){window.addEventListener("online",this.handleOnlineStatusChange),window.addEventListener("offline",this.handleOnlineStatusChange)}componentWillUnmount(){window.removeEventListener("online",this.handleOnlineStatusChange),window.removeEventListener("offline",this.handleOnlineStatusChange)}handleRetry(){window.location.reload()}componentDidCatch(e,t){const{onCatchError:i}=this.props;i(e,t),this.setState({hasError:!0})}render(){const{isNetOffline:e,hasError:t}=this.state,{children:i,isMobile:n}=this.props,{t:a}=this.context;if(e||t){const{title:e,desc:t,button:i}=this.text;return n?(0,o.jsx)(Or,{children:(0,o.jsx)(Tr.T,{brightness:0,isFullScreen:!0,iconElem:this.iconElem,title:a(e),desc:a(t),buttonText:a(i),onButtonClick:this.handleRetry},void 0)},void 0):(0,o.jsx)(Tr.T,{isFullScreen:!0,onButtonClick:this.handleRetry,iconElem:this.iconElem,title:a(e),desc:a(t),buttonText:a(i)},void 0)}return i}}Ir.contextType=u.OO;let Pr=class{constructor(e){this.fetch=e}reportRenderError(e){return this.fetch.get("/node/page/error",{query:{page:e}})}};function Er({children:e,isMobile:t}){var i;const n=(0,ee.fz)(xr.i),[r,s]=(0,U.b7)(G.G,{selector:e=>({lang:e.lang,appContext:e.appContext&&br()(e.appContext,"statusCode"),initialized:e.initialized}),dependencies:[]}),{pathname:l,search:d}=(0,j.TH)(),c=(0,Ji.H)(t,null===(i=r.appContext)||void 0===i?void 0:i.$isBot);(0,w.useEffect)((()=>{var e,t,i,o,a;const l=null!==(o=null!==(i=null===(t=null===(e=(0,S.parse)(d))||void 0===e?void 0:e.lang)||void 0===t?void 0:t.toString())&&void 0!==i?i:document.documentElement.getAttribute("lang"))&&void 0!==o?o:"en";s.init({lang:l,starlingNs:c}),"others"===(null===(a=r.appContext)||void 0===a?void 0:a.$botType)&&n.checkTTwid(),n.initTargetIdcRequest().subscribe()}),[s]);const p=(0,ee.fz)(Mi.GV);(0,kr.L)((()=>{r.appContext&&p.setAppContext(r.appContext)}),[p,r.appContext]);const{GlobalModalProvider:u,value:g}=(0,Sr.R)(),{value:m}=(0,w.useContext)(A),h=(0,w.useMemo)((()=>L({isDark:m,isMobile:t,lang:r.lang})),[m,t,r.lang]),_=(x={isDark:m,lang:r.lang,isMobile:t},(0,w.useMemo)((()=>{return e=L(x),t=x.isMobile,[wr,{body:{fontFamily:e.fontFamilies.Proxima,fontSize:e.text.fontSize,color:e.colors.TextPrimary,backgroundColor:e.colors.BGPrimary,overscrollBehavior:"contain",direction:e.direction,a:{color:e.colors.TextPrimary,transition:"color 250ms",textDecoration:"none",cursor:"pointer"},"a:visited":{color:e.colors.TextPrimary},"a:hover":{color:e.colors.TextPrimary,textDecoration:"underline"},"a:active":{color:e.colors.TextPrimary},"a:focus":{color:e.colors.TextPrimary},input:{"::-ms-clear":{display:"none",width:0,height:0},"::-ms-reveal":{display:"none",width:0,height:0},"::-webkit-search-decoration, ::-webkit-search-cancel-button, ::-webkit-search-results-button, ::-webkit-search-results-decoration":{display:"none"}},"&.hidden":{overflow:"hidden"},WebkitFontSmoothing:"antialiased"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff2) format("woff2"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Semibold"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff2) format("woff2"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.woff) format("woff"),url(//lf16-tiktok-common.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/fonts/ProximaNova-Semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"ProximaNova",src:'local("ProximaNova-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/Proxima-Nova-Bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Regular"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-regular.otf) format("opentype")',fontWeight:400,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Medium"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-medium.otf) format("opentype")',fontWeight:500,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Semibold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-semibold.otf) format("opentype")',fontWeight:600,fontStyle:"normal",fontDisplay:"swap"}},{"@font-face":{fontFamily:"SofiaPro",src:'local("SofiaPro-Bold"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.woff) format("woff"),url(//lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/falcon/tiktok_fonts/sofiapro-bold.otf) format("opentype")',fontWeight:700,fontStyle:"normal",fontDisplay:"swap"}},{html:t?{}:{body:{overflowY:"overlay"},"*":{"::-webkit-scrollbar":{borderRadius:"0",width:"8px"},"::-webkit-scrollbar-track":{borderRadius:"0",backgroundColor:"rgba(0, 0, 0, 0)"},"::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, .15)"}}}}];var e,t}),[x])),v=(0,ee.fz)(vi.n),y=(0,ee.fz)(Pr),f=(0,w.useMemo)((()=>(0,Te.BB)(l)),[l]),b=(0,w.useCallback)(((e,t)=>{try{y.reportRenderError(f),v.captureMessage(`Page render Error: ${e.message}`,"fatal",{page:f}),console.info("Error occurs in render time:",e),console.info("Error occurs in component:",t.componentStack)}catch(e){console.error("Error occurs when reporting error:",e)}}),[y,f,v]);var x;return r.initialized?(0,o.jsx)(u,Object.assign({value:g},{children:(0,o.jsx)(a.a,Object.assign({theme:h},{children:(0,o.jsxs)(Ir,Object.assign({onCatchError:b,isMobile:t},{children:[(0,o.jsx)($o.xB,{styles:_},void 0),e]}),void 0)}),void 0)}),void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($o.xB,{styles:{"#app":{justifyContent:"center"}}},void 0),(0,o.jsx)(Wt.g,{center:!0,style:{margin:"auto"}},void 0)]},void 0)}Pr=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Pr);var Lr=i(33348),Ar=i.n(Lr);let Rr=class{constructor(e){this.fetch=e}getComplianceSettings(){return this.fetch.get("/api/compliance/settings/",{query:{aid:1988,fromWeb:1}}).pipe(this.errorHandler)}validateAge(e){return this.fetch.post("https://www.tiktok.com/api/v3/register/verification/age/",{body:Ar().stringify({fromWeb:1,source:"web",session_registered:1,birthday:e,tt_csrf_token:this.fetch.csrfToken})}).pipe(this.errorHandler)}errorHandler(e){return e.pipe((0,hi.K)((e=>(0,mi.of)(Object.assign({error_code:e.error_code||-1},e)))))}};Rr=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Rr);let Mr=class extends de.D{constructor(e,t){super(),this.service=e,this.pnsReport=t,this.defaultState={ageGateAction:0,registerLimited:!1,initial:!1,birthday:"",checkAgeLoading:!1,ageEligible:!1}}setYear(e,t){e.year=t}setMonth(e,t){e.month=t}setDate(e,t){e.date=t}setBirthday(e,t){const{year:i,month:o,date:n}=t,a=`${i}-${o<10?`0${o}`:o}-${n<10?`0${n}`:n}`;a!==e.birthday&&(e.birthday=a,e.ageEligible=!1,e.ageErrorMsg="",e.showAgeConfirm=!1)}setAgeGateSetting(e,t){e.initial=!0,e.ageGateAction=t.action,e.registerLimited=t.registerLimited}setCheckAgeLoading(e,t){e.checkAgeLoading=t}setAgeCheckResult(e,t){e.ageErrorMsg=t.ageErrorMsg,e.ageEligible=t.ageEligible,e.showErrorByToast=Boolean(t.showErrorByToast),e.errorCode=t.errorCode}setShowAgeConfirm(e,t){e.showAgeConfirm=t}getComplianceSettings(e){return e.pipe((0,gi.z)((()=>this.service.getComplianceSettings().pipe((0,me.U)((e=>{if(0===(null==e?void 0:e.status_code)){const{age_gate_info:t={},device_limit_register_expired:i=!0}=e,{register_age_gate_action:o=2}=t;return this.getActions().setAgeGateSetting({registerLimited:!i,action:o})}return this.noop()}))))))}validateAge(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([{canSkip:e},{birthday:t,ageEligible:i,ageGateAction:o}])=>e||i||0===o?(0,mi.of)(this.noop()):this.service.validateAge(t).pipe((0,me.U)((e=>{const{is_eligible:t,status_code:i,status_msg:o,register_age_gate_post_action:n}=e;let a=o;return this.pnsReport.handleAgeGateResponse(t,i),t?this.getActions().setAgeCheckResult({ageErrorMsg:"",ageEligible:!0,errorCode:i}):t||1!==n?this.getActions().setAgeCheckResult({ageErrorMsg:a||"Sorry, something went wrong, please try again later",ageEligible:!1,showErrorByToast:!1,errorCode:i}):(a=a||"mus_agegate_not_eligible",this.getActions().setShowAgeConfirm(!0))}))))))}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Mr.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setYear",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setMonth",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setDate",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setBirthday",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setAgeGateSetting",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setCheckAgeLoading",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setAgeCheckResult",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"setShowAgeConfirm",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"getComplianceSettings",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Mr.prototype,"validateAge",null),Mr=(0,g.__decorate)([(0,pe.Y)("AgeGateModule"),(0,g.__metadata)("design:paramtypes",[Rr,ae])],Mr);var Dr=i(14127),Fr=i(44618),Nr=i(85184);const Br=(0,re.Z)("div",{target:"e1cgu1qo0"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima"}),{border:`1px solid ${e.colors.LineSecondary2}`,fontSize:"15px",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",height:"44px",minWidth:"300px",position:"relative",cursor:"pointer",marginBottom:"16px",wordBreak:"keep-all",whiteSpace:"nowrap"}]),"label:DivBoxContainer;"),zr=(0,re.Z)("div",{target:"e1cgu1qo1"})((({theme:e})=>[(0,se.YJ)({direction:e.direction,start:"12px"}),{fontSize:"20px",position:"absolute",display:"flex"}]),"label:DivIconContainer;"),$r=e=>{const{text:t,Icon:i}=e;return(0,o.jsxs)(Br,Object.assign({onClick:e.onClick},{children:[(0,o.jsx)(zr,{children:(0,o.jsx)(i,{},void 0)},void 0),t]}),void 0)},Ur=(0,re.Z)("a",{target:"epl6mg0"})((({theme:e,textTheme:t,underline:i=!0})=>[(0,se.GI)({theme:e,color:"primary"===t?"Primary":"TextSecondary",fontWeight:"semiBold"}),{fontSize:"12px","&:hover, &:focus":{textDecoration:i?"underline":"none",textDecorationColor:"primary"===t?e.colors.Primary:e.colors.TextSecondary}}]),"label:ALink;"),Wr=({path:e,text:t,children:i,className:n,replace:a=!1,textTheme:r,underline:s})=>{const l=(0,j.k6)(),d=(0,w.useCallback)((t=>{t.preventDefault(),t.stopPropagation(),a?l.replace(e):l.push(e)}),[l,e,a]);return(0,o.jsxs)(Ur,Object.assign({onClick:d,href:e,className:n,textTheme:r,underline:s},{children:[t,i]}),void 0)};var Gr=i(89976),Hr=i(15188),qr=i(62728),Zr=i(92075),Vr=i(61851),Qr=i(77153),Yr=i(22167),Kr=i(34334),Jr=i(89314);const Xr={loginTitle:"common_login_panel_title",loginSlogan:"common_login_panel_copy",signUpTitle:"common_registration_panel_title",signUpSlogan:"common_registration_panel_copy",aid:"1459",disableSignup:!1,isSecurityVerification:!1},es={tv:{loginTitle:"tv_login_title",loginSlogan:"tv_login_tiktoktv-desc",signUpTitle:"tv_sign_up_title",signUpSlogan:"tv_login_tiktoktv-desc"},ageVerify:{loginTitle:"age_verify_login_title",loginSlogan:"age_verify_login_intro",disableSignup:!0,isSecurityVerification:!0},dataExport:{loginTitle:"data_export_login_title",loginSlogan:"data_export_login_intro",disableSignup:!0,isSecurityVerification:!0},seller:{aid:"4068"},recharge:{loginTitle:"webapp_coin_recharge_login",signUpTitle:"WebApp_coin_recharge_9"},search:{loginTitle:"login_to_search",signUpTitle:"login_to_search"}},ts={inexistent:{title:"age_verify_login_inexistent",subTitle:"age_verify_login_inexistent_intro"},ineligible:{title:"age_verify_login_ineligible",subTitle:"age_verify_login_ineligible_intro"}};let is=class{constructor(e){this.fetch=e}getUrlParams(e){const t=e?e.split("?")[1]:window.location.search;return(0,S.parse)(t)}getLoginConfig(){return this.fetch.get("/node-webapp/api/login-config",{baseUrlType:2})}};is=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],is);let os=class{constructor(e){this.service=e,this.getLoginType=e=>{var t;const i=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null==e?void 0:e.enter_method;if(!i)return"webapp";const o=Array.isArray(i)?i[0]:i;return es[o]?i:"webapp"},this.getShowAlertMessageType=(e,t)=>{const{message:i}=t;if(!i)return;const o=Array.isArray(i)?i[0]:i;return"ageVerify"===e&&ts[o]?o:void 0}}getLoginContext(e){var t;const i=this.service.getUrlParams(e),o=this.getLoginType(i),n=this.getShowAlertMessageType(o,i),a=null!==(t=es[o])&&void 0!==t?t:{},{redirect_url:r=""}=i;return this.service.getLoginConfig().pipe((0,gi.z)((e=>{if(0!==e.statusCode)throw new Error("get api error");return(0,mi.of)(Object.assign({},e.config))})),(0,hi.K)((()=>(0,mi.of)({emailSuffixConfig:[],platformConfig:{show_num:3,order:"FACEBOOK,GOOGLE,TWITTER,INSTAGRAM"},disableSignup:!1,forceLogin:!1,emailConsent:!1,ttpConfig:{open:!0,syncSeverList:[{name:"global",domain:"https://m.tiktok.com"},{name:"ttp",domain:"https://us.tiktok.com"}]}})))).pipe((0,me.U)((e=>Object.assign(Object.assign(Object.assign(Object.assign({},Xr),a),{loginType:o,showAlertMessageType:n,redirectUrl:Array.isArray(r)?r[0]:null!=r?r:""}),e))))}};os=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[is])],os);let ns=class extends de.D{constructor(e,t){super(),this.service=e,this.modalLogin=t,this.defaultState={initialized:!1,platformConfig:{order:""},emailSuffixConfig:[]}}setContext(e,t){for(const i in t)e[i]=t[i]}setInitialized(e,t){e.initialized=t}setShowAlertMessageType(e,t){e.showAlertMessageType=t}init(e){return e.pipe((0,ge.M)(this.modalLogin.state$),(0,gi.z)((([e,{url:t,loginModalShow:i}])=>this.service.getLoginContext(i?t:void 0).pipe((0,he.z)((e=>(0,mi.of)(this.getActions().setContext(e),this.getActions().setInitialized(!0)))),(0,Si.l)(this.terminate())))))}};function as(e,t){return(0,U.mp)(ns,{selector:t=>{const i=t;return ie()(i,...e())},dependencies:t})}(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],ns.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],ns.prototype,"setContext",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],ns.prototype,"setInitialized",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],ns.prototype,"setShowAlertMessageType",null),(0,g.__decorate)([(0,ce.Qm)({ssr:!0}),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ns.prototype,"init",null),ns=(0,g.__decorate)([(0,pe.Y)("LoginContextModule"),(0,g.__metadata)("design:paramtypes",[os,K.r])],ns);var rs=i(49189),ss=i.n(rs),ls=i(52078);const ds={1002:"common_registration_phone_input_error",1003:"common_registration_phone_input_error",1054:"common_login_reset_phone_input_error"},cs={1011:"common_login_reset_email_input_error",1202:"common_registration_phone_sms_error"},ps={1039:"login_risk_SMS_1",1091:"passport_uid_banned",1203:"mus_error_code",1054:"common_login_reset_phone_input_error",1051:"common_registration_password_error",1382:"createpw_error_1",8:"login_expired",2027:"login_page_lock",2028:"login_page_lock"},us=[1203];var gs=i(64505),ms=i(55524),hs=i(54328);const _s=(e,t,i)=>{switch(e){case 1027:case 3250:return"common_registration_username_error_format";case 3251:return"common_registration_username_error_short";case 3252:return"common_registration_username_error_long";case 3253:return"common_registration_username_error_period";case 3254:return"common_registration_username_error_number";case 1024:case 1028:return"common_registration_username_error_ sensitivity";case 0:return;default:return null!=i?i:t?"common_registration_username_error_occupied":"common_registration_username_error_ sensitivity"}},vs=e=>-1!==[1340,1341].indexOf(e)||-1!==[2020,2025,2032,2033,2031,2046].indexOf(e)||-1!==[1357,1384].indexOf(e);let ys=class{constructor(){this.setPlatform=e=>{this.platform=e},this.event=(e,t)=>{Q.WB.event(e,Object.assign({platform:this.platform},t))},this.handlePageView=()=>{Q.WB.event("page_view",{enter_from:"login"})},this.loginNotify=()=>{Q.WB.event("login_notify")},this.LoginNotifyClose=e=>{Q.WB.config({commonEventParams:{page_name:Q.WB.commonParams.enter_from}}),this.event("login_notify_close",e)},this.clickSignUp=()=>{Q.WB.event("click_sign_up")},this.enterSignUp=()=>{Q.WB.event("enter_sign_up",{enter_type:"click_sign_up"})},this.clickLoginButton=()=>{Q.WB.event("click_login_button")},this.sendSms=e=>{Q.WB.event("send_sms",e)},this.sendMail=e=>{Q.WB.event("send_mail",e)},this.sendSmsResult=e=>{Q.WB.event("monitor_send_sms",e)},this.sendMailResult=e=>{Q.WB.event("monitor_send_email_code",e)},this.loginSubmit=e=>{this.event("login_submit",{enter_type:(null==e?void 0:e.signUp)?"click_sign_up":"click_login"})},this.loginSuccess=e=>{this.event("login_success",{enter_type:e.signUp?"click_sign_up":"click_login",is_register:e.is_register}),"force_reset_pwd_by_email"!==this.platform&&"force_reset_pwd_by_phone"!==this.platform||this.forceResetSuccess()},this.loginFailure=e=>{this.event("login_failure",{enter_type:e.signUp?"click_sign_up":"click_login",error_code:e.error_code})},this.thirdPartyLoginResult=e=>{this.event("monitor_login_thirdparty",e)},this.clickQrCode=()=>{this.platform="QRcode",this.event("click_QR_login")},this.scanQrCode=()=>{this.event("scan_QR_login")},this.ageGateShow=()=>{this.event("age_gate_show",{enter_type:"click_sign_up"})},this.twoStepNotify=e=>{this.event("login_two_step_verification_notify",e)},this.twoStepSubmit=e=>{this.event("login_two_step_verification_submit",e)},this.twoStepResult=e=>{this.event("login_two_step_verification_result",e)},this.forceResetSubmit=()=>{this.event("forced_pwchange_submit")},this.forceResetSuccess=()=>{this.event("forced_pwchange_success")},this.showEmailConsent=()=>{Q.WB.event("show_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version"})},this.clickEmailConsent=e=>{Q.WB.event("click_button_consent_check_box",{page_name:"email_signup_page",exp_name:"onboarding_collect_email_consent",text_type:"long_version",status:e.checked?"checked":"unchecked"})},this.privateNotifyShow=()=>{Q.WB.event("private_notify_show")},this.privateNotifyClick=e=>{Q.WB.event("private_notify_click",e)},this.rigisterClickNext=e=>{Q.WB.event("register_click_next",e)},this.thirdRegister=()=>{Q.WB.event("monitor_third_register")}}};ys=(0,g.__decorate)([(0,ne.G)()],ys);const fs=[{label:"A",lists:[{name:"Afghanistan",shortname:"AF",code:93,key:"afghanistan"},{name:"land Islands",shortname:"AX",code:35818,key:"land_islands"},{name:"Albania",shortname:"AL",code:355,key:"albania"},{name:"Algeria",shortname:"DZ",code:213,key:"algeria"},{name:"American Samoa",shortname:"AS",code:1684,key:"american_samoa"},{name:"Andorra",shortname:"AD",code:376,key:"andorra"},{name:"Angola",shortname:"AO",code:244,key:"angola"},{name:"Anguilla",shortname:"AI",code:1264,key:"anguilla"},{name:"Antigua & Barbuda",shortname:"AG",code:1268,key:"antigua_and_barbuda"},{name:"Argentina",shortname:"AR",code:54,key:"argentina"},{name:"Armenia",shortname:"AM",code:374,key:"armenia"},{name:"Aruba",shortname:"AW",code:297,key:"aruba"},{name:"Ascension Island",shortname:"SH",code:247,key:"ascension"},{name:"Australia",shortname:"AU",code:61,key:"australia"},{name:"Austria",shortname:"AT",code:43,key:"austria"},{name:"Azerbaijan",shortname:"AZ",code:994,key:"azerbaijan"}]},{label:"B",lists:[{name:"Bahamas",shortname:"BS",code:1242,key:"bahamas"},{name:"Bahrain",shortname:"BH",code:973,key:"bahrain"},{name:"Bangladesh",shortname:"BD",code:880,key:"bangladesh"},{name:"Barbados",shortname:"BB",code:1246,key:"barbados"},{name:"Barbuda",shortname:"AG",code:1268,key:"barbuda"},{name:"Belarus",shortname:"BY",code:375,key:"belarus"},{name:"Belgium",shortname:"BE",code:32,key:"belgium"},{name:"Belize",shortname:"BZ",code:501,key:"belize"},{name:"Benin",shortname:"BJ",code:229,key:"benin"},{name:"Bermuda",shortname:"BM",code:1441,key:"bermuda_island"},{name:"Bhutan",shortname:"BT",code:975,key:"bhutan"},{name:"Bolivia",shortname:"BO",code:591,key:"bolivia"},{name:"Bosnia & Herzegovina",shortname:"BA",code:387,key:"bosnia_and_herzegovina"},{name:"Botswana",shortname:"BW",code:267,key:"botswana"},{name:"Brazil",shortname:"BR",code:55,key:"brazil"},{name:"British Indian Ocean Territory",shortname:"IO",code:246,key:"british_indian_ocean_territory"},{name:"British Virgin Islands",shortname:"VG",code:1284,key:"british_virgin_islands"},{name:"Brunei",shortname:"BN",code:673,key:"brunei"},{name:"Bulgaria",shortname:"BG",code:359,key:"bulgaria"},{name:"Burkina-faso",shortname:"BF",code:226,key:"burkina_faso"},{name:"Burundi",shortname:"BI",code:257,key:"burundi"}]},{label:"C",lists:[{name:"Cameroon",shortname:"CM",code:237,key:"cameroon"},{name:"Canada",shortname:"CA",code:1,key:"canada"},{name:"Cape Verde",shortname:"CV",code:238,key:"cape_verde"},{name:"Caribbean Netherlands",shortname:"BQ",code:5997,key:"caribbean_netherlands"},{name:"Cayman Is.",shortname:"KY",code:1345,key:"cayman_islands"},{name:"Central African Republic",shortname:"CF",code:236,key:"central_african_republic"},{name:"Chad",shortname:"TD",code:235,key:"chad"},{name:"Chile",shortname:"CL",code:56,key:"chile"},{name:"China mainland",shortname:"CN",code:86,key:"china_mainland"},{name:"Christmas Island",shortname:"CX",code:61,key:"christmas_island"},{name:"Cocos (Keeling) Islands",shortname:"CC",code:61,key:"cocos_keeling_islands"},{name:"Colombia",shortname:"CO",code:57,key:"colombia"},{name:"Comoros",shortname:"KM",code:269,key:"comoros"},{name:"Congo - Brazzaville",shortname:"CG",code:242,key:"congo"},{name:"Congo - Kinshasa",shortname:"CD",code:243,key:"congo_kinshasa"},{name:"Cook Is.",shortname:"CK",code:682,key:"cook_islands"},{name:"Costa Rica",shortname:"CR",code:506,key:"costa_rica"},{name:"Croatia",shortname:"HR",code:385,key:"croatia"},{name:"Curaao",shortname:"CW",code:5999,key:"curaao"},{name:"Cyprus",shortname:"CY",code:357,key:"cyprus"},{name:"Czechia",shortname:"CZ",code:420,key:"czech_republic"}]},{label:"D",lists:[{name:"Denmark",shortname:"DK",code:45,key:"denmark"},{name:"Diego Garcia",shortname:"DG",code:246,key:"diego_garcia"},{name:"Djibouti",shortname:"DJ",code:253,key:"djibouti"},{name:"Dominica",shortname:"DM",code:1767,key:"dominica"},{name:"Dominican Republic",shortname:"DO",code:1,key:"dominican_republic"}]},{label:"E",lists:[{name:"EI Salvador",shortname:"SV",code:503,key:"el_salvador"},{name:"Ecuador",shortname:"EC",code:593,key:"ecuador"},{name:"Egypt",shortname:"EG",code:20,key:"egypt"},{name:"Equatorial Guinea",shortname:"GQ",code:240,key:"equatorial_guinea"},{name:"Eritrea",shortname:"ER",code:291,key:"eritrea"},{name:"Estonia",shortname:"EE",code:372,key:"estonia"},{name:"Eswatini",shortname:"SZ",code:268,key:"eswatini"},{name:"Ethiopia",shortname:"ET",code:251,key:"ethiopia"}]},{label:"F",lists:[{name:"Falkland Islands",shortname:"FK",code:500,key:"falkland_islands"},{name:"Faroe Islands",shortname:"FO",code:298,key:"faroe_islands"},{name:"Fiji",shortname:"FJ",code:679,key:"fiji"},{name:"Finland",shortname:"FI",code:358,key:"finland"},{name:"France",shortname:"FR",code:33,key:"france"},{name:"French Guiana",shortname:"GF",code:594,key:"french_guiana"},{name:"French Polynesia",shortname:"PF",code:689,key:"french_polynesia"}]},{label:"G",lists:[{name:"Gabon",shortname:"GA",code:241,key:"gabon"},{name:"Gambia",shortname:"GM",code:220,key:"gambia"},{name:"Georgia",shortname:"GE",code:995,key:"georgia"},{name:"Germany",shortname:"DE",code:49,key:"germany"},{name:"Ghana",shortname:"GH",code:233,key:"ghana"},{name:"Gibraltar",shortname:"GI",code:350,key:"gibraltar"},{name:"Greece",shortname:"GR",code:30,key:"greece"},{name:"Greenland",shortname:"GL",code:299,key:"greenland"},{name:"Grenada",shortname:"GD",code:1473,key:"grenada"},{name:"Guadeloupe",shortname:"GP",code:590,key:"guadeloupe"},{name:"Guam",shortname:"GU",code:1671,key:"guam"},{name:"Guatemala",shortname:"GT",code:502,key:"guatemala"},{name:"Guernsey",shortname:"GG",code:44,key:"guernsey"},{name:"Guinea",shortname:"GN",code:224,key:"guinea"},{name:"Guinea-Bissau",shortname:"GW",code:245,key:"guinea_bissau"},{name:"Guyana",shortname:"GY",code:592,key:"guyana"}]},{label:"H",lists:[{name:"Haiti",shortname:"HT",code:509,key:"haiti"},{name:"Honduras",shortname:"HN",code:504,key:"honduras"},{name:"Hongkong",shortname:"HK",code:852,key:"hongkong"},{name:"Hungary",shortname:"HU",code:36,key:"hungary"}]},{label:"I",lists:[{name:"Iceland",shortname:"IS",code:354,key:"iceland"},{name:"India",shortname:"IN",code:91,key:"india"},{name:"Indonesia",shortname:"ID",code:62,key:"indonesia"},{name:"Iraq",shortname:"IQ",code:964,key:"iraq"},{name:"Ireland",shortname:"IE",code:353,key:"ireland"},{name:"Israel",shortname:"IL",code:972,key:"israel"},{name:"Isle of Man",shortname:"IM",code:44,key:"region_isle_of_man"},{name:"Italy",shortname:"IT",code:39,key:"italy"},{name:"Ivory Coast",shortname:"CI",code:225,key:"cte_d_ivoire"}]},{label:"J",lists:[{name:"Jamaica",shortname:"JM",code:1876,key:"jamaica"},{name:"Japan",shortname:"JP",code:81,key:"japan"},{name:"Jersey",shortname:"JE",code:44,key:"jersey"},{name:"Jordan",shortname:"JO",code:962,key:"jordan"}]},{label:"K",lists:[{name:"Kampuchea (Cambodia )",shortname:"KH",code:855,key:"cambodia"},{name:"Kazakhstan",shortname:"KZ",code:76,key:"kazakhstan"},{name:"Kazakhstan",shortname:"KZ",code:77,key:"kazakhstan"},{name:"Kenya",shortname:"KE",code:254,key:"kenya"},{name:"Kiribati",shortname:"KI",code:686,key:"kiribati"},{name:"Korea",shortname:"KR",code:82,key:"south_korea"},{name:"Kosovo",shortname:"XK",code:383,key:"region_kosovo"},{name:"Kuwait",shortname:"KW",code:965,key:"kuwait"},{name:"Kyrgyzstan",shortname:"KG",code:996,key:"kyrgyzstan"}]},{label:"L",lists:[{name:"Laos",shortname:"LA",code:856,key:"laos"},{name:"Latvia",shortname:"LV",code:371,key:"latvia"},{name:"Lebanon",shortname:"LB",code:961,key:"lebanon"},{name:"Lesotho",shortname:"LS",code:266,key:"lesotho"},{name:"Liberia",shortname:"LR",code:231,key:"liberia"},{name:"Libya",shortname:"LY",code:218,key:"libya"},{name:"Liechtenstein",shortname:"LI",code:423,key:"liechtenstein"},{name:"Lithuania",shortname:"LT",code:370,key:"lithuania"},{name:"Luxembourg",shortname:"LU",code:352,key:"luxembourg"}]},{label:"M",lists:[{name:"Macao",shortname:"MO",code:853,key:"macao"},{name:"Madagascar",shortname:"MG",code:261,key:"madagascar"},{name:"Malawi",shortname:"MW",code:265,key:"malawi"},{name:"Malaysia",shortname:"MY",code:60,key:"malaysia"},{name:"Maldives",shortname:"MV",code:960,key:"maldives"},{name:"Mali",shortname:"ML",code:223,key:"mali"},{name:"Malta",shortname:"MT",code:356,key:"malta"},{name:"Marshall Islands",shortname:"MH",code:692,key:"marshall_islands"},{name:"Martinique",shortname:"MQ",code:596,key:"martinique"},{name:"Mauritania",shortname:"MR",code:222,key:"mauritania"},{name:"Mauritius",shortname:"MU",code:230,key:"mauritius"},{name:"Mayotte",shortname:"YT",code:262,key:"mayotte"},{name:"Mexico",shortname:"MX",code:52,key:"mexico"},{name:"Micronesia",shortname:"FM",code:691,key:"micronesia"},{name:"Moldova, Republic of",shortname:"MD",code:373,key:"republic_of_moldova"},{name:"Monaco",shortname:"MC",code:377,key:"monaco"},{name:"Mongolia",shortname:"MN",code:976,key:"mongolia"},{name:"Montenegro",shortname:"ME",code:382,key:"montenegro"},{name:"Montserrat",shortname:"MS",code:1664,key:"montserrat"},{name:"Morocco",shortname:"MA",code:212,key:"morocco"},{name:"Mozambique",shortname:"MZ",code:258,key:"mozambique"},{name:"Myanmar (Burma)",shortname:"MY",code:95,key:"myanmar_burma"}]},{label:"N",lists:[{name:"Namibia",shortname:"NA",code:264,key:"namibia"},{name:"Nauru",shortname:"NR",code:674,key:"nauru"},{name:"Nepal",shortname:"NP",code:977,key:"nepal"},{name:"Netherlands",shortname:"NL",code:31,key:"netherlands"},{name:"New Caledonia",shortname:"NC",code:687,key:"new_caledonia"},{name:"New Zealand",shortname:"NZ",code:64,key:"new_zealand"},{name:"Nicaragua",shortname:"NI",code:505,key:"nicaragua"},{name:"Niger",shortname:"NE",code:227,key:"niger"},{name:"Nigeria",shortname:"NG",code:234,key:"nigeria"},{name:"Niue",shortname:"NU",code:683,key:"niue"},{name:"Norfolk Island",shortname:"NF",code:672,key:"norfolk_island"},{name:"North Macedonia",shortname:"MK",code:389,key:"macedonia"},{name:"Northern Mariana Islands",shortname:"MP",code:1670,key:"northern_mariana_islands"},{name:"Norway",shortname:"NO",code:47,key:"norway"}]},{label:"O",lists:[{name:"Oman",shortname:"OM",code:968,key:"oman"}]},{label:"P",lists:[{name:"Pakistan",shortname:"PK",code:92,key:"pakistan"},{name:"Palau",shortname:"PW",code:680,key:"palau"},{name:"Palestinian Territories",shortname:"PS",code:970,key:"palestinian_territories"},{name:"Panama",shortname:"PA",code:507,key:"panama"},{name:"Papua New Cuinea",shortname:"PG",code:675,key:"papua_new_guinea"},{name:"Paraguay",shortname:"PY",code:595,key:"paraguay"},{name:"Peru",shortname:"PE",code:51,key:"peru"},{name:"Philippines",shortname:"PH",code:63,key:"philippines"},{name:"Pitcairn Islands",shortname:"PN",code:64,key:"pitcairn_islands"},{name:"Poland",shortname:"PL",code:48,key:"poland"},{name:"Portugal",shortname:"PT",code:351,key:"portugal"},{name:"Puerto Rico",shortname:"PR",code:1787,key:"puerto_rico"},{name:"Puerto Rico",shortname:"PR",code:1939,key:"puerto_rico"}]},{label:"Q",lists:[{name:"Qatar",shortname:"QA",code:974,key:"qatar"}]},{label:"R",lists:[{name:"Runion",shortname:"RE",code:262,key:"reunion"},{name:"Romania",shortname:"RO",code:40,key:"romania"},{name:"Russia",shortname:"RU",code:7,key:"russia"},{name:"Rwanda",shortname:"RW",code:250,key:"rwanda"}]},{label:"S",lists:[{name:"Samoa",shortname:"WS",code:685,key:"samoa"},{name:"San Marino",shortname:"SM",code:378,key:"san_marino"},{name:"Sao Tome and Principe",shortname:"ST",code:239,key:"sao_tome_and_principe"},{name:"Saudi Arabia",shortname:"SA",code:966,key:"saudi_arabia"},{name:"Senegal",shortname:"SN",code:221,key:"senegal"},{name:"Serbia",shortname:"RS",code:381,key:"serbia"},{name:"Seychelles",shortname:"SC",code:248,key:"seychelles"},{name:"Sierra Leone",shortname:"SL",code:232,key:"sierra_leone"},{name:"Singapore",shortname:"SG",code:65,key:"singapore"},{name:"Sint Maarten",shortname:"SX",code:1721,key:"sint_maarten"},{name:"Slovakia",shortname:"SK",code:421,key:"slovakia"},{name:"Slovenia",shortname:"SI",code:386,key:"slovenia"},{name:"Solomon Is",shortname:"SB",code:677,key:"solomon_islands"},{name:"Somali",shortname:"SO",code:252,key:"somalia"},{name:"South Africa",shortname:"ZA",code:27,key:"south_africa"},{name:"So. Georgia & So. Sandwich  Isl.",shortname:"GS",code:500,key:"south_georgia_and_south_sandwich_islands"},{name:"South Sudan",shortname:"SS",code:211,key:"south_sudan"},{name:"Spain",shortname:"ES",code:34,key:"spain"},{name:"Sri Lanka",shortname:"LK",code:94,key:"sri_lanka"},{name:"St. Barthlemy",shortname:"BL",code:590,key:"st_barthlemy"},{name:"St. Helena",shortname:"SH",code:290,key:"st_helena"},{name:"St. Kitts & Nevis",shortname:"KN",code:1869,key:"st_kitts_and_nevis"},{name:"St. Martin",shortname:"MF",code:590,key:"st_martin_france"},{name:"St. Pierre & Miquelon",shortname:"PM",code:508,key:"st_pierre_and_miquelon"},{name:"St.Lucia",shortname:"LC",code:1758,key:"saint_lucia"},{name:"St. Vincent & Grenadines",shortname:"VC",code:1784,key:"st.vincent"},{name:"Sudan",shortname:"SD",code:249,key:"sudan"},{name:"Suriname",shortname:"SR",code:597,key:"suriname"},{name:"Svalbard & Jan Mayen",shortname:"SJ",code:4779,key:"svalbard_and_jan_mayen"},{name:"Sweden",shortname:"SE",code:46,key:"sweden"},{name:"Switzerland",shortname:"CH",code:41,key:"switzerland"}]},{label:"T",lists:[{name:"Taiwan",shortname:"TW",code:886,key:"taiwan"},{name:"Tajikstan",shortname:"TJ",code:992,key:"tajikistan"},{name:"Tanzania",shortname:"TZ",code:255,key:"tanzania"},{name:"Thailand",shortname:"TH",code:66,key:"thailand"},{name:"Timor-Leste",shortname:"TL",code:670,key:"east_timor"},{name:"Togo",shortname:"TG",code:228,key:"togo"},{name:"Tokelau",shortname:"TK",code:690,key:"tokelau"},{name:"Tonga",shortname:"TO",code:676,key:"tonga"},{name:"Trinidad & Tobago",shortname:"TT",code:1868,key:"trinidad_and_tobago"},{name:"Tunisia",shortname:"TN",code:216,key:"tunisia"},{name:"Turkey",shortname:"TR",code:90,key:"turkey"},{name:"Turkmenistan",shortname:"TM",code:993,key:"turkmenistan"},{name:"Turks & Caicos Islands",shortname:"TC",code:1649,key:"turks_and_caicos_islands"},{name:"Tuvalu",shortname:"TV",code:688,key:"tuvalu"}]},{label:"U",lists:[{name:"U.S. Virgin Islands",shortname:"VI",code:1340,key:"u_s_virgin_islands"},{name:"Uganda",shortname:"UG",code:256,key:"uganda"},{name:"Ukraine",shortname:"UA",code:380,key:"ukraine"},{name:"United Arab Emirates",shortname:"AE",code:971,key:"united_arab_emirates"},{name:"United Kingdom",shortname:"UK",code:44,key:"united_kingdom"},{name:"United States",shortname:"US",code:1,key:"united_states"},{name:"Uruguay",shortname:"UY",code:598,key:"uruguay"},{name:"Uzbekistan",shortname:"UZ",code:998,key:"uzbekistan"}]},{label:"V",lists:[{name:"Vanuatu",shortname:"VU",code:678,key:"vanuatu"},{name:"Vatican City",shortname:"VA",code:379,key:"vatican_city"},{name:"Vatican City",shortname:"VA",code:3906698,key:"vatican_city"},{name:"Venezuela",shortname:"VE",code:58,key:"venezuela"},{name:"Vietnam",shortname:"VN",code:84,key:"vietnam"}]},{label:"W",lists:[{name:"Wallis & Futuna",shortname:"WF",code:681,key:"wallis_and_futuna"},{name:"Western Sahara",shortname:"EH",code:212,key:"region_western_sahara"}]},{label:"Y",lists:[{name:"Yemen",shortname:"YE",code:967,key:"yemen"}]},{label:"Z",lists:[{name:"Zambia",shortname:"ZM",code:260,key:"zambia"},{name:"Zimbabwe",shortname:"ZW",code:263,key:"zimbabwe"}]}],bs=e=>/^\w+([\.\-\+]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e);let xs=class extends de.D{constructor(){super(...arguments),this.defaultState={area:"",phone:"",phoneCode:"",searchText:"",showAreaCodeSelector:!1,mobile:"",mobileOpenId:""}}setShowAreaCodeSelector(e,t){e.showAreaCodeSelector=t}setAreaCode(e,t){const{code:i,area:o}=t;e.areaCode=i,e.area=o,this.setMobileInfo(e,{areaCode:i,phone:e.phone})}setPhoneNumber(e,t){e.phone=t,this.setMobileInfo(e,{areaCode:e.areaCode,phone:t})}setErrorMsg(e,t){e.phoneErrorMsg=t}setAreaSearchText(e,t){if(e.searchText=t,!t)return void(e.matchSearchArea=void 0);const i=RegExp(t.replace("+","\\+"),"ig");e.matchSearchArea=fs.reduce(((e,{lists:t})=>e.concat(t)),[]).find((({name:e,code:t,shortname:o})=>e.match(i)||`${t}`.match(i)||o.match(i)))}setPhoneCode(e,t){e.phoneCode=t}toggleAreaCodeSelector(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([,{showAreaCodeSelector:e}])=>(0,mi.of)(this.getActions().setShowAreaCodeSelector(!e)))))}selectAreaCode(e){return e.pipe((0,gi.z)((({code:e,area:t})=>(0,mi.of)(this.getActions().setAreaCode({area:t,code:e}),this.getActions().setShowAreaCodeSelector(!1)))))}checkPhoneNumberFormat(e){return e.pipe((0,gi.z)((({phone:e})=>{const t=(e=>e&&/[^\d]+/.test(e))(e);return(0,mi.of)(this.getActions().setPhoneNumber(e),this.getActions().setErrorMsg(t?"common_registration_phone_input_error":""))})))}setMobileInfo(e,t){const{phone:i,areaCode:o}=t;if(!i||!o)return e.mobile="",void(e.mobileOpenId="");e.mobile=`+${o} ${i}`,e.mobileOpenId=86===o?i:`+${o}${i}`}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],xs.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"setShowAreaCodeSelector",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"setAreaCode",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"setPhoneNumber",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"setErrorMsg",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"setAreaSearchText",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"setPhoneCode",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"toggleAreaCodeSelector",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"selectAreaCode",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],xs.prototype,"checkPhoneNumberFormat",null),xs=(0,g.__decorate)([(0,pe.Y)("PhoneNumberModule")],xs);const ks=(e,t=!1)=>{const i=(0,Y.St)(`sms_code_count_down${t?"_email":""}_${e}`),o=+i-Date.now();return"number"!=typeof o||o<0?{hasSent:Boolean(i),countDownSecond:0}:{hasSent:Boolean(i),countDownSecond:Math.round(o/1e3)}};let Ss=class extends de.D{constructor(){super(...arguments),this.defaultState={}}setEmail(e,t){e.email=t}setEmailErrorMsg(e,t){e.emailErrorMsg=t}setEmailInfo(e){return e.pipe((0,gi.z)((({email:e,valid:t})=>(0,mi.of)(this.getActions().setEmail(e),this.getActions().setEmailErrorMsg(t?"":"common_registration_email_input_error")))))}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Ss.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Ss.prototype,"setEmail",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Ss.prototype,"setEmailErrorMsg",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ss.prototype,"setEmailInfo",null),Ss=(0,g.__decorate)([(0,pe.Y)("EmailModule")],Ss);let ws=class extends de.D{constructor(e,t,i,o,n,a){super(),this.contextModule=e,this.service=t,this.ageGate=i,this.phone=o,this.email=n,this.loginReport=a,this.defaultState={sendCodeLoading:!1,code:""},this.sendReason="user_click",this.isEmail=!1}setCode(e,t){const i=(e=>Boolean(e&&(/[^\d]+/.test(e)||6!==e.length)))(t);e.codeFormatError=i?"common_login_reset_email_verify_title":"",e.code=t}setTicket(e,t){e.ticket=t}setSendCodeLoading(e,t){t&&(e.getCodeErrorMsg=""),e.sendCodeLoading=t}clearGetCodeError(e){e.getCodeErrorMsg="",e.emailRegistered=void 0}setErrorMsg(e,t){const{description:i,emailRegistered:o}=t;e.emailRegistered=o,e.getCodeErrorMsg=i}sendPhoneCodeForVerify(e){return e.pipe((0,ti.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,gi.z)((({mobile:e})=>this.service.notLoginSendCode({mobile:e}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendPhoneCodeForLogin(e){return e.pipe((0,ti.b)((({mobile:e})=>this.reportSendCode({reason:"user_click",cacheKey:e}))),(0,Xt.w)((e=>{const{isSignUp:t,mobile:i}=e;return this.ageGate.validateAge((0,mi.of)({canSkip:!t})).pipe((0,ls.q)(1),(0,gi.z)((({payload:t})=>"boolean"==typeof t?(0,mi.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendPhoneCode(e).pipe(this.sendCodeHandler({cacheKey:i,agePayload:null!=t?t:void 0})):(0,mi.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,ei.O)(this.getActions().setSendCodeLoading(!0)),(0,Si.l)(this.getActions().setSendCodeLoading(!1)))})))}sendPhoneCodeForResetPwd(e){return e.pipe((0,ti.b)((({mobile:e,verify_ticket:t})=>{var i;return this.reportSendCode({reason:"forgot_password",cacheKey:null!==(i=null!=e?e:t)&&void 0!==i?i:""})})),(0,ti.b)((()=>this.loginReport.sendSms({send_reason:"forgot_password"}))),(0,gi.z)((({mobile:e,verify_ticket:t,not_login_ticket:i})=>{var o;return this.service.sendPhoneCodeWithType({mobile:e,type:4,method:"GET",verify_ticket:t,not_login_ticket:i}).pipe(this.sendCodeHandler({cacheKey:null!==(o=null!=e?e:t)&&void 0!==o?o:""}))})))}sendPhoneCodeForTwoStep(e){return e.pipe((0,ti.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:e.verify_ticket}))),(0,gi.z)((({verify_ticket:e,not_login_ticket:t,mobile:i})=>this.service.sendPhoneCodeWithType({verify_ticket:e,not_login_ticket:t,type:t?13:22,method:"GET",mobile:i}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendPhoneCodeForForceResetPwd(e){return e.pipe((0,ti.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket}))),(0,ge.M)(this.state$),(0,gi.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendPhoneCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({cacheKey:e})))))}sendEmailCodeForForceResetPwd(e){return e.pipe((0,ti.b)((e=>this.reportSendCode({reason:"force_reset",cacheKey:e.conditional_login_ticket,isEmail:!0}))),(0,ge.M)(this.state$),(0,gi.z)((([{conditional_login_ticket:e},{code:t}])=>this.service.sendEmailCodeForForceResetPwd({code:t,conditional_login_ticket:e}).pipe(this.sendCodeHandler({email:!0,cacheKey:e})))))}sendEmailCodeForLogin(e){return e.pipe((0,ti.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,ti.b)((()=>this.loginReport.sendMail({send_reason:"user_click"}))),(0,gi.z)((({email:e,not_login_ticket:t,verify_ticket:i})=>this.service.sendEmailCodeForLogin({email:null!=e?e:"",extra_params:{not_login_ticket:t,verify_ticket:i}}).pipe(this.sendCodeHandler({email:!0,cacheKey:i})))))}sendEmailCodeForVerify(e){return e.pipe((0,ti.b)((e=>this.reportSendCode({reason:"2sv",cacheKey:`${e.verify_ticket}`,isEmail:!0}))),(0,gi.z)((e=>this.service.verifySendEmailCode(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${e.verify_ticket}`})))))}sendEmailCodeForSignup(e){return e.pipe((0,ti.b)((e=>this.reportSendCode({reason:"user_click",cacheKey:`${e.email}`,isEmail:!0}))),(0,gi.z)((e=>this.ageGate.validateAge((0,mi.of)({canSkip:!1})).pipe((0,ls.q)(1),(0,gi.z)((({payload:t})=>"boolean"==typeof t?(0,mi.of)(this.ageGate.getActions().setShowAgeConfirm(t)):(null==t?void 0:t.ageEligible)||null===t?this.service.sendEmailCodeForSignup(e).pipe((0,ti.b)((e=>{1023===e.error_code&&(e.emailRegistered=!0)})),this.sendCodeHandler({email:!0,agePayload:null!=t?t:void 0,cacheKey:`${e.email}`})):(0,mi.of)(this.ageGate.getActions().setAgeCheckResult(t)))),(0,ei.O)(this.getActions().setSendCodeLoading(!0)),(0,Si.l)(this.getActions().setSendCodeLoading(!1))))))}sendEmailCodeForReset(e){return e.pipe((0,ti.b)((e=>{var t;return this.reportSendCode({reason:"forgot_password",cacheKey:`${null!==(t=e.email)&&void 0!==t?t:e.verify_ticket}`,isEmail:!0})})),(0,gi.z)((e=>{var t;return this.service.sendEmailCodeForResetPwd(e).pipe(this.sendCodeHandler({email:!0,cacheKey:`${null!==(t=e.email)&&void 0!==t?t:`${e.verify_ticket}`}`}))})))}reportSendCode(e){const{cacheKey:t,reason:i,isEmail:o}=e;this.sendReason=i,this.isEmail=Boolean(o);const{hasSent:n}=ks(t);o?this.loginReport.sendMail({is_retry:n,send_reason:i}):this.loginReport.sendSms({is_retry:n,send_reason:i})}reportSendCodeResult(e){const{error_code:t,"x-tt-logid":i,message:o,description:n}=e,a={status:t?1:0,error_code:t,error_desc:o||n,type:this.sendReason,logid:i};this.isEmail?this.loginReport.sendMailResult(a):this.loginReport.sendSmsResult(a)}sendCodeHandler({cacheKey:e,agePayload:t,email:i}){return o=>o.pipe((0,ti.b)((e=>this.reportSendCodeResult(e))),(0,gi.z)((o=>{var n;const{retry_time:a=60,emailRegistered:r,ticket:s,error_code:l}=o;return l||((e,t,i)=>{(0,Y.D9)(`sms_code_count_down${i?"_email":""}_${e}`,`${Date.now()+1e3*t}`)})(e,a,i),1356===l?(0,mi.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd")):s?(0,mi.of)(this.getActions().setTicket(s)):ds[l]?(0,mi.of)(this.phone.getActions().setErrorMsg(ds[l]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):cs[l]?(0,mi.of)(this.email.getActions().setEmailErrorMsg(cs[l]),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop()):(0,mi.of)(this.getActions().setErrorMsg({description:r||!o.error_code?"":null!==(n=o.description)&&void 0!==n?n:"Sorry, something went wrong, please try again later",emailRegistered:r}),t?this.ageGate.getActions().setAgeCheckResult(t):this.noop())})),(0,ei.O)(this.getActions().setSendCodeLoading(!0)),(0,Si.l)(this.getActions().setSendCodeLoading(!1)))}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],ws.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"setCode",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"setTicket",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"setSendCodeLoading",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"clearGetCodeError",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"setErrorMsg",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendPhoneCodeForLogin",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendPhoneCodeForResetPwd",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendPhoneCodeForTwoStep",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendPhoneCodeForForceResetPwd",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendEmailCodeForForceResetPwd",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendEmailCodeForLogin",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendEmailCodeForVerify",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendEmailCodeForSignup",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],ws.prototype,"sendEmailCodeForReset",null),ws=(0,g.__decorate)([(0,pe.Y)("SendCode"),(0,g.__metadata)("design:paramtypes",[ns,gs.Q,Mr,xs,Ss,ys])],ws);var Cs=i(71519),js=i(38066);let Ts=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.handleSyncKrPolicyApprove=e=>{this.service.emitEvent("SyncKrPolicyApprove",this.defaultMetrics,e)}}};Ts=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[vi.n])],Ts);let Os=class extends de.D{constructor(e,t,i,o){super(),this.pnsSlardar=e,this.pnsReport=t,this.service=i,this.appContext=o,this.defaultState={krPolicySelection:[],termsDomContent:"",privacyDomContent:""}}setKrPolicySelection(e,t){e.krPolicySelection=t}setTermsDomContent(e,t){e.termsDomContent=t}setPrivacyDomContent(e,t){e.privacyDomContent=t}requestPolicyContent(e){return e.pipe((0,ge.M)(this.appContext.state$),(0,gi.z)((([{articleKeys:e},{appContext:t}])=>(0,Cs.D)(e.map((e=>{var i;return this.service.getPolicyContent({lang:null!==(i=null==t?void 0:t.$language)&&void 0!==i?i:"en",project_key:"legal",article_key:e})})))))).pipe((0,gi.z)((e=>(0,mi.of)(this.getActions().setTermsDomContent(e[0].body.article_content),this.getActions().setPrivacyDomContent(e[1].body.article_content)))))}syncKrPolicyApprove(){var e;const{krPolicySelection:t}=this.state,{$region:i}=null!==(e=this.appContext.state.appContext)&&void 0!==e?e:{};if("KR"!==i||!t.length)return(0,mi.of)(null);const o=-1!==t.indexOf("push-policy");return this.pnsReport.handlePolicyConfirmOnFYP({trending:o?"on":"off"}),this.service.setUniversalPopOperation({business:"kr_consent_market_message",policy_version:"v20200629",style:"bottom",operation:-1!==t.indexOf("push-policy")?"2":"1",aid:1988}).pipe((0,me.U)((({status_code:e})=>{if(this.pnsSlardar.handleSyncKrPolicyApprove({error_code:`${e}`}),0!==e)throw new Error(`sync kr policy error, error_code: ${e}`);return(0,mi.of)(null)})),(0,hi.K)((e=>(console.error(e),(0,mi.of)({status_code:-1})))),(0,js.X)(1))}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Os.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Array]),(0,g.__metadata)("design:returntype",void 0)],Os.prototype,"setKrPolicySelection",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Os.prototype,"setTermsDomContent",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Os.prototype,"setPrivacyDomContent",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Os.prototype,"requestPolicyContent",null),Os=(0,g.__decorate)([(0,pe.Y)("PolicyModule"),(0,g.__metadata)("design:paramtypes",[Ts,ae,ye,G.G])],Os);let Is=class extends de.D{constructor(e){super(),this.fetch=e,this.defaultState={isRegisterWithPrivateOn:!1}}setIsRegisterWithPrivateOn(e,t){e.isRegisterWithPrivateOn=t}getIsRegisterPrivateAccount(){return this.fetch.get("/api/user/detail/self/",{query:{tt_csrf_token:this.fetch.csrfToken}}).pipe((0,me.U)((({statusCode:e,userInfo:t})=>{var i,o;if(0!==e&&10222!==e)throw new Error(`getIsRegisterPrivateAccount error, error_code ${e}`);return null!==(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.showPrivateBanner)&&void 0!==o&&o})),(0,hi.K)((e=>(console.error(e),(0,mi.of)(!1)))),(0,js.X)(1))}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Is.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Is.prototype,"setIsRegisterWithPrivateOn",null),Is=(0,g.__decorate)([(0,pe.Y)("RegisterPrivateAccount"),(0,g.__metadata)("design:paramtypes",[ve.r])],Is);var Ps=i(64446);let Es=class{constructor(e){this.fetch=e}validateUsername(e){return this.fetch.get("https://www.tiktok.com/api/uniqueid/check/",{query:{unique_id:e,fromWeb:1,aid:1180}}).pipe(this.errorHandler)}validateFTCUsername(e){return this.fetch.get("https://www.tiktok.com/api/register/check/login/name/",{query:{login_name:e}}).pipe(this.errorHandler)}syncEmailConsentInfo(){return this.fetch.post("https://www.tiktok.com/api/privacy/agreement/record/agree/v1",{body:Ar().stringify({record_name:"email_consent",tt_csrf_token:this.fetch.csrfToken||"IQodDvCCo34LIXpe5ArEKd-S"})})}errorHandler(e){return e.pipe((0,hi.K)((e=>(0,mi.of)(Object.assign({error_code:e.error_code||-1},e)))))}};Es=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Es);let Ls=class extends de.D{constructor(e,t,i,o,n,a,r,s){super(),this.service=e,this.policy=t,this.registerPrivateAccount=i,this.ageGate=o,this.accountService=n,this.loginReport=a,this.t=r,this.regionService=s,this.defaultState={username:"",signupLoading:!1}}setSuccess(e){e.success=!0}setEmailConsent(e,t){e.emailConsent=t}setErrorMsg(e,t){e.errorMsg=t}setLoading(e,t){e.signupLoading=t}setCheckNameLoading(e,t){e.checkNameLoading=t}setNextPage(e,t){e.nextPage=t}setUsername(e,t){e.username=t}setUsernameInfo(e,t){e.usernameInfo=t}setFromNotRegisterLogin(e,t){e.fromNotRegisterLogin=t}cacheSmsCodeKey(e,t){e.phoneNotRegistered=t,e.fromNotRegisterLogin="Phone"}cacheThirdNotRegistered(e,t){e.thirdPlatformNotRegistered=t,e.fromNotRegisterLogin="Third"}clearSignUpResult(e){e.errorMsg="",e.nextPage=""}registerThirdPlatform(e){return e.pipe((0,ti.b)((()=>{this.loginReport.thirdRegister()})),(0,ge.M)(this.ageGate.state$),(0,gi.z)((([{platform:e,profileKey:t,rrc:i,chooseAgeGate:o},{ageGateAction:n,birthday:a}])=>{const r=0===n||1===n&&-1!==["facebook","google"].indexOf(e);return r||o?this.ageGate.validateAge((0,mi.of)({canSkip:r})).pipe((0,ls.q)(1),(0,gi.z)((({payload:o})=>"boolean"==typeof o?(0,mi.of)(this.ageGate.getActions().setShowAgeConfirm(o)):(null==o?void 0:o.ageEligible)||null===o?this.accountService.thirdLogin({platform_app_id:Ps.Oy[e],platform:e,profile_key:t,rrc:i,login_only:!1,birthday:a}).pipe((0,gi.z)((t=>(t.fromThird=!0,this.loginReport.setPlatform(e),t.platform=e,(0,mi.of)(this.getActions().handleSignupResult(t),o?this.ageGate.getActions().setAgeCheckResult(o):this.noop())))),(0,ei.O)(this.getActions().setLoading(!0)),(0,Si.l)(this.getActions().setLoading(!1))):(0,mi.of)(this.ageGate.getActions().setAgeCheckResult(o))))):(0,mi.of)(this.getActions().cacheThirdNotRegistered({platform:e,profileKey:t}),this.getActions().setNextPage($.gY.signupAgeGate))})))}registerPhone(e){return e.pipe((0,ti.b)((()=>{this.loginReport.setPlatform("sms_verification"),this.loginReport.loginSubmit({signUp:!0})})),(0,ge.M)(this.state$,this.ageGate.state$),(0,gi.z)((([{chooseAgeGate:e},{phoneNotRegistered:t},{ageGateAction:i,birthday:o}])=>i&&!e?(0,mi.of)(this.getActions().setNextPage($.gY.signupAgeGate)):this.ageGate.validateAge((0,mi.of)({canSkip:!1})).pipe((0,ls.q)(1),(0,gi.z)((({payload:e})=>{var i,n;return"boolean"==typeof e?(0,mi.of)(this.ageGate.getActions().setShowAgeConfirm(e)):(null==e?void 0:e.ageEligible)||null===e?this.accountService.smsLoginContinue({mobile:null!==(i=null==t?void 0:t.mobile)&&void 0!==i?i:"",sms_code_key:null!==(n=null==t?void 0:t.smsCodeKey)&&void 0!==n?n:"",extra_params:{birthday:o}}).pipe((0,ei.O)(this.getActions().setLoading(!0)),(0,me.U)((e=>(e.platform="sms_verification",this.getActions().handleSignupResult(e))))):(0,mi.of)(this.ageGate.getActions().setAgeCheckResult(e))}))))))}syncUserInfos(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([{fromThird:e,fromEmail:t,fromFTC:i},{emailConsent:o}])=>(0,Cs.D)([this.policy.syncKrPolicyApprove(),this.syncEmailConsent(o),this.registerPrivateAccount.getIsRegisterPrivateAccount()]).pipe((0,Xt.w)((o=>{const[,,n]=o,a=e||t?$.gY.signupCreateUsername:$.gY.signupCreatePassword;return(0,mi.of)(this.getActions().setLoading(!1),this.registerPrivateAccount.getActions().setIsRegisterWithPrivateOn(n),i?this.getActions().setSuccess():this.getActions().setNextPage(a))}))))))}validateUsername(e){return e.pipe((0,gi.z)((({name:e,fromThird:t})=>e?this.service.validateUsername(e).pipe((0,gi.z)((i=>{const{status_code:o,recommended_unique_ids:n,is_valid:a,status_msg:r}=i,s=!a&&t?n[0]:e;return(0,mi.of)(t?this.getActions().setUsername(s):this.noop(),this.getActions().setUsernameInfo({value:s,isValid:a,suggestList:n,errorMsg:t?"":_s(o,Boolean(n),r)}))})),(0,ei.O)(this.getActions().setCheckNameLoading(!0)),(0,Si.l)(this.getActions().setCheckNameLoading(!1))):(0,mi.of)(this.getActions().setUsernameInfo(void 0)))))}validateFTCUsername(e){return e.pipe((0,gi.z)((({name:e})=>e?this.service.validateFTCUsername(e).pipe((0,me.U)((t=>{const{valid:i}=t;return this.getActions().setUsernameInfo({value:e,isValid:i,errorMsg:i?"":"common_registration_username_error_ sensitivity"})})),(0,ei.O)(this.getActions().setCheckNameLoading(!0)),(0,Si.l)(this.getActions().setCheckNameLoading(!1))):(0,mi.of)(this.getActions().setUsernameInfo(void 0)))))}usernameRegister(e){return e.pipe((0,ti.b)((()=>{this.loginReport.setPlatform("handle"),this.loginReport.loginSubmit({signUp:!0})})),(0,ge.M)(this.state$,this.ageGate.state$),(0,gi.z)((([{password:e},{username:t},{birthday:i}])=>this.accountService.usernameRegister({password:e,username:t,extra_params:{birthday:i}}).pipe((0,me.U)((e=>(e.fromFTC=!0,this.getActions().handleSignupResult(e)))),(0,ei.O)(this.getActions().setLoading(!0)),(0,Si.l)(this.getActions().setLoading(!1))))))}emailRegister(e){return e.pipe((0,ge.M)(this.ageGate.state$,this.state$),(0,ti.b)((([,,{emailConsent:e}])=>{this.loginReport.setPlatform("email"),this.loginReport.loginSubmit({signUp:!0}),this.loginReport.rigisterClickNext(void 0===e?{}:{status:e?"checked":"unchecked",text_type:"long_version"})})),(0,gi.z)((([{password:e,code:t,email:i},{birthday:o}])=>this.accountService.emailRegister({password:e,code:t,email:i,ifLogin:!0,extra_params:{birthday:o,email_logic_type:e?2:1}}).pipe((0,me.U)((e=>(e.fromEmail=!0,this.getActions().handleSignupResult(e)))),(0,ei.O)(this.getActions().setLoading(!0)),(0,Si.l)(this.getActions().setLoading(!1))))))}handleSignupResult(e){return e.pipe((0,gi.z)((e=>{const{error_code:t,errorMsg:i,description:o,error_msg:n,fromThird:a,fromFTC:r,fromEmail:s,name:l,screen_name:d,sec_user_id:c}=e;if(!t)return this.loginReport.loginSuccess({is_register:1}),this.regionService.authBroadcast({screen_name:d,sec_uid:c}).pipe((0,gi.z)((()=>(0,mi.of)(this.getActions().syncUserInfos({fromThird:a,fromEmail:s,fromFTC:r}),a?this.getActions().validateUsername({name:l,fromThird:a}):this.noop()))));if(this.loginReport.loginFailure({error_code:t,signUp:!0}),vs(t))return(0,mi.of)(this.getActions().setNextPage({pathname:$.gY.loginDownloadApp}));const p=i||n||o||"Sorry, something went wrong, please try again later";return a?(Ut.h.open({content:this.t(p),duration:3,widthType:"half"}),(0,mi.of)(this.getActions().setNextPage(""))):(0,mi.of)(this.getActions().setErrorMsg(p))})))}syncEmailConsent(e){return e?this.service.syncEmailConsentInfo().pipe((0,me.U)((()=>(0,mi.of)(null))),(0,hi.K)((e=>(console.error(e),(0,mi.of)({status_code:-1}))))):(0,mi.of)(null)}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Ls.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setSuccess",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setEmailConsent",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setErrorMsg",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setLoading",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setCheckNameLoading",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setNextPage",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setUsername",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setUsernameInfo",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"setFromNotRegisterLogin",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"cacheSmsCodeKey",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"cacheThirdNotRegistered",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"clearSignUpResult",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"registerThirdPlatform",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"registerPhone",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"syncUserInfos",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"validateUsername",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"validateFTCUsername",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"usernameRegister",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"emailRegister",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ls.prototype,"handleSignupResult",null),Ls=(0,g.__decorate)([(0,pe.Y)("SignupModule"),(0,g.__param)(6,(0,Ei.t)(Li.s)),(0,g.__metadata)("design:paramtypes",[Es,Os,Is,Mr,gs.Q,ys,Function,ms.D])],Ls);let As=class extends de.D{constructor(e,t,i,o,n,a,r,s,l){super(),this.contextModule=e,this.signupModule=t,this.service=i,this.regionService=o,this.ageGate=n,this.loginReport=a,this.sendCode=r,this.phone=s,this.t=l,this.defaultState={errorMsg:"",showReactiveModal:!1,loginLoading:!1}}setLoginSuccess(e,t){e.success=null!=t?t:1}setErrorMsg(e,t){e.errorMsg=t}setErrorCode(e,t){e.errorCode=t}setTwoStepVerifyRes(e,t){e.twoStepResponse=t}setNextPage(e,t){e.nextPage=t}setShowInstagramCantLoginModal(e,t){e.showInstagramCantLoginModal=t}setNeedForceResetPassword(e,t){const i=t.otp_type.match("email")?"email":"phone";e.nextPage="email"===i?$.gY.loginForgetEmailPassword:$.gY.loginForgetPhonePassword,e.forceResetResponse=Object.assign(Object.assign({},t),{type:i})}clearForceResetRes(e){e.forceResetResponse=void 0}setShowReactiveModal(e,t){e.showReactiveModal=t.show,e.inCancellationResponse=t.res}setLoginLoading(e,t){e.loginLoading=t}setPhoneNotRegistered(e){e.phoneNotRegistered=!0}clearLoginResult(e){e.errorMsg="",e.phoneNotRegistered=!1,e.twoStepResponse=void 0,e.nextPage=""}cancelDeleteAccount(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>{var i;const o=null===(i=t.inCancellationResponse)||void 0===i?void 0:i.token;return this.service.cancelDeleteAccount({token:o,type:0}).pipe((0,gi.z)((e=>(e.successType=2,(0,mi.of)(this.getActions().setShowReactiveModal({show:!1}),this.getActions().handleLoginResult(e))))))})))}handleForceResetPwdByEmail(e){return e.pipe((0,gi.z)((e=>this.service.validateEmailCodeForForceReset(e).pipe((0,Xt.w)((t=>{const{error_code:i,ticket:o}=t;return i?(0,mi.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,me.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1)))})),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}handleForceResetPwdByPhone(e){return e.pipe((0,gi.z)((e=>this.service.validatePhoneCodeForForceReset(e).pipe((0,gi.z)((t=>{const{error_code:i,ticket:o}=t;return i?(0,mi.of)(this.getActions().handleLoginResult(t)):this.service.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{ticket:o})).pipe((0,me.U)((t=>(t.password=e.password,this.getActions().handleLoginResult(t)))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1)))})),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}handlePasswordLogin(e){return e.pipe((0,ge.M)(this.contextModule.state$),(0,gi.z)((([e,{isSecurityVerification:t}])=>(t?this.service.verifyPwdWithoutLogin(e):this.service.passwordLogin(e)).pipe((0,me.U)((t=>{var i;const{verify_ticket:o}=null!==(i=e.extra_params)&&void 0!==i?i:{};return o&&this.loginReport.twoStepResult({error_code:t.error_code,result:t.error_code?"fail":"success",verification_method:"password"}),t.accountQuery=e,1011===t.error_code&&(t.errorMsg="common_login_email_error"),this.getActions().handleLoginResult(t)})),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}changePwdByEmail(e){return e.pipe((0,gi.z)((({password:e,email:t,emailCode:i,not_login_ticket:o,verify_ticket:n})=>this.service.resetPwdLoginByEmail({email:t,code:i,password:e,extra_params:{not_login_ticket:o,verify_ticket:n}}).pipe((0,me.U)((t=>(n&&this.loginReport.twoStepResult({verification_method:"email",error_code:t.error_code,result:t.error_code?"fail":"success"}),t.error_code&&(t.password=e,1011===t.error_code&&(t.errorMsg="common_login_reset_email_input_error")),this.getActions().handleLoginResult(t)))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}handleSmsLogin(e){return e.pipe((0,gi.z)((({mobile:e,phoneCode:t,login_only:i,birthday:o})=>this.ageGate.validateAge((0,mi.of)({canSkip:i})).pipe((0,ls.q)(1),(0,gi.z)((({payload:n})=>"boolean"==typeof n?(0,mi.of)(this.ageGate.getActions().setShowAgeConfirm(n)):(null==n?void 0:n.ageEligible)||null===n?this.service.smsLogin({mobile:e,code:t,login_only:i,birthday:o}).pipe((0,gi.z)((e=>(e.error_code&&(e.errorMsg=ps[e.error_code]),(0,mi.of)(this.getActions().handleLoginResult(e),n?this.ageGate.getActions().setAgeCheckResult(n):this.noop())))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))):(0,mi.of)(this.ageGate.getActions().setAgeCheckResult(n))))))))}handleSmsVerify(e){return e.pipe((0,gi.z)((({mobile:e,phoneCode:t})=>this.service.smsVerify({mobile:e,code:t}).pipe((0,gi.z)((e=>(e.error_code&&(e.errorMsg=ps[e.error_code]),(0,mi.of)(this.getActions().handleLoginResult(e))))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}changePwdByMobile(e){return e.pipe((0,gi.z)((({password:e,mobile:t,phoneCode:i})=>this.service.changePwdByMobile({mobile:t,code:i,password:e}).pipe((0,me.U)((t=>(t.error_code&&(t.password=e,t.errorMsg=ps[t.error_code]),this.getActions().handleLoginResult(t)))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}setAccount(e){return e.pipe((0,gi.z)((e=>this.service.setAccount(e).pipe((0,me.U)((e=>{const{error_code:t,description:i}=e;return t?(Ut.h.open({content:this.t(i),duration:3,widthType:"half"}),this.noop()):this.getActions().setLoginSuccess()})),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}handleLoginResult(e){return e.pipe((0,ge.M)(this.contextModule.state$,this.phone.state$),(0,gi.z)((([e,{disableSignup:t,isSecurityVerification:i},{mobile:o}])=>{const{error_code:n,errorMsg:a,error_msg:r,description:s,new_user:l,screen_name:d,sec_user_id:c,successType:p,ticket:u}=e;if(hs.g.hide(),l)return this.loginReport.loginSuccess({is_register:1}),(0,mi.of)(this.signupModule.getActions().syncUserInfos({}));if(!n)return this.loginReport.loginSuccess({is_register:0}),i&&this.setTicketIntoCookie(u),this.regionService.authBroadcast({screen_name:d,sec_uid:c}).pipe((0,me.U)((()=>this.getActions().setLoginSuccess(p))));if(this.loginReport.loginFailure({error_code:n}),1381===n)return(0,mi.of)(this.getActions().setNeedForceResetPassword(e));if(2046===n)return(0,mi.of)(this.getActions().setTwoStepVerifyRes(e));if(1075===n)return(0,mi.of)(this.getActions().setShowReactiveModal({show:!0,res:e}));if(1053===n)return(0,mi.of)(this.contextModule.getActions().setShowAlertMessageType("twoStepVerifyBlock"));if(1356===n)return(0,mi.of)(this.contextModule.getActions().setShowAlertMessageType("TwoStepBlockResetPwd"));if(1011===n&&t||1045===n&&i)return(0,mi.of)(this.contextModule.getActions().setShowAlertMessageType("inexistent"));if(1011===n){if(e.sms_code_key)return(0,mi.of)(this.getActions().setPhoneNotRegistered(),this.signupModule.getActions().cacheSmsCodeKey({smsCodeKey:e.sms_code_key,mobile:o}));if(e.profile_key)return(0,mi.of)(this.signupModule.getActions().registerThirdPlatform({profileKey:e.profile_key,platform:e.platform}))}if(vs(n))return(0,mi.of)(this.getActions().setNextPage({pathname:$.gY.loginDownloadApp}),this.getActions().setErrorCode(n));if(ds[n])return(0,mi.of)(this.phone.getActions().setErrorMsg(ds[n]));const g=ps[n]||a||r||s||"Sorry, something went wrong, please try again later";return us.includes(n)?(0,mi.of)(this.sendCode.getActions().setErrorMsg({description:g})):(0,mi.of)(this.getActions().setErrorMsg(g),this.getActions().setErrorCode(n))})))}setTicketIntoCookie(e){const t=new Date;t.setTime((new Date).getTime()+12e5),ss().set("security_verification_ticket",e,{domain:"tiktok.com",secure:!0,expires:t})}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],As.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setLoginSuccess",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setErrorMsg",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setErrorCode",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setTwoStepVerifyRes",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setNextPage",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setShowInstagramCantLoginModal",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setNeedForceResetPassword",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"clearForceResetRes",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setShowReactiveModal",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setLoginLoading",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setPhoneNotRegistered",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"clearLoginResult",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"cancelDeleteAccount",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"handleForceResetPwdByEmail",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"handleForceResetPwdByPhone",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"handlePasswordLogin",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"changePwdByEmail",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"handleSmsLogin",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"handleSmsVerify",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"changePwdByMobile",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"setAccount",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],As.prototype,"handleLoginResult",null),As=(0,g.__decorate)([(0,pe.Y)("LoginResultDealModule"),(0,g.__param)(8,(0,Ei.t)(Li.s)),(0,g.__metadata)("design:paramtypes",[ns,Ls,gs.Q,ms.D,Mr,ys,ws,xs,Function])],As);var Rs=i(8639),Ms=i(33888);const Ds=(e,t)=>{const i=(o=e,`${Ps.lF}:${o}`);var o;const n={timestamp:Number(new Date),timeInterval:6e5},a=Object.assign(Object.assign({},t),{expires:n});(0,Y.D$)(i,JSON.stringify(a)),(0,Y.D$)(e,JSON.stringify(a))},Fs=e=>{2===Number(null!=e?e:localStorage.getItem("oauthType"))&&(location.href=`${location.href}&no_refactor=1`)};var Ns=i(30612),Bs=i(56383);let zs=class{constructor(e,t){this.loginReport=e,this.fetch=t}get apple$(){return window.AppleID?(0,mi.of)(null):new ue.y((e=>{i.e(6757).then(i.t.bind(i,52249,23)).then((t=>{window.AppleID=t,e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}login(){return this.apple$.pipe((0,gi.z)((()=>this.getAppleConfig())),(0,Xt.w)((({data:e})=>{const{client_id:t,state:i}=e;return window.AppleID.auth.init({clientId:t,state:i,redirectURI:"https://www.tiktok.com/oauth",scope:"name email",response_mode:"fragment",usePopup:!0}),(0,Bs.D)(window.AppleID.auth.signIn())}))).pipe((0,me.U)((e=>{const{authorization:t={}}=e,{id_token:i}=t;return{openid:(0,Ns.Z)(i).sub,platform_app_id:Ps.Oy.apple,platform:"apple",id_token:i}})),(0,hi.K)((e=>(console.error(e),this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:"popup_closed_by_user"===e.error?2:1,error_desc:e.error})),(0,mi.of)(Object.assign(Object.assign({error_code:-1},e),{error_msg:e.error,platform:"apple"}))))))}getAppleConfig(){return this.fetch.post("https://www.tiktok.com/passport/web/auth/config",{query:{aid:1459,account_sdk_source:"web"},body:Ar().stringify({platform_app_id:Ps.Oy.apple,action:"login_only",next:"https://www.tiktok.com/foryou?lang=en"})})}};zs=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ys,ve.r])],zs);let $s=class{constructor(e){this.loginReport=e,this.loadSdk=e=>{i.e(8400).then(i.t.bind(i,88632,23)).then((({default:t})=>{t.init({facebook:"1862952583919182",google:"1096011445005-sdea0nf5jvj14eia93icpttv27cidkvk.apps.googleusercontent.com",twitter:"rLsbFQ5NHI2IsWZiRc2McRCFc",instagram:"c8785d0dc7df48f298532fddf33d7cb5",vk:"6961453"}),this.helloJS=t,null==e||e()})).catch((t=>{console.error(t),null==e||e()}))}}get helloJS$(){return this.helloJS?(0,mi.of)(this.helloJS):new ue.y((e=>{this.loadSdk((()=>{e.next(),e.complete()}))}))}login(e){const{platform:t}=e;return this.helloJS$.pipe((0,gi.z)((()=>(0,Bs.D)(this.helloJS(t).login(e)).pipe((0,Xt.w)((e=>{const{network:i,authResponse:o}=e,n="vk"===t?{v:"5.81"}:void 0;return(0,Bs.D)(this.helloJS(i).api("me",n)).pipe((0,me.U)((e=>{const{access_token:t="",oauth_token_secret:n=""}=o;return{openid:e.id,access_token:t,access_token_secret:n,platform:i,platform_app_id:Ps.Oy[i]}})))}))))),(0,hi.K)((e=>{var i,o,n;return console.error(e),this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e.error),{status:"cancelled"===(null===(i=e.error)||void 0===i?void 0:i.code)?2:1,error_desc:null===(o=e.error)||void 0===o?void 0:o.message})),(0,mi.of)(Object.assign({platform:t,error_code:-1,error_msg:null===(n=e.error)||void 0===n?void 0:n.message},e.error))})))}};$s=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ys])],$s);let Us=class{constructor(e){this.loginReport=e}get Kakao$(){return window.Kakao?(0,mi.of)(null):new ue.y((e=>{i.e(2628).then(i.t.bind(i,19962,23)).then((({default:t})=>{window.Kakao=t,window.Kakao.init(Ps.Sx),e.next(),e.complete()})).catch((t=>{console.error(t),e.next(),e.complete()}))}))}login(){return this.Kakao$.pipe((0,gi.z)((()=>new ue.y((e=>{const t=t=>{console.error(t),e.next({error_code:-1,error_msg:t.message,platform:"kakaotalk"}),e.complete()};window.Kakao.Auth.login({success(i){window.Kakao.API.request({url:"/v2/user/me",success:t=>{e.next(Object.assign({openid:t.id,platform_app_id:Ps.Oy.kakaotalk,platform:"kakaotalk"},i)),e.complete()},fail:t})},fail:t})})))),(0,hi.K)((e=>(this.loginReport.thirdPartyLoginResult(Object.assign(Object.assign({},e),{status:1,error_desc:e.error})),(0,mi.of)({error_code:-1,platform:"kakaotalk",error_msg:e.message})))))}};Us=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ys])],Us);let Ws=class extends de.D{constructor(e,t,i,o,n,a,r,s){super(),this.service=e,this.loginResultDealModule=t,this.contextModule=i,this.helloJS=o,this.kakaoSdk=n,this.appleSdk=a,this.slardar=r,this.loginReport=s,this.defaultState={platform:""}}handleHelloJSAuth(e){return e.pipe((0,gi.z)((e=>this.helloJS.login(e).pipe((0,ti.b)((e=>this.reportThirdGetToken(e))),(0,me.U)((e=>e.error_code?"cancelled"===e.code?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e)))))))}handleKakaoLogin(e){return e.pipe((0,gi.z)((()=>this.kakaoSdk.login().pipe((0,me.U)((e=>(this.reportThirdGetToken(e),this.getActions().thirdLogin(e))))))))}handleAppleLogin(e){return e.pipe((0,gi.z)((()=>this.appleSdk.login()))).pipe((0,ti.b)((e=>this.reportThirdGetToken(e))),(0,me.U)((e=>e.error_code?"popup_closed_by_user"===e.error?this.noop():this.loginResultDealModule.getActions().handleLoginResult(e):this.getActions().thirdLogin(e))))}handlePopupAuthorize(e){return e.pipe((0,ge.M)(this.contextModule.state$),(0,gi.z)((([{url:e,platform:t},{isSmartPlayer:i}])=>this.jumpAuthorizationPage({url:e,isSmartPlayer:i}).pipe((0,me.U)((({closeByUser:e})=>{if(e)return this.loginReport.thirdPartyLoginResult({error_code:-1,status:2,error_desc:"user cancel login"}),this.noop();const i=(e=>{const t=(0,Y.le)(e);try{return JSON.parse(t)}catch(e){return{}}})(t);if("twitter"===t){const e=JSON.stringify({oauth_token:i.oauth_token,oauth_verifier:i.oauth_verifier});i.code=Rs.DS.encode(e)}return this.getActions().thirdLogin(Object.assign({platform_app_id:Ps.Oy[t],platform:t},i))}))))))}thirdLogin(e){return e.pipe((0,ge.M)(this.contextModule.state$),(0,gi.z)((([e,{isSecurityVerification:t}])=>e.error_code||!e.platform_app_id?(0,mi.of)(this.loginResultDealModule.getActions().handleLoginResult(e)):(hs.g.show(),(t?this.service.thirdVerify(Object.assign(Object.assign({},e),{login_only:!0})):this.service.thirdLogin(Object.assign(Object.assign({},e),{login_only:!0}))).pipe((0,me.U)((t=>(t.thirdQuery=Object.assign(Object.assign({},e),{profile_key:t.profile_key}),this.loginReport.setPlatform(e.platform),t.platform=e.platform,this.loginResultDealModule.getActions().handleLoginResult(t)))))))))}jumpAuthorizationPage(e){const{url:t,isSmartPlayer:i}=e;let o="";i||(o="resizable,scrollbars,width=500,height=550,display=popup");const n=window.open(t,"_blank",o);return n?new ue.y((e=>{const t=setInterval((()=>{(!n||n.closed||n.authDoneClose)&&(clearInterval(t),e.next({closeByUser:!n.authDoneClose}),n.authDoneClose&&n.close(),e.complete())}),100)})):(0,_i.c)()}reportThirdGetToken(e){var t;const{error_code:i,code:o,error_msg:n,error:a,platform:r}=e;this.slardar.handleThirdGetToken({error_code:i?-1:0,error_message:null!==(t=null!=o?o:a)&&void 0!==t?t:n,platform:r})}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Ws.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ws.prototype,"handleHelloJSAuth",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ws.prototype,"handleKakaoLogin",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ws.prototype,"handleAppleLogin",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ws.prototype,"handlePopupAuthorize",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ws.prototype,"thirdLogin",null),Ws=(0,g.__decorate)([(0,pe.Y)("ThirdPlatformModule"),(0,g.__metadata)("design:paramtypes",[gs.Q,As,ns,$s,Us,zs,Ms.M,ys])],Ws);const Gs=(0,re.Z)("div",{target:"exattu0"})({display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},"label:DivShowMore;"),Hs={facebook:{text:"common_login_panel_button_facebook",icon:Gr.Z},google:{text:"common_login_panel_button_google",icon:Hr.Z},twitter:{text:"common_login_panel_button_twitter",icon:qr.Z},instagram:{text:"common_login_panel_button_instagram",icon:Zr.Z},apple:{text:"common_login_panel_button_apple",icon:Vr.Z},line:{text:"common_login_panel_button_line",icon:Qr.Z},kakaotalk:{text:"common_login_panel_button_kakaotalk",icon:Yr.Z},vk:{text:"common_login_panel_button_vk",icon:Kr.Z,scope:"offline_access, v"}},qs=({signUp:e})=>{const{isSmartPlayer:t,platformConfig:i}=as((()=>["isSmartPlayer","platformConfig"]),[]),[n,a]=(0,w.useState)(!1),r=(0,ee.fz)(ys),s=(0,Ji.Q)("WebApp_Login"),{handleAppleLogin:l,handlePopupAuthorize:d,handleHelloJSAuth:c,handleKakaoLogin:p}=(0,U.qj)(Ws),{setShowInstagramCantLoginModal:u}=(0,U.qj)(As),g=(e=>{const t={show_num:2,order:"FACEBOOK,GOOGLE,INSTAGRAM,LINE,TWITTER,KAKAOTALK"},{isSignUp:i,platform:o,isSmartPlayer:n,platformConfig:a=t}=e,r="FACEBOOK,GOOGLE,TWITTER,APPLE,INSTAGRAM,LINE,KAKAOTALK,VK".toLocaleLowerCase().split(","),s="APPLE,INSTAGRAM".toLocaleLowerCase().split(","),l="LINE,KAKAOTALK,APPLE".toLocaleLowerCase().split(","),d={expand:[],fold:[]};if(o){const e=r.find((e=>e===o));return e&&d.expand.push(e),d}const c=a.order.toLocaleLowerCase().split(","),p={expand:[...c.slice(0,a.show_num)],fold:[...c.slice(a.show_num)]};return n&&(p.expand=p.expand.filter((e=>!l.includes(e))),p.fold=p.fold.filter((e=>!l.includes(e)))),i?(p.expand=p.expand.filter((e=>!s.includes(e))),p.fold=p.fold.filter((e=>!s.includes(e)))):p.expand=p.expand.concat(p.fold),p.expand=p.expand.filter((e=>r.includes(e))),p.fold=p.fold.filter((e=>r.includes(e))),p})({platformConfig:i,isSignUp:e,isSmartPlayer:t}),m=(0,j.k6)(),{$isMobile:h}=(0,H.m7)((0,oe.L)((()=>["$isMobile"]),[])),_=(0,w.useCallback)((()=>{const e=(()=>{const e=(0,S.stringifyUrl)({url:`${window.location.origin}/oauth/?page=new`,query:{platform:["twitter"],oauthType:0,lang:"en"}});return(0,S.stringifyUrl)({url:"https://us.tiktok.com/passport/web/web_login/",query:{platform_app_id:Ps.Oy.twitter,platform:["twitter"],aid:"1459",next:encodeURIComponent(e),action:"login_only"}})})();d({url:e,platform:"twitter"})}),[d]),v=(0,w.useCallback)((()=>{const e=(0,S.stringifyUrl)({url:"https://access.line.me/oauth2/v2.1/authorize",query:{response_type:"code",client_id:Ps.z,redirect_uri:`${window.location.origin}/oauthLine/`,state:"1line",scope:"openid profile"}});d({url:e,platform:"line"})}),[d]),y=(0,w.useCallback)((()=>{h?u(!0):m.push({pathname:$.gY.loginDownloadApp,state:{fromIns:!0}})}),[h,u,m]),f=(0,w.useCallback)((i=>()=>{var o,n;switch(r.setPlatform(i),r.loginSubmit({signUp:e}),i){case"apple":l();break;case"twitter":_();break;case"line":v();break;case"facebook":case"google":case"vk":c({force:!0,platform:i,display:t?"page":"popup",redirect_uri:"https://www.tiktok.com/login/",scope:null!==(n=null===(o=Hs[i])||void 0===o?void 0:o.scope)&&void 0!==n?n:""});break;case"kakaotalk":p();break;case"instagram":y()}}),[r,e,l,_,v,c,t,p,y]),b=(0,w.useCallback)((()=>{a(!0)}),[]);return(0,o.jsxs)(o.Fragment,{children:[g.expand.map((e=>Hs[e]?(0,o.jsx)($r,{text:s(Hs[e].text),Icon:Hs[e].icon,onClick:f(e)},e):null)),g.fold.length>0&&e&&!n&&(0,o.jsxs)(Gs,Object.assign({onClick:b},{children:[" ",(0,o.jsx)(Jr.Z,{},void 0)]}),void 0),n&&g.fold.map((e=>Hs[e]?(0,o.jsx)($r,{text:s(Hs[e].text),Icon:Hs[e].icon,onClick:f(e)},e):null))]},void 0)},Zs=(e,t)=>{const i=`https://www.tiktok.com/foryou?lang=${e}`,o=window.decodeURIComponent(null!=t?t:""),n=[/^https?:\/\/([\w\-.]+?\.)?tiktok\.com(\/.*)?$/].some((e=>new RegExp(e).test(o)));return o&&n?o:i},Vs=(0,re.Z)("div",{target:"exd0a430"})((({isMobile:e})=>({width:"375px",margin:"auto",padding:e?"0 30px":"unset"})),"label:DivLoginContainer;"),Qs=(0,re.Z)("div",{target:"exd0a431"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextQuaternary"}),{fontSize:"15px",lineHeight:"18px",margin:"12px 0 32px",textAlign:"center"}]),"label:DivDescriptionContainer;"),Ys=(0,re.Z)("div",{target:"exd0a432"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),Ks=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),{loginModalShow:i}=(0,U.mp)(K.r),{$region:n}=(0,H.m7)((0,oe.L)((()=>["$region"]),[])),{loginTitle:a,loginSlogan:r,signUpSlogan:s,signUpTitle:l}=as((()=>["loginTitle","loginSlogan","signUpSlogan","signUpTitle"]),[]),d=(0,j.k6)(),{pathname:c}=d.location,p=c.startsWith($.gY.signupHome),u=(0,w.useCallback)((()=>{p?t.clickSignUp():t.clickLoginButton()}),[p,t]),g=(0,w.useCallback)((()=>{t.clickQrCode()}),[t]),m=!p,h="KR"===n?$.gY.signupPolicyConfirm:$.gY.signupPhone;return(0,o.jsxs)("div",{children:[(0,o.jsx)(Ys,{children:e(p?l:a)},void 0),!i&&(0,o.jsx)(Qs,{children:e(p?s:r)},void 0),m&&(0,o.jsx)(Wr,Object.assign({path:$.gY.loginQRcode,underline:!1},{children:(0,o.jsx)($r,{text:e("common_login_panel_button_qrcode"),Icon:Fr.Z,onClick:g},void 0)}),void 0),(0,o.jsx)(Wr,Object.assign({underline:!1,path:p?h:$.gY.loginPhone},{children:(0,o.jsx)($r,{text:e(p?"common_registration_panel_button_phoneoremail":"common_login_panel_button_phoneoremailorusername"),Icon:Nr.Z,onClick:u},void 0)}),void 0),(0,o.jsx)(qs,{signUp:p},void 0)]},void 0)},Js={initialized:!1,eventCommonParams:{},init(e){var t;const{enter_from:i,enter_method:o,platform:n}=S.parse(e);this.initialized=!0,this.eventCommonParams={enter_from:null!==(t=null==i?void 0:i.toString())&&void 0!==t?t:"login",enter_method:o,platform:n}}},Xs={login:{title:"Log in",description:"Log in or sign up for an account on TikTok. Start watching to discover real people and real videos that will make your day.",keywords:"Log in, Log in to TikTok"},signup:{title:"Sign up",description:"Sign up for an account or log back into TikTok. Create an account to discover real people and real videos that will make your day.",keywords:"Sign up, Sign up for TikTok"}},el=(0,w.memo)((({page:e})=>{const t=Xs[e],i=(0,Ji.Q)("WebApp_Login"),n=(0,oe.L)((()=>["$language"]),[]);return(0,o.jsxs)(C.ql,Object.assign({htmlAttributes:{lang:null==n?void 0:n.$language}},{children:[(0,o.jsx)("title",{children:i(t.title)},void 0),(0,o.jsx)("meta",{name:"description",content:i(t.description)},void 0),(0,o.jsx)("meta",{name:"keywords",content:t.keywords},void 0)]}),void 0)}));var tl=i(49923);const il=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"2px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGTertiary2,":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGPrimary2,color:e.colors.TextQuaternary}};case"primary":return{borderRadius:"2px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2}};default:return{":disabled":{}}}},ol={large:{minWidth:"248px",minHeight:"44px",fontSize:"15px",lineHeight:"18px",fontWeight:700},medium:{minWidth:"144px",height:"35px",fontSize:"14px",lineHeight:"17px",fontWeight:700},small:{minWidth:"88px",height:"28px",fontSize:"14px",lineHeight:"17px",fontWeight:700},tiny:{minWidth:"74px",minHeight:"24px",fontSize:"13px",lineHeight:"17px",fontWeight:600}},nl=(0,re.Z)("button",{target:"e5u1qxo0"})((({buttonTheme:e="default",size:t="medium",theme:i,loading:o=!1})=>[il({theme:i,buttonTheme:e}),ol[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",fontFamily:"ProximaNova, PingFangSC, sans-serif",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{})]),"label:Button;"),al=(0,w.memo)((function(e){var{buttonTheme:t,size:i,type:n="button",loading:a=!1,loadingTheme:r="primary",loadingSize:s="medium",children:l}=e,d=(0,g.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","children"]);return(0,o.jsxs)(nl,Object.assign({type:n,buttonTheme:t,loading:a,size:i},d,{children:[l,a&&(0,o.jsx)(tl.$,{style:{position:"absolute"},theme:r,size:s},void 0)]}),void 0)})),rl=(0,re.Z)("div",{target:"ermvtw20"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",maxWidth:"400px",padding:"0px 32px 32px",textAlign:"center"})),"label:DivContainer;"),sl=(0,re.Z)("h5",{target:"ermvtw21"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"20px",lineHeight:"24px"}]),"label:H5Title;"),ll=(0,re.Z)("p",{target:"ermvtw22"})([({theme:e})=>(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"20px",margin:"24px 0",textAlign:"center"}],"label:PDesc;"),dl=e=>{const t=(0,Ji.Q)("WebApp_Login"),{title:i,text:n,buttonText:a,visible:r,supportText:s}=e,{$language:l}=(0,H.m7)((0,oe.L)((()=>["$language"]),[]));return(0,o.jsx)(ht.u,Object.assign({visible:r,maskCloseable:!1,onClose:e.onClose},{children:(0,o.jsxs)(rl,{children:[i&&(0,o.jsx)(sl,{children:t(i)},void 0),(0,o.jsx)(ll,{children:t(n)},void 0),s&&(0,o.jsx)("a",Object.assign({href:`https://support.tiktok.com?lang=${l}`,target:"_blank",rel:"noopener noreferrer"},{children:(0,o.jsx)(al,Object.assign({size:"large",buttonTheme:"primary",style:{width:"100%",marginBottom:"16px"}},{children:t(null!=a?a:"twosv_recover_pw_popup_btn")}),void 0)}),void 0),(0,o.jsx)(al,Object.assign({size:"large",buttonTheme:"default",style:{width:"100%"},onClick:e.onClose},{children:t(null!=a?a:"OK")}),void 0)]},void 0)}),void 0)},cl={inexistent:{title:"age_verify_login_inexistent",subTitle:"age_verify_login_inexistent_intro"},ineligible:{title:"age_verify_login_ineligible",subTitle:"age_verify_login_ineligible_intro"},twoStepVerifyBlock:{title:"twosv_login_sms_block_title",subTitle:"twosv_login_sms_block_content"},TwoStepBlockResetPwd:{title:"twosv_recover_pw_popup_title",subTitle:"twosv_recover_pw_popup_desc",supportText:"twosv_recover_pw_popup_btn"}},pl=()=>{var e;const t=(0,j.k6)(),[{showAlertMessageType:i},{setShowAlertMessageType:n}]=(0,U.b7)(ns),a=null===(e=(0,j.$B)($.gY.loginHome))||void 0===e?void 0:e.isExact,r=(0,w.useCallback)((()=>{n("");const{message:e}=(0,S.parse)(window.location.search),i=new RegExp(`&?message=${e}`);t.replace({pathname:$.gY.loginHome,search:(window.location||{}).search.replace(i,"")})}),[t,n]);return(0,w.useEffect)((()=>{i&&!a&&t.push($.gY.loginHome)}),[i,t,a]),i?(0,o.jsx)(dl,{supportText:cl[i].supportText,visible:Boolean(i),title:cl[i].title,text:cl[i].subTitle,onClose:r},void 0):null},ul=(0,re.Z)("div",{target:"esqadv70"})((({theme:e})=>({background:e.colors.BGPrimary,borderRadius:"8px",width:"400px",padding:"0 16px 32px"})),"label:DivContainer;"),gl=(0,re.Z)("h5",{target:"esqadv71"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"24px",lineHeight:"32px",textAlign:"center",padding:"0 8px"}]),"label:H5Title;"),ml=(0,re.Z)("p",{target:"esqadv72"})([({theme:e})=>(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{lineHeight:"15px",margin:"24px 8px",textAlign:"center",fontSize:"12px"}],"label:PDesc;"),hl=(0,re.Z)("div",{target:"esqadv73"})({display:"flex"},"label:DivButtonWrapper;"),_l=()=>{const e=(0,Ji.Q)("WebApp_Login"),[{showReactiveModal:t},{setShowReactiveModal:i,cancelDeleteAccount:n}]=(0,U.b7)(As),a=(0,w.useCallback)((()=>{i({show:!1})}),[i]),r=(0,w.useCallback)((()=>{n()}),[n]);return(0,o.jsx)(ht.u,Object.assign({visible:t,maskCloseable:!1,onClose:a},{children:(0,o.jsxs)(ul,{children:[(0,o.jsx)(gl,{children:e("reactivate_h1")},void 0),(0,o.jsx)(ml,{children:e("reactivate_h2")},void 0),(0,o.jsx)(ml,{children:e("reactivate_h3")},void 0),(0,o.jsx)(ml,{children:e("reactivate_h4")},void 0),(0,o.jsxs)(hl,{children:[(0,o.jsx)(_t.W,Object.assign({size:"large",onClick:a,style:{margin:"0 8px"}},{children:e("common_registration_phone_input_popup_button")}),void 0),(0,o.jsx)(_t.W,Object.assign({size:"large",buttonTheme:"primary",onClick:r,style:{margin:"0 8px"}},{children:e("reactivate_btn")}),void 0)]},void 0)]},void 0)}),void 0)},vl=(0,re.Z)("div",{target:"e10o7n900"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"24px",lineHeight:"32px",margin:"32px auto 12px",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),yl=(0,re.Z)("div",{target:"e10o7n901"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary"}),{fontSize:"18px",lineHeight:"25px",display:"flex",justifyContent:"space-between",marginBottom:"40px"}]),"label:DivDescription;"),fl=(0,re.Z)("img",{target:"e10o7n902"})({width:"80%",margin:"0 auto 16px"},"label:ImgQR;");var bl=i(30008);const xl=(0,w.memo)((function(){const e=(0,Ji.Q)("WebApp_Login");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(yl,{children:e("login_risk_popup_pc_body_2")},void 0),(0,o.jsx)(fl,{src:bl},void 0)]},void 0)})),kl=(0,w.memo)((function(){const e=(0,Ji.Q)("WebApp_Login"),t=(0,j.TH)(),{fromIns:i}=t.state||{};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(vl,{children:e(i?"login_new_ins_PC_title":"login_risk_popup_pc_title")},void 0),(0,o.jsx)(xl,{},void 0)]},void 0)}));let Sl=class extends de.D{constructor(){super(...arguments),this.defaultState={password:""}}setPassword(e,t){e.password=t}setHasInvalid(e,t){e.hasInvalid=t}setLengthValid(e,t){e.lengthValid=t}setContentValid(e,t){e.contentValid=t}updatePassword(e){return e.pipe((0,gi.z)((({value:e})=>{const{hasInvalid:t,contentValid:i,lengthValid:o}=(e=>{if(!e)return{};const t=/[^\w~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/,i=/[_~!@#$%^&*()+,.:;=<>?/|\-[\]\\]+/.test(e)&&/[0-9]+/.test(e)&&/[A-Za-z]+/.test(e)&&!t.test(e),o=e.length>=8&&e.length<=20;return{hasInvalid:t.test(e),lengthValid:o,contentValid:i}})(e);return(0,mi.of)(this.getActions().setPassword(e),this.getActions().setHasInvalid(t),this.getActions().setLengthValid(o),this.getActions().setContentValid(i))})))}};(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Sl.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Sl.prototype,"setPassword",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Sl.prototype,"setHasInvalid",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Sl.prototype,"setLengthValid",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Sl.prototype,"setContentValid",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Sl.prototype,"updatePassword",null),Sl=(0,g.__decorate)([(0,pe.Y)("SetPasswordModule")],Sl);const wl={email_verify:"email",pwd_verify:"password",mobile_sms_verify:"phone"},Cl={email:"email_verify",password:"pwd_verify",phone:"mobile_sms_verify"};let jl=class extends de.D{constructor(e,t,i,o,n){super(),this.service=e,this.third=t,this.login=i,this.loginReport=o,this.phone=n,this.defaultState={loginLoading:!1}}setTwoStepVerifyRes(e,t){var i;const o=t.verify_ways,n={};o.forEach((({verify_way:e,mobile:t,email:i})=>{n[e]=null!=t?t:i})),e.verifyWays=n,e.type=t.default_verify_way||(null===(i=o[0])||void 0===i?void 0:i.verify_way),e.isTwoStep=Boolean(null==t?void 0:t.default_verify_way),e.thirdQuery=t.thirdQuery,e.accountQuery=t.accountQuery,e.password=t.password,e.verify_ticket=t.verify_ticket,e.not_login_ticket=t.not_login_ticket,e.sms_code_key=t.sms_code_key}setTwoStepType(e,t){e.type=t}setErrorMsg(e,t){e.errorMsg=t}setLoginLoading(e,t){e.loginLoading=t}handlePasswordVerify(e){return e.pipe((0,ge.M)(this.state$,this.phone.state$),(0,gi.z)((([e,{sms_code_key:t=""},{mobile:i}])=>this.service.accountVerify(e).pipe((0,ti.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"password"}))),(0,Xt.w)((e=>e.error_code?(0,mi.of)(this.getActions().setErrorMsg(e.description)):this.service.smsLoginContinue({mobile:i,sms_code_key:t}).pipe((0,me.U)((e=>this.login.getActions().handleLoginResult(e))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}handleCodeVerify(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,{type:t="",thirdQuery:i,accountQuery:o}])=>i||o?(t===Cl.email?this.service.validateEmailCodeForLogin(e):this.service.validateMobileCodeForLogin(e)).pipe((0,ti.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:wl[t]}))),(0,Xt.w)((e=>e.error_code?(0,mi.of)(this.getActions().setErrorMsg(e.description)):i?(0,mi.of)(this.third.getActions().thirdLogin(i)):o?(0,mi.of)(this.login.getActions().handlePasswordLogin(o)):(0,mi.of)(this.noop()))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))):(0,mi.of)(this.getActions().handleEmailCodeVerify(e)))))}handleEmailCodeVerify(e){return e.pipe((0,gi.z)((e=>this.service.emailCodeLogin(e).pipe((0,ti.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"email"}))),(0,me.U)((e=>this.login.getActions().handleLoginResult(e))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}handleSmsCodeVerifyReset(e){return e.pipe((0,gi.z)((e=>this.service.validateMobileCodeForReset(e).pipe((0,ti.b)((e=>this.reportTwoStepResult({error_code:e.error_code,type:"phone"}))),(0,me.U)((e=>this.login.getActions().handleLoginResult(e))),(0,ei.O)(this.getActions().setLoginLoading(!0)),(0,Si.l)(this.getActions().setLoginLoading(!1))))))}reportTwoStepResult(e){this.loginReport.twoStepResult({verification_method:e.type,result:e.error_code?"fail":"success",error_code:e.error_code})}};function Tl(e=[]){const[{errorMsg:t},i]=(0,U.b7)(As),[{errorMsg:o},n]=(0,U.b7)(Ls),{phone:a,areaCode:r}=(0,U.mp)(xs),{email:s}=(0,U.mp)(Ss),[{code:l},{clearGetCodeError:d}]=(0,U.b7)(ws),{password:c}=(0,U.mp)(Sl),[{errorMsg:p},{setErrorMsg:u}]=(0,U.b7)(jl),[g,m]=(0,w.useState)(""),h=t||o||p,_=(0,Ji.Q)("WebApp_Login"),v=(0,j.k6)(),{pathname:y}=v.location;return(0,w.useEffect)((()=>{h&&(y===$.gY.loginHome||y===$.gY.loginHome?Ut.h.open({content:_(h),duration:3,widthType:"half"}):m(h))}),[_,v.location,h,y]),(0,w.useEffect)((()=>{i.clearLoginResult(),n.setErrorMsg(""),d(),m("")}),[a,r,s,l,i,n,c,...e]),(0,w.useEffect)((()=>()=>{i.clearLoginResult(),n.clearSignUpResult(),d(),m(""),u("")}),[]),g}(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],jl.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"setTwoStepVerifyRes",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"setTwoStepType",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"setErrorMsg",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"setLoginLoading",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"handlePasswordVerify",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"handleCodeVerify",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"handleEmailCodeVerify",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],jl.prototype,"handleSmsCodeVerifyReset",null),jl=(0,g.__decorate)([(0,pe.Y)("TwoStepModule"),(0,g.__metadata)("design:paramtypes",[gs.Q,Ws,As,ys,xs])],jl);const Ol=(0,re.Z)("div",{target:"e1ggqfg30"})((({theme:e,type:t})=>[(0,se.GI)({theme:e,fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"15px",marginTop:"4px",color:"error"===t?e.colors.Negative:"success"===t?e.colors.Positive:e.colors.TextTertiary,display:"flex",svg:{marginInlineEnd:"4px"}}]),"label:DivTextContainer;"),Il=(0,w.memo)((({text:e,type:t="default",children:i,style:n})=>(0,o.jsxs)(Ol,Object.assign({type:t,style:n},{children:[i,e]}),void 0)));var Pl,El=i(8721);function Ll(){return Ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ll.apply(this,arguments)}const Al=function(e){return w.createElement("svg",Ll({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),Pl||(Pl=w.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},w.createElement("path",{d:"M2.8 7.8c2.1 1 4.5 1.6 7 1.6s4.9-.6 7-1.6M9.8 9.8v3M5.1 9.2l-1.5 2.6M14.6 9.2l1.5 2.6"}))))};var Rl;function Ml(){return Ml=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Ml.apply(this,arguments)}const Dl=function(e){return w.createElement("svg",Ml({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",width:"1em",height:"1em"},e),Rl||(Rl=w.createElement("g",{stroke:"#161823",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:1.5,opacity:.5},w.createElement("path",{d:"M9.8 4.8c3 0 5.3 1.7 7 5-1.7 3.3-4 5-7 5s-5.3-1.7-7-5c1.6-3.4 4-5 7-5z"}),w.createElement("path",{d:"M9.8 11.8a2 2 0 100-4 2 2 0 000 4z"}))))},Fl=(0,re.Z)("div",{target:"e93gz7m0"})({position:"relative"},"label:DivInputContainer;"),Nl=(0,re.Z)("input",{target:"e93gz7m1"})((({theme:{colors:e},border:t=!1,errorState:i=!1})=>[{"::placeholder":{color:e.TextQuaternary},color:e.TextPrimary,border:t?`1px solid ${e.LineSecondary2}`:"none",borderRadius:"2px",backgroundColor:e.BGInput,paddingInlineStart:"12px",lineHeight:"100%",outline:"none",fontSize:"16px",height:"44px",caretColor:e.Primary,width:"100%"},()=>{if(i)return{color:e.Negative,border:`1px solid ${e.Negative}`}}]),"label:InputContainer;"),Bl=(0,re.Z)("div",{target:"e93gz7m2"})((({theme:e})=>[(0,se.YJ)({direction:e.direction,end:"0"}),{display:"flex",alignItems:"center",position:"absolute",top:0,height:"44px",paddingInlineEnd:"16px"}]),"label:DivIconContainer;"),zl=(0,re.Z)("i",{target:"e93gz7m3"})({lineHeight:"0",marginInlineStart:"16px",cursor:"pointer",fontSize:"20px"},"label:IPasswordIcon;"),$l=(0,w.memo)((function(e){const{errorState:t,value:i,placeholder:n,password:a=!1,className:r,border:s=!0,style:l,autocomplete:d,name:c,autoFocus:p}=e,[u,g]=(0,w.useState)("text");(0,w.useEffect)((()=>{a&&g("password")}),[a]);const m=(0,w.useCallback)((()=>{g("text")}),[]),h=(0,w.useCallback)((()=>{g("password")}),[]);return(0,o.jsxs)(Fl,Object.assign({className:r,style:l},{children:[(0,o.jsx)(Nl,{autoFocus:p,value:i,type:u,errorState:t,placeholder:n,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,onInput:e.onInput,border:s,autoComplete:d,autocomplete:d,name:c},void 0),(0,o.jsxs)(Bl,{children:[t&&(0,o.jsx)(El.Z,{fill:"rgba(254, 44, 85, 1.0)"},void 0),a&&("password"===u?(0,o.jsx)(zl,Object.assign({onClick:m},{children:(0,o.jsx)(Al,{},void 0)}),void 0):(0,o.jsx)(zl,Object.assign({onClick:h},{children:(0,o.jsx)(Dl,{},void 0)}),void 0))]},void 0)]}),void 0)})),Ul=(0,re.Z)("div",{target:"ewblsjs0"})({marginBottom:"9px"},"label:DivContainer;"),Wl=(0,re.Z)($l,{target:"ewblsjs1"})({flex:1,width:0,"& > input":{background:"transparent"}},"label:StyledBaseInput;"),Gl=(0,re.Z)("div",{target:"ewblsjs2"})((({theme:{colors:e},errState:t})=>[{background:e.BGInput,border:`1px solid ${e.LineSecondary2}`,transition:"all 0.3s",borderRadius:"4px",display:"flex"},()=>t?{border:`1px solid ${e.Negative}`,input:{color:e.Negative}}:{}]),"label:DivPhoneInputContainer;"),Hl=(0,re.Z)("div",{target:"ewblsjs3"})({position:"relative",cursor:"pointer"},"label:DivAreaSelectionContainer;"),ql=(0,re.Z)("div",{target:"ewblsjs4"})((({theme:{colors:e,direction:t}})=>[{display:"flex",alignItems:"center",justifyContent:"space-between",position:"relative",padding:"12px",height:"44px","::after":{content:'""',width:"1px",height:"30px",background:e.LineSecondary,right:"rtl"===t?"unset":"0",left:"rtl"===t?"0":"unset",position:"absolute"}}]),"label:DivAreaLabelContainer;"),Zl=(0,re.Z)("span",{target:"ewblsjs5"})((({theme:{colors:e}})=>[{fontSize:"16px",lineHeight:1,color:e.TextPrimary,marginInlineEnd:"12px"}]),"label:SpanLabelContainer;");var Vl=i(22827);const Ql=(0,re.Z)("button",{target:"e1gzcpl10"})((({theme:e})=>[(0,se.GI)({color:"TextPrimary",theme:e,fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:0,backgroundColor:e.colors.BGPrimary,borderColor:e.colors.LineSecondary2,borderWidth:1.5,borderStyle:"solid",borderRadius:"rtl"===e.direction?"4px 0 0 4px":"0px 4px 4px 0px",borderInlineStartWidth:1.5,cursor:"pointer",fontSize:"16px",padding:"0px 16px",height:"44px",flexShrink:0,boxSizing:"content-box","&:disabled":{color:e.colors.TextQuaternary,cursor:"not-allowed"},"&:focus-visible":{outline:"none"}}]),"label:ButtonSendCode;"),Yl=(0,re.Z)(Vl.Z,{target:"e1gzcpl11"})({marginInlineStart:"4px",fontSize:"20px",verticalAlign:"middle",marginTop:"-2px",animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),Kl=(0,w.memo)((function(e){const{text:t,disabled:i,countDownSecond:n=0,loading:a}=e;return(0,o.jsxs)(Ql,Object.assign({type:"button",onClick:e.onClick,disabled:!!i||!!n,lo:!0},{children:[t+(n?`: ${n}s`:""),a&&(0,o.jsx)(Yl,{},void 0)]}),void 0)})),Jl=(0,re.Z)("div",{target:"e2oypfg0"})({transition:"all 0.3s",display:"flex",justifyContent:"space-between"},"label:DivCodeInputContainer;"),Xl=(0,re.Z)($l,{target:"e2oypfg1"})((({theme:e})=>({flex:1,width:0,"& > input":{height:"47px",borderInlineEndWidth:"0",borderRadius:"rtl"===e.direction?"0 2px 2px 0":"2px 0px 0px 2px"}})),"label:StyledBaseInput;"),ed=(0,w.memo)((function(e){const{errorMsg:t,disabled:i,codeFromNumber:n,loading:a,autoSendFirstTime:r,email:s}=e,l=(0,Ji.Q)("WebApp_Login"),[d,c]=(0,w.useState)(!1),[p,u]=(0,w.useState)(),[{codeFormatError:g,getCodeErrorMsg:m,code:h},{setCode:_}]=(0,U.b7)(ws);(0,w.useEffect)((()=>{u(t)}),[t]),(0,w.useEffect)((()=>{u(m)}),[m]);const{countDownSecond:v,hasSent:y}=((e,t,i)=>{const[o,n]=(0,w.useState)(0),[a,r]=(0,w.useState)(!1),s=(0,w.useRef)({});return(0,w.useEffect)((()=>{s.current&&clearTimeout(s.current);const{hasSent:t,countDownSecond:o}=ks(e,i);r(t),n(o)}),[e,i,t]),(0,w.useEffect)((()=>{o>0&&(s.current=setTimeout((()=>{n(o-1)}),1e3))}),[o]),{hasSent:a,countDownSecond:o}})(n,a,s);(0,w.useEffect)((()=>{if(r){const{countDownSecond:t}=ks(n,s);!t&&e.onClickSendCode()}return()=>{_("")}}),[]);const f=(0,w.useCallback)((()=>{c(!0)}),[]),b=(0,w.useCallback)((()=>{c(!1)}),[]),x=(0,w.useCallback)((e=>{_(e.target.value)}),[_]),k=p||g,S=g?!d:Boolean(k);return(0,o.jsxs)(Ul,{children:[(0,o.jsxs)(Jl,{children:[(0,o.jsx)(Xl,{placeholder:l("common_login_reset_email_verify_title"),onFocus:f,onBlur:b,onChange:x,value:h,className:"code-input",autoComplete:"off",errorState:S},void 0),(0,o.jsx)(Kl,{loading:a,onClick:e.onClickSendCode,disabled:!!i||!!v||a,countDownSecond:v,text:l(y?"common_registration_phone_sms_button":"common_registration_phone_input_button")},void 0)]},void 0),S&&k&&(0,o.jsx)(Il,{text:l(k),type:"error"},void 0)]},void 0)})),td=(0,w.memo)((function(e){const t=(0,w.useCallback)((t=>{t.preventDefault(),e.onSubmit()}),[e]);return(0,o.jsx)("form",Object.assign({onSubmit:t},{children:e.children}),void 0)}));var id=i(46063);const od=(0,re.Z)("p",{target:"e13i10ol0"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"semiBold"}),{margin:"8px 0 4px"}]),"label:PDescriptionTitleContainer;"),nd=(0,w.memo)((function(e){const{loginError:t,autoFocus:i,create:n=!0}=e,[{password:a,hasInvalid:r,lengthValid:s,contentValid:l},{updatePassword:d}]=(0,U.b7)(Sl),c=(0,Ji.Q)("WebApp_Login"),[p,u]=(0,w.useState)(!1),g=(0,w.useCallback)((()=>{u(!0)}),[]),m=(0,w.useCallback)((()=>{u(!1)}),[]),h=(0,w.useCallback)((e=>{d({value:e.target.value})}),[d]);(0,w.useEffect)((()=>()=>{d({value:""})}),[]);const _=n&&(!1===s||!1===l)&&!p,v=(!s||!l)&&a||p,y=!1!==s||p?!0===s?"success":"default":"error",f=!1!==l||p?!0===l?"success":"default":"error";return(0,o.jsxs)(Ul,{children:[(0,o.jsx)($l,{autoFocus:i,placeholder:c("Password"),onFocus:g,onBlur:m,onChange:h,value:a,errorState:_||t,password:!0,autocomplete:"new-password"},void 0),r&&(0,o.jsx)(Il,{text:c("createpw_error_6"),type:"error"},void 0),v&&n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(od,{children:c("common_registration_password_pc_text")},void 0),(0,o.jsx)(Il,Object.assign({text:c("common_registration_password_pc_1"),type:y},{children:(0,o.jsx)(id.Z,{fill:"success"===y?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0),(0,o.jsx)(Il,Object.assign({text:c("createpw_helptext_2"),type:f},{children:(0,o.jsx)(id.Z,{fill:"success"===f?"rgba(11, 224, 155, 1.0)":"rgba(22,24,35,.5)"},void 0)}),void 0)]},void 0)]},void 0)})),ad=(0,re.Z)(_t.W,{target:"e1521l5b0"})([{width:"100%",marginTop:"32px"}],"label:StyledButton;"),rd=(0,re.Z)("div",{target:"e1521l5b1"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),sd=(0,re.Z)("div",{target:"e1521l5b3"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),ld=(0,re.Z)("div",{target:"e1521l5b4"})((({theme:e})=>[{marginTop:"20px",border:"1px solid",borderColor:e.colors.LineSecondary2,padding:"13px",borderRadius:"2px",width:"100%",position:"relative",":before":{content:'""',height:"16px",position:"absolute",background:e.colors.BGPrimary,width:"16px",top:"-8px",left:"rtl"===e.direction?"unset":"calc(50% - 8px)",right:"rtl"===e.direction?"calc(50% - 8px)":"unset",borderInlineEnd:`1px solid ${e.colors.LineSecondary2}`,borderTop:`1px solid ${e.colors.LineSecondary2}`,transform:"rotateZ(-45deg)"}}]),"label:DivPhoneNotRegistered;"),dd=(0,re.Z)("p",{target:"e1521l5b5"})((({theme:e,link:t})=>[{fontSize:"12px",lineHeight:"17px",color:t?e.colors.Primary:e.colors.TextPrimary,fontWeight:600,margin:"0 0 8px",cursor:"pointer"}]),"label:PPhoneNotRegistered;"),cd=(0,re.Z)("div",{target:"eop2wpq1"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{marginBottom:"16px",fontSize:"18px",lineHeight:"24px",display:"flex",justifyContent:"space-between"}]),"label:DivDescription;"),pd=()=>{const e=(0,ee.fz)(ys),t=(0,Ji.Q)("WebApp_Login"),[{forceResetResponse:i,loginLoading:n},{handleForceResetPwdByEmail:a,handleForceResetPwdByPhone:r,clearForceResetRes:s}]=(0,U.b7)(As),{conditional_login_ticket:l,type:d,email:c,mobile:p}=(0,H.m7)(i),[{sendCodeLoading:u,ticket:g,code:m,codeFormatError:h},{sendPhoneCodeForForceResetPwd:_,sendEmailCodeForForceResetPwd:v}]=(0,U.b7)(ws),{password:y,contentValid:f,lengthValid:b}=(0,U.mp)(Sl),x=Tl(),k=(0,w.useCallback)((()=>{"email"===d?v({conditional_login_ticket:l}):_({conditional_login_ticket:l})}),[d,v,l,_]),S=(0,w.useCallback)((()=>{const t={code:m,ticket:null!=g?g:"",password:y,conditional_login_ticket:l};e.forceResetSubmit(),"email"===d?a(t):r(t)}),[m,l,a,r,e,y,g,d]),C=!(m&&y&&f&&b&&!h),j="email"===d?t("setting_password_code_email_text",{email:c}):t("setting_password_code_sms_text",{mobile:p}).replace(/(\D{1})(4)(\D{1})/,((e,t,i,o)=>`${t}6${o}`));return(0,w.useEffect)((()=>()=>{s()}),[]),(0,o.jsxs)(td,Object.assign({onSubmit:S},{children:[(0,o.jsx)(rd,{children:t("common_login_reset_password_title")},void 0),(0,o.jsx)(cd,{children:t("changepw_banner")},void 0),(0,o.jsx)(ed,{email:"email"===d,autoSendFirstTime:!0,disabled:!l,codeFromNumber:l,loading:u,onClickSendCode:k},void 0),(0,o.jsx)(Il,{text:j,type:"default",style:{marginBottom:"4px"}},void 0),(0,o.jsx)(nd,{loginError:Boolean(x)},void 0),(0,o.jsx)(Il,{text:t(x),type:"error"},void 0),(0,o.jsx)(ad,Object.assign({buttonTheme:"primary",size:"largeNew",type:"submit",disabled:C,loading:n},{children:t("Login")}),void 0)]}),void 0)},ud=(0,re.Z)(Wr,{target:"ep888o80"})({fontSize:"12px",display:"inline-block"},"label:StyledLink;"),gd=(0,w.memo)((function({text:e,path:t,replace:i,textTheme:n}){return(0,o.jsx)(ud,{path:t,text:e,replace:i,textTheme:n},void 0)})),md=(0,re.Z)("div",{target:"e16xc1ie0"})({marginBottom:"9px",position:"relative"},"label:DivEmailContainer;"),hd=(0,re.Z)("ul",{target:"e16xc1ie1"})((({theme:e})=>({position:"absolute",top:"44px",borderRadius:"4px",background:e.colors.BGPrimary,border:"1px solid",borderColor:e.colors.LineSecondary,zIndex:2,marginTop:"4px",width:"100%",padding:"0"})),"label:UlList;"),_d=(0,re.Z)("li",{target:"e16xc1ie2"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),vd=(0,w.memo)((function(e){const{placeholder:t,errorMsg:i,onChange:n,emailRegistered:a}=e,r=(0,Ji.Q)("WebApp_Login"),{emailSuffixConfig:s}=as((()=>["emailSuffixConfig"]),[]),[l,d]=(0,w.useState)(!1),[c,p]=(0,w.useState)(!1),[u,g]=(0,w.useState)(""),m=(0,w.useCallback)((()=>{setTimeout((()=>{d(!0)}),300)}),[]),h=(0,w.useCallback)((()=>{d(!1)}),[]),_=(0,w.useCallback)((e=>{const t=e.target.value,i=bs(t);!i&&l&&t.includes("@")&&s.length?p(!0):p(!1),g(t),n({value:t,valid:i})}),[l,s.length,n]),v=(0,w.useCallback)((e=>()=>{g(e),p(!1),n({value:e,valid:!0})}),[n]),y=(Boolean(i)||a)&&!l;return(0,o.jsxs)(md,{children:[(0,o.jsx)($l,{placeholder:t,onFocus:m,onBlur:h,onChange:_,value:u,errorState:y,autocomplete:"email",name:"email"},void 0),c&&(0,o.jsx)(hd,{children:s.map(((e,t)=>(0,o.jsxs)(_d,Object.assign({onClick:v(`${u}${e}`)},{children:[u,e]}),t)))},void 0),!l&&i&&(0,o.jsx)(Il,{text:r(i),type:"error"},void 0)]},void 0)})),yd=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[i,n]=(0,U.b7)(Ss),[{loginLoading:a},{changePwdByEmail:r}]=(0,U.b7)(As),[{sendCodeLoading:s,code:l,codeFormatError:d},{sendEmailCodeForReset:c}]=(0,U.b7)(ws),{password:p,lengthValid:u,contentValid:g}=(0,U.mp)(Sl),{emailErrorMsg:m,email:h=""}=i,_=Tl(),v=(0,w.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),r({password:p,email:h,emailCode:l})}),[t,r,p,h,l]),y=(0,w.useCallback)((e=>{n.setEmailInfo({email:e.value,valid:e.valid})}),[n]),f=(0,w.useCallback)((()=>{c({email:h,email_logic_type:2})}),[h,c]),b=!(h&&p&&l&&g&&u&&!d&&!m);return(0,o.jsxs)(td,Object.assign({onSubmit:v},{children:[(0,o.jsx)(rd,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(sd,{children:[e("setting_password_email_verify_title"),(0,o.jsx)(gd,{text:e("forget_password_switch_phone"),path:$.gY.loginForgetPhonePassword,replace:!0},void 0)]},void 0),(0,o.jsx)(vd,{placeholder:e("common_login_reset_email_input_placeholder"),onChange:y,errorMsg:m},void 0),(0,o.jsx)(ed,{email:!0,disabled:Boolean(m)||!h,codeFromNumber:h,loading:s,onClickSendCode:f},void 0),(0,o.jsx)(nd,{loginError:Boolean(_)},void 0),(0,o.jsx)(Il,{text:e(_),type:"error"},void 0),(0,o.jsx)(ad,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew",disabled:b,loading:a},{children:e("Login")}),void 0)]}),void 0)};var fd=i(71271),bd=i(66036);const xd=(0,re.Z)("ul",{target:"e2hldqz0"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{padding:"0",margin:0}]),"label:UlListContainer;"),kd=(0,re.Z)("li",{target:"e2hldqz1"})((({theme:e,selected:t})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary2"}),()=>t&&{backgroundColor:"rgba(22, 24, 35, .03)"},{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),Sd=(0,re.Z)("span",{target:"e2hldqz2"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary"}),{paddingInlineEnd:"4px"}]),"label:SpanItemName;"),wd=(0,re.Z)("span",{target:"e2hldqz3"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextSecondary"})]),"label:SpanItemCode;"),Cd=({filterCountryList:e=[],onSelected:t,searchText:i,currentSelectCode:n,matchSearchArea:a})=>{const{$isMobile:r}=(0,H.m7)((0,oe.L)((()=>["$isMobile"]),[])),s=(0,Ji.Q)("WebApp_Login"),l=RegExp(i.replace("+","\\+"),"ig"),d=(0,w.useCallback)((({code:e,shortname:i})=>()=>{t({code:e,area:i})}),[t]);return(0,o.jsxs)(xd,{children:[fs.map((t=>{const{label:a,lists:s}=t;return(0,o.jsx)("div",Object.assign({id:a},{children:s.map((t=>{const{name:a,code:s,shortname:c}=t;if(-1!==e.indexOf(c))return null;if(i&&!(a.match(l)||`+${s}`.match(l)||c.match(l)))return null;const p=`${n}`==`${s}`;return(0,o.jsx)(kd,Object.assign({selected:p,onClick:d({shortname:c,code:s})},{children:r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Sd,{children:a},void 0),(0,o.jsx)(wd,{children:`+${s}`},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Sd,{dangerouslySetInnerHTML:{__html:(u=`${a} +${s}`,i?u=u.replace(l,(e=>`<span style="color: #20D5EC">${e}</span>`)):u)}},void 0),p&&(0,o.jsx)(bd.Z,{width:16,height:16,fill:"#000"},void 0)]},void 0)}),a+s);var u}))}),a)})),Boolean(!a)&&(0,o.jsx)(kd,Object.assign({selected:!1,style:{justifyContent:"center"}},{children:s("registration_phone_search_empty")}),void 0)]},void 0)},jd=(0,re.Z)("div",{target:"emwsnhg0"})({top:"45px",height:"35px",width:"326px",boxSizing:"border-box",borderBottom:"1px solid rgba(22, 24, 35, .12)",background:"#fff",marginTop:"4px",display:"flex",justifyContent:"space-between",flexShrink:0},"label:DivSearchContainer;"),Td=(0,re.Z)("div",{target:"emwsnhg1"})((({theme:e})=>({margin:"0 15px",color:e.colors.LineInput,display:"flex",alignItems:"center"})),"label:DivSearchIcon;"),Od=(0,re.Z)("input",{target:"emwsnhg2"})((({theme:e})=>({outline:"none",border:"none",flex:"1",caretColor:e.colors.Primary})),"label:InputSearch;"),Id=()=>{const e=(0,Ji.Q)("WebApp_Login"),{matchSearchArea:t}=(0,U.mp)(xs),{setAreaSearchText:i,selectAreaCode:n}=(0,U.qj)(xs),a=(0,w.useCallback)((e=>{i(e.target.value)}),[i]),r=(0,w.useCallback)((e=>{13===e.keyCode&&t&&n({code:t.code,area:t.shortname})}),[t,n]);return(0,w.useEffect)((()=>()=>{i("")}),[i]),(0,o.jsxs)(jd,{children:[(0,o.jsx)(Td,{children:(0,o.jsx)(zo.Z,{width:14,height:14},void 0)},void 0),(0,o.jsx)(Od,{autoFocus:!0,maxLength:35,onKeyUp:r,placeholder:e("registration_phone_search_placeholder"),onChange:a},void 0)]},void 0)},Pd=(0,re.Z)("div",{target:"e1llxcni0"})((({theme:e})=>[(0,se.YJ)({direction:e.direction,start:"0"}),{maxHeight:"320px",background:e.colors.BGPrimary,border:"0.5px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",borderRadius:"4px",position:"absolute",top:"54px",display:"flex",flexDirection:"column",zIndex:2}]),"label:DivSelectorContainer;"),Ed=(0,re.Z)("div",{target:"e1llxcni1"})({flex:"1",overflow:"auto"},"label:DivListWrapper;"),Ld=e=>(0,o.jsxs)(Pd,{children:[(0,o.jsx)(Id,{},void 0),(0,o.jsx)(Ed,{children:(0,o.jsx)(Cd,{matchSearchArea:e.matchSearchArea,filterCountryList:e.filterCountryList,onSelected:e.onSelected,currentSelectCode:e.currentSelectCode,searchText:e.searchText},void 0)},void 0)]},void 0),Ad=(0,w.memo)((function({errorStatus:e,filterCountryList:t}){const i=(0,w.useRef)(null),{$region:n,$appType:a}=(0,H.m7)((0,oe.L)((()=>["$region","$appType"]),[])),[r,s]=(0,U.b7)(xs),{area:l,areaCode:d,phoneErrorMsg:c,showAreaCodeSelector:p,searchText:u,phone:g,matchSearchArea:m}=r,[h,_]=(0,w.useState)(!1),{checkPhoneNumberFormat:v}=s,{toggleAreaCodeSelector:y,selectAreaCode:f}=s,b=(0,Ji.Q)("WebApp_Login");(0,w.useEffect)((()=>{if(!d){let e=!1;if(fs.forEach((({lists:t})=>t.forEach((({code:t,shortname:i})=>{i===n&&(e=!0,s.selectAreaCode({code:t,area:i}))})))),!e){let e="m"===a?{code:1,area:"US"}:{code:81,area:"JP"};(null==t?void 0:t.find((t=>t===e.area)))&&(e={code:1,area:"CA"}),s.selectAreaCode(e)}}}),[a,n,d,s,t]);const x=(0,w.useCallback)((e=>{var t;p&&!(null===(t=null==i?void 0:i.current)||void 0===t?void 0:t.contains(e.target))&&y()}),[p,y]);(0,w.useEffect)((()=>(window.addEventListener("mousedown",x),()=>{window.removeEventListener("mousedown",x)})),[s,x]);const k=(0,w.useCallback)((e=>{v({phone:e.target.value})}),[v]),S=(0,w.useCallback)((()=>{_(!0)}),[]),C=(0,w.useCallback)((()=>{_(!1)}),[]),j=(0,w.useCallback)((({code:e,area:t})=>{f({code:e,area:t})}),[f]),T=Boolean((c||e)&&!h);return(0,o.jsxs)(Ul,{children:[(0,o.jsxs)(Gl,Object.assign({errState:T},{children:[(0,o.jsxs)(Hl,Object.assign({ref:i},{children:[(0,o.jsxs)(ql,Object.assign({onClick:y},{children:[(0,o.jsxs)(Zl,{children:[l," +",d]},void 0),(0,o.jsx)(fd.Z,{style:{transform:p?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"}},void 0)]}),void 0),p&&(0,o.jsx)(Ld,{matchSearchArea:m,filterCountryList:t,onSelected:j,currentSelectCode:d,searchText:u},void 0)]}),void 0),(0,o.jsx)(Wl,{value:g,border:!1,errState:T,placeholder:b("phone_number"),onChange:k,onFocus:S,onBlur:C,name:"mobile",autocomplete:"tel-national"},void 0)]}),void 0),!h&&(0,o.jsx)(Il,{text:b(c||e||""),type:"error"},void 0)]},void 0)})),Rd=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[i]=(0,U.b7)(xs),{phoneErrorMsg:n,mobile:a,phone:r}=i,[{sendCodeLoading:s,codeFormatError:l,code:d},{sendPhoneCodeForResetPwd:c}]=(0,U.b7)(ws),[{loginLoading:p},{changePwdByMobile:u}]=(0,U.b7)(As),{password:g,lengthValid:m,contentValid:h}=(0,U.mp)(Sl),_=Tl(),v=(0,w.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit(),u({password:g,mobile:a,phoneCode:d})}),[t,u,g,a,d]),y=(0,w.useCallback)((()=>{c({mobile:a})}),[a,c]),f=!(a&&g&&d&&h&&m&&!n&&!l);return(0,o.jsxs)(td,Object.assign({onSubmit:v},{children:[(0,o.jsx)(rd,{children:e("common_login_reset_password_title")},void 0),(0,o.jsxs)(sd,{children:[e("setting_bind_phone_input_title"),(0,o.jsx)(gd,{text:e("forget_password_switch_email"),path:$.gY.loginForgetEmailPassword,replace:!0},void 0)]},void 0),(0,o.jsx)(Ad,{},void 0),(0,o.jsx)(ed,{disabled:Boolean(n)||!r,codeFromNumber:a,loading:s,onClickSendCode:y},void 0),(0,o.jsx)(nd,{loginError:Boolean(_)},void 0),(0,o.jsx)(Il,{text:e(_),type:"error"},void 0),(0,o.jsx)(ad,Object.assign({buttonTheme:"primary",size:"largeNew",type:"submit",disabled:f,loading:p},{children:e("Login")}),void 0)]}),void 0)},Md=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[{loginLoading:i},{handlePasswordLogin:n}]=(0,U.b7)(As),{password:a,hasInvalid:r}=(0,U.mp)(Sl),[s,l]=(0,w.useState)(""),d=Tl([s]),c=(0,w.useCallback)((()=>{const e=bs(s)?s:void 0;t.setPlatform(e?"email":"handle"),t.loginSubmit(),n({username:s,password:a,email:e})}),[n,t,a,s]),p=(0,w.useCallback)((e=>{l(e.target.value)}),[]);return(0,o.jsxs)(td,Object.assign({onSubmit:c},{children:[(0,o.jsx)(rd,{children:e("Login")},void 0),(0,o.jsxs)(sd,{children:[e("Email or Username")," ",(0,o.jsx)(gd,{text:e("common_login_switch_phone"),path:$.gY.loginPhone,replace:!0},void 0)]},void 0),(0,o.jsx)($l,{style:{marginBottom:"9px"},placeholder:e("Email or Username"),onChange:p,name:"username"},void 0),(0,o.jsx)(nd,{create:!1,loginError:Boolean(d)},void 0),d&&(0,o.jsx)(Il,{text:e(d),type:"error"},void 0),(0,o.jsx)("div",Object.assign({style:{marginTop:"9px"}},{children:(0,o.jsx)(gd,{text:e("forget_password"),path:$.gY.loginForgetEmailPassword},void 0)}),void 0),(0,o.jsx)(ad,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew",disabled:!s||!a||r,loading:i},{children:e("Login")}),void 0)]}),void 0)},Dd=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendPhoneCodeForLogin:r,sendPhoneCodeForVerify:s}]=(0,U.b7)(ws),[{phoneNotRegistered:l,loginLoading:d},{handleSmsLogin:c,handleSmsVerify:p}]=(0,U.b7)(As),{registerPhone:u}=(0,U.qj)(Ls),{isSecurityVerification:g}=as((()=>["isSecurityVerification"]),[]),[m]=(0,U.b7)(xs),{mobile:h,phoneErrorMsg:_}=m,v=h&&n&&!_&&!a,y=Tl(),f=(0,w.useCallback)((()=>{t.setPlatform("sms_verification"),t.loginSubmit();const e={mobile:h,phoneCode:n,login_only:!0};g?p(e):c(e)}),[c,p,g,t,h,n]),b=(0,w.useCallback)((()=>{g?s({mobile:h}):r({mobile:h})}),[g,h,r,s]),x=(0,w.useCallback)((()=>{u({})}),[u]);return(0,o.jsxs)(td,Object.assign({onSubmit:f},{children:[(0,o.jsx)(rd,{children:e("Login")},void 0),(0,o.jsxs)(sd,{children:[e("phone")," ",(0,o.jsx)(gd,{text:e("common_login_switch_email"),path:$.gY.loginEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Ad,{},void 0),(0,o.jsx)(ed,{disabled:Boolean(_)||!h,codeFromNumber:h,loading:i,errorMsg:y,onClickSendCode:b},void 0),(0,o.jsx)(gd,{text:e("login_option_password"),path:$.gY.loginPhonePassword},void 0),(0,o.jsx)(ad,Object.assign({type:"submit",buttonTheme:"primary",size:"largeNew",disabled:!v,loading:d},{children:e("Login")}),void 0),l&&(0,o.jsxs)(ld,{children:[(0,o.jsx)(dd,{children:e("common_login_sms_unregistered_pc_1")},void 0),(0,o.jsx)(dd,Object.assign({link:!0,onClick:x},{children:e("common_login_sms_unregistered_pc_2")}),void 0)]},void 0)]}),void 0)},Fd=(0,re.Z)("div",{target:"e1c067ot0"})({display:"flex",alignItems:"center",marginTop:"9px"},"label:DivLinksContainer;"),Nd=(0,re.Z)("span",{target:"e1c067ot1"})((({theme:e})=>({width:"1px",height:"12px",margin:"0 16px",background:e.colors.LineSecondary})),"label:SpanSplitLine;"),Bd=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[{loginLoading:i},{handlePasswordLogin:n}]=(0,U.b7)(As),{phoneErrorMsg:a,phone:r,areaCode:s}=(0,U.mp)(xs),{password:l,hasInvalid:d}=(0,U.mp)(Sl),c=Tl(),p=(0,w.useCallback)((()=>{const e=`+${s} ${r}`;t.setPlatform("phone"),t.loginSubmit(),n({account:e,password:l,mobile:e})}),[s,n,t,l,r]);return(0,o.jsxs)(td,Object.assign({onSubmit:p},{children:[(0,o.jsx)(rd,{children:e("Login")},void 0),(0,o.jsxs)(sd,{children:[e("phone")," ",(0,o.jsx)(gd,{text:e("common_login_switch_email"),path:$.gY.loginEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Ad,{},void 0),(0,o.jsx)(nd,{create:!1,loginError:Boolean(c)},void 0),(0,o.jsx)(Il,{text:e(c),type:"error"},void 0),(0,o.jsxs)(Fd,{children:[(0,o.jsx)(gd,{text:e("forget_password"),path:$.gY.loginForgetPhonePassword},void 0),(0,o.jsx)(Nd,{},void 0),(0,o.jsx)(gd,{text:e("common_login_password_button"),path:$.gY.loginPhone},void 0)]},void 0),(0,o.jsx)(ad,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:Boolean(a)||!r||!l||d,loading:i,type:"submit"},{children:e("Login")}),void 0)]}),void 0)};var zd=i(41836),$d=i(29641),Ud=i(12502),Wd=i(36751),Gd=i.n(Wd),Hd=i(15207),qd=i(401);let Zd=class extends de.D{constructor(e,t,i){super(),this.service=e,this.fetch=t,this.loginSlardar=i,this.defaultState={status:"init",inQrcodePage:!1}}setStatus(e,t){e.status=t}setInQRCodePage(e,t){e.inQrcodePage=t,t&&(e.status="init")}setGetQrcodeResutl(e,t){const{qrCodeUrl:i,clientSecret:o,token:n}=t;e.token=n,e.clientSecret=o,e.qrCodeUrl=i,e.status="new"}getQrCodeUrl(e){return e.pipe((0,gi.z)((()=>this.service.getQrCodeUrl({next:"https://www.tiktok.com"}).pipe((0,gi.z)((e=>{const{token:t,qrcode_index_url:i}=e,o=function(e=8){const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let i="";for(let o=0;o<e;o++)i+=t[Math.ceil(35*Math.random())];return i}(),n=Ar().parse(decodeURIComponent(i).split("?")[1]),{next_url:a}=n,r=(0,g.__rest)(n,["next_url"]),s=`${a}?client_secret=${o}`,l=`${decodeURIComponent(i).split("?")[0]}?${Ar().stringify(Object.assign(Object.assign({},r),{next_url:s}))}`;return this.shortenQrUrl(l).pipe((0,me.U)((e=>{var i;return this.getActions().setGetQrcodeResutl({token:t,clientSecret:o,qrCodeUrl:null!==(i=e.short_url)&&void 0!==i?i:l})})))}))))))}checkQrConnect(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([{ttpConfig:e,oldStatus:t},{token:i="",clientSecret:o=""}])=>this.checkQrcodeRequest({token:i,clientSecret:o,ttpConfig:e,oldStatus:t}).pipe((0,me.U)((e=>{const{status:t,error_code:i,description:o}=e;return i?(Ut.h.open({content:o,duration:3,widthType:"half"}),this.getActions().setStatus("error")):this.getActions().setStatus(t)}))))))}shortenQrUrl(e){return this.fetch.post("https://www.tiktok.com/shorten/",{body:(0,Lr.stringify)({belong:"tiktok-webapp-qrcode",persist:0,expired_time:3600,targets:e})}).pipe((0,me.U)((e=>{var t;return null!==(t=e.data[0])&&void 0!==t?t:{status:"failed",short_url:void 0}})),(0,hi.K)((e=>(this.loginSlardar.QRCodeShortenFail({code:`${e.code}`}),(0,mi.of)({status:"failed",short_url:void 0})))))}checkQrcodeRequest(e){const{token:t,clientSecret:i,ttpConfig:o,oldStatus:n}=e,{open:a,syncSeverList:r}=o||{},s=a?r:[{name:"gloable",domain:""}];return(0,Cs.D)(s.map((e=>this.service.checkQrconnect({token:null!=t?t:"",next:"https://www.tiktok.com",baseURL:e.domain})))).pipe((0,gi.z)((e=>{const t=e.find((e=>e.client_secret===i));for(const o of e){const{status:e,client_secret:a,error_code:r,description:s}=t||o;if(this.state.inQrcodePage&&("init"===e||"new"===e||e===n))throw new Error("user not scanned, need check agin");return a===i?(0,mi.of)({status:e}):r?(0,mi.of)({error_code:r,description:s}):(0,mi.of)({status:e})}return(0,mi.of)(this.noop())})),(0,Hd.a)((e=>e.pipe((0,qd.j)((()=>(0,Na.H)(800)))))))}};var Vd;function Qd(){return Qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Qd.apply(this,arguments)}(0,g.__decorate)([(0,ce.cQ)(),(0,g.__metadata)("design:type",ue.y)],Zd.prototype,"dispose$",void 0),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],Zd.prototype,"setStatus",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Zd.prototype,"setInQRCodePage",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Zd.prototype,"setGetQrcodeResutl",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Zd.prototype,"getQrCodeUrl",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Zd.prototype,"checkQrConnect",null),Zd=(0,g.__decorate)([(0,pe.Y)("QRCodeModule"),(0,g.__metadata)("design:paramtypes",[gs.Q,ve.r,Ms.M])],Zd);const Yd=function(e){return w.createElement("svg",Qd({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Vd||(Vd=w.createElement("path",{fill:"#FACE15",fillRule:"evenodd",d:"M20.552 6.917c1.547-2.63 5.35-2.63 6.896 0L43.95 34.972C45.519 37.64 43.597 41 40.503 41H7.497c-3.094 0-5.016-3.361-3.448-6.028L20.552 6.917zM24 8.945L7.497 37h33.006L24 8.945zM22 18a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1h-2a1 1 0 01-1-1v-9zm2 17a2.5 2.5 0 100-5 2.5 2.5 0 000 5z",clipRule:"evenodd"})))};var Kd;function Jd(){return Jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Jd.apply(this,arguments)}const Xd=function(e){return w.createElement("svg",Jd({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",width:"1em",height:"1em"},e),Kd||(Kd=w.createElement("path",{fill:"#0BE09B",fillRule:"evenodd",d:"M42.692 12.722a1 1 0 01-.03 1.414L18.886 36.944a2 2 0 01-2.8-.03L5.294 26.121a1 1 0 010-1.414l1.414-1.414a1 1 0 011.414 0l9.408 9.408 22.365-21.452a1 1 0 011.414.03l1.384 1.443z",clipRule:"evenodd"})))};var ec=i(77523),tc=i(53995),ic=i(45253),oc=i(93483);const nc=(0,re.Z)("div",{target:"e12kzezm0"})({width:"100%",height:"160px",textAlign:"center",position:"relative"},"label:DivCodeImage;"),ac=(0,re.Z)("img",{target:"e12kzezm1"})({width:"160px",height:"100%",margin:"auto"},"label:ImgCode;"),rc=(0,re.Z)("div",{target:"e12kzezm2"})((({clickAble:e,theme:t})=>[(0,se.YJ)({direction:t.direction,start:"calc(50% - 80px)"}),{position:"absolute",display:"flex",flexDirection:"column",width:"160px",height:"100%",top:0,backgroundColor:"rgba(0, 0, 0, 0.68)",borderRadius:"10px",padding:"0 24px",justifyContent:"center",alignItems:"center",cursor:e?"pointer":"unset"}]),"label:DivCodeMask;"),sc=(0,re.Z)("span",{target:"e12kzezm3"})({fontSize:"36px",height:"36px"},"label:SpanCodeTip;"),lc=(0,re.Z)("p",{target:"e12kzezm4"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima"}),{color:"rgba(255, 255, 255, .9)",fontWeight:600,lineHeight:"20px",fontSize:"14px"}]),"label:PCodeTip;"),dc=(0,re.Z)("div",{target:"e12kzezm5"})({width:"100%",textAlign:"center",marginTop:"16px"},"label:DivStepContainer;"),cc=(0,re.Z)("p",{target:"e12kzezm6"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima"}),{width:"276px",fontSize:"14px",lineHeight:"20px",margin:"0 auto 4px"}]),"label:PStep;"),pc=(0,re.Z)("div",{target:"e12kzezm7"})({display:"flex",flexDirection:"column",position:"relative",marginTop:"20px"},"label:DivInstruction;"),uc=(0,re.Z)("div",{target:"e12kzezm8"})({position:"absolute",width:"100%",flex:"auto",display:"none",justifyContent:"center",alignItems:"center",backgroundColor:"#fff",zIndex:10,transform:"translateY(-100%)",transition:"opacity 200ms cubic-bezier(0.65, 0, 0.35, 1)"},"label:DivTipImageMask;"),gc=(0,re.Z)("img",{target:"e12kzezm9"})({width:"180px",height:"289px"},"label:ImgTip;"),mc=(0,re.Z)("p",{target:"e12kzezm10"})((({theme:e})=>[(0,se.GI)({theme:e,color:"Primary",fontFamily:"Proxima"}),{fontWeight:600,fontSize:"16px",lineHeight:"22px",cursor:"pointer",margin:"24px 0 4px",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",":hover":{"& + div":{display:"flex"}}}]),"label:PInstructionTip;"),hc=(0,re.Z)("div",{target:"e12kzezm11"})({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginTop:"40px",fontWeight:600},"label:DivBack;"),_c=()=>{var e,t,i;const n=(0,Ji.Q)("WebApp_Login"),a=(0,j.k6)(),r=(0,ee.fz)(ys),{loginModalShow:s}=(0,U.mp)(K.r),{ttpConfig:l}=as((()=>["ttpConfig"]),[]),{$appId:d,$language:c}=null!==(e=(0,oe.L)((()=>["$appId","$language"]),[]))&&void 0!==e?e:{},[{qrCodeUrl:p,status:u},{getQrCodeUrl:g,checkQrConnect:m,setInQRCodePage:h}]=(0,U.b7)(Zd),{handleLoginResult:_}=(0,U.qj)(As),v=n("common_login_qrcode_copy",{scan_button:"{scan}",Discover:"{discover}"}).split("\\n"),[y,f=""]=(null!==(t=v[0])&&void 0!==t?t:"").split("{discover}"),[b,x=""]=(null!==(i=v[1])&&void 0!==i?i:"").split("{scan}"),k="ar"===c||"ur"===c||"he-IL"===c,S=(0,w.useCallback)((()=>{a.goBack()}),[a]),C=(0,w.useCallback)((()=>{g()}),[g]);(0,w.useEffect)((()=>(h(!0),C(),()=>{h(!1)})),[]),(0,w.useEffect)((()=>{"scanned"===u&&(r.scanQrCode(),m({ttpConfig:l,oldStatus:"scanned"})),"confirmed"===u&&(r.setPlatform("QRcode"),_({error_code:0}))}),[m,_,r,u,l]),(0,w.useEffect)((()=>{p&&m({ttpConfig:l})}),[m,p,l]);const T="new"!==u;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rd,{children:n("common_login_qrcode_title")},void 0),(0,o.jsxs)(nc,{children:[p?(0,o.jsx)(Gd(),{size:160,value:p,style:{borderRadius:T?"10px":"unset"}},void 0):(0,o.jsx)(ac,{src:1233===d?ic:oc,alt:"qrcode"},void 0),["scanned","confirmed"].includes(u)&&(0,o.jsxs)(rc,{children:[(0,o.jsx)(sc,{children:(0,o.jsx)(Xd,{},void 0)},void 0),(0,o.jsx)(lc,{children:n("common_login_qrcode_status_scanned")},void 0)]},void 0),["expired","refuse","error"].includes(u)&&(0,o.jsxs)(rc,Object.assign({onClick:C,clickAble:!0},{children:[(0,o.jsx)(sc,{children:(0,o.jsx)(Yd,{},void 0)},void 0),(0,o.jsx)(lc,{children:n("expired"===u?"common_login_qrcode_status_expired":"common_login_qrcode_status_failed_2")},void 0)]}),void 0),"init"===u&&(0,o.jsx)(rc,{children:(0,o.jsx)(Wt.g,{center:!0,size:"small"},void 0)},void 0)]},void 0),(0,o.jsxs)(dc,{children:[(0,o.jsxs)(cc,{children:[y,(0,o.jsx)("b",{children:n("common_login_qrcode_discover")},void 0),f]},void 0),(0,o.jsxs)(cc,{children:[b,(0,o.jsx)(zd.Z,{},void 0),x]},void 0),(0,o.jsx)(cc,{children:v[2]},void 0)]},void 0),(0,o.jsxs)(pc,{children:[(0,o.jsxs)(mc,{children:[(0,o.jsx)($d.Z,{},void 0),(0,o.jsx)("span",Object.assign({style:{marginInlineStart:"4px"}},{children:n("common_login_qrcode_checkinstruction")}),void 0)]},void 0),(0,o.jsx)(uc,{children:(0,o.jsx)(gc,{src:k?ec:tc},void 0)},void 0)]},void 0),!s&&(0,o.jsxs)(hc,Object.assign({onClick:S},{children:[(0,o.jsx)(Ud.Z,{},void 0),n("common_login_back")]}),void 0)]},void 0)},vc=(0,re.Z)("div",{target:"e1d7z6y00"})((({theme:e})=>[{color:e.colors.TextPrimary,border:`1px solid ${e.colors.LineSecondary2}`,borderRadius:"2px",backgroundColor:e.colors.BGInput,paddingInlineStart:"12px",lineHeight:"44px",outline:"none",fontSize:"16px",height:"44px",width:"100%"}]),"label:DivEmailContainer;"),yc=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[{loginLoading:i},{handlePasswordLogin:n}]=(0,U.b7)(As),{email:a}=(0,U.mp)(Ss),[r,s]=(0,w.useState)(""),l=Tl([r]),d=(0,w.useCallback)((()=>{t.setPlatform("email"),t.loginSubmit(),n({email:a,password:r,username:a})}),[a,n,t,r]),c=(0,w.useCallback)((e=>{s(e.target.value)}),[]);return(0,o.jsxs)(td,Object.assign({onSubmit:d},{children:[(0,o.jsx)(rd,{children:e("Login")},void 0),(0,o.jsx)(sd,{children:e("common_registration_email_existing_title")},void 0),(0,o.jsx)(vc,{children:a},void 0),(0,o.jsx)($l,{placeholder:e("Password"),onChange:c,style:{marginTop:"9px"},password:!0,border:!0,errorState:Boolean(l)},void 0),(0,o.jsx)(Il,{text:e(l||"common_registration_email_existing_text"),type:l?"error":"default"},void 0),(0,o.jsx)("div",Object.assign({style:{marginTop:"9px"}},{children:(0,o.jsx)(gd,{text:e("forget_password"),path:$.gY.loginForgetEmailPassword},void 0)}),void 0),(0,o.jsx)(ad,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:!r,loading:i,type:"submit"},{children:e("Login")}),void 0)]}),void 0)},fc=(0,re.Z)("div",{target:"e1tcmjut1"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),{fontSize:"33px"}]),"label:DivTitleContainer;"),bc=(0,re.Z)("p",{target:"e1tcmjut2"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"16px",lineHeight:"22px",margin:"16px 0"}]),"label:PDescriptionContainer;"),xc=(0,re.Z)("span",{target:"e1tcmjut4"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{display:"inline-block",fontSize:"14px",lineHeight:"17px",margin:"12px 0",paddingInlineEnd:"12px","& + &":{paddingInlineStart:"12px",position:"relative","&::before":{content:'""',position:"absolute",left:"rtl"===e.direction?"unset":"0",right:"rtl"===e.direction?"0":"unset",height:"12px",width:"1px",top:"2px",background:e.colors.LineSecondary}}}]),"label:SpanOptionsText;"),kc=(0,w.memo)((function(){const e=(0,Ji.Q)("WebApp_Login"),[{verifyWays:t,type:i},{setTwoStepType:n}]=(0,U.b7)(jl),a=(0,w.useCallback)((e=>()=>{n(e)}),[n]);return(0,o.jsxs)(o.Fragment,{children:[t&&Object.keys(t).filter((e=>e!==i)).map((t=>{const i="email_verify"===t?"use email instead":"pwd_verify"===t?"use password instead":"use SMS instead",n=`/login/2sv/${wl[t]}`;return(0,o.jsx)(xc,Object.assign({onClick:a(t)},{children:(0,o.jsx)(Uo.rU,Object.assign({to:n},{children:e(i)}),void 0)}),t)})),"pwd_verify"===i&&1===Object.keys(t).length&&(0,o.jsx)(xc,{children:(0,o.jsx)(Uo.rU,Object.assign({to:$.gY.loginForgetPhonePassword},{children:e("Forgot password?")}),void 0)},void 0)]},void 0)})),Sc=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendEmailCodeForReset:r,sendEmailCodeForLogin:s,sendEmailCodeForVerify:l}]=(0,U.b7)(ws),[{verifyWays:d,not_login_ticket:c,verify_ticket:p,password:u="",loginLoading:g},{handleCodeVerify:m}]=(0,U.b7)(jl),{changePwdByEmail:h}=(0,U.qj)(As),_=Tl(),v=(0,w.useCallback)((()=>{t.twoStepSubmit({verification_method:"email",forReset:Boolean(u)}),u?h({not_login_ticket:c,verify_ticket:p,emailCode:n,password:u,email:""}):m({code:n,not_login_ticket:c,verify_ticket:p})}),[h,n,m,t,c,u,p]),y=(0,w.useCallback)((()=>{u?r({not_login_ticket:c,verify_ticket:p}):c?s({not_login_ticket:c,verify_ticket:p}):l({verify_ticket:p})}),[u,r,c,s,p,l]);return(0,o.jsxs)(td,Object.assign({onSubmit:v},{children:[(0,o.jsx)(bc,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(bc,{children:e("common_verify_email_text",{email:null==d?void 0:d.email_verify})},void 0),(0,o.jsx)(ed,{autoSendFirstTime:!0,email:!0,codeFromNumber:p,loading:i,onClickSendCode:y,errorMsg:_},void 0),(0,o.jsx)(kc,{},void 0),(0,o.jsx)(_t.W,Object.assign({disabled:Boolean(a)||!n,buttonTheme:"primary",size:"largeNew",style:{width:"100%"},loading:g,type:"submit"},{children:e("login_next")}),void 0)]}),void 0)},wc=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),{password:i,hasInvalid:n}=(0,U.mp)(Sl),[{verify_ticket:a,loginLoading:r},{handlePasswordVerify:s}]=(0,U.b7)(jl),l=Tl(),d=(0,w.useCallback)((()=>{t.twoStepSubmit({verification_method:"password",forReset:!1}),s({password:i,verify_ticket:a})}),[s,t,i,a]);return(0,o.jsxs)(td,Object.assign({onSubmit:d},{children:[(0,o.jsx)(bc,{children:e("common_verify_password_text")},void 0),(0,o.jsx)(nd,{create:!1,loginError:Boolean(l)},void 0),(0,o.jsx)(kc,{},void 0),(0,o.jsx)(Il,{text:e(l),type:"error"},void 0),(0,o.jsx)("div",{style:{height:"16px"}},void 0),(0,o.jsx)(_t.W,Object.assign({disabled:Boolean(n)||!i,buttonTheme:"primary",size:"largeNew",style:{width:"100%"},loading:r,type:"submit"},{children:e("login_next")}),void 0)]}),void 0)},Cc=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),[{sendCodeLoading:i,code:n,codeFormatError:a},{sendPhoneCodeForTwoStep:r,sendPhoneCodeForResetPwd:s}]=(0,U.b7)(ws),[{verifyWays:l,verify_ticket:d,not_login_ticket:c,password:p,loginLoading:u,accountQuery:g},{handleCodeVerify:m,handleSmsCodeVerifyReset:h}]=(0,U.b7)(jl),_=Tl(),v=(0,w.useCallback)((()=>{const e={verify_ticket:d,not_login_ticket:c,mobile:null==g?void 0:g.mobile};p?s(e):r(e)}),[null==g?void 0:g.mobile,c,p,s,r,d]),y=(0,w.useCallback)((()=>{t.twoStepSubmit({verification_method:"phone",forReset:Boolean(p)}),p?h({not_login_ticket:c,verify_ticket:d,code:n,password:p}):m({verify_ticket:d,code:n,not_login_ticket:c})}),[n,m,h,t,c,p,d]);return(0,o.jsxs)(td,Object.assign({onSubmit:y},{children:[(0,o.jsx)(bc,{children:e("common_login_reset_email_verify_title")},void 0),(0,o.jsx)(bc,{children:e("common_verify_sms_text",{mobile:null==l?void 0:l.mobile_sms_verify})},void 0),(0,o.jsx)(ed,{autoSendFirstTime:!0,codeFromNumber:d,loading:i,onClickSendCode:v,errorMsg:_},void 0),(0,o.jsx)(kc,{},void 0),(0,o.jsx)(_t.W,Object.assign({disabled:Boolean(a)||!n,buttonTheme:"primary",size:"largeNew",style:{width:"100%"},type:"submit",loading:u},{children:e("login_next")}),void 0)]}),void 0)},jc=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),i=(0,j.k6)(),{isTwoStep:n,verifyWays:a,password:r}=(0,U.mp)(jl),{type:s}=(0,j.UO)(),l=Cl[s];return(0,w.useEffect)((()=>{l&&(null==a?void 0:a[l])||i.replace($.gY.loginHome),t.twoStepNotify({verification_method:s,forReset:Boolean(r)})}),[i,t,r,s,a,l]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(fc,{children:e(n?"security_step_verification":"common_verify_title")},void 0),s===wl.pwd_verify?(0,o.jsx)(wc,{},void 0):s===wl.email_verify?(0,o.jsx)(Sc,{},void 0):(0,o.jsx)(Cc,{},void 0)]},void 0)},Tc=(0,w.memo)((()=>{(()=>{const e=(0,ee.fz)(ys);(0,w.useEffect)((()=>{e.loginNotify()}),[e])})(),(0,Dr.q)({pid:"login"});const{forceResetResponse:e}=(0,U.mp)(As),{$isMobile:t}=(0,H.m7)((0,oe.L)((()=>["$isMobile"]),[]));return(0,o.jsxs)(Vs,Object.assign({isMobile:t},{children:[(0,o.jsx)(el,{page:"login"},void 0),(0,o.jsxs)(j.rs,{children:[(0,o.jsx)(j.AW,{path:$.gY.loginHome,component:Ks,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginQRcode,component:_c,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginPhone,component:Dd,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginPhonePassword,component:Bd,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginEmail,component:Md,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginWithSignedEmail,component:yc,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginTwoStepVerify,component:jc,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginForgetEmailPassword,component:e?pd:yd,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginForgetPhonePassword,component:e?pd:Rd,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.loginDownloadApp,component:kl,exact:!0},void 0),(0,o.jsx)(j.AW,{path:"*",component:Ks},void 0)]},void 0),(0,o.jsx)(pl,{},void 0),(0,o.jsx)(_l,{},void 0)]}),void 0)}));var Oc=i(500);const Ic=(0,re.Z)("div",{target:"e6r3pim0"})({marginTop:"110px"},"label:DivContainer;"),Pc=(0,re.Z)("i",{target:"e6r3pim1"})({width:"72px",height:"72px"},"label:Iicon;"),Ec=(0,re.Z)("div",{target:"e6r3pim2"})((({theme:e})=>[(0,se.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:"24px",lineHeight:"28px",marginBottom:"24px"}]),"label:DivTitle;"),Lc=(0,re.Z)("div",{target:"e6r3pim3"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:"16px",textAlign:"center",lineHeight:"22px",marginBottom:"12px"}]),"label:DivDescription;"),Ac=(0,re.Z)("span",{target:"e6r3pim4"})((({theme:e})=>[{fontSize:"16px",lineHeight:"22px",color:e.colors.Primary,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}]),"label:SpanLinkText;"),Rc=()=>{const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),i=(0,w.useCallback)((()=>{t.privateNotifyClick({result:"ok"})}),[t]),n=(0,w.useCallback)((()=>{t.privateNotifyClick({result:"learn_more"})}),[t]);return(0,w.useEffect)((()=>{t.privateNotifyShow()}),[t]),(0,o.jsxs)(Ic,{children:[(0,o.jsx)(Pc,{},void 0),(0,o.jsx)(Ec,{children:e("title_private_on")},void 0),(0,o.jsx)(Lc,{children:e("descrip_private_on_signup")},void 0),(0,o.jsx)(Uo.rU,Object.assign({to:"https://support.tiktok.com/en/account-and-privacy/account-privacy-settings/making-your-account-public-or-private"},{children:(0,o.jsxs)(Ac,Object.assign({onClick:n},{children:[e("link_learn_more_private_accounts_signup")," >"]}),void 0)}),void 0),(0,o.jsx)(_t.W,Object.assign({size:"largeNew",buttonTheme:"primary",onClick:i,bottonTheme:"text",style:{marginTop:"16px",width:"100%"}},{children:e("button_signup_private_on")}),void 0)]},void 0)},Mc=(0,re.Z)("div",{target:"e7y6k0x0"})({marginTop:"110px"},"label:DivContainer;"),Dc=(0,re.Z)("div",{target:"e7y6k0x1"})((({theme:e})=>[(0,se.GI)({theme:e,fontWeight:"bold",fontFamily:"Sofia"}),{textAlign:"center",fontSize:"32px",lineHeight:"38px",marginBottom:"16px"}]),"label:DivTitle;"),Fc=(0,re.Z)("div",{target:"e7y6k0x2"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextSecondary"}),{fontSize:"18px",textAlign:"center",lineHeight:"25px",marginBottom:"16px"}]),"label:DivDescription;"),Nc=()=>{const e=(0,Ji.Q)("WebApp_Login");return(0,o.jsxs)(Mc,{children:[(0,o.jsx)(Dc,{children:e("mus_agegate_error_ftc_title")},void 0),(0,o.jsx)(Fc,{children:e("mus_agegate_error_ftc_desc")},void 0),(0,o.jsx)(Wr,Object.assign({path:$.gY.signupCreateAccount,underline:!1},{children:(0,o.jsx)(_t.W,Object.assign({size:"largeNew",buttonTheme:"primary",bottonTheme:"text",style:{marginTop:"16px",width:"100%"}},{children:e("Continue")}),void 0)}),void 0)]},void 0)},Bc=(0,re.Z)("div",{target:"e14eam340"})({width:"32px",position:"relative"},"label:DivCheckboxWrapper;"),zc=(0,re.Z)("input",{target:"e14eam341"})({width:"24px",height:"24px",visibility:"hidden"},"label:InputCheckbox;"),$c=(0,re.Z)("i",{target:"e14eam342"})((({theme:e,checked:t,circle:i=!0})=>[(0,se.YJ)({direction:e.direction,start:"0"}),{position:"absolute",top:0,width:i?"24px":"22px",height:i?"24px":"22px",borderRadius:i?"50%":"unset",border:"1px solid",borderColor:t?e.colors.Primary:e.colors.LineInverse,marginInlineEnd:"8px",display:"inline-block",background:t?e.colors.Primary:e.colors.BGPrimary,transition:"all .1s",padding:"3px 0",textAlign:"center",boxSizing:"border-box"}]),"label:ICheckboxIcon;"),Uc=({id:e,value:t,checked:i,onChange:n,circle:a})=>{const r=(0,w.useCallback)((e=>{n(e.target.checked,t)}),[n,t]);return(0,o.jsxs)(Bc,{children:[(0,o.jsx)(zc,{type:"checkbox",value:t,id:e,onClick:r},void 0),(0,o.jsx)("label",Object.assign({htmlFor:e},{children:(0,o.jsx)($c,Object.assign({checked:i,circle:a},{children:(0,o.jsx)(bd.Z,{fill:"white",fontSize:"14px"},void 0)}),void 0)}),void 0)]},void 0)},Wc=(0,re.Z)("h3",{target:"eb49p770"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia",fontWeight:"bold"}),{fontSize:"32px",lineHeight:"38px",marginBottom:"32px",textAlign:"center",marginTop:"64px"}]),"label:H3Title;"),Gc=(0,re.Z)("div",{target:"eb49p771"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),Hc=(0,re.Z)("p",{target:"eb49p772"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"15px",lineHeight:"24px",display:"inline"}]),"label:PCheckboxText;"),qc=(0,re.Z)("h5",{target:"eb49p773"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{fontSize:"15px",lineHeight:"24px",display:"inline",margin:0}]),"label:H5CheckboxTitle;"),Zc=(0,re.Z)("p",{target:"eb49p774"})((({theme:e})=>[{fontSize:"12px",lineHeight:"18px",maxHeight:"140px",overflowY:"auto",wordBreak:"break-word",padding:"12px",background:e.colors.BGPlaceholderDefault,color:e.colors.TextSecondary,borderRadius:"8px",marginBottom:"16px",marginTop:"12px",img:{maxWidth:"100%"},"h1, h2, h3, h4, h5, h6, p, ul, ol, li, strong, font, a":{fontSize:"12px !important",lineHeight:"15px !important",color:`${e.colors.TextSecondary} !important`,margin:0,padding:0},strong:{fontWeight:"normal"},"ul > li":{listStyleType:"disc"},a:{cursor:"pointer",textDecoration:"underline"}}]),"label:PPolicyContent;"),Vc=[{title:"common_registration_terms_and_conditions_decription_terms",value:"terms-of-service",content:""},{title:"common_registration_terms_and_conditions_decription_pp",value:"privacy-policy",content:""},{title:"register_page_marketing_push_title",value:"push-policy",content:"register_page_marketing_push_subtitle"}],Qc=(0,w.memo)((function(){const e=(0,Ji.Q)("WebApp_Login"),t=(0,j.k6)(),[{termsDomContent:i,privacyDomContent:n},{requestPolicyContent:a,setKrPolicySelection:r}]=(0,U.b7)(Os),[{fromNotRegisterLogin:s,thirdPlatformNotRegistered:l},{registerThirdPlatform:d,registerPhone:c}]=(0,U.b7)(Ls),[p,u]=(0,w.useState)([]);(0,w.useEffect)((()=>{a({articleKeys:["terms-of-service","privacy-policy"]})}),[a]);const g=(0,w.useCallback)((e=>{u(e?["terms-of-service","privacy-policy","push-policy"]:[])}),[]),m=(0,w.useCallback)(((e,t)=>{const i=p.indexOf(t);-1===i?u([...p,t]):(p.splice(i,1),u([...p]))}),[p]);(0,w.useEffect)((()=>{r(p)}),[r,p]);const h=(0,w.useCallback)((()=>{"Third"===s&&l?d({chooseAgeGate:!0,platform:l.platform,profileKey:l.profileKey}):"Phone"===s?c({chooseAgeGate:!0}):t.push($.gY.signupPhone)}),[s,t,c,d,l]),_=-1===p.indexOf("terms-of-service")||-1===p.indexOf("privacy-policy");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Wc,{children:e("common_registration_terms_and_conditions_title")},void 0),(0,o.jsxs)(Gc,{children:[(0,o.jsx)(Uc,{checked:3===p.length,onChange:g,id:"signup-policy-all"},void 0),(0,o.jsx)(Hc,{children:e("register_page_agree_all_kr")},void 0)]},void 0),Vc.map((({title:t,value:a,content:r})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Gc,{children:[(0,o.jsx)(Uc,{id:`signup-policy-${a}`,checked:-1!==p.indexOf(a),value:a,onChange:m},void 0),(0,o.jsx)(qc,{children:e(t)},void 0)]},`div-${a}`),"terms-of-service"===a?(0,o.jsx)(Zc,{dangerouslySetInnerHTML:{__html:i}},`p-${a}`):"privacy-policy"===a?(0,o.jsx)(Zc,{dangerouslySetInnerHTML:{__html:n}},`p-${a}`):(0,o.jsx)(Zc,{children:e(r)},`p-${a}`)]},void 0))),(0,o.jsx)(_t.W,Object.assign({size:"largeNew",buttonTheme:"primary",disabled:_,onClick:h,bottonTheme:"text",style:{margin:"32px 0",width:"100%"}},{children:e("common_registration_terms_and_conditions_next")}),void 0)]},void 0)}));var Yc=i(9263);const Kc=(e=1)=>{let t=31;return 2===e?t=29:-1!==[4,6,9,11].indexOf(e)&&(t=30),Array(t).fill(0).map(((e,t)=>({value:t+1,key:`${t+1}`})))},Jc=(0,re.Z)("div",{target:"e1phcp2x0"})((({theme:e})=>({background:e.colors.BGInput,borderRadius:"4px",position:"relative","& + &":{marginInlineStart:"8px"},cursor:"pointer"})),"label:DivSelector;"),Xc=(0,re.Z)("div",{target:"e1phcp2x1"})((({hasValue:e,theme:t,error:i})=>({width:"120px",height:"44px",padding:"0 12px",display:"flex",justifyContent:"space-between",alignItems:"center",color:i?t.colors.Negative:e?t.colors.TextPrimary:t.colors.TextQuaternary,fontSize:"16px"})),"label:DivSelectLabel;"),ep=(0,re.Z)(fd.Z,{target:"e1phcp2x2"})((({theme:e,up:t})=>({color:e.colors.TextPrimary,transform:t?"rotateZ(180deg)":"rotateZ(0deg)",transition:"all .3S"})),"label:StyledArrowTriangleDownLargeFill;"),tp=(0,re.Z)(bd.Z,{target:"e1phcp2x3"})({width:"16px",height:"16px",marginInlineStart:"12px"},"label:StyledSelectIcon;"),ip=(0,re.Z)("div",{target:"e1phcp2x4"})((({theme:e,show:t})=>[(0,se.YJ)({direction:e.direction,end:"0",start:"0"}),{width:"120px",maxHeight:"320px",overflow:"auto",position:"absolute",background:e.colors.BGPrimary,borderRadius:"4px",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.12)",top:"50px",zIndex:12,display:t?"block":"none",transition:"display .3s"}]),"label:DivOptionsWarpper;"),op=(0,re.Z)("div",{target:"e1phcp2x5"})((({theme:e,selected:t})=>({height:"34px",overflow:"auto",fontSize:"16px",padding:"0 12px",cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.TextPrimary,background:t?e.colors.BGView:"unset",":hover":{background:e.colors.BGView}})),"label:DivOption;"),np=e=>{const t=(0,Ji.Q)("WebApp_Login"),{placeholder:i,options:n,selectItem:a,onClick:r,error:s}=e,{key:l,value:d}=null!=a?a:{},c=(0,w.useRef)(null),[p,u]=(0,w.useState)(!1),g=(0,w.useCallback)((e=>()=>{r(e),u(!1)}),[r]),m=(0,w.useCallback)((e=>{var t;p&&!(null===(t=null==c?void 0:c.current)||void 0===t?void 0:t.contains(e.target))&&u(!1)}),[p]);(0,w.useEffect)((()=>(window.addEventListener("mousedown",m),()=>{window.removeEventListener("mousedown",m)})),[m]);const h=(0,w.useCallback)((()=>{u(!p)}),[p]);return(0,o.jsxs)(Jc,Object.assign({ref:c},{children:[(0,o.jsxs)(Xc,Object.assign({onClick:h,hasValue:Boolean(l),error:s},{children:[t(null!=l?l:i),(0,o.jsx)(ep,{up:p},void 0)]}),void 0),(0,o.jsx)(ip,Object.assign({show:p},{children:n.map(((e,i)=>{var n;return(0,o.jsxs)(op,Object.assign({selected:d===e.value,onClick:g(e)},{children:[t(`${null!==(n=e.key)&&void 0!==n?n:e.value}`),d===e.value&&(0,o.jsx)(tp,{},void 0)]}),i)}))}),void 0)]}),void 0)},ap=(0,re.Z)("div",{target:"e18rms3f0"})({display:"flex"},"label:DivAgeSelector;"),rp=(0,re.Z)("div",{target:"e18rms3f1"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"16px",lineHeight:"22px",marginBottom:"4px"}]),"label:DivTitle;"),sp=(0,re.Z)("div",{target:"e18rms3f2"})((({theme:e,type:t})=>[(0,se.GI)({theme:e,color:"error"===t?"Negative":"TextTertiary"}),{fontSize:"14px",lineHeight:"20px",marginBottom:"16px"}]),"label:DivDescription;"),lp=["Month_1","Month_2","Month_3","Month_4","Month_5","Month_6","Month_7","Month_8","Month_9","Month_10","Month_11","Month_12"].map(((e,t)=>({value:t+1,key:e}))),dp=(()=>{const e=new Date(1900,0,1,0,0,0),t=new Date((new Date).getFullYear()-1,11,31,0,0,0);return Array(t.getFullYear()-e.getFullYear()+1).fill(t.getFullYear()).map(((e,t)=>({value:e-t,key:""+(e-t)})))})(),cp=(0,w.memo)((function(){const e=(0,ee.fz)(ys),[{ageErrorMsg:t,showErrorByToast:i,year:n,month:a,date:r},{setBirthday:s,setMonth:l,setYear:d,setDate:c}]=(0,U.b7)(Mr),p=(0,Ji.Q)("WebApp_Login");(0,w.useEffect)((()=>{a&&n&&r&&s({year:n.value,month:a.value,date:r.value})}),[n,a,r,s]),(0,w.useEffect)((()=>{e.ageGateShow()}),[]);const u=(0,w.useCallback)((e=>{l(e)}),[l]),g=(0,w.useCallback)((e=>{c(e)}),[c]),m=(0,w.useCallback)((e=>{d(e)}),[d]),h=Boolean(t&&!i),_=h?t:"mus_age_gate_tips";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(rp,{children:p("common_registration_agegate_title")},void 0),(0,o.jsxs)(ap,{children:[(0,o.jsx)(np,{error:h,placeholder:"Month",selectItem:a,options:lp,onClick:u},void 0),(0,o.jsx)(np,{error:h,placeholder:"Day",selectItem:r,options:Kc(null==a?void 0:a.value),onClick:g},void 0),(0,o.jsx)(np,{error:h,placeholder:"Year",selectItem:n,options:dp,onClick:m},void 0)]},void 0),(0,o.jsx)(sp,Object.assign({type:h?"error":"default"},{children:p(null!=_?_:"")}),void 0)]},void 0)})),pp=(0,re.Z)(_t.W,{target:"e1lzrlvq0"})([{width:"100%"}],"label:StyledButton;"),up=(0,re.Z)("div",{target:"e1lzrlvq1"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Sofia"}),{fontSize:"32px",margin:"16px auto",fontWeight:"bold",textAlign:"center"}]),"label:DivTitle;"),gp=(0,re.Z)("div",{target:"e1lzrlvq2"})({width:"375px",margin:"auto"},"label:DivLoginContainer;"),mp=(0,re.Z)("div",{target:"e1lzrlvq3"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold"}),{fontSize:"15px",display:"flex",justifyContent:"space-between",marginBottom:"5px"}]),"label:DivDescription;"),hp=()=>{var e;const t=(0,Ji.Q)("WebApp_Login"),i=(0,j.k6)(),{$region:n}=(0,H.m7)((0,oe.L)((()=>["$region"]),[])),[{fromNotRegisterLogin:a,thirdPlatformNotRegistered:r,signupLoading:s},{registerThirdPlatform:l,registerPhone:d}]=(0,U.b7)(Ls),[{birthday:c,ageErrorMsg:p,showErrorByToast:u}]=(0,U.b7)(Mr),g=(0,w.useCallback)((()=>{"KR"===n?i.push($.gY.signupPolicyConfirm):"Third"===a&&r?l({chooseAgeGate:!0,platform:r.platform,profileKey:r.profileKey}):"Phone"===a?d({chooseAgeGate:!0}):i.push($.gY.signupPhone)}),[n,a,i,d,l,r]);return(0,w.useEffect)((()=>{p&&u&&Yc.Z.open({content:t(p),duration:3})}),[p,t,u]),(0,o.jsxs)(gp,{children:[(0,o.jsx)(up,{children:t("common_login_panel_entry_2")},void 0),(0,o.jsx)(cp,{platform:null!==(e=null==r?void 0:r.platform)&&void 0!==e?e:"sms_verification"},void 0),(0,o.jsx)(pp,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:!c,loading:s,onClick:g},{children:t("common_registration_email_input_button")}),void 0)]},void 0)},_p=(0,re.Z)("div",{target:"e1sbfgbz0"})((({theme:e})=>({width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.colors.BGPrimary,borderBottom:"1px solid",borderColor:e.colors.LineReverse3,padding:"16px 0"})),"label:DivAgreement;"),vp=(0,re.Z)("p",{target:"e1sbfgbz1"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"12px",lineHeight:"15px",width:"375px",textAlign:"center"}]),"label:PText;"),yp=(0,re.Z)("a",{target:"e1sbfgbz2"})((({theme:e})=>({color:e.colors.TextPrimary})),"label:ALink;"),fp=(0,w.memo)((function({key:e,show:t}){var i;const n=[$.gY.signupPhoneOrEmail,$.gY.signupPhone,$.gY.signupEmail,$.gY.signupHome],{pathname:a}=(0,j.TH)(),r=null!=t?t:n.find((e=>e===a.replace(/\/$/,""))),{$language:s}=null!==(i=(0,oe.L)((()=>["$language"]),[]))&&void 0!==i?i:{},l=(0,Ji.Q)("WebApp_Login"),d=l(null!=e?e:"common_registration_email_input_agreement").split(/%\d*\$s/),c=l("common_registration_terms_use"),p=l("common_registration_privacy_policy");return r?(0,o.jsx)(_p,{children:(0,o.jsxs)(vp,{children:[d[0]," ",(0,o.jsx)(yp,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/terms-of-use?lang=${s}`},{children:c}),void 0),d[1]," ",(0,o.jsx)(yp,Object.assign({target:"_blank",rel:"noopener noreferrer",href:`https://www.tiktok.com/legal/privacy-policy?lang=${s}`},{children:p}),void 0),d[2]]},void 0)},void 0):null})),bp=(0,re.Z)("div",{target:"e2227pc0"})({marginBottom:"16px",position:"relative"},"label:DivUsernameContainer;"),xp=(0,re.Z)("div",{target:"e2227pc1"})((({theme:{colors:e,direction:t}})=>[{position:"relative",marginTop:"11px",borderRadius:"4px",border:"1px solid",background:e.BGPrimary,borderColor:e.LineSecondary,zIndex:2,width:"100%",":before":{content:'""',height:"14px",position:"absolute",background:e.BGPrimary,width:"14px",top:"-7px",left:"rtl"===t?"unset":"14px",right:"rtl"===t?"14px":"unset",zIndex:-1,borderInlineEnd:`1px solid ${e.LineSecondary2}`,borderTop:`1px solid ${e.LineSecondary2}`,transform:"rtl"===t?"rotateZ(45deg)":"rotateZ(-45deg)"}}]),"label:DivSuggestListWrapper;"),kp=(0,re.Z)("div",{target:"e2227pc2"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextTertiary"}),{fontSize:"13px",lineHeight:"17px",padding:"16px 12px 9px"}]),"label:DivLabel;"),Sp=(0,re.Z)("ul",{target:"e2227pc3"})({padding:"0",margin:"0",maxHeight:"200px",overflowY:"auto"},"label:UlList;"),wp=(0,re.Z)("li",{target:"e2227pc4"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{display:"flex",padding:"0 12px",justifyContent:"space-between",alignItems:"center",height:"34px",lineHeight:"34px",fontSize:"13px",cursor:"pointer"},{":hover":{backgroundColor:"rgba(22, 24, 35, .03)"}}]),"label:LiListItem;"),Cp=(0,re.Z)("div",{target:"e2227pc5"})((({theme:e})=>[(0,se.YJ)({direction:e.direction,end:"12px"}),{position:"absolute",boxSizing:"border-box",paddingTop:"14.5px",width:"20px",height:"44px",top:0,div:{position:"absolute",width:"15px",height:"15px",margin:"2px",border:"2px solid rgba(22, 24, 35, .34)",borderRadius:"50%",animation:"lds-ring 1.2s cubic-bezier(.5, 0, .5, 1) infinite",borderColor:"rgba(22, 24, 35, .34) transparent transparent transparent",":nth-child(1)":{animationDelay:"-.45s"},":nth-child(2)":{animationDelay:"-.3s"},":nth-child(3)":{animationDelay:"-.15s"}},"@keyframes lds-ring":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}]),"label:DivNameCheckLoading;"),jp=(0,w.memo)((function({autoFocus:e,ftc:t,placeholder:i,tip:n}){var a,r,s,l;const[{usernameInfo:d,username:c,checkNameLoading:p},{validateUsername:u,validateFTCUsername:g,setUsername:m,setUsernameInfo:h}]=(0,U.b7)(Ls),_=(0,Ji.Q)("WebApp_Login"),v=(0,w.useCallback)((e=>{const t=e.target.value;m(t)}),[m]),y=(0,w.useCallback)((e=>()=>{m(e)}),[m]);return(0,w.useEffect)((()=>{c?t?g({name:c}):u({name:c}):h(void 0)}),[t,h,c,g,u]),(0,o.jsxs)(bp,{children:[(0,o.jsx)($l,{autoFocus:e,placeholder:_(null!=i?i:"common_registration_username_placeholder"),onChange:v,errorState:d&&!d.isValid&&!p,autoComplete:"off",name:"new-username",value:c,style:{marginTop:"16px"}},void 0),p&&(0,o.jsxs)(Cp,{children:[(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0),(0,o.jsx)("div",{},void 0)]},void 0),(0,o.jsx)(Il,{text:_(null!==(r=null!==(a=null==d?void 0:d.errorMsg)&&void 0!==a?a:n)&&void 0!==r?r:"common_registration_username_text"),type:(null==d?void 0:d.errorMsg)?"error":"default"},void 0),Boolean(!(null==d?void 0:d.isValid)&&(null===(s=null==d?void 0:d.suggestList)||void 0===s?void 0:s.length))&&(0,o.jsxs)(xp,{children:[(0,o.jsx)(kp,{children:_("common_registration_email_input_suggested")},void 0),(0,o.jsx)(Sp,{children:null===(l=null==d?void 0:d.suggestList)||void 0===l?void 0:l.map(((e,t)=>(0,o.jsx)(wp,Object.assign({onClick:y(`${e}`)},{children:e}),t)))},void 0)]},void 0)]},void 0)})),Tp=()=>{const e=(0,Ji.Q)("WebApp_Login"),[{usernameInfo:t,errorMsg:i,signupLoading:n},{usernameRegister:a}]=(0,U.b7)(Ls),{registerLimited:r,ageGateAction:s}=(0,U.mp)(Mr),l=(0,j.k6)(),{password:d,lengthValid:c,contentValid:p}=(0,U.mp)(Sl),u=(0,w.useCallback)((()=>{a({password:d})}),[d,a]);(0,w.useEffect)((()=>{r||1===s||l.replace($.gY.signupHome)}),[s,l,r]);const g=!1===(null==t?void 0:t.isValid)||!d||!p||!c;return(0,o.jsxs)(td,Object.assign({onSubmit:u},{children:[(0,o.jsx)(up,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(mp,{children:e("common_login_sms_popup_option_1")},void 0),(0,o.jsx)(jp,{autoFocus:!0,placeholder:e("common_registration_username_placeholder"),tip:"mus_create_account_desc_pc",ftc:!0},void 0),(0,o.jsx)(nd,{loginError:Boolean(i)},void 0),r&&(0,o.jsx)(fp,{show:!0},void 0),(0,o.jsx)(Il,{text:e(null!=i?i:""),type:"error",style:{marginBottom:"12px"}},void 0),(0,o.jsx)(pp,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:g,loading:n,type:"submit"},{children:e("common_notification_unlogged_button")}),void 0)]}),void 0)},Op=(0,re.Z)("div",{target:"e6sea5o0"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary",fontFamily:"Proxima",fontWeight:"bold"}),{height:"44px",lineHeight:"44px",textAlign:"center",fontSize:"16px",marginTop:"10px",width:"100%",cursor:"pointer"}]),"label:DivTextContainer;"),Ip=(0,w.memo)((function(){const e=(0,Ji.Q)("WebApp_Login"),{setLoginSuccess:t}=(0,U.qj)(As),i=(0,w.useCallback)((()=>{t()}),[t]);return(0,o.jsx)(Op,Object.assign({onClick:i},{children:e("common_registration_username_skip")}),void 0)})),Pp=()=>{const e=(0,Ji.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,U.mp)(Ls),[{loginLoading:n},{setAccount:a}]=(0,U.b7)(As),{password:r,lengthValid:s,contentValid:l}=(0,U.mp)(Sl),d=(0,w.useCallback)((()=>{a({password:r,username:i})}),[a,r,i]),c=!((null==t?void 0:t.isValid)&&r&&l&&s);return(0,o.jsxs)(td,Object.assign({onSubmit:d},{children:[(0,o.jsx)(up,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(mp,{children:e("common_registration_password_title")},void 0),(0,o.jsx)(nd,{autoFocus:!0},void 0),(0,o.jsx)(mp,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(jp,{},void 0),(0,o.jsx)(pp,Object.assign({buttonTheme:"primary",size:"largeNew",disabled:c,loading:n,type:"submit"},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(Ip,{},void 0)]}),void 0)},Ep=(0,w.memo)((function(){const e=(0,Ji.Q)("WebApp_Login"),{usernameInfo:t,username:i}=(0,U.mp)(Ls),[{loginLoading:n},{setAccount:a}]=(0,U.b7)(As),r=(0,w.useCallback)((()=>{a({username:i})}),[a,i]),s=!(null==t?void 0:t.isValid);return(0,o.jsxs)(td,Object.assign({onSubmit:r},{children:[(0,o.jsx)(up,{children:e("common_login_panel_entry_2")},void 0),(0,o.jsx)(mp,{children:e("common_registration_username_title")},void 0),(0,o.jsx)(jp,{},void 0),(0,o.jsx)(pp,Object.assign({loading:n,buttonTheme:"primary",size:"largeNew",disabled:s,type:"submit"},{children:e("common_notification_unlogged_button")}),void 0),(0,o.jsx)(Ip,{},void 0)]}),void 0)}));var Lp=i(73947);const Ap=(0,re.Z)("div",{target:"e19c4o080"})({marginBottom:"16px",display:"flex"},"label:DivContainer;"),Rp=(0,re.Z)("p",{target:"e19c4o081"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextSecondary",fontFamily:"Proxima"}),{fontSize:"12px",lineHeight:"16px",display:"inline"}]),"label:PCheckboxText;"),Mp=(0,w.memo)((function(){const e=(0,Ji.Q)("WebApp_Login"),t=(0,ee.fz)(ys),{emailConsent:i}=as((()=>["emailConsent"]),[]),{$region:n}=(0,H.m7)((0,oe.L)((()=>["$region"]),[])),[{emailConsent:a},{setEmailConsent:r}]=(0,U.b7)(Ls),s=(0,w.useCallback)((e=>{t.clickEmailConsent({checked:e}),r(e)}),[t,r]);return(0,w.useEffect)((()=>{i&&(t.showEmailConsent(),["MY","PK","BD"].includes(n)&&r(!0))}),[n,i,t,r]),i?(0,o.jsxs)(Ap,{children:[(0,o.jsx)(Uc,{checked:Boolean(a),onChange:s,id:"email-consent",circle:!1},void 0),(0,o.jsx)(Rp,{children:e("EDM_onboarding_email_consent_checkbox_list")},void 0)]},void 0):null})),Dp=(0,re.Z)("p",{target:"esdrtey0"})((({theme:e})=>[(0,se.GI)({theme:e,color:"TextPrimary"}),{fontSize:"12px",lineHeight:"15px",marginBottom:"8px",marginTop:"-4px",display:"flex"}]),"label:PRegister;"),Fp=(0,re.Z)("span",{target:"esdrtey1"})((({theme:e})=>[(0,se.GI)({theme:e,color:"Primary"}),{display:"flex",alignItems:"center"}]),"label:SpanLink;"),Np=()=>{const e=(0,Ji.Q)("WebApp_Login"),{ageGateAction:t,birthday:i}=(0,U.mp)(Mr),[{errorMsg:n,signupLoading:a},{emailRegister:r}]=(0,U.b7)(Ls),[s,l]=(0,U.b7)(Ss),[{sendCodeLoading:d,code:c,codeFormatError:p,emailRegistered:u},{sendEmailCodeForSignup:g}]=(0,U.b7)(ws),{password:m,lengthValid:h,contentValid:_}=(0,U.mp)(Sl),{emailErrorMsg:v,email:y=""}=s,f=(0,w.useCallback)((()=>{g({email:y})}),[y,g]),b=(0,w.useCallback)((e=>{l.setEmailInfo({email:e.value,valid:e.valid})}),[l]),x=(0,w.useCallback)((()=>{r({password:m,code:c,email:y})}),[y,c,r,m]),k=!y||!m||!c||!_||!h||!!p||!!v||Boolean(!i&&t);return(0,o.jsxs)(td,Object.assign({onSubmit:x},{children:[(0,o.jsx)(up,{children:e("common_login_panel_entry_2")},void 0),Boolean(t)&&(0,o.jsx)(cp,{platform:"phone_or_email"},void 0),(0,o.jsxs)(mp,{children:[e("email")," ",(0,o.jsx)(gd,{text:e("common_registration_switch_phone"),path:$.gY.signupPhone,replace:!0},void 0)]},void 0),(0,o.jsx)(vd,{placeholder:e("common_login_reset_email_input_placeholder"),onChange:b,errorMsg:v,emailRegistered:u},void 0),u&&(0,o.jsxs)(Dp,{children:[e("common_registration_email_existing_title"),",",(0,o.jsx)(Wr,Object.assign({path:$.gY.loginWithSignedEmail,underline:!1},{children:(0,o.jsxs)(Fp,{children:[e("Log in"),(0,o.jsx)(Lp.Z,{},void 0)]},void 0)}),void 0)]},void 0),(0,o.jsx)(nd,{},void 0),(0,o.jsx)(ed,{email:!0,disabled:Boolean(v||!y||!i&&t),codeFromNumber:y,loading:d,errorMsg:n,onClickSendCode:f},void 0),(0,o.jsx)(Mp,{},void 0),(0,o.jsx)(pp,Object.assign({loading:a,buttonTheme:"primary",size:"largeNew",disabled:k,type:"submit"},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},Bp=()=>{const e=(0,Ji.Q)("WebApp_Login"),[{birthday:t,ageGateAction:i}]=(0,U.b7)(Mr),[{sendCodeLoading:n,code:a,codeFormatError:r},{sendPhoneCodeForLogin:s}]=(0,U.b7)(ws),[{loginLoading:l},{handleSmsLogin:d}]=(0,U.b7)(As),c=(0,ee.fz)(ys),[p]=(0,U.b7)(xs),{mobile:u,phoneErrorMsg:g,phone:m}=p,h=u&&a&&!g&&!r&&(t||!i),_=Tl(),v=(0,w.useCallback)((()=>{c.setPlatform("sms_verification"),c.loginSubmit({signUp:!0}),d({birthday:t,phoneCode:a,mobile:u,login_only:!1})}),[t,d,c,u,a]),y=(0,w.useCallback)((()=>{s({mobile:u,isSignUp:!0})}),[u,s]);return(0,o.jsxs)(td,Object.assign({onSubmit:v},{children:[(0,o.jsx)(up,{children:e("common_login_panel_entry_2")},void 0),Boolean(i)&&(0,o.jsx)(cp,{platform:"sms_verification"},void 0),(0,o.jsxs)(mp,{children:[e("phone")," ",(0,o.jsx)(gd,{text:e("common_registration_switch_email"),path:$.gY.signupEmail,replace:!0},void 0)]},void 0),(0,o.jsx)(Ad,{},void 0),(0,o.jsx)(ed,{disabled:Boolean(g||!m||!t&&i),codeFromNumber:u,loading:n,errorMsg:_,onClickSendCode:y},void 0),(0,o.jsx)(pp,Object.assign({buttonTheme:"primary",size:"largeNew",loading:l,disabled:!h,type:"submit"},{children:e("common_registration_email_input_button")}),void 0)]}),void 0)},zp=(0,w.memo)((()=>{const[{initial:e,registerLimited:t}]=(0,U.b7)(Mr);(()=>{const e=(0,ee.fz)(ys);(0,w.useEffect)((()=>{e.enterSignUp()}),[e])})(),(0,Dr.q)({pid:"signup"});const i=(0,j.k6)(),{pathname:n}=i.location;return function(){const e=(0,j.k6)(),t=(0,Ji.Q)("WebApp_Login"),{krPolicySelection:i}=(0,U.mp)(Os),{$region:o}=(0,H.m7)((0,oe.L)((()=>["$region"]),[])),{ageEligible:n,ageErrorMsg:a,showErrorByToast:r,showAgeConfirm:s}=(0,U.mp)(Mr);(0,w.useEffect)((()=>{n&&("KR"!==o||i.length||e.push($.gY.signupPolicyConfirm))}),[n]),(0,w.useEffect)((()=>{s&&e.push($.gY.signupAgeGateConfirm)}),[e,s]),(0,w.useEffect)((()=>{r&&a&&(Ut.h.destroy(),Ut.h.open({content:t(a),duration:3,widthType:"half"}))}),[a,t,r])}(),(0,w.useEffect)((()=>{t&&i.replace($.gY.signupCreateAccount)}),[i,t]),e||n===$.gY.signupHome?(0,o.jsxs)(Vs,{children:[(0,o.jsx)(el,{page:"signup"},void 0),(0,o.jsxs)(j.rs,{children:[(0,o.jsx)(j.AW,{path:$.gY.signupHome,component:Ks,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupPhoneOrEmail,component:Bp,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupPhone,component:Bp,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupEmail,component:Np,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupCreatePassword,component:Pp,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupCreateUsername,component:Ep,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupCreateAccount,component:Tp,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupPrivateOn,component:Rc,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupAgeGate,component:hp,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupAgeGateConfirm,component:Nc,exact:!0},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupPolicyConfirm,component:Qc,exact:!0},void 0),(0,o.jsx)(j.AW,{path:"*",component:Ks},void 0)]},void 0)]},void 0):(0,o.jsx)(Oc.Z,{center:!0,style:{margin:"auto"}},void 0)})),$p=(0,re.Z)("div",{target:"e10jupx40"})({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},"label:DivOauthBodyContainer;"),Up=(0,w.memo)((function(){const{search:e}=(0,j.TH)(),{oauth_token:t,oauth_verifier:i,error:n,oauthType:a}=(0,S.parse)(e),r=(0,ee.fz)(ys),s=(0,ee.fz)(Ms.M);return(0,w.useEffect)((()=>{Fs(null==a?void 0:a.toString()),s.handleThirdGetToken({platform:"twitter",error_code:t&&i?0:-1,error_message:String(n)}),t&&i?(Ds("twitter",{oauth_token:t.toString(),oauth_verifier:i.toString()}),window.authDoneClose=!0):r.thirdPartyLoginResult({status:1,error_code:-1,error_desc:null==n?void 0:n.toString()})}),[n,r,t,i,s,a]),(0,o.jsx)($p,{children:(0,o.jsx)(Wt.g,{},void 0)},void 0)})),Wp=()=>{const{search:e}=(0,j.TH)(),{code:t,error:i}=(0,S.parse)(e),n=(0,ee.fz)(ys),a=(0,ee.fz)(Ms.M);return(0,w.useEffect)((()=>{Fs(),a.handleThirdGetToken({platform:"line",error_code:t?0:-1,error_message:String(i)}),t?(Ds("line",{code:null==t?void 0:t.toString()}),window.authDoneClose=!0):n.thirdPartyLoginResult({status:1,error_code:-1,error_desc:String(i)})}),[t,i,n,a]),(0,o.jsx)($p,{children:(0,o.jsx)(Wt.g,{},void 0)},void 0)};var Gp=i(28985),Hp=i(76427);function qp(){const[{lang:e,hasLoaded:t},i]=(0,U.b7)(Gp.L,{selector:({lang:e,translations:t})=>{var i;return{lang:e,hasLoaded:Boolean(null===(i=t[e])||void 0===i?void 0:i.WebApp_Login)}},dependencies:[]}),{loadData:o}=i,{domain:n,teaDomain:a}=(0,Hp.o)();return(0,w.useEffect)((()=>{o({lang:e,namespaces:["WebApp_Login"],teaDomain:a,domain:n})}),[e,o,n,a]),t}const Zp=(0,w.memo)((function(){var e,t;const i=(0,oe.b)();(e=>{const t=(0,j.TH)(),i=(0,ee.fz)(ys),{loginModalShow:o,url:n}=(0,U.mp)(K.r),{loginType:a}=as((()=>["loginType"]),[]);Js.initialized||Js.init(o?n.split("?")[1]:t.search),(0,q.k0)((()=>Object.assign({page_name:e,login_type:a},Js.eventCommonParams)),[a,e]),(0,w.useEffect)((()=>{a&&i.handlePageView()}),[i,a])})("login");const n=qp(),a=(0,ee.fz)(gs.Q),r=(0,ee.fz)(ms.D);!function(){const{twoStepResponse:e}=(0,U.mp)(As),[{type:t},{setTwoStepVerifyRes:i,setTwoStepType:o}]=(0,U.b7)(jl),n=(0,j.k6)(),{pathname:a}=(0,j.TH)();(0,w.useEffect)((()=>{e&&i(e)}),[e,i]),(0,w.useEffect)((()=>{t&&`/login/2sv/${wl[t]}`!==a&&n.push(`/login/2sv/${wl[t]}`)}),[t,e]),(0,w.useEffect)((()=>()=>{o(void 0)}),[])}(),function(){const{success:e}=(0,U.mp)(As),{redirectUrl:t}=(0,U.mp)(ns),{success:i}=(0,U.mp)(Ls),{$language:o}=(0,H.m7)((0,oe.L)((()=>["$language"]),[])),n=(0,Ji.Q)("WebApp_Login");(0,w.useEffect)((()=>{(e||i)&&(Ut.h.destroy(),Ut.h.open({content:n(2===e?"reactivate_toast":"Login Success"),duration:3,widthType:"half"}),setTimeout((()=>{location.href=Zs(o,t)}),1e3))}),[o,n,t,i,e])}(),function(){const e=(0,ee.fz)($s);(0,w.useEffect)((()=>{e.loadSdk()}),[e])}(),function(){const{$user:e,$language:t}=(0,H.m7)((0,oe.L)((()=>["$user","$language"]),[])),{redirectUrl:i}=(0,U.mp)(ns),o=(0,Ji.Q)("WebApp_Login"),n=(0,ee.fz)(ys),a=[$.gY.oauth,$.gY.oauthLine],r=(0,j.$B)(a);(0,w.useEffect)((()=>{e&&!r&&(Ut.h.open({content:o("You are logged in, no need to repeat"),duration:3,widthType:"half"}),n.setPlatform("repeatLogin"),n.loginSuccess({is_register:0}),setTimeout((()=>{location.href=Zs(t,i)}),1e3))}),[i])}(),Tl(),function(){const{nextPage:e}=(0,U.mp)(As),{nextPage:t}=(0,U.mp)(Ls),i=e||t,o=(0,j.k6)();(0,w.useEffect)((()=>{i&&o.push(i)}),[o,i])}();const[{initialized:s,ttpConfig:l},{init:d}]=(0,U.b7)(ns),[{initial:c},{getComplianceSettings:p}]=(0,U.b7)(Mr);return(0,w.useEffect)((()=>{i.appContext&&a.setAppContext(i.appContext)}),[i.appContext,a]),(0,w.useEffect)((()=>{var e,t;l&&r.setInitConfig({isSG:(null===(e=i.appContext)||void 0===e?void 0:e.$sgOpen)||1180===(null===(t=i.appContext)||void 0===t?void 0:t.$appId),ttpConfig:l})}),[null===(e=i.appContext)||void 0===e?void 0:e.$appId,null===(t=i.appContext)||void 0===t?void 0:t.$sgOpen,l,r]),(0,w.useEffect)((()=>{!s&&d(),!c&&p()}),[]),n&&s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(j.rs,{children:[(0,o.jsx)(j.AW,{path:$.gY.loginHome,component:Tc},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupHome,component:zp},void 0),(0,o.jsx)(j.AW,{path:$.gY.signupPhone,component:zp},void 0),(0,o.jsx)(j.AW,{path:$.gY.oauth,component:Up},void 0),(0,o.jsx)(j.AW,{path:$.gY.oauthLine,component:Wp},void 0)]},void 0),(0,o.jsx)(Ie,{appContext:i.appContext,slardarBid:Pe.Zy},void 0)]},void 0):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($o.xB,{styles:{"#app":{justifyContent:"center"},"#loginContainer":{display:"flex",alignItems:"center"}}},void 0),(0,o.jsx)(Wt.g,{center:!0,style:{margin:"auto"}},void 0)]},void 0)})),Vp=(0,re.Z)("div",{target:"e1b6crsh0"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",color:"TextPrimary"}),{height:"64px",borderTop:`1px solid ${e.colors.LineSecondary}`,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px",lineHeight:"18px"}]),"label:DivContainer;"),Qp=(0,re.Z)("span",{target:"e1b6crsh1"})((({theme:e})=>[(0,se.YJ)({direction:e.direction,marginStart:"5px"}),{fontWeight:600,fontSize:"15px",lineHeight:"18px",color:e.colors.Primary}]),"label:SpanLinkText;"),Yp=(0,w.memo)((function(){var e;const{disableSignup:t}=as((()=>["disableSignup"]),[]),{loginModalShow:i}=(0,U.mp)(K.r),n=(0,Ji.Q)("WebApp_Login"),{pathname:a}=(0,j.TH)(),r=[$.gY.signupAgeGateConfirm,$.gY.signupCreateAccount],s=null===(e=(0,j.$B)(r))||void 0===e?void 0:e.isExact,l=(0,j.$B)([$.gY.loginHome,$.gY.signupHome])&&!s,{$isMobile:d}=(0,H.m7)((0,oe.L)((()=>["$isMobile"]),[])),c=a.includes("signup"),p=n(c?"common_registration_panel_entry_1":"common_login_panel_entry_1"),u=n(c?"common_registration_panel_entry_2":"common_registration_username_button"),g=c?$.gY.loginHome:$.gY.signupHome;return t||!l?null:(0,o.jsxs)(Vp,Object.assign({modal:i,style:d?{height:"58px"}:{}},{children:[(0,o.jsx)("div",{children:p.replace("%s"," ")},void 0),(0,o.jsx)(Wr,Object.assign({path:g,textTheme:"primary",replace:i},{children:(0,o.jsx)(Qp,{children:u},void 0)}),void 0)]}),void 0)})),Kp=(0,re.Z)("div",{target:"eg439om0"})((({theme:e})=>[(0,se.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"16px",cursor:"pointer",transform:"rtl"===e.direction?"rotateZ(180deg)":"unset"}]),"label:DivBack;"),Jp=(0,re.Z)(Ud.Z,{target:"eg439om1"})([{width:"24px",height:"24px"}],"label:StyledChevronLeftOffset;"),Xp=(0,re.Z)("div",{target:"eg439om2"})({width:"483px",height:"100%",padding:"48px 0 0",display:"flex",flexDirection:"column"},"label:DivModalContent;"),eu=(0,re.Z)("div",{target:"eg439om3"})({flex:"1",overflow:"auto"},"label:DivPageWrapper;"),tu={margin:"auto",position:"relative",maxHeight:"693px",height:"80%",overflow:"hidden"},iu={transform:"scale(1.7)"},ou=(0,w.memo)((function(){const[{loginModalShow:e,url:t,closeable:i},{setLoginModalShow:n}]=(0,U.b7)(K.r),a=(0,ee.fz)(ys),[r,s]=(0,w.useState)(0),[l,d]=(0,w.useState)(!1),[c,p]=(0,w.useState)(!1),u=qp(),g=(0,w.useRef)((0,R.PP)({initialEntries:[null!=t?t:$.gY.loginHome]}));(0,w.useEffect)((()=>{e&&t&&(g.current.go(Number(`-${g.current.length}`)),g.current.replace(t))}),[e,t]);const{forceLogin:m}=as((()=>["forceLogin"]),[]),h=(0,w.useCallback)((()=>{g.current.goBack()}),[]),_=(0,w.useCallback)((()=>{d([$.gY.signupAgeGateConfirm,$.gY.signupCreateAccount].includes(g.current.location.pathname))}),[d]),v=(0,w.useCallback)((()=>{p([$.gY.signupAgeGateConfirm,$.gY.signupCreateAccount].includes(g.current.location.pathname))}),[]),y=(0,w.useCallback)((()=>{n(!1);const e=g.current.location.pathname.match("/signup")?"1":"0";a.LoginNotifyClose({isSignUp:e})}),[a,n]);return(0,w.useEffect)((()=>{g.current.listen((()=>{v(),_(),s(g.current.index)}))}),[_,v]),(0,o.jsxs)(ht.u,Object.assign({visible:e,onClose:y,maskCloseable:!1,contentStyle:tu,closeStyles:iu,closeStyle:m||c||!i?0:2},{children:[r>0&&!l&&(0,o.jsx)(Kp,Object.assign({onClick:h},{children:(0,o.jsx)(Jp,{},void 0)}),void 0),(0,o.jsx)(j.F0,Object.assign({history:g.current},{children:(0,o.jsxs)(Xp,{children:[(0,o.jsx)(eu,Object.assign({id:"loginContainer"},{children:(0,o.jsx)(Zp,{history:g.current},void 0)}),void 0),u&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(fp,{},void 0),(0,o.jsx)(Yp,{},void 0)]},void 0)]},void 0)}),void 0)]}),void 0)})),nu=(0,re.Z)("div",{target:"e10win0d0"})((({theme:{colors:e}})=>[{display:"flex",justifyContent:"space-around",boxShadow:`0px 1px 1px ${e.ShadowPrimary}`,height:se.Mz,width:"100%",top:0,position:"fixed",alignItems:"center",background:e.BGPrimary,zIndex:1e3}]),"label:DivHeaderContainer;"),au=(0,re.Z)("div",{target:"e10win0d1"})({width:"100%",display:"flex",height:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},(({expand:e})=>e?{}:{maxWidth:se.XP}),(({theme:{direction:e}})=>(0,se.YJ)({direction:e,paddingStart:"20px",paddingEnd:"24px"})),"label:DivHeaderWrapperMain;"),ru=(0,re.Z)(au,{target:"e10win0d2"})([{maxWidth:"100%"},({theme:{direction:e}})=>(0,se.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})],"label:StyledDivHeaderWrapperMainV2;"),su=(0,re.Z)(Wo.v,{target:"e1an6zpe0"})({fontSize:0},"label:StyledLinkLogo;");su.defaultProps=Object.assign(Object.assign({},su.defaultProps),{"data-e2e":"tiktok-logo"});const lu=(0,w.memo)((function(){const e=(0,Ji.Q)(),{pathname:t}=(0,j.TH)(),i=(0,U.qj)(ha.h),n=(0,ee.fz)(to._),a=(0,w.useCallback)((e=>{(0,Le.oC)(t)&&(e.preventDefault(),i.resetItemList({key:"foryou"}),i.getRecommendList({key:"foryou"})),n.handleClickLogo()}),[i,t,n]);return(0,o.jsxs)(su,Object.assign({to:$.Ad.home,onClick:a},{children:[(0,o.jsx)("svg",Object.assign({height:42,width:118,alt:e("TikTok i18n title")},{children:(0,o.jsx)("use",{xlinkHref:"#svg-header-logo"},void 0)}),void 0),(0,o.jsx)("strong",{children:e("TikTok i18n title")},void 0)]}),void 0)}));var du=i(74036),cu=i(13934),pu=i(38424),uu=i(73085);const gu=(e="")=>e.split("-")[0].replace("zh","zh-Hant")||e||"en";var mu=i(76631),hu=i(44435),_u=i(69569),vu=i(74146);const yu=(0,re.Z)("form",{target:"ev30f210"})((({theme:{colors:e}})=>({display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",background:e.BGInput,borderRadius:"92px",position:"relative",overflow:"hidden",zIndex:1,margin:"0"})),"label:FormElement;"),fu=(0,re.Z)("div",{target:"ev30f211"})((({theme:{colors:e}})=>({display:"none",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:`1.5px solid ${e.LinePrimary}`,borderRadius:"92px",zIndex:-1})),"label:DivInputBorder;"),bu=(0,re.Z)("input",{target:"ev30f212"})((({theme:{colors:e,typography:t,fontFamilies:i,fontWeights:o},withIcon:n})=>Object.assign(Object.assign({fontFamily:i.Proxima,fontWeight:o.normal},t.P2),{border:"none",background:"transparent",outline:"none",padding:"0",width:n?"252px":"292px",caretColor:e.Primary,appearance:"textfield",[`:focus ~ ${fu}`]:{display:"block"}})),"label:InputElement;");bu.defaultProps=Object.assign(Object.assign({},bu.defaultProps),{"data-e2e":"search-user-input"});const xu=(0,re.Z)("div",{target:"ev30f213"})({fontSize:0},"label:DivIconWrapper;"),ku=(0,re.Z)(Vl.Z,{target:"ev30f214"})({animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),Su=(0,re.Z)("span",{target:"ev30f215"})((({theme:{colors:e}})=>({width:"1px",height:"28px",margin:"-3px 0",background:e.LineSecondary})),"label:SpanSpliter;"),wu=(0,re.Z)("button",{target:"ev30f216"})((({theme:{colors:e,direction:t}})=>[{padding:"11px 16px 11px 12px",margin:"-12px -16px",fontSize:"0",cursor:"pointer",outline:"none",border:"none",background:"transparent",":hover":{background:e.BGView},":active":{background:e.BGInput2}},(0,se.YJ)({direction:t,marginStart:"0"})]),"label:ButtonSearch;");wu.defaultProps=Object.assign(Object.assign({},wu.defaultProps),{"data-e2e":"search-button"});const Cu=(0,w.memo)((function({initialValue:e,onEnter:t}){var i;const[{searchValue:n,loading:r},{handleInputFocusChange:s,setSearchValue:l,setActiveUp:d,setActiveDown:c}]=(0,U.b7)(cu.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading})}),{$user:p,$searchVideoForLoggedin:u}=null!==(i=(0,oe.L)((()=>["$user","$searchVideoForLoggedin"]),[]))&&void 0!==i?i:{},g=Boolean(p),m=(0,w.useRef)(null),{pathname:h}=(0,j.TH)(),_=Boolean((0,j.LX)(h,{path:$.Ad.searchHome})),v=(0,Ji.Q)()(g||!u?"search_bar_login":"search_users"),{colors:y}=(0,a.u)(),f=(0,w.useMemo)((()=>({fill:y.TextQuaternary,width:16,height:16,style:{margin:"0 12px"}})),[y]);(0,w.useEffect)((()=>{l(e)}),[e,l]);const b=(0,w.useCallback)((e=>{const t=e.target.value;(e=>!e.startsWith(" "))(t)&&l(t)}),[l]),x=(0,vu.J)({upHandler:d,downHandler:c,confirmHandler:t}),k=(0,w.useCallback)((()=>{s(!0)}),[s]),S=(0,w.useCallback)((()=>{s(!1)}),[s]),C=(0,w.useCallback)((()=>{var e;l(""),null===(e=m.current)||void 0===e||e.focus()}),[l]);(0,w.useEffect)((()=>{_||l("")}),[_,l]);const T=(0,w.useCallback)((()=>r?(0,o.jsx)(xu,{children:(0,o.jsx)(ku,Object.assign({},f),void 0)},void 0):n?(0,o.jsx)(xu,Object.assign({onClick:C,"data-e2e":"reset-search-form"},{children:(0,o.jsx)(_u.Z,Object.assign({},f),void 0)}),void 0):null),[r,n,f,C]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(bu,{ref:m,withIcon:Boolean(n)||r,value:n,onChange:b,onKeyDown:x,onFocus:k,onBlur:S,placeholder:v,name:"q",type:"search",autoComplete:"off"},void 0),T()]},void 0)})),ju=(0,w.memo)((function({initialValue:e,onSubmit:t}){const[i,n]=(0,U.b7)(cu.B,{dependencies:[],selector:e=>e.searchValue}),{search:r}=(0,j.TH)(),{q:s}=(0,S.parse)(r),{colors:l}=(0,a.u)(),{pathname:d}=(0,j.TH)(),c=(0,w.useRef)(!1),p=(0,w.useCallback)((()=>{c.current=!0}),[]),u=(0,w.useCallback)((e=>{e.preventDefault(),n.setInputFocus(!1),null==t||t(c.current),c.current=!1}),[n,t]),g=Boolean((0,j.LX)(d,{path:$.Ad.searchHome}));return(0,o.jsxs)(yu,Object.assign({className:"search-input",action:"/search",onSubmit:u},{children:[g&&(0,o.jsx)("h1",Object.assign({style:{display:"none",alignItems:"center"}},{children:s}),void 0),(0,o.jsx)(Cu,{initialValue:e,onEnter:p},void 0),(0,o.jsx)(Su,{},void 0),(0,o.jsx)(wu,Object.assign({type:"submit"},{children:(0,o.jsx)(zo.Z,{fill:i?l.TextSecondary:l.TextQuaternary,width:24,height:24},void 0)}),void 0),(0,o.jsx)(fu,{},void 0)]}),void 0)})),Tu=(0,re.Z)("div",{target:"eagc08l0"})({position:"relative"},"label:DivSearchFormContainer;"),Ou=e=>{const[{activeIndex:t},i]=(0,U.b7)(cu.B),o=t===e,n=(0,w.useCallback)((()=>{o||i.setActiveIndex(e)}),[o,i,e]);return{active:o,handleMouseEnter:n}};var Iu=i(18654);const Pu=(0,re.Z)("div",{target:"e1yapk9z0"})((({theme:{colors:e}})=>({position:"absolute",width:"100%",marginTop:"8px",background:e.BGPrimary,boxShadow:`0 2px 12px ${e.ShadowPrimary}`,borderRadius:"8px",paddingTop:"8px",boxSizing:"border-box",maxHeight:`min(calc(100vh - 96px - ${se.Mz}px), 734px)`,overflowY:"auto",overflowX:"hidden"})),"label:DivContainer;");Pu.defaultProps=Object.assign(Object.assign({},Pu.defaultProps),{"data-e2e":"sug-container"});const Eu=(0,re.Z)("div",{target:"e1yapk9z1"})((({paddingVertical:e,active:t,theme:{colors:i}})=>({padding:`${e}px 16px`,cursor:"pointer",background:t?i.BGView:void 0,display:"flex",alignItems:"center"})),"label:DivItemContainer;"),Lu=(0,re.Z)("h4",{target:"e1yapk9z2"})((({theme:{typography:e,fontWeights:t}})=>Object.assign(Object.assign({},e.P2),{fontWeight:t.semiBold,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:H4ItemTitle;"),Au=(0,re.Z)("p",{target:"e1yapk9z3"})((({theme:{typography:e,fontWeights:t,colors:i}})=>Object.assign(Object.assign({},e.P3),{color:i.TextTertiary,fontWeight:t.normal,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:PItemDesc;"),Ru=(0,re.Z)("p",{target:"e1yapk9z4"})((({theme:{fontFamilies:e,fontWeights:t,typography:i,colors:o}})=>Object.assign(Object.assign({fontFamily:e.Proxima,fontWeight:t.semiBold},i.P2),{color:o.TextPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})),"label:PMoreText;"),Mu=(0,re.Z)("div",{target:"e1yapk9z5"})((({theme:{direction:e}})=>Object.assign({height:"20px",flex:"0 0 20px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px"},(0,se.YJ)({direction:e,marginEnd:"8px"}))),"label:DivSearchIconContainer;"),Du=(0,re.Z)(Iu.q,{target:"e1yapk9z6"})((({theme:{direction:e}})=>Object.assign({},(0,se.YJ)({direction:e,marginEnd:"12px"}))),"label:StyledAvatar;"),Fu=(0,re.Z)("div",{target:"e1yapk9z7"})({flex:"0 1 auto",minWidth:0},"label:DivSugItemContent;"),Nu=(0,re.Z)("div",{target:"e1yapk9z8"})((({theme:{fontWeights:e,typography:t,colors:i}})=>Object.assign(Object.assign({height:"30px",padding:"5px 12px"},t.P3),{fontWeight:e.semiBold,color:i.TextTertiary})),"label:DivSugAccountTitle;"),Bu=(0,w.memo)((function(e){const{item:t,index:i,onSelect:n}=e,{active:a,handleMouseEnter:r}=Ou(i),{content:s,extra_info:l}=t,{nickname:d,unique_id:c,is_verified:p,rich_sug_avatar_uri:u}=l,g=Boolean(c),m=(0,w.useCallback)((()=>{null==n||n(t,i)}),[i,t,n]),h=g?"user-sug-item":"content-sug-item";return(0,o.jsxs)(Eu,Object.assign({"data-e2e":h,paddingVertical:9,active:a,onMouseDown:m,onMouseMove:r},{children:[g?(0,o.jsx)(Du,{src:u,size:40},void 0):(0,o.jsx)(Mu,{children:(0,o.jsx)(zo.Z,{},void 0)},void 0),(0,o.jsx)(Fu,{children:g?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Lu,{children:[c," ",p&&(0,o.jsx)(co.Q,{width:14,height:14},"badge")]},void 0),(0,o.jsx)(Au,{children:d},void 0)]},void 0):(0,o.jsx)(Lu,{children:s},void 0)},void 0)]}),void 0)})),zu=(0,w.memo)((function({index:e,onClick:t}){const i=(0,U.mp)(cu.B,{dependencies:[],selector:e=>e.searchValue}),{active:n,handleMouseEnter:a}=Ou(e),r=(0,Ji.Q)()("view_all_results",{keyword:i}),s=(0,w.useCallback)((()=>{null==t||t("click_view_all")}),[t]);return(0,o.jsx)(Eu,Object.assign({paddingVertical:15,active:n,onMouseMove:a,onMouseDown:s},{children:(0,o.jsx)(Ru,{children:r},void 0)}),void 0)})),$u=(0,w.memo)((function(e){const t=(0,Ji.Q)(),[i,n]=(0,U.b7)(cu.B,{selector:e=>e.sugList,dependencies:[]}),a=(0,w.useCallback)((()=>{n.setActiveIndex(-1)}),[n]),[r,s]=(0,w.useMemo)((()=>i.reduce((([e,t],i)=>(i.extra_info.sug_user_id?e.push(i):t.push(i),[e,t])),[[],[]])),[i]),l=(t,i=0)=>t.map(((t,n)=>(0,o.jsx)(Bu,{item:t,index:n+i,onSelect:e.onSelect},t.content)));return(0,o.jsxs)(Pu,Object.assign({onMouseLeave:a},{children:[l(s),0===r.length?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Nu,{children:t("search_account")},void 0),l(r,s.length)]},void 0),(0,o.jsx)(zu,{index:i.length,onClick:e.onSelectMore},void 0)]}),void 0)})),Uu={[$.Ad.searchHome]:"general",[$.Ad.searchUser]:"user",[$.Ad.searchVideo]:"video"},Wu=(0,w.memo)((function(){const{search:e,pathname:t}=(0,j.TH)(),{q:i}=(0,S.parse)(e),n=(0,du.if)(Uu[t]),[{searchValue:a,loading:r,sugList:s,inputFocus:l,activeIndex:d},c]=(0,U.b7)(cu.B,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,sugList:e.sugList,inputFocus:e.inputFocus,activeIndex:e.activeIndex})}),{lang:p,$user:u,$searchVideoForLoggedin:g}=(0,U.mp)(G.G,{selector:e=>{var t,i,o;return{lang:e.lang,$user:null===(t=e.appContext)||void 0===t?void 0:t.$user,$searchVideoForLoggedin:null!==(o=null===(i=e.appContext)||void 0===i?void 0:i.$searchVideoForLoggedin)&&void 0!==o?o:[]}},dependencies:[]}),[{currentKeyword:m},h]=(0,U.b7)(pu.t8,{selector:e=>{var i,o;return{currentKeyword:null!==(o=null===(i=e[Uu[t]])||void 0===i?void 0:i.keyword)&&void 0!==o?o:""}},dependencies:[t]}),_=Boolean(u),v=(0,ee.fz)(uu.x),y=(0,ee.fz)(to._),f=(0,w.useRef)([]),b=(0,j.k6)(),x=(0,j.TH)(),k=(0,w.useCallback)((()=>{c.getSugList({app_language:gu(p),history_list:encodeURIComponent(JSON.stringify(f.current)),keyword:a})}),[c,p,a]),C=Boolean((0,j.LX)(t,{path:$.Ad.searchHome}));(0,w.useEffect)((()=>{C&&i&&c.setSearchValue(String(i))}),[i,C]),(0,w.useEffect)((()=>{k()}),[k]);const T=(0,w.useCallback)(((e,t)=>{c.setInputFocus(!1);const i=Date.now();let o=C?x.pathname:$.zp.searchHome();if(C&&e===m)return void n(!0,!0);!_&&g&&(o=$.zp.searchUser());const a=(0,mu.C)({location:x,to:{pathname:o,search:{q:e,t:i}}});b.push(a,Object.assign({searchSource:"normal_search"},t))}),[C,x,_,n,b,c,g,m]),O=(0,w.useCallback)(((e,i)=>{const{extra_info:{unique_id:o,sug_user_id:n},word_record:{words_content:r,group_id:s},content:l,impr_id:d}=e;f.current.push(l);const c=Boolean(n);v.handleSugClick({impr_id:d,words_source:"sug",words_position:i,words_content:r,raw_query:a,sug_type:c?"enrich_sug":"normal_sug",query_id:"",group_id:s}),c?(y.handleEnterPage("enter_personal_detail",{enter_from:"search_sug",search_keyword:a,to_user_id:n,search_id:d,impr_id:d,rank:i,search_type:Uu[t]}),window.location.href=(0,S.stringifyUrl)({url:(0,hu.yl)({uniqueId:o}),query:{lang:p}})):T(l,{enterMethod:"click_icon"})}),[y,p,v,a,T,t]),I=(0,w.useCallback)((e=>{h.resetSearchResult(),T(a,{enterMethod:e})}),[T,h,a]),P=(0,w.useCallback)((e=>{a&&(e&&s[d]?O(s[d],d):I(e?"click_enter":"click_icon"))}),[d,I,O,a,s]);return(0,o.jsxs)(Tu,{children:[(0,o.jsx)(ju,{initialValue:"",onSubmit:P},void 0),!r&&Boolean(a)&&s.length>0&&l?(0,o.jsx)($u,{onSelect:O,onSelectMore:I},void 0):null]},void 0)}));var Gu=i(32509),Hu=i(41107),qu=i(70018);let Zu=class{constructor(e){this.fetch=e}getReportNotices(e){return this.fetch.get("/aweme/v1/report/inbox/notice",{query:e,baseUrlType:2})}getReportList(e){return this.fetch.get("/node/report/inbox/list",{query:e,baseUrlType:2})}getReportDetail(e){return this.fetch.get("/node/report/inbox/detail",{query:e,baseUrlType:2})}};Zu=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Zu);var Vu=i(86349),Qu=i.n(Vu);const Yu="homepage_message";let Ku=class{handleEnter(e){Q.WB.event("enter_homepage_message",Object.assign(Object.assign({},e),{enter_method:"click_button"}))}handlePopShow(e){Q.WB.event("message_pop_notice_show",e)}handleChangeTab(e){Q.WB.event("change_notification_tab",this.getNoticeParams(e))}handleEnterFollow(e){Q.WB.event("enter_follow_request",this.getNoticeParams(e))}handleFollowRequestAction(e){Q.WB.event("follow_request_action",Qu()(e,{enter_from:"follow_request_page",previous_page:"homepage_message"}))}handleEnterFold(e){Q.WB.event("enter_folded_message",Qu()(e,{enter_from:Yu,account_type:"like"}))}handleFollow(){}getNoticeParams(e){return Qu()(e,{enter_from:Yu,page_name:Yu,previous_page:Q.WB.commonParams.page_name})}};Ku=(0,g.__decorate)([(0,ne.G)()],Ku);let Ju=class{constructor(e){this.fetch=e}getNoticeGroupData(e){return this.fetch.get("/api/notice/multi/",{query:e,baseUrlType:2})}getNoticeDiggList(e){return this.fetch.get("/api/notice/digg/list/",{query:e})}getNoticeCount(){return this.fetch.get("/api/notice/count/",{query:{source:7},baseUrlType:2})}getNoticeFollowRequestList(e){return this.fetch.get("/api/user/following/request/list/",{query:e})}postFollowReplyApprove(e){return this.fetch.post("/api/commit/follow/request/approve/",{query:{from_user_id:e,from:33},headers:{[Mi.eD]:this.fetch.csrfToken}})}postFollowReplyReject(e){return this.fetch.post("/api/commit/follow/request/reject/",{query:{from_user_id:e,from:33},headers:{[Mi.eD]:this.fetch.csrfToken}})}};Ju=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],Ju);const Xu=e=>33===e.type&&Boolean(e.follow),eg=e=>41===e.type&&Boolean(e.digg),tg=e=>31===e.type&&Boolean(e.comment),ig=e=>21===e.type&&Boolean(e.duet),og=e=>45===e.type&&Boolean(e.at),ng=e=>213===e.type&&Boolean(e.template_notice),ag={500:"all",2:"comments",7:"followers",3:"likes",6:"mentions"};let rg=class extends de.D{constructor(e,t,i,o,n){super(),this.service=e,this.user=t,this.reporter=i,this.reportInboxService=o,this.appContext=n,this.defaultNoticeList={has_more:1,max_time:0,min_time:0,notice_list:[],loading:!1},this.defaultFollowRequest={has_more:!1,min_time:0,total:0,users:[],loading:!1},this.defaultState={diggList:{users:[],loading:!1,has_more:1,max_cursor:0,min_cursor:0},activeGroup:500,noticeList:this.defaultNoticeList,noticeCount:[],followRequest:this.defaultFollowRequest,reportInbox:{noticeList:[],count:0}}}setActiveGroup(e,t){e.activeGroup=t}setNoticeList(e,t){e.noticeList=t}setNoticeListLoading(e,t){e.noticeList.loading=t}changeActiveGroup(e){return e.pipe((0,ti.b)((e=>{this.reporter.handleChangeTab({to_tab_name:ag[e]})})),(0,gi.z)((e=>(0,mi.of)(this.getActions().setActiveGroup(e),this.getActions().setNoticeList(this.defaultNoticeList),this.getActions().fetchNoticeData()))))}fetchNoticeData(e){return e.pipe((0,ge.M)(this.state$),(0,Xt.w)((([e,{activeGroup:t,noticeList:i}])=>{if(i.loading||!i.has_more)return _i.E;const o={count:20,is_mark_read:1,group:t,max_time:i.max_time,min_time:i.min_time};return this.service.getNoticeGroupData({aid:1988,group_list:JSON.stringify([o])}).pipe((0,ti.b)((e=>{(0,wi.k)(e.status_code,[0])})),(0,gi.z)((e=>{var t;if(0===e.status_code){const{notice_lists:o}=e;if(!(null==o?void 0:o.length))return(0,mi.of)(this.getActions().setNoticeList({has_more:0,min_time:i.min_time,max_time:i.max_time,notice_list:i.notice_list,loading:!1}));const{has_more:n,max_time:a,min_time:r,notice_list:s=[]}=o[0];return(0,mi.of)(this.user.getActions().multiSetUser(this.getNoticeUsers(s)),this.getActions().setNoticeList({has_more:n,max_time:a,min_time:r,notice_list:[...null!==(t=i.notice_list)&&void 0!==t?t:[],...s],loading:!1}))}return(0,mi.of)(this.noop())})),(0,ei.O)(this.getActions().setNoticeListLoading(!0)),(0,Si.l)(this.getActions().setNoticeListLoading(!1)),(0,_e.n)({}))})))}setDiggList(e,t){e.diggList.users=t}setDiggListLoading(e,t){e.diggList.loading=t}fetchDiggListData(e){return e.pipe((0,ge.M)(this.state$),(0,he.z)((([{ref_id:e},{diggList:t}])=>{if(t.loading||!t.has_more)return _i.E;const i={count:20,max_cursor:t.max_cursor,min_cursor:t.min_cursor,digg_type:1,ref_id:e,aid:1988};return this.service.getNoticeDiggList(i).pipe((0,gi.z)((e=>{var t;const i=(null!==(t=e.digg_infos)&&void 0!==t?t:[]).map((({simple_user:e})=>(0,H.yk)(e)));return(0,mi.of)(this.user.getActions().multiSetUser(i),this.getActions().setDiggList(i.map((({uniqueId:e})=>e))))})),(0,ei.O)(this.getActions().setDiggListLoading(!0)),(0,Si.l)(this.getActions().setDiggListLoading(!1)))})))}setNoticeCount(e,t){e.noticeCount=t}fetchNoticeCount(e){return e.pipe((0,gi.z)((()=>this.service.getNoticeCount().pipe((0,ti.b)((e=>{(0,wi.k)(e.status_code,[0])})),(0,me.U)((e=>{var t;if(0===e.status_code){const i=(null!==(t=e.notice_count)&&void 0!==t?t:[]).filter((e=>[500,2,7,3,6].indexOf(e.group)>=0&&500!==e.group));return this.getActions().setNoticeCount(i)}return this.noop()})),(0,_e.n)({})))))}setNoticeFollowRequest(e,t){e.followRequest=t}setNoticeFollowRequestLoading(e,t){e.followRequest.loading=t}fetchNoticeFollowRequest(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([{uid:e,refresh:t},{followRequest:i}])=>{const o={user_id:e,count:20,max_time:t?0:i.min_time,aid:1988};return this.service.getNoticeFollowRequestList(o).pipe((0,ti.b)((e=>{(0,wi.k)(e.status_code,[0])})),(0,gi.z)((e=>{var o;if(0===e.status_code){const n=(null!==(o=e.request_users)&&void 0!==o?o:[]).map((e=>(0,H.yk)(e))),a=n.map((({uniqueId:e})=>e));return(0,mi.of)(this.user.getActions().multiSetUser(n),this.getActions().setNoticeFollowRequest({has_more:e.has_more,loading:!1,min_time:e.min_time,total:e.total,users:t?a:i.users.concat(a),from:"fetchNoticeFollowRequest"}))}return(0,mi.of)(this.noop())})),(0,ei.O)(this.getActions().setNoticeFollowRequestLoading(!0)),(0,Si.l)(this.getActions().setNoticeFollowRequestLoading(!1)),(0,_e.n)({}))})))}setNoticeFollowRequestReply(e,t){const i=e.followRequest.users.indexOf(t);if(i>=0){e.followRequest.users.splice(i,1);const t=e.followRequest.total;e.followRequest.total="string"==typeof t?t.replace(/(.+?)(\d0*$)/,((e,t,i)=>t+String(Number(i)-1))):t-1}}postFollowReply(e){return e.pipe((0,ti.b)((({approveOrReject:e,uid:t=""})=>{this.reporter.handleFollowRequestAction({action:0===e?"accept":"delete",to_user_id:t})})),(0,gi.z)((({approveOrReject:e,uniqueId:t,uid:i=""})=>(0===e?this.service.postFollowReplyApprove(i):this.service.postFollowReplyReject(i)).pipe((0,Ba.h)(this.getActions().setNoticeFollowRequestReply(t))))))}setReportInboxNoticeList(e,t){e.reportInbox.noticeList=t}setReportInboxNoticeCount(e,t){e.reportInbox.count=t}fetchReportInbox(e){return e.pipe((0,ge.M)(this.appContext.state$),(0,he.z)((([e,{appContext:t}])=>{var i,o,n,a;return this.reportInboxService.getReportNotices({request_tag_from:(null==t?void 0:t.$isMobile)?"h5":"pc",carrier_region:null!==(i=null==t?void 0:t.$region)&&void 0!==i?i:"",sys_region:null!==(o=null==t?void 0:t.$region)&&void 0!==o?o:"",current_region:null!==(n=null==t?void 0:t.$region)&&void 0!==n?n:"",locale:null!==(a=null==t?void 0:t.$language)&&void 0!==a?a:""}).pipe((0,gi.z)((({notice_lists:e})=>{var t;if(!e)return[this.noop()];const{notice_list:i}=e[0];if(!i)return[this.noop()];const o=!1===(null===(t=i[0])||void 0===t?void 0:t.has_read)?1:0;return[this.getActions().setReportInboxNoticeList(i),this.getActions().setReportInboxNoticeCount(o)]})),(0,_e.n)({}))})))}getNoticeUsers(e){return e.reduce(((e,t)=>{var i;return Xu(t)&&e.push((0,H.yk)(t.follow.from_user)),eg(t)&&(null===(i=t.digg.from_user)||void 0===i||i.forEach((t=>e.push((0,H.yk)(t))))),tg(t)&&e.push((0,H.yk)(t.comment.comment.user)),ig(t)&&e.push((0,H.yk)(t.duet.aweme.author)),og(t)&&t.at.user_info&&e.push((0,H.yk)(t.at.user_info)),e}),[])}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setActiveGroup",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setNoticeList",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setNoticeListLoading",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"changeActiveGroup",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"fetchNoticeData",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Array]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setDiggList",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setDiggListLoading",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"fetchDiggListData",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Array]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setNoticeCount",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"fetchNoticeCount",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setNoticeFollowRequest",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setNoticeFollowRequestLoading",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"fetchNoticeFollowRequest",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setNoticeFollowRequestReply",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"postFollowReply",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Array]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setReportInboxNoticeList",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"setReportInboxNoticeCount",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],rg.prototype,"fetchReportInbox",null),rg=(0,g.__decorate)([(0,pe.Y)("Notice"),(0,g.__metadata)("design:paramtypes",[Ju,no.z,Ku,Zu,G.G])],rg);const sg=/^\(\d+\+?\)/;var lg=i(97933),dg=i(68784);const cg=(0,re.Z)("div",{target:"e1nx07zo0"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e})),(({removeMarginLeft:e})=>({marginLeft:e?"0px":"16px"})),{cursor:"pointer",height:"32px",padding:"3px 3px 0",position:"relative"},"label:DivMessageIconContainer;");cg.defaultProps=Object.assign(Object.assign({},cg.defaultProps),{"data-e2e":"top-dm-icon"});const pg={width:"26px",height:"26px",display:"block"},ug=(0,re.Z)(lg.Z,{target:"e1nx07zo1"})(pg,"label:StyledIcon;"),gg=(0,re.Z)(dg.Z,{target:"e1nx07zo2"})(pg,"label:StyledActiveIcon;"),mg=(0,re.Z)("sup",{target:"e1nx07zo3"})((({theme:e,long:t})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"ConstTextInverse",fontWeight:"semiBold"}),(0,se.YJ)({direction:e.direction,start:"16px"}),{position:"absolute",top:"-7px",minWidth:"20px",borderRadius:"10px",height:"20px",background:e.colors.Primary,textAlign:"center",padding:t?"0 6px":"0"}]),"label:SupMsgBadge;"),hg=function({removeMarginLeft:e}){const{pathname:t}=(0,j.TH)(),i=t.startsWith("/message")?gg:ug,n=(0,Ji.Q)(),a=(0,U.mp)(G.G,{dependencies:[],selector:e=>e.lang}),r=(0,U.mp)(qu.O,{dependencies:[],selector:e=>e.messageCount}),s=(0,ee.fz)(Hu.R);!function(){const{$user:e,$encryptedWebid:t,lang:i,$appType:o,$env:n,$wid:a,$apiUrl:r,$wsUrl:s}=(0,U.mp)(G.G,{dependencies:[],selector:e=>{var t,i,o,n,a,r,s;return{$user:null===(t=e.appContext)||void 0===t?void 0:t.$user,$wid:null===(i=e.appContext)||void 0===i?void 0:i.$wid,$encryptedWebid:null===(o=e.appContext)||void 0===o?void 0:o.$encryptedWebid,$appType:null===(n=e.appContext)||void 0===n?void 0:n.$appType,lang:e.lang,$env:null===(a=e.appContext)||void 0===a?void 0:a.$env,$apiUrl:null===(r=e.appContext)||void 0===r?void 0:r.$domains.imApi,$wsUrl:null===(s=e.appContext)||void 0===s?void 0:s.$domains.imFrontier}}}),l=(0,U.qj)(qu.O),d=(0,ee.fz)(Mi.GV);(0,w.useEffect)((()=>{d.getRiskParams(0).then((o=>{var n;Object.keys(o).forEach((e=>{void 0!==o[e]?o[e]=String(o[e]):o[e]=""})),o.referer||(o.referer=window.location.href);const d={appId:1459,userId:null!==(n=null==e?void 0:e.uid)&&void 0!==n?n:"",secUid:null==e?void 0:e.secUid,deviceId:null!=a?a:"",appKey:"e1bd35ec9db7b8d846de66ed140b1ad9",fpId:9,method:1,apiUrl:r,frontierUrl:s,headers:Object.assign(Object.assign({},o),{from_appID:"1988",app_language:i,app_name:"tiktok_web",channel:"web",user_agent:navigator.userAgent}),extended:{device_id:void 0,ttwid:window.decodeURIComponent(null!=t?t:"")},timeout:5e3,disableInitPull:!0};Object.assign(d,{debug:!1,service:5,withCredentials:!0}),l.initSDK(d)}))}),[o,null==n?void 0:n.name,null==e?void 0:e.secUid,null==e?void 0:e.uid,a,t,l,i,d,r,s])}(),function(){const e=(0,U.mp)(qu.O,{dependencies:[],selector:e=>e.messageCount}),t=(0,U.mp)(rg,{dependencies:[],selector:e=>e.noticeCount.reduce(((e,{count:t})=>e+t),0)}),i=(0,w.useMemo)((()=>e+t),[e,t]);(0,w.useEffect)((()=>{if(i>0){const e=(0,H.a1)(i);sg.test(document.title)?document.title=document.title.replace(sg,`(${e})`):document.title=`(${e})${document.title}`}else document.title=document.title.replace(sg,"")}),[i])}();const l=(0,w.useCallback)((()=>{s.handleEnterChatList(r)}),[r,s]),d=(0,H.a1)(r);return(0,o.jsx)(Gu.u,Object.assign({overlay:n("webdm_message_button"),placement:"bottom"},{children:(0,o.jsxs)(cg,Object.assign({removeMarginLeft:e},{children:[(0,o.jsx)(Wo.v,Object.assign({forceSSR:!0,to:`/messages?lang=${a}`,onClick:l},{children:(0,o.jsx)("span",{children:(0,o.jsx)(i,{},void 0)},void 0)}),void 0),r>0&&(0,o.jsx)(mg,Object.assign({long:r>10},{children:d}),void 0)]}),void 0)}),void 0)};var _g=i(57852);let vg=class{constructor(e){this.fetch=e}postScheduleRecord(e){return this.fetch.post("/api/v1/post_schedule/ack/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken})})}updateRedDot(e){return this.fetch.post("/api/reddot/report",{query:Object.assign({},e)})}};vg=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],vg);const yg="upload-long-video";let fg=class extends de.D{constructor(e,t){var i,o,n,a,r,s,l,d,c,p,u;super(),this.service=e,this.home=t,this.defaultState={tooltipPriority:(null===(o=null===(i=this.home.state.appContext)||void 0===i?void 0:i.$user)||void 0===o?void 0:o.showScheduleTips)||(null!==(r=null===(a=null===(n=this.home.state.appContext)||void 0===n?void 0:n.$user)||void 0===a?void 0:a.longVideoMinutes)&&void 0!==r?r:0)>0&&!_g.iv.getItem(yg)?1:3,uploadTooltipType:(null!==(d=null===(l=null===(s=this.home.state.appContext)||void 0===s?void 0:s.$user)||void 0===l?void 0:l.longVideoMinutes)&&void 0!==d?d:0)>0&&!_g.iv.getItem(yg)?1:0,redDot:null!==(u=null===(p=null===(c=this.home.state.appContext)||void 0===c?void 0:c.$user)||void 0===p?void 0:p.redDot)&&void 0!==u?u:[]}}setTooltipPriority(e,t){e.tooltipPriority=t}deleteTypeRedDot(e,t){const i=[...e.redDot],o=i.indexOf(t);i.splice(o,1),e.redDot=i}postScheduleRecord(e){return e.pipe((0,gi.z)((e=>this.service.postScheduleRecord(e).pipe((0,me.U)((()=>this.noop()))))))}updateRedDot(e){return e.pipe((0,gi.z)((({redirect:e,type:t})=>this.service.updateRedDot({type:t}).pipe((0,ti.b)((()=>{e&&(location.href=e)})),(0,me.U)((()=>this.getActions().deleteTypeRedDot(t)))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],fg.prototype,"setTooltipPriority",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],fg.prototype,"deleteTypeRedDot",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],fg.prototype,"postScheduleRecord",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],fg.prototype,"updateRedDot",null),fg=(0,g.__decorate)([(0,pe.Y)("Header"),(0,g.__metadata)("design:paramtypes",[vg,G.G])],fg);const bg=(0,re.Z)("div",{target:"efubjyv0"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginStart:"24px"})),{position:"relative",width:"32px",height:"32px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"50%",cursor:"pointer"},"label:DivProfileContainer;");bg.defaultProps=Object.assign(Object.assign({},bg.defaultProps),{"data-e2e":"profile-icon"});const xg=(0,w.memo)((function(e){var t;const{children:i,style:n={}}=e,{appContext:a}=(0,U.mp)(G.G);return(0,o.jsx)(bg,Object.assign({style:Object.assign({backgroundImage:`url(${null===(t=null==a?void 0:a.$user)||void 0===t?void 0:t.avatarUri[0]})`},n),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},{children:i}),void 0)}));var kg,Sg=i(68082),wg=i(11809),Cg=i(69859),jg=i(81835);function Tg(){return Tg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Tg.apply(this,arguments)}const Og=function(e){return w.createElement("svg",Tg({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},e),kg||(kg=w.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M4.123 12l7.586 7.586a.5.5 0 010 .707l-1.414 1.414a.5.5 0 01-.707 0L.94 13.061a1.5 1.5 0 010-2.122l8.647-8.646a.5.5 0 01.707 0l1.414 1.414a.5.5 0 010 .707L4.123 12z",clipRule:"evenodd"})))};let Ig=class extends de.D{constructor(e,t){super(),this.service=e,this.t=t,this.defaultState={reportDetail:{isLoading:!1,data:null},reportList:{data:[],hasNextPage:!0,pageCount:0},activeReport:null}}setReportDetail(e,t){e.reportDetail.data=t}setReportDetailLoading(e,t){e.reportDetail.isLoading=t}setReportListData(e,t){e.reportList.data.push(...t.data),e.reportList.hasNextPage=t.hasNextPage,e.reportList.pageCount=t.pageCount}setActiveReport(e,t){e.activeReport=t}getReportDetail(e){return e.pipe((0,he.z)((({reportId:e,reportType:t})=>this.service.getReportDetail({report_id:e,report_type:t}).pipe((0,me.U)((({body:{detail:e}})=>e?this.getActions().setReportDetail(e):this.noop())),(0,ei.O)(this.getActions().setReportDetailLoading(!0)),(0,Si.l)(this.getActions().setReportDetailLoading(!1)),(0,_e.n)({callback:this.commonToastError})))))}getReportList(e){return e.pipe((0,ge.M)(this.state$),(0,he.z)((([e,{reportList:{pageCount:t,hasNextPage:i}}])=>i?this.service.getReportList({start:t,count:15}).pipe((0,me.U)((({body:{status_code:e,list:i,has_more:o}})=>0!==e?this.noop():this.getActions().setReportListData({data:null!=i?i:[],hasNextPage:o,pageCount:t+15}))),(0,_e.n)({callback:this.commonToastError})):(0,mi.of)(this.noop()))))}updateActiveReport(e){return e.pipe((0,gi.z)((e=>[this.getActions().setActiveReport(e)])))}commonToastError(){Ut.h.destroy(),Ut.h.open({content:this.t(J.kU),duration:3,widthType:"half"})}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Ig.prototype,"setReportDetail",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],Ig.prototype,"setReportDetailLoading",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Ig.prototype,"setReportListData",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],Ig.prototype,"setActiveReport",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ig.prototype,"getReportDetail",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ig.prototype,"getReportList",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],Ig.prototype,"updateActiveReport",null),Ig=(0,g.__decorate)([(0,pe.Y)("ReportInbox"),(0,g.__param)(1,(0,Ei.t)(Li.s)),(0,g.__metadata)("design:paramtypes",[Zu,Function])],Ig);var Pg,Eg,Lg,Ag=i(21145);function Rg(){return Rg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},Rg.apply(this,arguments)}const Mg=function(e){return w.createElement("svg",Rg({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 21 20",width:"1em",height:"1em"},e),Pg||(Pg=w.createElement("rect",{width:1.501,height:17.768,fill:"#fff",rx:.5,transform:"scale(1 -1) rotate(45.638 27.162 10.536)"})),Eg||(Eg=w.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M10.57 14.556c1.11 0 2.163-.17 3.11-.472L12.5 12.93a.512.512 0 01-.058-.068 9.006 9.006 0 01-1.873.193c-1.802 0-3.368-.514-4.445-1.267-1.08-.757-1.557-1.658-1.557-2.484 0-.826.476-1.728 1.557-2.485a5.44 5.44 0 01.075-.051L5.11 5.702c-1.266.94-2.043 2.207-2.043 3.602 0 2.9 3.36 5.252 7.503 5.252zM7.475 4.518c.943-.3 1.99-.466 3.093-.466 4.144 0 7.503 2.351 7.503 5.252 0 1.39-.77 2.652-2.03 3.592l-1.09-1.066a5.9 5.9 0 00.062-.042c1.08-.757 1.557-1.658 1.557-2.484 0-.826-.476-1.728-1.557-2.485-1.076-.753-2.643-1.267-4.445-1.267-.65 0-1.268.067-1.844.188l-1.25-1.222z",clipRule:"evenodd"})),Lg||(Lg=w.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.357 11.81a2.626 2.626 0 01-3.31-3.236l3.31 3.236zM9.803 6.792a2.626 2.626 0 013.296 3.224L9.804 6.792z",clipRule:"evenodd"})))};var Dg=i(87530),Fg=i.n(Dg);function Ng(e){if(isNaN(Number(e)))return"";const t=Fg().unix(Number(e)),i=e=>e.toString().padStart(2,"0"),o=i(t.month()+1),n=i(t.date()),a=i(t.hour()),r=i(t.minute()),s=i(t.second());return`${t.year()}-${o}-${n} ${a}:${r}:${s}`}const Bg=(0,re.Z)("div",{target:"egjh0py0"})({display:"flex",padding:"10px 0"},"label:DivItemContainer;"),zg=(0,re.Z)("img",{target:"egjh0py1"})((({theme:{direction:e}})=>[{height:"48px",width:"48px",borderRadius:"50%"},(0,se.YJ)({direction:e,marginEnd:"12px"})]),"label:ImgLeftIcon;"),$g=(0,re.Z)("img",{target:"egjh0py2"})((({theme:{colors:e}})=>({objectFit:"cover",backgroundColor:e.TextTertiary})),"label:ImgCover;"),Ug=(0,re.Z)("div",{target:"egjh0py3"})({flex:1,display:"flex",justifyContent:"space-between"},"label:DivRightContent;"),Wg=(0,re.Z)("div",{target:"egjh0py4"})((({theme:{colors:e,direction:t}})=>[{flex:1,color:e.TextPrimary},(0,se.YJ)({direction:t,marginEnd:"12px"})]),"label:DivDialogContent;"),Gg=(0,re.Z)("span",{target:"egjh0py5"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3"}),{lineHeight:"17px"}]),"label:SpanTitle;"),Hg=(0,re.Z)("div",{target:"egjh0py6"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{lineHeight:"17px"}]),"label:DivContent;"),qg=(0,re.Z)("span",{target:"egjh0py7"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTime;"),Zg=(0,re.Z)("div",{target:"egjh0py8"})({width:"42px",height:"56px",borderRadius:"2px",overflow:"hidden",position:"relative"},"label:DivImgWrapper;"),Vg=(0,re.Z)("div",{target:"egjh0py9"})((({theme:{direction:e}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,backgroundColor:"rgba(0, 0, 0, .5)"},(0,se.YJ)({direction:e,start:0})]),"label:DivViolationMask;"),Qg=({item:e,isV2:t})=>{const[i,n]=(0,w.useState)(!1),a=(0,w.useCallback)((()=>{n(!0)}),[]),{title:r="",content:s="",time:l="",cover_url:d="",avatar_url:c="",has_mask:p=!1}=e;return(0,o.jsxs)(Bg,{children:[(0,o.jsx)(zg,{src:c||Ag},void 0),(0,o.jsxs)(Ug,{children:[(0,o.jsxs)(Wg,{children:[(0,o.jsx)(Gg,{children:r},void 0),(0,o.jsxs)(Hg,{children:[s," ",(0,o.jsx)(qg,{children:t?Ng(l):l},void 0)]},void 0)]},void 0),d&&(0,o.jsxs)(Zg,{children:[(0,o.jsx)($g,{width:"100%",height:"100%",src:d,onLoad:a},void 0),p&&i&&(0,o.jsx)(Vg,{children:(0,o.jsx)(Mg,{width:20,height:20},void 0)},void 0)]},void 0)]},void 0)]},void 0)},Yg=(0,re.Z)("div",{target:"eaptjjg0"})((({theme:{direction:e}})=>[{paddingTop:"8px",display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflowY:"auto"},(0,se.YJ)({direction:e,paddingStart:"16px",paddingEnd:"24px"})]),"label:DivReportDetail;"),Kg=({reportId:e,reportType:t})=>{const{reportDetail:{isLoading:i,data:n}}=(0,U.mp)(Ig),a=(0,U.qj)(Ig),r=(0,w.useCallback)((()=>{a.getReportDetail({reportId:e,reportType:t})}),[e,t,a]);if((0,w.useEffect)((()=>{r()}),[r]),i)return(0,o.jsx)(Wt.g,{center:!0,size:"small"},void 0);if(!n)return(0,o.jsx)("div",{},void 0);const{text_infos:s}=n,l=void 0!==t;return(0,o.jsx)(Yg,{children:null==s?void 0:s.map(((e,t)=>(0,o.jsx)(Qg,{item:e,isV2:l},t)))},void 0)};var Jg,Xg=i(85795);function em(){return em=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},em.apply(this,arguments)}const tm=function(e){return w.createElement("svg",em({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32",width:"1em",height:"1em"},e),Jg||(Jg=w.createElement("path",{fill:"#161823",fillRule:"evenodd",d:"M16.58 6.023c-2.175-1.546-4.752-1.507-6.651-1.157a14.519 14.519 0 00-3.097.948 8.763 8.763 0 00-.252.116l-.016.008-.006.003-.004.001A1 1 0 006 6.838v20.495c0 .369.298.667.667.667h.666A.667.667 0 008 27.333v-8.247l.233-.09c.515-.19 1.236-.42 2.059-.57 1.674-.31 3.597-.27 5.129.819 2.174 1.546 4.751 1.506 6.65 1.156a14.515 14.515 0 003.097-.948 8.48 8.48 0 00.253-.116l.015-.007h.001l.005-.003.003-.002A1 1 0 0026 18.43V6.838a1 1 0 00-1.444-.896h-.001l-.006.003a3.144 3.144 0 01-.186.085 12.52 12.52 0 01-2.654.812c-1.675.309-3.598.27-5.13-.82zm-6.288.81c1.674-.308 3.597-.269 5.129.82 2.174 1.546 4.751 1.506 6.65 1.156a14.358 14.358 0 001.929-.5v9.464a12.486 12.486 0 01-2.292.661c-1.674.309-3.597.27-5.129-.82-2.174-1.545-4.751-1.506-6.65-1.156a14.35 14.35 0 00-1.929.5V7.495l.233-.09c.515-.19 1.236-.42 2.059-.57z",clipRule:"evenodd"})))};var im;function om(){return om=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},om.apply(this,arguments)}const nm=function(e){return w.createElement("svg",om({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 17 16",width:"1em",height:"1em"},e),im||(im=w.createElement("path",{fill:"#161823",fillOpacity:.5,fillRule:"evenodd",d:"M12.305 7.529L6.874 2.098a.333.333 0 00-.472 0l-.471.471a.333.333 0 000 .471L10.891 8l-4.96 4.96a.333.333 0 000 .471l.471.471c.13.13.342.13.472 0l5.43-5.43a.667.667 0 000-.943z",clipRule:"evenodd"})))},am={101:"report_inbox_video",102:"report_inbox_comment",103:"report_inbox_account",107:"report_inbox_live",130:"report_inbox_livecomment",106:"report_inbox_directmessage",115:"report_inbox_directmessage",123:"report_inbox_directmessage",105:"report_inbox_sound",119:"report_inbox_hashtag",141:"shoutouts_detail_comment_report_title",142:"tns_intro_reporter_title",160:"%s - qareport_question",230:"profile_page_events_list",210:"photo_name_nocaption"},rm={1:"report_inbox_inreview",3:"report_inbox_violation",2:"report_inbox_noviolation"},sm=(0,re.Z)("div",{target:"e1cbfxtu0"})((({theme:{colors:e,direction:t},isNotice:i})=>[{height:"68px",minHeight:"68px",display:"flex",flexDirection:"row",alignItems:"center",position:"relative",cursor:"pointer",":hover":{backgroundColor:e.BGPlaceholderDefault}},(0,se.YJ)({direction:t,paddingStart:"16px",paddingEnd:i?"16px":"24px"})]),"label:DivReportItemContainer;"),lm=(0,re.Z)("div",{target:"e1cbfxtu1"})((({theme:{colors:e}})=>[{minWidth:"48px",width:"48px",height:"48px",borderRadius:"24px",border:`1px solid ${e.LineSecondary}`,display:"flex",justifyContent:"center",alignItems:"center"}]),"label:DivFlagContainer;"),dm=(0,re.Z)("div",{target:"e1cbfxtu2"})((({theme:{direction:e}})=>[{display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden",wordWrap:"break-word"},(0,se.YJ)({direction:e,marginStart:"12px"})]),"label:DivReportItemContent;"),cm=(0,re.Z)("div",{target:"e1cbfxtu3"})((({theme:{direction:e}})=>[Object.assign({minWidth:"16px",width:"16px",height:"16px"},"rtl"===e&&{transform:"rotate(180deg)"})]),"label:DivArrowContainer;"),pm=(0,re.Z)("span",{target:"e1cbfxtu4"})((({theme:e,isNotice:t})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",typography:"P3",color:"TextPrimary",fontWeight:"semiBold"}),{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:t?"normal":"nowrap",lineHeight:"17px"}]),"label:SpanTitle;"),um=(0,re.Z)("span",{target:"e1cbfxtu5"})((({theme:e,isNotice:t})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:t?"TextPrimary":"TextTertiary"}),{lineHeight:"17px"}]),"label:SpanSubtitle;"),gm=(0,re.Z)("span",{target:"e1cbfxtu6"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Proxima",typography:"P3",fontWeight:"normal",color:"TextQuaternary"}),{lineHeight:"17px"}]),"label:SpanTimestamp;"),mm=(0,re.Z)("div",{target:"e1cbfxtu7"})((({theme:{direction:e}})=>[{position:"relative",width:"42px",minWidth:"42px",height:"56px",minHeight:"56px",borderRadius:"2px",overflow:"hidden"},(0,se.YJ)({direction:e,marginStart:"12px"})]),"label:DivCoverImageWrapper;"),hm=(0,re.Z)("img",{target:"e1cbfxtu8"})((({theme:{colors:e},isNotLoaded:t})=>[Object.assign({width:"100%",height:"100%",objectFit:"cover"},t?{backgroundColor:e.TextTertiary}:{})]),"label:ImgCoverImage;"),_m=(0,re.Z)("div",{target:"e1cbfxtu9"})({display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, .5)"},"label:DivViolationMask;"),vm=(0,re.Z)("span",{target:"e1cbfxtu10"})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:"70%",float:"left"},"label:SpanReportBoxRow;"),ym=({report:e,onClick:t})=>{const{timeTranslator:i}=(0,Hp.e)(),n=(0,Ji.Q)(),[a,r]=(0,w.useState)(!1),s=am[e.report_type]?n(am[e.report_type]):"",l=i(1e3*Number(e.modify_time)),d=(0,w.useCallback)((()=>{t()}),[t]),c=(0,w.useCallback)((()=>{r(!0)}),[]),p=rm[e.status]?n(rm[e.status]):"";return(0,o.jsxs)(sm,Object.assign({onClick:d},{children:[(0,o.jsx)(lm,{children:(0,o.jsx)(tm,{width:32,height:32},void 0)},void 0),(0,o.jsxs)(dm,{children:[(0,o.jsx)(pm,{children:(()=>{if(e.title)return e.title;if(160===e.report_type){const t=` - ${n("qareport_question")||"Question"}`;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(vm,{children:e.object_desc},void 0),(0,o.jsx)("span",{children:t.padStart(t.length+1)},void 0)]},void 0)}return s.replace("%s",e.object_owner_name||e.object_desc||"")})()},void 0),(0,o.jsxs)(um,{children:[n("report_inbox_status"),": ",p,(0,o.jsx)(gm,{children:l.padStart(l.length+1)},void 0)]},void 0)]},void 0),e.cover_image?(0,o.jsxs)(mm,{children:[(0,o.jsx)(hm,{isNotLoaded:!a,src:e.cover_image,onLoad:c},void 0),3===e.status&&a&&(0,o.jsx)(_m,{children:(0,o.jsx)(Mg,{width:20,height:20},void 0)},void 0)]},void 0):(0,o.jsx)(cm,{children:(0,o.jsx)(nm,{width:16,height:16},void 0)},void 0)]}),void 0)},fm=(0,re.Z)("div",{target:"eq5dlep0"})({display:"flex",flexGrow:1,flexDirection:"column",alignItems:"stretch",overflow:"auto",height:"100%"},"label:DivReportList;"),bm=()=>{const{reportList:{data:e,hasNextPage:t}}=(0,U.mp)(Ig),i=(0,U.qj)(Ig),n=(0,w.useRef)(null);(0,w.useEffect)((()=>{e.length>0||i.getReportList()}),[i,e.length]);const a=(0,w.useCallback)((()=>{i.getReportList()}),[i]),r=(0,w.useCallback)((e=>()=>{i.updateActiveReport({reportId:e.report_id,reportType:e.report_type})}),[i]);return(0,Xg.s)({elemRef:n,onHitBottom:a,bottomThreshold:200,throttle:200}),(0,o.jsxs)(fm,Object.assign({ref:n},{children:[e.map(((e,t)=>(0,o.jsx)(ym,{report:e,onClick:r(e)},t))),t&&(0,o.jsx)("div",{children:(0,o.jsx)(Wt.g,{center:!0,size:"small"},void 0)},void 0)]}),void 0)},xm=(0,re.Z)("div",{target:"e115u39r0"})({height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",overflow:"hidden"},"label:DivReportInboxContainer;"),km=(0,re.Z)("div",{target:"e115u39r1"})({display:"flex",flexDirection:"row",alignItems:"center",padding:"0 16px",margin:"24px 0 18px"},"label:DivHeader;"),Sm=(0,re.Z)("span",{target:"e115u39r2"})((({theme:e})=>[(0,se.GI)({theme:e,fontFamily:"Sofia",typography:"H4",color:"TextPrimary",fontWeight:"bold"})]),"label:SpanHeaderTitle;"),wm=(0,re.Z)("div",{target:"e115u39r3"})((({theme:{direction:e}})=>[Object.assign({width:"24px",height:"24px",cursor:"pointer"},"rtl"===e&&{transform:"rotate(180deg)"})]),"label:DivBackButton;"),Cm=({onClose:e})=>{var t,i;const{reportDetail:n,activeReport:a}=(0,U.mp)(Ig),r=(0,Ji.Q)(),s=(0,U.qj)(Ig),l=(0,w.useCallback)((()=>{null===a?e():s.setActiveReport(null)}),[a,s,e]),d=r("report_inbox_title"),c=null!==a&&null!==(i=null===(t=n.data)||void 0===t?void 0:t.tab_title)&&void 0!==i?i:d;return(0,o.jsxs)(xm,{children:[(0,o.jsxs)(km,{children:[(0,o.jsx)(wm,Object.assign({onClick:l},{children:(0,o.jsx)(Og,{width:24,height:24},void 0)}),void 0),(0,o.jsx)(Sm,{children:c},void 0)]},void 0),null!==a?(0,o.jsx)(Kg,{reportId:a.reportId,reportType:a.reportType},void 0):(0,o.jsx)(bm,{},void 0)]},void 0)};var jm=i(52687),Tm=i(66583),Om=i(90058),Im=i(20314),Pm=i(70436),Em=i(29785),Lm=i(43775);const Am=(0,re.Z)("div",{target:"e1d0xjxi0"})({padding:"88px 32px 0",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivErrorContainer;"),Rm=(0,re.Z)("p",{target:"e1d0xjxi1"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{marginTop:"20px"},"label:PErrorTitle;"),Mm=(0,re.Z)("p",{target:"e1d0xjxi2"})((({theme:e})=>(0,se.GI)({theme:e,typography:"H6",color:"TextSecondary"})),{marginTop:"12px"},"label:PErrorDesc;"),Dm={500:{title:"inbox_all_activity",desc:"inbox_default_text",Icon:Om.Z},2:{title:"Inbox_Comments_on_your_videos",desc:"Inbox_When_someone_comments_on__one_of_your_videos_you_ll_see_it_here",Icon:Im.Z},7:{title:"Inbox_New_followers",desc:"Inbox_When_someone_new_follows_you_you_ll_see_it_here",Icon:Pm.Z},3:{title:"Inbox_Likes_on_your_videos",desc:"Inbox_When_someone_likes_one_of_your_videos_you_ll_see_it_here",Icon:Em.Z},6:{title:"Inbox_Mentions_of_You",desc:"Inbox_When_someone_mentions_you_you_ll_see_it_here",Icon:Lm.Z}},Fm=(0,w.memo)((function({type:e}){const t=(0,Ji.Q)(),{colors:i}=(0,a.u)(),{title:n,desc:r,Icon:s}=Dm[e];return(0,o.jsxs)(Am,{children:[(0,o.jsx)(s,{width:70,height:70,fill:i.TextQuaternary},void 0),(0,o.jsx)(Rm,{children:t(n)},void 0),(0,o.jsx)(Mm,{children:t(r)},void 0)]},void 0)})),Nm=({item:e,onClick:t})=>{var i,n,a,r,s,l,d;const{$isMobile:c=!1}=null!==(i=(0,oe.L)((()=>["$isMobile"]),[]))&&void 0!==i?i:{},{timeTranslator:p}=(0,Hp.e)(),u=p(1e3*Number(e.create_time)),g=null!==(r=null===(a=null===(n=e.template_notice)||void 0===n?void 0:n.notice)||void 0===a?void 0:a.content)&&void 0!==r?r:"",m=(0,w.useCallback)((()=>{c?window.location.href="/report/inbox":null==t||t()}),[c,t]);return(0,o.jsxs)(sm,Object.assign({isNotice:!0,onClick:m},{children:[(0,o.jsx)(lm,{children:(0,o.jsx)(tm,{width:32,height:32},void 0)},void 0),(0,o.jsx)(dm,{children:(0,o.jsxs)(pm,Object.assign({isNotice:!0},{children:[null===(d=null===(l=null===(s=e.template_notice)||void 0===s?void 0:s.notice)||void 0===l?void 0:l.title)||void 0===d?void 0:d.title,":",(0,o.jsxs)(um,Object.assign({isNotice:!0},{children:[g.padStart(g.length+1),(0,o.jsx)(gm,{children:u.padStart(u.length+1)},void 0)]}),void 0)]}),void 0)},void 0),(0,o.jsx)(cm,{children:(0,o.jsx)(nm,{width:16,height:16},void 0)},void 0)]}),void 0)};var Bm=i(54167);function zm({beforeStart:e,href:t,shouldUsePush:i,state:o}){const n=(0,Tm.e)();return t=(0,Bm.ot)(t),(0,w.useCallback)((a=>{null==e||e(a),n(a,{href:t,shouldUsePush:i,state:o})}),[e,n,t,i,o])}function $m({uniqueId:e,onClick:t,enter_method:i,enter_from:o,previous_page:n,shouldHandleDom:a}){const r=(0,U.mp)(G.G,{selector:t=>{var i;const{appContext:o}=t;return(null==o?void 0:o.$user)&&(null===(i=null==o?void 0:o.$user)||void 0===i?void 0:i.uniqueId)===e},dependencies:[e]}),s=(0,ee.fz)(to._);return(0,w.useCallback)((e=>{var l;let d=i;a&&(d=null!==(l=function(e){let t=e.target;for(;!((null==t?void 0:t.dataset.method)||t===e.currentTarget&&t);)t=t.parentElement;return t.dataset.method}(e))&&void 0!==l?l:i),null==t||t(e);const c=r?"enter_personal_homepage":"enter_personal_detail";s.handleEnterPage(c,{enter_method:d,page_name:null!=o?o:"homepage_message",enter_from:null!=o?o:"homepage_message",previous_page:null!=n?n:Q.WB.commonParams.page_name})}),[i,a,t,r,s,o,n])}function Um(e){const{vid:t,authorId:i}=e,o=(0,ee.fz)(to._);return(0,w.useCallback)((()=>{o.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:t,to_group_id:t,to_author_id:i})}),[i,o,t])}const Wm=(0,re.Z)("div",{target:"exfus50"})((({theme:e})=>[(0,se.GI)({theme:e,typography:"H6"}),se.gi,{display:"flex",flexDirection:"row",padding:"10px 16px",alignItems:"flex-start",cursor:"pointer",":hover":{background:e.colors.BGView}}]),"label:DivItemContainer;"),Gm=(0,re.Z)("div",{target:"exfus51"})({position:"relative",width:"48px",height:"48px",flex:"0 0 48px"},"label:DivAvatarContainer;"),Hm=(0,re.Z)(Iu.q,{target:"exfus52"})((({size:e,multiple:t,theme:i})=>t?{position:"absolute",border:`1px solid ${i.colors.BGPrimary}`,background:i.colors.BGPrimary,boxSizing:"content-box",":first-of-type":{right:0,top:0},":last-of-type":{left:0,bottom:0}}:{flex:`0 0 ${e}px`}),"label:StyledAvatar;"),qm=(0,re.Z)(_t.W,{target:"exfus53"})({alignSelf:"center",flex:"0 0 auto","& > svg":{marginRight:"6px"}},"label:StyledFollowButton;"),Zm=(0,re.Z)("div",{target:"exfus54"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:DivVideoCover;"),Vm=(0,re.Z)(Wo.v,{target:"exfus55"})({flex:"0 0 42px",width:"42px",height:"56px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px"},"label:StyledLinkVideoCover;"),Qm=(0,re.Z)("div",{target:"exfus56"})({padding:"0 12px",flex:"1 1 auto"},"label:DivContentContainer;"),Ym=({theme:e})=>({fontWeight:e.fontWeights.semiBold}),Km=(0,re.Z)("p",{target:"exfus57"})(Ym,"label:PTitleText;"),Jm=(0,re.Z)("a",{target:"exfus58"})(Ym,"label:ATitleLink;"),Xm=(0,re.Z)(Wo.v,{target:"exfus59"})(Ym,"label:StyledTitleTextLink;"),eh=(0,re.Z)("p",{target:"exfus510"})((0,se.FC)(7),(({theme:e})=>({color:e.colors.TextTertiary,maxHeight:130,wordBreak:"break-word"})),"label:PDescText;"),th=(0,re.Z)("span",{target:"exfus511"})((({theme:{colors:e}})=>({color:e.TextPrimary})),"label:SpanPrimary;"),ih=(0,re.Z)(eh,{target:"exfus512"})((({theme:e})=>({position:"relative",paddingLeft:"8px",marginTop:"4px",lineClamp:1,WebkitLineClamp:1,"::before":{content:'""',position:"absolute",top:0,left:0,width:"2px",height:"100%",background:e.colors.LineSecondary}})),"label:StyledExtraText;"),oh=(0,re.Z)("div",{target:"exfus513"})({marginTop:"8px"},"label:DivFollowReqButtonWrapper;"),nh=(0,re.Z)(_t.W,{target:"exfus514"})({display:"inline-flex",":not(:first-of-type)":{marginLeft:"8px"}},"label:StyledFollowReqButton;"),ah=(0,w.memo)((function({item:e}){var t,i,n,a,r;const s=(0,U.mp)(no.z,{selector:t=>{var i;return t.users[null!==(i=e.comment.comment.user.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),l=e.comment.aweme,d=`/@${null==l?void 0:l.author.uid}/video/${null==l?void 0:l.aweme_id}`,c=(0,hu.yl)({uniqueId:null!==(t=null==s?void 0:s.uniqueId)&&void 0!==t?t:"",secUid:null==s?void 0:s.secUid}),p=Um({vid:null==l?void 0:l.aweme_id,authorId:null==l?void 0:l.author.uid}),{handleBefore:u,state:g}=(0,w.useMemo)((()=>({handleBefore:()=>{_g.To.setItem("highlight_comment",{id:e.comment.comment.cid,groupId:e.comment.aweme.aweme_id,show:!0}),p()},state:{browserMode:!0,cid:e.comment.comment.cid,vid:e.comment.aweme.aweme_id}})),[p,e.comment.aweme.aweme_id,e.comment.comment.cid]),m=zm({href:`${d}?browserMode=1`,state:g,shouldUsePush:!0,beforeStart:u}),h=$m({uniqueId:null==s?void 0:s.uniqueId,onClick:Y.UW,enter_method:"click_head"}),_=$m({uniqueId:null==s?void 0:s.uniqueId,onClick:Y.UW,enter_method:"click_name"}),v=(0,ee.fz)(to._),y=(0,w.useCallback)((e=>{e.stopPropagation(),v.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:null==l?void 0:l.aweme_id,to_group_id:null==l?void 0:l.aweme_id,to_author_id:null==l?void 0:l.author.uid})}),[v,null==l?void 0:l.author.uid,null==l?void 0:l.aweme_id]);return s?(0,o.jsxs)(Wm,Object.assign({"data-e2e":"inbox-list-item",onClick:m},{children:[(0,o.jsx)(Wo.v,Object.assign({to:c,onClick:h},{children:(0,o.jsx)(Hm,{size:48,src:s.avatarThumb,multiple:!1},void 0)}),void 0),(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Xm,Object.assign({"data-e2e":"inbox-title",to:c,onClick:_},{children:s.uniqueId}),void 0),(0,o.jsx)(rh,{item:e,user:s},void 0)]},void 0),(0,o.jsx)(Wo.v,Object.assign({to:d,onClick:y},{children:(0,o.jsx)(Zm,{style:{backgroundImage:`url(${null===(r=null===(a=null===(n=null===(i=e.comment.aweme)||void 0===i?void 0:i.video)||void 0===n?void 0:n.cover)||void 0===a?void 0:a.url_list)||void 0===r?void 0:r[0]})`}},void 0)}),void 0)]}),void 0):(0,wi.G)(["user"])})),rh=(0,w.memo)((function({item:e,user:t}){var i,n;const{timeTranslator:a,t:r}=(0,Hp.e)(),{comment:s,create_time:l}=e,{comment_type:d,reply_comment:c}=s,p=(0,o.jsxs)(o.Fragment,{children:["",a(1e3*Number(l))]},void 0);return 2===d||11===d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(th,{children:`${r("Inbox_replied_to_your_comment").replace("%s","")}: ${null!==(i=s.comment.text)&&void 0!==i?i:""}`},void 0),p]}),void 0),(0,o.jsx)(ih,{children:`${null!==(n=null==t?void 0:t.uniqueId)&&void 0!==n?n:""}: ${null==c?void 0:c.text}`},void 0)]},void 0):17===d||18===d?(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(th,{children:r("inbox_videoreply")},void 0),p]}),void 0):(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(th,{children:r("Inbox_commented").replace(/%(s|@)/g,"")+s.comment.text},void 0),p]}),void 0)})),sh=(0,w.memo)((function({item:e}){var t,i,n,a,r,s;const{t:l,timeTranslator:d}=(0,Hp.e)(),c=(0,U.mp)(no.z,{selector:t=>{var i;return t.users[null!==(i=e.duet.aweme.author.unique_id)&&void 0!==i?i:""]},dependencies:[e]}),p=(0,hu.fH)({videoId:e.duet.aweme.aweme_id,uniqueId:null!==(t=null==c?void 0:c.uniqueId)&&void 0!==t?t:"",secUid:null==c?void 0:c.secUid}),u=(0,hu.yl)({uniqueId:null!==(i=null==c?void 0:c.uniqueId)&&void 0!==i?i:"",secUid:null==c?void 0:c.secUid}),g=$m({uniqueId:null==c?void 0:c.uniqueId,enter_method:"click_head"}),m=$m({uniqueId:null==c?void 0:c.uniqueId,enter_method:"click_name"}),h=zm({href:p,shouldUsePush:!0,beforeStart:Um({vid:e.duet.aweme.aweme_id,authorId:e.duet.aweme.author.uid})});return c?(0,o.jsxs)(Wm,Object.assign({"data-e2e":"inbox-list-item",onClick:h},{children:[(0,o.jsx)(Wo.v,Object.assign({to:u,onClick:g},{children:(0,o.jsx)(Hm,{size:48,src:c.avatarThumb},void 0)}),void 0),(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Xm,Object.assign({"data-e2e":"inbox-title",to:u,onClick:m},{children:c.uniqueId}),void 0),(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[l("Inbox_created_a_duet_with_you").replace(/%(s|#)/g,"")," ",d(1e3*Number(e.create_time))]}),void 0)]},void 0),(0,o.jsx)(Zm,{style:{backgroundImage:`url(${null===(s=null===(r=null===(a=null===(n=e.duet.aweme)||void 0===n?void 0:n.video)||void 0===a?void 0:a.cover)||void 0===r?void 0:r.url_list)||void 0===s?void 0:s[0]})`}},void 0)]}),void 0):(0,wi.G)(["user"])}));var lh=i(37039),dh=i(14584);const ch=(0,w.memo)((function({item:e}){var t,i,n;const a=(0,U.mp)(G.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"":"."},dependencies:[]}),{t:r,timeTranslator:s}=(0,Hp.e)(),l=(0,U.mp)(no.z,{selector:t=>{var i;return t.users[null!==(i=e.follow.from_user.unique_id)&&void 0!==i?i:""]},dependencies:[e.follow.from_user.unique_id]}),{handleFollow:d,isFollowing:c,text:p,relation:u}=(0,dh.w)({uniqueId:null!==(t=null==l?void 0:l.uniqueId)&&void 0!==t?t:"",followerStatus:null===(i=null==l?void 0:l.extraInfo)||void 0===i?void 0:i.followerStatus,prevent:!0,teaParams:{enter_from:"homepage_message",page_name:"homepage_message",page_type:Q.WB.commonParams.page_name,previous_page:Q.WB.commonParams.page_name}}),g=0===e.follow.follow_button_type?r("Inbox_is_following_you").replace(/%s/g,"")+a:r("Inbox_started_following_you").replace(/%s/g,"")+a,m=s(1e3*Number(e.create_time)),h=(0,hu.yl)({uniqueId:null!==(n=null==l?void 0:l.uniqueId)&&void 0!==n?n:"",secUid:null==l?void 0:l.secUid}),_=zm({href:h,shouldUsePush:!0,beforeStart:$m({uniqueId:e.follow.from_user.unique_id,enter_method:"click_noti",shouldHandleDom:!0})});return l?(0,o.jsxs)(Wm,Object.assign({"data-e2e":"inbox-list-item",onClick:_},{children:[(0,o.jsx)(Iu.q,{size:48,src:l.avatarThumb,style:{flex:"0 0 48px"},"data-method":"click_head"},void 0),(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Jm,Object.assign({"data-e2e":"inbox-title",href:h,onClick:Y.PF,"data-method":"click_name"},{children:l.uniqueId}),void 0),(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[g," ",m]}),void 0)]},void 0),(0,o.jsxs)(qm,Object.assign({"data-e2e":2===u?"":"follow-back",onClick:d,size:"tiny",buttonTheme:c?"default":"primary"},{children:[2===u?(0,o.jsx)(lh.Z,{},void 0):null,p]}),void 0)]}),void 0):(0,wi.G)(["user"])})),ph=(0,w.memo)((function({item:e,onClick:t}){var i,n,a;const r=(0,U.mp)(no.z,{selector:t=>{var i;return null===(i=e.digg.from_user)||void 0===i?void 0:i.map((({unique_id:e})=>t.users[null!=e?e:""]))},dependencies:[e.digg.from_user]}),s=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`,l=(0,w.useCallback)((i=>{i.preventDefault(),i.stopPropagation(),t(e)}),[e,t]),d=(0,ee.fz)(to._),c=(0,w.useCallback)((t=>{t.stopPropagation(),d.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid})}),[d,e.digg.aweme.author.uid,e.digg.aweme.aweme_id]);return(0,o.jsxs)(Wm,Object.assign({"data-e2e":"inbox-list-item",onClick:l},{children:[(0,o.jsx)(uh,{users:r},void 0),(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Km,Object.assign({"data-e2e":"inbox-title",onClick:Y.UW},{children:(0,o.jsx)(mh,{users:r,merge_count:e.digg.merge_count},void 0)}),void 0),(0,o.jsx)(gh,{item:e},void 0)]},void 0),(0,o.jsx)(Vm,{onClick:c,to:s,style:{backgroundImage:`url(${null===(a=null===(n=null===(i=e.digg.aweme)||void 0===i?void 0:i.video)||void 0===n?void 0:n.cover.url_list)||void 0===a?void 0:a[0]})`}},void 0)]}),void 0)})),uh=(0,w.memo)((function({users:e}){var t,i,n,a,r;const s=Boolean(null==e?void 0:e[1]),l=$m({uniqueId:null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.uniqueId,enter_method:"click_head"});if(!s){const{uniqueId:t="",secUid:a}=null!==(i=null==e?void 0:e[0])&&void 0!==i?i:{},r=(0,hu.yl)({uniqueId:t,secUid:a});return(0,o.jsx)(Gm,Object.assign({onClick:Y.UW},{children:(0,o.jsx)(Uo.rU,Object.assign({to:r,onClick:l},{children:(0,o.jsx)(Hm,{size:48,src:null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.avatarThumb},void 0)}),void 0)}),void 0)}return(0,o.jsxs)(Gm,Object.assign({"data-e2e":"inbox-avatar-multiple"},{children:[(0,o.jsx)(Hm,{size:36,multiple:!0,src:null===(a=null==e?void 0:e[1])||void 0===a?void 0:a.avatarThumb},void 0),(0,o.jsx)(Hm,{size:36,multiple:!0,src:null===(r=null==e?void 0:e[0])||void 0===r?void 0:r.avatarThumb},void 0)]}),void 0)})),gh=(0,w.memo)((function({item:e}){var t;const{t:i,timeTranslator:n}=(0,Hp.e)(),a=(0,U.mp)(G.G,{selector:e=>{const{lang:t}=e;return"ja-JP"===t||"zh-Hant-TW"===t||"zh-Hans"===t?"":"."},dependencies:[]}),r=n(1e3*Number(e.create_time),!0);if(1===e.digg.digg_type)return(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_liked_your_video").replace(/%s/g,"")+a," ",r]}),void 0);if(3===e.digg.digg_type){const{text:n,user:s}=null!==(t=e.digg.comment)&&void 0!==t?t:{};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_liked_your_comment").replace(/%s/g,"")+a," ",r]}),void 0),(0,o.jsxs)(ih,{children:[null==s?void 0:s.unique_id,": ",n]},void 0)]},void 0)}return null})),mh=function({merge_count:e,users:t}){const i=(0,Ji.Q)();return(null==t?void 0:t[1])?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(hh,{user:null==t?void 0:t[0]},void 0),","," ",(0,o.jsx)(hh,{user:null==t?void 0:t[1]},void 0),"number"==typeof e&&e>2&&(0,o.jsxs)(o.Fragment,{children:[" ",i("Inbox_and")," ",i("Inbox_others").replace(/%d/,String(e-2))]},void 0)]},void 0):(0,o.jsx)(hh,{user:null==t?void 0:t[0]},void 0)},hh=function({user:e}){const t=$m({uniqueId:null==e?void 0:e.uniqueId,enter_method:"click_name"});if(!e)return null;const{uniqueId:i,secUid:n}=e,a=(0,hu.yl)({uniqueId:i,secUid:n});return(0,o.jsx)(Uo.rU,Object.assign({to:a,onClick:t},{children:e.uniqueId}),void 0)},_h=(0,w.memo)((function({item:e}){var t,i,n,a,r,s,l;const d=(0,U.mp)(no.z,{selector:t=>{var i,o;return t.users[null!==(o=null===(i=e.at.user_info)||void 0===i?void 0:i.unique_id)&&void 0!==o?o:""]},dependencies:[e]}),c=e.at.aweme,p=`/@${null==c?void 0:c.author.uid}/video/${null==c?void 0:c.aweme_id}`,u=(0,hu.yl)({uniqueId:null!==(t=null==d?void 0:d.uniqueId)&&void 0!==t?t:"",secUid:null==d?void 0:d.secUid}),{schema_url:g}=e.at,m=(null!==(i=null==g?void 0:g.match(/cid=(\d+)/))&&void 0!==i?i:[])[1],h=(null!==(n=null==g?void 0:g.match(/detail\/(\d+)/))&&void 0!==n?n:[])[1],_=(0,w.useMemo)((()=>{if(m)return{browserMode:!0,cid:m,vid:h}}),[m,h]),v=Um({vid:null==c?void 0:c.aweme_id,authorId:null==c?void 0:c.author.uid}),y=$m({uniqueId:null==d?void 0:d.uniqueId,onClick:Y.UW,enter_method:"click_head"}),f=$m({uniqueId:null==d?void 0:d.uniqueId,onClick:Y.UW,enter_method:"click_name"}),b=zm({href:`${p}?browserMode=1`,state:_,shouldUsePush:!0,beforeStart:(0,w.useCallback)((()=>{v(),m&&_g.To.setItem("highlight_comment",{id:m,groupId:h,show:!0})}),[m,v,h])}),x=(0,ee.fz)(to._),k=(0,w.useCallback)((e=>{e.stopPropagation(),x.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:null==c?void 0:c.aweme_id,to_group_id:null==c?void 0:c.aweme_id,to_author_id:null==c?void 0:c.author.uid})}),[x,null==c?void 0:c.author.uid,null==c?void 0:c.aweme_id]);return d?(0,o.jsxs)(Wm,Object.assign({"data-e2e":"inbox-list-item",onClick:b},{children:[(0,o.jsx)(Wo.v,Object.assign({to:u,onClick:y},{children:(0,o.jsx)(Hm,{size:48,src:d.avatarThumb},void 0)}),void 0),(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Xm,Object.assign({"data-e2e":"inbox-title",to:u,onClick:f},{children:d.uniqueId}),void 0),(0,o.jsx)(vh,{item:e},void 0)]},void 0),(0,o.jsx)(Wo.v,Object.assign({to:p,onClick:k},{children:(0,o.jsx)(Zm,{style:{backgroundImage:`url(${null===(l=null===(s=null===(r=null===(a=e.at.aweme)||void 0===a?void 0:a.video)||void 0===r?void 0:r.cover)||void 0===s?void 0:s.url_list)||void 0===l?void 0:l[0]})`}},void 0)}),void 0)]}),void 0):(0,wi.G)(["user"])})),vh=({item:e})=>{var t;const{t:i,timeTranslator:n}=(0,Hp.e)(),{create_time:a,at:r}=e,{sub_type:s,content:l,reply_comment:d}=r,c=(0,o.jsxs)(o.Fragment,{children:["",n(1e3*Number(a))]},void 0);return 1===s?(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[i("Inbox_mentioned_you_in_a_video").replace(/%(s|#)/g,""),c]}),void 0):2===s?(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(th,{children:i("Inbox_mentioned_you_in_a_comment").replace("%@"," ").replace("%#","")+l},void 0),c]}),void 0):5===s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(eh,Object.assign({"data-e2e":"inbox-content"},{children:[(0,o.jsx)(th,{children:i("Inbox_replied_to_your_comment").replace("%s","")+l},void 0),c]}),void 0),(0,o.jsx)(ih,{children:null!==(t=null==d?void 0:d.text)&&void 0!==t?t:""},void 0)]},void 0):null},yh=(0,w.memo)((function({item:e,onLikeClick:t,onReportInboxClick:i}){const n=(0,w.useCallback)((e=>{t(e)}),[t]);return Xu(e)?(0,o.jsx)(ch,{item:e},void 0):eg(e)?(0,o.jsx)(ph,{item:e,onClick:n},void 0):tg(e)?(0,o.jsx)(ah,{item:e},void 0):ig(e)?(0,o.jsx)(sh,{item:e},void 0):og(e)?(0,o.jsx)(_h,{item:e},void 0):ng(e)?(0,o.jsx)(Nm,{item:e,onClick:i},void 0):null})),fh=(0,w.memo)((function({uniqueId:e}){var t;const i=(0,Ji.Q)(),n=(0,U.mp)(no.z,{selector:t=>t.users[e],dependencies:[e]}),a=(0,U.qj)(rg),r=(0,w.useCallback)((t=>i=>{i.preventDefault(),i.stopPropagation(),a.postFollowReply({approveOrReject:t,uniqueId:e,uid:null==n?void 0:n.id})}),[a,e,null==n?void 0:n.id]),s=(0,hu.yl)({uniqueId:null!==(t=null==n?void 0:n.uniqueId)&&void 0!==t?t:"",secUid:null==n?void 0:n.secUid}),l=zm({href:s,shouldUsePush:!0,beforeStart:$m({uniqueId:null==n?void 0:n.uniqueId,enter_method:"click_noti",enter_from:"follow_request_page",previous_page:"homepage_message",shouldHandleDom:!0})});return n?(0,o.jsxs)(Wm,Object.assign({"data-e2e":"inbox-list-item",onClick:l},{children:[(0,o.jsx)(Hm,{size:48,src:n.avatarThumb,"data-method":"click_head"},void 0),(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Jm,Object.assign({"data-e2e":"inbox-title",href:s,onClick:Y.PF,"data-method":"click_name"},{children:n.uniqueId}),void 0),(0,o.jsx)(eh,{children:n.nickname},void 0),(0,o.jsxs)(oh,{children:[(0,o.jsx)(nh,Object.assign({size:"tiny",onClick:r(1)},{children:i("delete")}),void 0),(0,o.jsx)(nh,Object.assign({"data-e2e":"inbox-request-accept",size:"tiny",buttonTheme:"primary",onClick:r(0)},{children:i("inbox_request_accept")}),void 0)]},void 0)]},void 0)]}),void 0):(0,wi.G)(["user"])})),bh=(0,re.Z)("div",{target:"e11z9zg00"})({flex:"1 1 auto",overflow:"auto"},"label:DivInboxContentContainer;"),xh=(0,re.Z)("p",{target:"e11z9zg01"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P3",fontWeight:"semiBold",color:"TextTertiary"})),{padding:"0 16px",marginTop:"8px"},"label:PTimeGroupTitle;"),kh=(0,re.Z)(Wo.v,{target:"e11z9zg02"})({display:"block",width:"54px",height:"72px",background:"center no-repeat",backgroundSize:"cover",borderRadius:"2px",margin:"auto"},"label:StyledAnchor;"),Sh=(0,re.Z)("p",{target:"e11z9zg03"})((({theme:e})=>(0,se.GI)({theme:e,typography:"H6",color:"TextTertiary"})),se.wj,{padding:"8px 48px 2px"},"label:PCommentText;"),wh=(0,re.Z)("div",{target:"e11z9zg04"})((({theme:{colors:e}})=>({height:"1px",background:e.LineSecondary,transform:"scaleY(0.5)",margin:"8px 16px"})),"label:DivSplit;"),Ch=(0,re.Z)("div",{target:"e11z9zg05"})({cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"8px"},(({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginStart:"16px",marginEnd:"auto"})),"label:DivBack;"),jh=(0,re.Z)(Ud.Z,{target:"e11z9zg06"})((({theme:{direction:e}})=>"ltr"===e?null:{transform:"rotate(180deg)"}),"label:StyledChevronLeftOffset;"),Th=(0,re.Z)("div",{target:"e11z9zg07"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P3"})),{padding:"8px 24px 8px 16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},"label:DivFollowReqEntranceContainer;"),Oh=(0,re.Z)("span",{target:"e11z9zg08"})({display:"flex",flexDirection:"row",alignItems:"center"},"label:SpanHintContainer;"),Ih=(0,re.Z)("i",{target:"e11z9zg09"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"8px",background:e.Primary},(0,se.YJ)({direction:t,marginEnd:"8px"})]),"label:IDot;"),Ph=(0,re.Z)("span",{target:"e11z9zg010"})((({theme:{colors:e,direction:t}})=>[{color:e.TextTertiary,marginRight:"8px"},(0,se.YJ)({direction:t,marginEnd:"8px"})]),"label:SpanHintText;"),Eh=(0,w.memo)((function(e){const t=(0,Ji.Q)();return(0,o.jsxs)(Ch,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack},{children:[(0,o.jsx)(Ud.Z,{},void 0),(0,o.jsx)("span",{children:t("Back")},void 0)]}),void 0)})),Lh=(0,w.memo)((function(e){const{item:t}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Eh,{onClickBack:e.onClickBack},void 0),(0,o.jsx)(bh,Object.assign({"data-e2e":"inbox-list"},{children:t.users.map((e=>(0,o.jsx)(fh,{uniqueId:e},e)))}),void 0)]},void 0)}));var Ah=i(45563);const Rh=(0,w.memo)((function(e){const{total:t}=e,i=(0,Ji.Q)(),{colors:n}=(0,a.u)();return(0,o.jsxs)(Th,Object.assign({"data-e2e":"inbox-follow-request",onClick:e.onClick},{children:[(0,o.jsx)("h4",{children:i("Inbox_Follow_requests")},void 0),(0,o.jsxs)(Oh,{children:[(0,o.jsx)(Ih,{},void 0),(0,o.jsx)(Ph,{children:t},void 0),(0,o.jsx)(Ah.Z,{fill:n.TextTertiary,width:12,height:12},void 0)]},void 0)]}),void 0)})),Mh=(0,w.memo)((function({uniqueId:e}){var t;const i=(0,U.mp)(no.z,{selector:t=>t.users[e],dependencies:[e]}),{handleFollow:n,isFollowing:a,text:r,relation:s}=(0,dh.w)({uniqueId:e,prevent:!0,teaParams:{enter_from:"homepage_message"}}),l=(0,hu.yl)({uniqueId:null!==(t=null==i?void 0:i.uniqueId)&&void 0!==t?t:"",secUid:null==i?void 0:i.secUid}),d=zm({href:l,shouldUsePush:!0,beforeStart:$m({uniqueId:e,enter_method:"click_noti",shouldHandleDom:!0})});return i?(0,o.jsxs)(Wm,Object.assign({"data-e2e":"inbox-list-item",onClick:d},{children:[(0,o.jsx)(Hm,{size:48,src:i.avatarThumb,"data-method":"click_head"},void 0),(0,o.jsxs)(Qm,{children:[(0,o.jsx)(Jm,Object.assign({"data-e2e":"inbox-title",href:l,onClick:Y.PF,"data-method":"click_name"},{children:i.uniqueId}),void 0),(0,o.jsx)(eh,Object.assign({"data-e2e":"inbox-content"},{children:i.nickname}),void 0)]},void 0),(0,o.jsxs)(qm,Object.assign({onClick:n,size:"tiny",buttonTheme:a?"default":"primary"},{children:[2===s?(0,o.jsx)(lh.Z,{},void 0):null,r]}),void 0)]}),void 0):(0,wi.G)(["user"])})),Dh=(0,w.memo)((function(e){var t,i,n;const{item:a}=e,r=(0,Ji.Q)(),[{loading:s,users:l},d]=(0,U.b7)(rg,{selector:e=>e.diggList,dependencies:[]});(0,w.useEffect)((()=>{var e,t;return d.fetchDiggListData({ref_id:null!==(t=null===(e=a.digg.comment)||void 0===e?void 0:e.cid)&&void 0!==t?t:a.digg.aweme.aweme_id}),()=>{d.setDiggList([]),d.setDiggListLoading(!1)}}),[d,a.digg.aweme.aweme_id,null===(t=a.digg.comment)||void 0===t?void 0:t.cid]);const c=(0,w.useCallback)((()=>s&&!l.length?(0,o.jsx)(Wt.g,{size:"small",center:!0},void 0):l.map((e=>(0,o.jsx)(Mh,{uniqueId:e},e)))),[s,l]),p=(0,Bm.ot)(`/@${a.digg.aweme.author.uid}/video/${a.digg.aweme.aweme_id}`),u=(0,w.useCallback)((()=>{location.href=p}),[p]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ch,Object.assign({"data-e2e":"inbox-second-back",onClick:e.onClickBack},{children:[(0,o.jsx)(jh,{},void 0),(0,o.jsx)("span",{children:r("Back")},void 0)]}),void 0),(0,o.jsxs)(bh,Object.assign({"data-e2e":"inbox-list"},{children:[(0,o.jsx)(kh,{to:p,style:{backgroundImage:`url(${null===(i=a.digg.aweme.video.cover.url_list)||void 0===i?void 0:i[0]})`},onClick:u},void 0),!!(null===(n=a.digg.comment)||void 0===n?void 0:n.text)&&(0,o.jsx)(Sh,{children:a.digg.comment.text},void 0),(0,o.jsx)(wh,{},void 0),c()]}),void 0)]},void 0)})),Fh={0:"Inbox_New",1:"Inbox_Today",2:"Inbox_Yesterday",3:"Inbox_This_Week",4:"Inbox_This_Month",5:"Inbox_Previous"},Nh=[0,1,6,(new Date).getDate()].map((e=>function(e=0){return(new Date).setHours(0,0,0,0)/1e3-86400*e}(e))),Bh=e=>{if(!e.has_read)return 0;const t=Nh.findIndex((t=>t<e.create_time));return-1===t?5:t+1},zh=(0,w.memo)((function(e){var t;const{activeGroup:i,item:n,likeItem:a,reportInboxList:r,onLikeItemChange:s,followItem:l,showFollow:d,onFollowChange:c,onHitBottom:p,onReportInboxClick:u}=e,g=(0,ee.fz)(Ku),m=(0,w.useCallback)((()=>{s(null)}),[s]),h=(0,w.useRef)(null);(0,jm.s)({onHitBottom:p,bottomThreshold:100});const _=(0,w.useCallback)((()=>{c(!1)}),[c]),v=(0,w.useCallback)((()=>{c(!0),g.handleEnterFollow({request_cnt:Number(l.total)})}),[l.total,c,g]);return a?(0,o.jsx)(Dh,{item:a,onClickBack:m},void 0):d?(0,o.jsx)(Lh,{onClickBack:_,item:l},void 0):(0,o.jsxs)(bh,Object.assign({"data-e2e":"inbox-list",ref:h},{children:[500===i&&Boolean(l.total)&&(0,o.jsx)(Rh,{onClick:v,total:l.total},void 0),(0,o.jsx)(Uh,{item:n,onLikeItemChange:e.onLikeItemChange,reportInboxList:r,activeGroup:i,onReportInboxClick:u},void 0),Boolean(null===(t=n.notice_list)||void 0===t?void 0:t.length)&&n.loading&&(0,o.jsx)(Wt.g,{center:!0,size:"small"},void 0)]}),void 0)})),$h={preventDefault:c()},Uh=(0,w.memo)((function({item:e,onLikeItemChange:t,activeGroup:i,reportInboxList:n,onReportInboxClick:a}){var r;const s=(0,Ji.Q)(),l=(0,ee.fz)(to._),d=(0,ee.fz)(Ku),c=n[0],p=(0,Tm.e)(),u=(0,w.useCallback)((e=>{var o,n,a;if(3===(null==e?void 0:e.digg.digg_type)||1===(null===(o=null==e?void 0:e.digg.from_user)||void 0===o?void 0:o.length)){let t,i=`/@${e.digg.aweme.author.uid}/video/${e.digg.aweme.aweme_id}`;return 3===e.digg.digg_type&&(null===(n=e.digg.comment)||void 0===n?void 0:n.cid)&&(_g.To.setItem("highlight_comment",{id:e.digg.comment.cid,groupId:e.digg.aweme.aweme_id,show:!0}),i+="?browserMode=1",t={browserMode:!0,cid:e.digg.comment.cid,vid:e.digg.aweme.aweme_id}),l.handleEnterPage("enter_video_detail",{enter_method:"click_noti",group_id:e.digg.aweme.aweme_id,to_group_id:e.digg.aweme.aweme_id,to_author_id:e.digg.aweme.author.uid}),void p($h,{href:i,state:t,shouldUsePush:!0})}t(e),d.handleEnterFold({tab_name:500===i?"all":"likes",group_id:null!==(a=null==e?void 0:e.digg.aweme.aweme_id)&&void 0!==a?a:""})}),[i,l,p,t,d]),g=(0,w.useMemo)((()=>{var t;if(500!==i||!c)return e.notice_list;const o=Bh(c),n=(null!==(t=e.notice_list)&&void 0!==t?t:[]).slice();for(let e=0;e<n.length;e++){const t=n[e],i=Bh(t);if(0===o&&0!==i)return n.splice(e,0,c),n;if(c.create_time>t.create_time)return n.splice(e,0,c),n}return n.push(c),n}),[i,c,e.notice_list]);if(e.loading&&!(null===(r=e.notice_list)||void 0===r?void 0:r.length))return(0,o.jsx)(Wt.g,{center:!0,size:"small"},void 0);if(!(null==g?void 0:g.length))return(0,o.jsx)(Fm,{type:i},void 0);let m=Bh(null==g?void 0:g[0]);return(0,o.jsx)(o.Fragment,{children:null==g?void 0:g.map(((e,t)=>{let i=null;return(0===t||0===m&&e.has_read||e.create_time<Nh[m-1])&&(m=Bh(e),i=(0,o.jsx)(xh,{children:s(Fh[m])},m)),(0,o.jsxs)(o.Fragment,{children:[i,(0,o.jsx)(yh,{item:e,onLikeClick:u,onReportInboxClick:a},e.nid)]},void 0)}))},void 0)})),Wh=(0,re.Z)("div",{target:"e1bp8k4k0"})((({theme:{direction:e}})=>[{paddingTop:"24px",flex:"0 0 auto"},(0,se.YJ)({direction:e,paddingStart:"16px"})]),"label:DivInboxHeaderContainer;"),Gh=(0,re.Z)("h4",{target:"e1bp8k4k1"})((({theme:e})=>(0,se.GI)({theme:e,fontFamily:"Sofia",fontWeight:"bold",typography:"H4",color:"TextPrimary"})),"label:H4InboxTitle;"),Hh=(0,re.Z)("div",{target:"e1bp8k4k2"})((({theme:e})=>(0,se.GI)({theme:e,fontFamily:"Proxima",fontWeight:"semiBold",typography:"P3",color:"TextPrimary"})),{marginTop:"16px",display:"flex",flexDirection:"row",flexWrap:"wrap"},"label:DivGroupContainer;"),qh=e=>({0:{background:e.BGPlaceholderOpaque,":hover":{background:e.ShadowPrimary}},1:{color:e.ConstTextInverse,background:e.TextPrimary}}),Zh=(0,re.Z)("span",{target:"e1bp8k4k3"})((({theme:{colors:e,direction:t},active:i})=>[qh(e)[Number(i)],{":not(:last-child)":[(0,se.YJ)({direction:t,marginEnd:"8px"})]}]),{display:"block",padding:"2px 8px",marginBottom:"12px",textAlign:"center",cursor:"pointer",borderRadius:"12px",transition:"all 300ms"},"label:SpanGroupItem;"),Vh={500:"Inbox_All",3:"Inbox_Likes",2:"Inbox_Comments",6:"Inbox_Mentions",7:"Followers"},Qh=[500,3,2,6,7],Yh=["all","likes","comments","mentions","followers"],Kh=(0,w.memo)((function({value:e,onChange:t}){const i=(0,Ji.Q)(),n=(0,w.useCallback)((e=>()=>{t(e)}),[t]);return(0,o.jsxs)(Wh,{children:[(0,o.jsx)(Gh,{children:i("Inbox_Notifications")},void 0),(0,o.jsx)(Hh,Object.assign({"data-e2e":"inbox-bar"},{children:Qh.map(((t,a)=>(0,o.jsx)(Zh,Object.assign({"data-e2e":Yh[a],active:t===e,onClick:n(t)},{children:i(Vh[t])}),t)))}),void 0)]},void 0)})),Jh=(0,re.Z)("div",{target:"e32s1fi0"})({height:"100%",display:"flex",flexDirection:"column"},"label:DivInboxContainer;"),Xh=(0,w.memo)((function(){const[e,t]=(0,w.useState)("main"),i=(0,w.useCallback)((()=>{t("report-inbox")}),[]),n=(0,w.useCallback)((()=>{t("main")}),[]),a=(0,U.mp)(G.G,{selector:e=>{var t,i,o,n,a;return{uid:null!==(o=null===(i=null===(t=e.appContext)||void 0===t?void 0:t.$user)||void 0===i?void 0:i.uid)&&void 0!==o?o:"",did:null!==(a=null===(n=e.appContext)||void 0===n?void 0:n.$wid)&&void 0!==a?a:""}},dependencies:[]}),[{activeGroup:r,noticeList:s,followRequest:l,reportInboxList:d},c]=(0,U.b7)(rg,{selector:e=>{const{activeGroup:t,noticeList:i,followRequest:o,reportInbox:{noticeList:n}}=e;return{activeGroup:t,noticeList:i,followRequest:o,reportInboxList:n}},dependencies:[]}),[p,u]=(0,w.useState)(null),[g,m]=(0,w.useState)(!1),h=(0,w.useCallback)((e=>{c.changeActiveGroup(e),u(null),m(!1)}),[c]);(0,w.useEffect)((()=>{g||setTimeout((()=>{c.fetchNoticeFollowRequest(Object.assign(Object.assign({},a),{refresh:!0}))}),2e3)}),[c,a,g]),(0,w.useEffect)((()=>{l.has_more||0!==l.total?l.has_more&&l.users.length<=10&&c.fetchNoticeFollowRequest(a):m(!1)}),[c,l.has_more,l.total,l.users.length,a]);const _=(0,w.useCallback)((()=>{c.fetchNoticeData()}),[c]);return"report-inbox"===e?(0,o.jsx)(Cm,{onClose:n},void 0):(0,o.jsxs)(Jh,Object.assign({"data-e2e":"inbox-notifications"},{children:[(0,o.jsx)(Kh,{value:r,onChange:h},void 0),(0,o.jsx)(zh,{activeGroup:r,item:s,onHitBottom:_,likeItem:p,onLikeItemChange:u,followItem:l,showFollow:g,onFollowChange:m,reportInboxList:d,onReportInboxClick:i},void 0)]}),void 0)}));var e_=i(52286),t_=i(73605);const i_=(0,re.Z)("div",{target:"e18kkhh40"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginStart:"16px"})),{position:"relative"},"label:DivHeaderInboxContainer;");i_.defaultProps=Object.assign(Object.assign({},i_.defaultProps),{"data-e2e":"inbox-icon"});const o_={cursor:"pointer",display:"block"},n_=(0,re.Z)(e_.Z,{target:"e18kkhh41"})(o_,"label:StyledInboxIcon;"),a_=(0,re.Z)(t_.Z,{target:"e18kkhh42"})(o_,"label:StyledInboxIconActive;"),r_=(0,re.Z)("sup",{target:"e18kkhh43"})((({long:e,theme:t})=>[(0,se.GI)({theme:t,fontFamily:"Proxima",typography:"P3",fontWeight:"semiBold",color:"ConstTextInverse"}),{background:t.colors.Primary,minWidth:"20px",height:"20px",display:"flex",justifyContent:"center",borderRadius:"10px",position:"absolute",top:"-20%",left:"16px"},e?{padding:"0 6px"}:{}]),"label:SupBadge;"),s_=(0,re.Z)("div",{target:"e18kkhh44"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P4",color:"ConstTextInverse",fontWeight:"semiBold"})),{display:"flex",padding:"12px",fontSize:"12px"},"label:DivTipWrapper;"),l_=(0,re.Z)("span",{target:"e18kkhh47"})({display:"flex",alignItems:"center",justifyContent:"center","& + &":{marginLeft:"16px"},b:{marginLeft:"2px",fontWeight:600}},"label:SpanTipItem;"),d_=(0,re.Z)(Gn.Z,{target:"e18kkhh48"})({position:"absolute",top:"-8px"},(({theme:{direction:e}})=>(0,se.YJ)({direction:e,end:"70px"})),"label:StyledArrow;"),c_=(0,re.Z)("div",{target:"e18kkhh49"})((({theme:{colors:e,direction:t},state:i,duration:o})=>[{display:i===W.Wj?"none":"block",position:"absolute",width:"376px",height:"640px",top:"45px",background:e.ConstTextInverse,borderRadius:"8px",boxShadow:`0 -4px 32px ${e.ShadowPrimary}`,transition:`all ${o}ms linear`,zIndex:1e3,opacity:Number(i===W.cn)},(0,se.YJ)({direction:t,end:"-66px"})]),"label:DivHeaderInboxWrapper;"),p_={width:16,height:16},u_={2:(0,o.jsx)(Sg.Z,Object.assign({},p_),void 0),3:(0,o.jsx)(wg.Z,Object.assign({},p_),void 0),6:(0,o.jsx)(Cg.Z,Object.assign({},p_),void 0),7:(0,o.jsx)(jg.Z,Object.assign({},p_),void 0)},g_=(0,w.memo)((function(){const e=(0,Ji.Q)(),t=(0,a.u)(),{pathname:i}=(0,j.TH)(),[{noticeList:n,reportInboxNoticeCount:r},s]=(0,U.b7)(rg,{selector:e=>({noticeList:e.noticeCount,reportInboxNoticeCount:e.reportInbox.count}),dependencies:[]}),[{tooltipPriority:l},d]=(0,U.b7)(fg),{totalText:c,totalLong:p,countList:u,isShowTotal:g}=(0,w.useMemo)((()=>{const e=n.reduce(((e,{count:t})=>e+t),0);return{isShowTotal:e>0,totalText:(0,H.a1)(e+r),totalLong:e+r>10,countList:n.filter((e=>e.count>=0))}}),[n,r]),m=function(){const[e,t]=(0,w.useState)(!1);return(0,w.useEffect)((()=>(t(!0),()=>{t(!1)})),[]),e}(),[h,_]=(0,w.useState)(!1);(0,w.useEffect)((()=>{let e;return g&&2===l&&(_(!0),e=window.setTimeout((()=>{_(!1),d.setTooltipPriority(3)}),5e3)),()=>{e&&clearTimeout(e)}}),[l,g,d]);const{handleEnter:v}=function({showTip:e}){const t=(0,w.useRef)(0),i=(0,ee.fz)(Ku),{total:o,countList:n}=(0,U.mp)(rg,{dependencies:[],selector:e=>{const t=e.noticeCount;return{total:t.reduce(((e,{count:t})=>e+t),0),countList:t.filter((e=>e.count>=0))}}});(0,w.useEffect)((()=>{t.current=Date.now()}),[]);const a=(0,w.useCallback)((()=>{const e=Date.now()-t.current;i.handleEnter({show_cnt:o,enter_within_30s:e<3e4?1:0})}),[i,o]);return(0,w.useEffect)((()=>{if(e){const e=n.reduce(((e,{group:t,count:i})=>{switch(t){case 2:e.comment_cnt=i;break;case 3:e.like_cnt=i;break;case 6:e.mention_cnt=i;break;case 7:e.follower_cnt=i}return e}),{like_cnt:0,comment_cnt:0,mention_cnt:0,follower_cnt:0});i.handlePopShow(e)}}),[n,i,e]),{handleEnter:a}}({showTip:h}),[y,f]=(0,w.useState)(!1),b=(0,w.useCallback)((e=>{e&&(e.preventDefault(),e.stopPropagation()),f(!y),s.setNoticeCount([]),s.setReportInboxNoticeCount(0),y||v()}),[s,v,y]);(0,w.useEffect)((()=>{-1!==location.search.indexOf("open_inbox=1")&&b()}),[]);const x=(0,w.useMemo)((()=>y?a_:n_),[y]),{showModal:k,hideModal:S}=(0,Sr.J)(),C=(0,w.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]);(0,w.useEffect)((()=>{s.fetchNoticeCount()}),[s]);const T=(0,w.useRef)(null),O=(0,w.useRef)(!1),I=(0,w.useCallback)((()=>{k(),O.current=!0}),[k]),P=(0,w.useCallback)((()=>{S(),O.current=!1}),[S]);(0,w.useEffect)((()=>{const e=()=>{O.current||f(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),(0,w.useEffect)((()=>{y&&f(!1)}),[i]);const E=(0,w.useRef)(!1),L=(0,U.qj)(rg);return(0,w.useEffect)((()=>{y&&!E.current&&(L.fetchNoticeData(),E.current=!0)}),[L,y]),(0,w.useEffect)((()=>{L.fetchReportInbox()}),[L]),(0,o.jsxs)(i_,Object.assign({onClick:b},{children:[y?(0,o.jsx)(x,{width:32,height:32},void 0):(0,o.jsx)(Gu.u,Object.assign({placement:"bottom",overlay:e("Inbox")},{children:(0,o.jsx)("span",{children:(0,o.jsx)(x,{width:32,height:32},void 0)},void 0)}),void 0),(g||r>0)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(sn.G,Object.assign({active:h,placement:u.length>2?"bottomRight":"bottom",margin:"-54px",arrowMargin:"52px",backgroundColor:t.colors.Primary},{children:(0,o.jsx)(s_,{children:u.map((({group:e,count:t})=>(0,o.jsxs)(l_,{children:[u_[e],(0,o.jsx)("b",{children:(0,H.BT)(t)},void 0)]},e)))},void 0)}),void 0),!h&&(0,o.jsx)(r_,Object.assign({long:p},{children:c}),void 0)]},void 0),m&&(0,o.jsx)(W.ZP,Object.assign({timeout:200,in:y,nodeRef:T},{children:e=>(0,o.jsxs)(c_,Object.assign({ref:T,state:e,duration:200,onClick:C,onMouseEnter:I,onMouseLeave:P},{children:[(0,o.jsx)(d_,{width:24,height:8,fill:t.colors.ConstTextInverse},void 0),(0,o.jsx)(Xh,{},void 0)]}),void 0)}),void 0)]}),void 0)})),m_=({children:e})=>{var t;const[i,n]=(0,w.useState)(!1),r=(0,ee.fz)(ji),{direction:s}=(0,a.u)(),l=(0,w.useMemo)((()=>({offset:"ltr"===s?[30,20]:[-30,20]})),[s]),d=(0,w.useMemo)((()=>"ltr"===s?"bottomRight":"bottomLeft"),[s]),c=(0,oe.L)((()=>["$region","$liveCenterConfig"]),[]),p=null!==(t=null==c?void 0:c.$region)&&void 0!==t?t:"",u=(0,w.useMemo)((()=>{var e,t;return(null!==(t=null===(e=null==c?void 0:c.$liveCenterConfig)||void 0===e?void 0:e.showCreatorHubRegion)&&void 0!==t?t:[]).includes(p)}),[c,p]),g=(0,w.useMemo)((()=>({width:180,padding:12,fontSize:14})),[]),m=(0,Ji.Q)();(0,w.useEffect)((()=>{if(u){const e=r.getLiveCreatorHubPopup();n(e)}}),[u,r]);const h=(0,w.useCallback)((e=>{e||(n(!1),r.setLiveCreatorHubPopup(!0))}),[r]);return(0,o.jsx)(Gu.u,Object.assign({visible:i,trigger:"click",tooltipTheme:"blue",placement:d,align:l,overlay:m("live_creator_hub_home_desc",{},"Explore the endless possibilities of TikTok LIVE. It's the place to be for real-time fun, expression, creativity, and connection."),overlayInnerStyle:g,onVisibleChange:h},{children:e}),void 0)};var h_=i(40567);const __=(0,re.Z)("div",{target:"e5vohn00"})({padding:"16px",width:"264px",wordBreak:"break-word"},"label:DivTipWrapper;"),v_=(0,re.Z)("h3",{target:"e5vohn01"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),y_=(0,re.Z)("p",{target:"e5vohn02"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),f_=(0,re.Z)("div",{target:"e5vohn03"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),b_=(0,re.Z)(Uo.rU,{target:"e5vohn04"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),(({theme:e})=>(0,se.YJ)({direction:e.direction,marginStart:"16px"})),{color:"#ffffff!important",cursor:"pointer","&:hover":{textDecoration:"none"}},"label:StyledLink;"),x_=(0,re.Z)("button",{target:"e5vohn05"})(se.Ph,(({theme:e})=>(0,se.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonCancel;"),k_=(0,w.memo)((({uniqueId:e,secUid:t,userPopupActive:i})=>{const{colors:n,direction:r}=(0,a.u)(),s=(0,Ji.Q)(),l=(0,ee.fz)(h_.p),{pathname:d}=(0,j.TH)(),c=(0,Le.Xq)(d),p="fyp"===c?"homepage_hot_tooltip":c+"_tooltip",[u,g]=(0,w.useState)(!1),{tooltipPriority:m}=(0,U.mp)(fg),h=(0,Le.bf)(d)&&d.replace("/@","")===e,_=(0,w.useRef)(!1);(0,w.useEffect)((()=>{let e;return u&&(e=window.setTimeout((()=>{_.current=!0,l.handleCloseProfileTooltip({enter_from:p,close_method:"auto_cancel"}),g(!1)}),5e3)),()=>clearTimeout(e)}),[u]),(0,w.useEffect)((()=>()=>{u&&!_.current&&l.handleCloseProfileTooltip({enter_from:p,close_method:"other"})}),[u]),(0,w.useEffect)((()=>{(0,Y.le)(J.S0)||h||3!==m?g(!1):(g(!0),l.handleShowProfileTooltip({enter_from:p}),(0,Y.D$)(J.S0,"1"))}),[m]),(0,w.useEffect)((()=>{i&&u&&(_.current=!0,l.handleCloseProfileTooltip({enter_from:p,close_method:"other"}),g(!1))}),[i,p,u]);const v=(0,w.useCallback)((()=>{l.handleCloseProfileTooltip({enter_from:p,close_method:"edit_profile"}),l.handleClickEditProfile({enter_from:p}),(0,Y.D9)(J.OB,p),_.current=!0,g(!1)}),[p,l]),y=(0,w.useCallback)((()=>{_.current=!0,g(!1),l.handleCloseProfileTooltip({enter_from:p,close_method:"cancel"})}),[p,l]),f=(0,Bm.ot)({pathname:(0,hu.yl)({uniqueId:e,secUid:t}),search:{}}),b=(0,w.useMemo)((()=>({pathname:f})),[f]),x="ltr"===r?"bottomRight":"bottomLeft";return(0,o.jsx)(sn.G,Object.assign({active:u,backgroundColor:n.ConstSecondary2,placement:x,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsxs)(__,{children:[(0,o.jsx)(v_,{children:s("editprofile_feedtooltip_title")},void 0),(0,o.jsx)(y_,{children:s("editprofile_feedtooltip_subtitle")},void 0),(0,o.jsxs)(f_,{children:[(0,o.jsx)(x_,Object.assign({onClick:y},{children:s("editprofile_close")}),void 0),(0,o.jsx)(b_,Object.assign({to:b,onClick:v},{children:s("editprofile_editprofile")}),void 0)]},void 0)]},void 0)}),void 0)}));var S_=i(89788);let w_=class{constructor(){this.handleRechargeShow=e=>{Q.WB.event("livesdk_recharge_show",e)},this.handleRechargeClick=e=>{Q.WB.event("livesdk_recharge_click",e)},this.handleCashierShow=e=>{Q.WB.event("livesdk_web_cashier_show",e)},this.handlePayAction=e=>{Q.WB.event("livesdk_recharge_pay",e)},this.handleRechargeSuccess=e=>{Q.WB.event("livesdk_recharge_success",e)},this.handleRechargeFailed=e=>{Q.WB.event("livesdk_recharge_failed",e)},this.handleBillingAddressClick=e=>{Q.WB.event("livesdk_billing_address_click",e)},this.handleLiveWebGetCoinShow=e=>{Q.WB.event("livesdk_web_getcoin_show",e)},this.handleLiveWebGetCoinClick=e=>{Q.WB.event("livesdk_web_getcoin_click",e)},this.handleRechargeFeedbackShow=e=>{Q.WB.event("livesdk_web_pay_feedback_show",e)},this.handleRechargeFeedbackClick=e=>{Q.WB.event("livesdk_web_pay_feedback_click",e)},this.handleRechargeCashierSelectPaymentMethod=e=>{Q.WB.event("livesdk_web_pay_method_click",e)},this.handleRechargeCashierEWalletShow=e=>{Q.WB.event("livesdk_link_ewallet_show",e)},this.handleRechargeCashierEWalletClick=e=>{Q.WB.event("livesdk_link_ewallet_click",e)},this.handleRechargeCashierEWalletSuccess=e=>{Q.WB.event("livesdk_link_ewallet_success",e)},this.handleRechargeCashierEWalletFailed=e=>{Q.WB.event("livesdk_link_ewallet_failed",e)},this.handleExchangeEntranceShow=e=>{Q.WB.event("livesdk_recharge_exchange_entrance_show",e)},this.handleExchangeEntranceClick=e=>{Q.WB.event("livesdk_recharge_exchange_entrance_click",e)},this.handleExchangeClick=e=>{Q.WB.event("livesdk_recharge_exchange_click",e)},this.handleExchangePopupShow=e=>{Q.WB.event("livesdk_recharge_exchange_popup_show",e)},this.handleExchangeConfirm=e=>{Q.WB.event("livesdk_recharge_exchange_confirm",e)},this.handleExchangeCancel=e=>{Q.WB.event("livesdk_recharge_exchange_cancel",e)},this.handleExchangeSuccess=e=>{Q.WB.event("livesdk_recharge_exchange_success",e)},this.handleExchangeFailed=e=>{Q.WB.event("livesdk_recharge_exchange_failed",e)},this.handleRechargeLogoutClick=e=>{Q.WB.event("livesdk_logout_click",e)},this.handleBillingAddressShow=e=>{Q.WB.event("livesdk_billing_address_show",e)},this.handleBillingAddressConfirm=e=>{Q.WB.event("livesdk_billing_address_confirm",e)},this.handleBillingAddressCancel=e=>{Q.WB.event("livesdk_billing_address_cancel",e)},this.handleBillingAddressFailed=e=>{Q.WB.event("livesdk_billing_address_failed",e)}}};w_=(0,g.__decorate)([(0,ne.G)()],w_);const C_=e=>{const{count:t,realDot:i,keepDot:o,currentPrice:n}=e,a=t*n;if(0===a)return{showAmount:"0.00",localAmount:"0",total:0};let r=i-o,s=a,l=!1;for(;r>0;)s%10>0&&(l=!0),r--,s=Math.trunc(s/10);const d=(l?Number(s)+1:Number(s)).toString().split(""),c=i-o,p=d.splice(-c),u=p.length>0?`.${p.join("").padStart(o,"0")}`:".00",g=`${d.join("")||0}${u}`,m=g.toString().split("."),h=(m[1]||"").padEnd(o,"0").split("").slice(0,o).join("");return{showAmount:g,localAmount:`${m[0]}${h}`,total:a}},j_=e=>{const{keepDot:t,currentPrice:i}=e,o=i,n=o.toString().split(""),a=n.splice(-t),r=a.length>0?`.${a.join("").padStart(t,"0")}`:".00";return{showAmount:`${n.join("")||0}${r}`,localAmount:o.toString(),total:o}},T_=Object.values(pi.w_).map((e=>{var t;return null===(t=e.match(/\/coin\/([^/@:]+)\/?.*/))||void 0===t?void 0:t[1]})).filter((e=>!!e));let O_=class{constructor(e){this.service=e,this.defaultTag={where:"Recharge"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handlePayFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_pipo_pay_error",this.defaultMetrics,this.defaultTag)},this.handleGetPermissionFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_permission_error",this.defaultMetrics,this.defaultTag)},this.handleGetCoinsFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_coins_error",this.defaultMetrics,{error:e.message})},this.handlePlaceOrderFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_place_order_error",this.defaultMetrics,this.defaultTag)},this.handleApplePayEvent=e=>{this.service.sendLog("live_sdk_recharge_applepay","info",{extra:e}),this.service.emitEvent("live_sdk_recharge_applepay",this.defaultMetrics,{extra:e})},this.handleVenmoEvent=e=>{this.service.emitEvent("live_sdk_recharge_venmo",this.defaultMetrics,{extra:e})}}};O_=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[vi.n])],O_);let I_=class{constructor(e){this.service=e,this.defaultTag={where:"Exchange"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handlePackagesFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_packages_error",this.defaultMetrics,this.defaultTag)},this.handleBasePackageFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_get_basepackage_error",this.defaultMetrics,this.defaultTag)},this.handlePlaceOrderFail=e=>{this.reportError(e),this.service.emitEvent("live_sdk_place_exchange_order_error",this.defaultMetrics,this.defaultTag)}}};I_=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[vi.n])],I_);var P_=i(79014),E_=i.n(P_);Fg().extend(E_());const L_=(e,t,i)=>{var o,n,a;let r=0;const s=(null==e?void 0:e.currency_price)&&null!==(o=null==e?void 0:e.currency_price[0].price)&&void 0!==o?o:0,l=(null==e?void 0:e.currency_price)&&null!==(n=null==e?void 0:e.currency_price[0].price_dot)&&void 0!==n?n:0,d=(null==e?void 0:e.currency_price)&&null!==(a=e.currency_price[0].keep_dot)&&void 0!==a?a:0;if(t){const e=i*s;if(0===e)return 0;let t=l-d,o=e,n=!1;if(d>=l)for(let e=l;e<d;e++)o*=10;for(;t>0;)o%10>0&&(n=!0),t--,o=Math.trunc(o/10);const a=n?Number(o)+1:Number(o);if(0===d)return a;const r=a.toString().split(""),c=r.splice(-d);for(;d>c.length;)c.unshift("0");const p=c.length>0?`.${c.join("")}`:"",u=r.join("");return Number(`${u}${p}`)}{if(r=s,d>=l)for(let e=l;e<d;e++)r*=10;const e=r.toString().split("");let t=[];if(e.length<d)for(let t=e.length;t<d;t++)e.unshift("0");t=0===d&&0!==l?e.splice(d-l):0===d&&0===l?e.splice(e.length):e.splice(-d);const i=t.length>0?`.${t.join("")}`:"",o=e.join("");return Number(`${o}${i}`)}};var A_=i(67526);let R_=class{constructor(e){this.fetch=e}getPermission(e){return this.fetch.get("/webcast/wallet_api/diamond_buy/permission/",{query:e,baseUrlType:4})}getCoinsConfig(){return this.fetch.get("/webcast/diamond/",{baseUrlType:4})}getNonce(){return this.fetch.get("/webcast/wallet_api/diamond_buy/nonce",{baseUrlType:4})}placeOrder(e){return this.fetch.get("/webcast/wallet_api/diamond_buy_external/",{query:e,baseUrlType:4})}getTransactionHistory(e){return this.fetch.get("/webcast/wallet_api/query_web_order/",{query:e,baseUrlType:4})}getVoiceAddressApi(e){return this.fetch.get("/webcast/wallet_api/invoice/download/",{query:e,baseUrlType:4})}getNoticeContent(){return this.fetch.get("/webcast/wallet_api_tiktok/notifycenter/notices/latest",{query:{view_name:"webapp_recharge"},baseUrlType:4})}getExchangeCustomPackage(e){return this.fetch.post("/webcast/recharge/base_package/",{query:e,baseUrlType:4})}getExchangePackages(e){return this.fetch.post("/webcast/recharge/packages/",{query:e,baseUrlType:4})}exchangeEarningsToCoins(e){return this.fetch.post("/webcast/wallet_api/diamond_exchange/",{query:e,baseUrlType:4})}verifyZipCode(e){return this.fetch.get("/webcast/wallet_api/verify_zip_code/",{query:e,baseUrlType:4})}saveBillingAddress(e){return this.fetch.post("/webcast/wallet_api/save_billing_address_info/",{query:e,body:(0,A_.stringify)(e),baseUrlType:4})}};R_=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],R_);let M_=class extends de.D{constructor(e,t,i,o,n){super(),this.service=e,this.appContext=t,this.report=i,this.rechargeSlardar=o,this.exchangeSlardar=n,this.defaultState={userState:{loadingState:0,hasRechargePermission:!1,showEntry:!1,coins:0,exchangePermission:{currency:"",enable:!1,has_short_video_gift:!1,price_dot:0,region:"",revenue:0,unit_price:0}},orderInfo:{loadingState:0},coins:{loadingState:0,coinsData:[]},exchangePackages:{loadingState:0,packagesData:{}},exchangeCustomPackage:{loadingState:0,customPackageData:{}},exchangeState:{loadingState:0,packageList:[],selectedPackageIndex:-1,selectedComboId:0,currency:"",coinAmount:0,currencyDot:0,localAmount:0,showAmountLocal:"0.00",showAmountUSD:"0.00"},nonce:{loadingState:0,nonce:"",expiredAt:Date.now()},customerCoinId:0,customCoinMaxNum:0,customCoinMinNum:0,priceUnit:"",apUnitPrice:{},gpUnitPrice:{},merchantId:"",paymentMethod:"",paymentState:{selectedComboId:0,coinAmount:0,priceDot:0,keepDot:0,totalPrice:0,coinPrice:0,price:0,currency:""},transactionHistory:{loadingState:0,total:0,pageNumber:1,pageSize:8,pageData:[],totalData:[],isWebRechargedBefore:void 0},noticeConfig:{content:"",disable_recharge_button:!1},inAppState:{hideHeader:!1,hidePadding:!1,rechargeFrom:"others"},reportState:{},mobileInputVisible:!1,cashierModalLoaded:!1,paymentResultModalLoaded:!1,billingAddress:{postalCode:"",validating:!1,validated:!1,isValid:!1}}}setUserPermission(e,t){e.userState=Object.assign(Object.assign({},e.userState),t)}setNotice(e,t){e.noticeConfig=Object.assign(Object.assign({},e.noticeConfig),t)}setCoinsConfig(e,t){e.coins=Object.assign(Object.assign({},e.coins),t)}setPaymentState(e,t){e.paymentState=Object.assign(Object.assign({},e.paymentState),t)}setPaymentMethod(e,t){e.paymentMethod=t}setExchangePackages(e,t){e.exchangePackages=Object.assign(Object.assign({},e.exchangePackages),t)}setExchangeCustomPackage(e,t){e.exchangeCustomPackage=Object.assign(Object.assign({},e.exchangeCustomPackage),t)}setExchangeState(e,t){e.exchangeState=Object.assign(Object.assign({},e.exchangeState),t)}setCustomCoin(e,t){const{customerCoinId:i,customCoinMaxNum:o,customCoinMinNum:n,priceUnit:a,apUnitPrice:r,gpUnitPrice:s,merchantId:l}=t;e.customerCoinId=i,e.customCoinMaxNum=o,e.customCoinMinNum=n,e.priceUnit=a,e.apUnitPrice=r,e.gpUnitPrice=s,e.merchantId=l}updateOrder(e,t){e.orderInfo=Object.assign(Object.assign({},e.orderInfo),t)}updateNonce(e,t){t.nonce?e.nonce=Object.assign(Object.assign(Object.assign({},e.nonce),t),{loadingState:2,expiredAt:Date.now()+24e4}):e.nonce=Object.assign(Object.assign({},e.nonce),t)}setTransactionHistory(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),t)}setTransactionSize(e,t){e.transactionHistory=Object.assign(Object.assign({},e.transactionHistory),{pageSize:t.pageSize,pageNumber:t.pageNumber})}setInAppState(e,t){e.inAppState=Object.assign(Object.assign({},e.inAppState),t)}setRefHash(e,t){t&&!T_.includes(t)&&(e.refhash=t)}setEnterFrom(e,t){e.reportState.enterFrom=t}setMobileInputVisible(e,t){e.mobileInputVisible=t}setCashierModalLoaded(e,t){e.cashierModalLoaded=t}setPaymentResultModalLoaded(e,t){e.paymentResultModalLoaded=t}setBillingAddress(e,t){e.billingAddress=Object.assign(Object.assign({},e.billingAddress),t)}setDefaultSelectedMethod(e,t){e.defaultSelectedMethod=Object.assign(Object.assign({},e.defaultSelectedMethod),t)}initPayment(e){return e.pipe((0,gi.z)((()=>(0,mi.of)(this.getActions().updateOrder({orderData:void 0,loadingState:0}),this.getActions().setPaymentState({selectedComboId:0,coinAmount:0,priceDot:0,totalPrice:0,price:0,currency:""})))))}updateCoinsAmount(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>{var i,o,n;const{coinComboId:a}=e,{coins:r,customerCoinId:s}=t,{coinsData:l}=r,d=null==l?void 0:l.find((e=>e.id===a));let c=null!==(i=null==d?void 0:d.diamond_count)&&void 0!==i?i:0,p=0;a===s?(c=e.coinAmount,d&&(p=L_(d,!0,c))):d&&(p=L_(d,!1,c));const u=null===(o=r.coinsData)||void 0===o?void 0:o.find((e=>e.id===a)),g=(null!==(n=null==u?void 0:u.currency_price)&&void 0!==n?n:[])[0],{currency:m,price:h,price_dot:_,keep_dot:v}=g;return(0,mi.of)(this.getActions().setPaymentState({selectedComboId:a,coinAmount:c,totalPrice:p,currency:m,price:h,priceDot:_,keepDot:v}))})))}fetchPermission(e){return e.pipe((0,ge.M)(this.appContext.state$),(0,gi.z)((([e,t])=>{const{appContext:i}=t,{$user:o,$region:n}=i;return this.service.getPermission({user_id:null==o?void 0:o.uid,local_country:n,live_id:12}).pipe((0,gi.z)((e=>{var t,i;return(null==e?void 0:e.data)?(0,mi.of)(this.getActions().setUserPermission({hasRechargePermission:e.data.is_allow,showEntry:e.data.is_show,coins:(null===(t=e.data)||void 0===t?void 0:t.coins)||0,exchangePermission:null===(i=e.data)||void 0===i?void 0:i.exchange,loadingState:2}),this.getActions().fetchCustomExchangePackage(),this.getActions().fetchExchangePackages()):(0,mi.of)(this.getActions().setUserPermission({loadingState:3}))})),(0,ei.O)(this.getActions().setUserPermission({loadingState:1})),(0,hi.K)((e=>(this.rechargeSlardar.handleGetPermissionFail(e),(0,mi.of)(this.getActions().setUserPermission({loadingState:3}))))))})))}fetchNotice(e){return e.pipe((0,gi.z)((()=>this.service.getNoticeContent().pipe((0,gi.z)((e=>(null==e?void 0:e.data)?(0,mi.of)(this.getActions().setNotice(null==e?void 0:e.data)):(0,mi.of)(this.getActions().setNotice({})))),(0,hi.K)((()=>(0,mi.of)(this.getActions().setNotice({}))))))))}placeOrder(e){return e.pipe((0,ge.M)(this.appContext.state$,this.state$),(0,he.z)((([e,t,i])=>{var o,n;const{type:a="default"}=e,{paymentState:r,customerCoinId:s,refhash:l}=i,d=null===(o=t.appContext)||void 0===o?void 0:o.$region,c=null===(n=t.appContext)||void 0===n?void 0:n.$geo;if(!d)return(0,mi.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));let p={};if("AE"===d&&(p.sub_region=null==c?void 0:c[0]),"default"===a){const{selectedComboId:t,currency:i,coinAmount:o,totalPrice:n,keepDot:a,price:c}=r;let u=c.toString();if(t===s){const e=n.toString().split("."),t=(e[1]||"").padEnd(a,"0").split("").slice(0,a).join("");u=`${e[0]}${t}`}p=Object.assign(Object.assign({},p),{diamond_id:t,currency:i,source:e.source,coins_count:o,local_amount:u,region:d,refhash:l})}else if("From3ds"===a){const{diamond_id:t,coins_count:i,local_amount:o,currency:n}=e;if(!(t&&i&&o&&n))return(0,mi.of)(this.getActions().updateOrder({loadingState:3,prompts:""}));p=Object.assign(Object.assign({},p),{diamond_id:t,currency:n,source:e.source,coins_count:i,local_amount:o,region:d,refhash:l})}return this.service.placeOrder(p).pipe((0,gi.z)((e=>{var t,i,o;return 0===e.status_code&&e.data?e.data.nonce?[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().updateNonce({nonce:e.data.nonce})]:[this.getActions().updateOrder({orderData:e.data,loadingState:2}),this.getActions().getNonce()]:(0,mi.of)(this.getActions().updateOrder({loadingState:3,statusCode:null!==(t=null==e?void 0:e.status_code)&&void 0!==t?t:"",prompts:null!==(o=null===(i=e.data)||void 0===i?void 0:i.prompts)&&void 0!==o?o:""}))})),(0,ei.O)(this.getActions().updateOrder({loadingState:1})),(0,hi.K)((e=>(this.rechargeSlardar.handlePlaceOrderFail(e),(0,mi.of)(this.getActions().updateOrder({loadingState:3,prompts:""}))))))})))}fetchExchangePackages(e){return e.pipe((0,ge.M)(this.state$),(0,he.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,mi.of)(this.noop());const{region:i}=t.userState.exchangePermission;return this.service.getExchangePackages({currency:"USD",package_region:i,type:101}).pipe((0,gi.z)((e=>(null==e?void 0:e.data)?(0,mi.of)(this.getActions().setExchangePackages({loadingState:2,packagesData:e.data})):(0,mi.of)(this.getActions().setExchangePackages({loadingState:3})))),(0,ei.O)(this.getActions().setExchangePackages({loadingState:1})),(0,hi.K)((e=>(this.exchangeSlardar.handlePackagesFail(e),(0,mi.of)(this.getActions().setExchangePackages({loadingState:3}))))))})))}fetchCustomExchangePackage(e){return e.pipe((0,ge.M)(this.state$),(0,he.z)((([e,t])=>{if(!t.userState.exchangePermission)return(0,mi.of)(this.noop());const{region:i,revenue:o}=t.userState.exchangePermission;return this.service.getExchangeCustomPackage({currency:"USD",package_region:i,balance:o,type:101,real_dot:2}).pipe((0,gi.z)((e=>(null==e?void 0:e.data)?(0,mi.of)(this.getActions().setExchangeCustomPackage({loadingState:2,customPackageData:e.data})):(0,mi.of)(this.getActions().setExchangeCustomPackage({loadingState:3})))),(0,ei.O)(this.getActions().setExchangeCustomPackage({loadingState:1})),(0,hi.K)((e=>(this.exchangeSlardar.handleBasePackageFail(e),(0,mi.of)(this.getActions().setExchangeCustomPackage({loadingState:3}))))))})))}setExchangePackageList(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>(0,mi.of)(this.getActions().setExchangeState({packageList:e})))))}updateExchangeAmount(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>{var i;const{selectedPackageIndex:o,coinAmount:n}=e,a=t.exchangeState.packageList,r=a[o],{coins:s,price:l,realDot:d,keepDot:c,localRealDot:p,localKeepDot:u,localPrice:g}=r,m=t.exchangePackages.packagesData,h=o===a.length-1,_=o===a.length-2,v=h?n:s,y=!!m.local_currency_info,f=null===(i=null==m?void 0:m.currency_info)||void 0===i?void 0:i.code,{total:b,showAmount:x,localShowAmount:k}=(e=>{const{count:t,realDot:i,keepDot:o,isCustom:n=!1,currentPrice:a,useLocal:r=!1,localRealDot:s=0,localKeepDot:l=0,localCurrentPrice:d=0}=e,c=n?C_:j_,{showAmount:p,localAmount:u,total:g}=c({count:t,realDot:i,keepDot:o,currentPrice:a}),m={showAmount:p,localAmount:u,total:g};if(r){const{showAmount:e,localAmount:i,total:o}=c({count:t,realDot:s,keepDot:l,currentPrice:d});m.localShowAmount=e||"",m.localTotal=o||0,m.localAmountString=i||""}return m})({isCustom:_||h,count:_?Number(r.coins):v,realDot:d,keepDot:c,currentPrice:l,useLocal:y,localRealDot:p,localKeepDot:u,localCurrentPrice:g});return(0,mi.of)(this.getActions().setExchangeState({selectedComboId:r.id,selectedPackageIndex:o,currency:f,currencyDot:d,localAmount:b,coinAmount:Number(v),showAmountUSD:x,showAmountLocal:k}))})))}placeExchangeOrder(e){return e.pipe((0,ge.M)(this.state$),(0,he.z)((([e,t])=>{const{isMobile:i,reportParams:o}=e,{exchangeState:n}=t,{selectedComboId:a,currency:r,coinAmount:s,currencyDot:l,localAmount:d}=n;return this.service.exchangeEarningsToCoins({diamond_id:a,way:1,source:i?3:2,currency:r,currency_dot:l,coins_count:s,local_amount:d}).pipe((0,gi.z)((e=>{var i,n;return e.data&&1===e.data.status?(this.report.handleExchangeSuccess(Object.assign({},o)),(0,mi.of)(this.getActions().setExchangeState({loadingState:2,statusCode:e.data.status}),this.getActions().fetchPermission(),this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:t.transactionHistory.pageSize}))):(this.report.handleExchangeFailed(Object.assign(Object.assign({},o),{error_code:null===(i=e.data)||void 0===i?void 0:i.status})),(0,mi.of)(this.getActions().setExchangeState({loadingState:3,statusCode:null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.status})))})),(0,ei.O)(this.getActions().setExchangeState({loadingState:1})),(0,hi.K)((e=>(this.exchangeSlardar.handlePlaceOrderFail(e),(0,mi.of)(this.getActions().setExchangeState({loadingState:3,prompts:""}))))))})))}initExchangeOrderStatus(e){return e.pipe((0,gi.z)((()=>(0,mi.of)(this.getActions().setExchangeState({loadingState:0,coinAmount:0,selectedComboId:0}),this.getActions().setPaymentState({selectedComboId:0,coinAmount:0,totalPrice:0})))))}fetchCoinsConfig(e){return e.pipe((0,ge.M)(this.state$),(0,he.z)((([e,t])=>this.service.getCoinsConfig().pipe((0,gi.z)((i=>{var o,n,a,r,s,l,d,c,p,u,g,m,h,_,v,y,f,b,x,k,S,w;return 0===i.status_code&&i.data&&i.extra?(0,mi.of)(this.getActions().setCoinsConfig({loadingState:2,coinsData:i.data}),this.getActions().setCustomCoin({customerCoinId:(null===(o=null==i?void 0:i.extra)||void 0===o?void 0:o.customized_ids)?null===(n=null==i?void 0:i.extra)||void 0===n?void 0:n.customized_ids[0]:0,customCoinMaxNum:null!==(r=null===(a=null==i?void 0:i.extra)||void 0===a?void 0:a.max_customized_diamond_cnt)&&void 0!==r?r:0,customCoinMinNum:null!==(s=null==i?void 0:i.extra.min_customized_diamond_cnt)&&void 0!==s?s:0,priceUnit:(null===(l=null==i?void 0:i.data[0])||void 0===l?void 0:l.currency_price)&&null!==(p=null===(c=null===(d=null==i?void 0:i.data[0])||void 0===d?void 0:d.currency_price[0])||void 0===c?void 0:c.price_show_form)&&void 0!==p?p:"",apUnitPrice:null!==(g=null===(u=null==i?void 0:i.extra)||void 0===u?void 0:u.ap_unit_price)&&void 0!==g?g:{},gpUnitPrice:null!==(h=null===(m=null==i?void 0:i.extra)||void 0===m?void 0:m.gp_unit_price)&&void 0!==h?h:{},merchantId:null!==(v=null===(_=null==i?void 0:i.extra)||void 0===_?void 0:_.merchant_id)&&void 0!==v?v:""})):(this.report.handleRechargeFailed({error_code:null!==(y=String(null==i?void 0:i.status_code))&&void 0!==y?y:"unknown",error_from:"get_coins",message:null!==(b=null===(f=null==i?void 0:i.data)||void 0===f?void 0:f.prompts)&&void 0!==b?b:"some error in get_coins",charge_from:null!==(x=t.refhash)&&void 0!==x?x:"",request_page:e.isMobile?"mobile_h5":"webapp",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",recharge_type:"feature_available",order_id:null!==(S=null===(k=t.orderInfo.orderData)||void 0===k?void 0:k.order_id)&&void 0!==S?S:"",event_module:(null==t?void 0:t.customerCoinId)===(null===(w=null==t?void 0:t.paymentState)||void 0===w?void 0:w.selectedComboId)?"customized":"normal",recharge_from:t.inAppState.rechargeFrom,pay_method:t.paymentMethod}),(0,mi.of)(this.getActions().setCoinsConfig({loadingState:3})))})),(0,ei.O)(this.getActions().setCoinsConfig({loadingState:1})),(0,hi.K)((e=>(this.rechargeSlardar.handleGetCoinsFail(e),(0,mi.of)(this.getActions().setCoinsConfig({loadingState:3})))))))))}getTransactionHistoryList(e){return e.pipe((0,ge.M)(this.appContext.state$),(0,he.z)((([e,t])=>{const{pageSize:i,pageNumber:o}=e,{appContext:n}=t,a=null==n?void 0:n.$user;if(!a)return(0,mi.of)(this.noop());const r=a.uid;return this.service.getTransactionHistory({page:o,count:i,user_id:r}).pipe((0,gi.z)((e=>(0,mi.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,total:e.data.total_count,pageNumber:o,pageSize:i,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,ei.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,hi.K)((()=>(0,mi.of)(this.getActions().setTransactionHistory({loadingState:3})))))})))}loadTransactionHistory(e){return e.pipe((0,ge.M)(this.appContext.state$,this.state$),(0,Xt.w)((([e,t,i])=>{const{pageSize:o,pageNumber:n,totalData:a}=i.transactionHistory,{appContext:r}=t,s=null==r?void 0:r.$user;if(!s)return(0,mi.of)(this.noop());const l=s.uid;return this.service.getTransactionHistory({page:n,count:o,user_id:l}).pipe((0,gi.z)((e=>(0,mi.of)(this.getActions().setTransactionHistory({pageData:e.data.list_recharge_order,totalData:[...a,...e.data.list_recharge_order],total:e.data.total_count,pageNumber:n+1,pageSize:o,loadingState:2,isWebRechargedBefore:0!==e.data.total_count})))),(0,ei.O)(this.getActions().setTransactionHistory({loadingState:1})),(0,hi.K)((()=>(0,mi.of)(this.getActions().setTransactionHistory({loadingState:3})))))})))}getNonce(e){return e.pipe((0,gi.z)((()=>this.service.getNonce().pipe((0,gi.z)((e=>0===e.status_code?(0,mi.of)(this.getActions().updateNonce({nonce:e.data.nonce,loadingState:2})):(0,mi.of)(this.getActions().updateNonce({loadingState:3})))),(0,ei.O)(this.getActions().updateNonce({loadingState:1}))))))}init(e){return e.pipe((0,gi.z)((e=>[this.getActions().fetchPermission(),this.getActions().fetchCoinsConfig({isMobile:e.isMobile}),this.getActions().getTransactionHistoryList({pageNumber:1,pageSize:e.pageSize}),this.getActions().fetchNotice()])),(0,hi.K)((()=>(0,mi.of)(this.noop()))))}updateInAppState(e){return e.pipe((0,gi.z)((e=>[this.getActions().setInAppState(e)])),(0,hi.K)((()=>(0,mi.of)(this.noop()))))}verifyPostalCode(e){return e.pipe((0,ge.M)(this.state$),(0,Xt.w)((([e,t])=>this.service.verifyZipCode({region:"us",zip_code:t.billingAddress.postalCode}).pipe((0,gi.z)((e=>{var t;return(0,mi.of)(this.getActions().setBillingAddress({isValid:null===(t=e.data)||void 0===t?void 0:t.is_valid,validating:!1,validated:!0}))})),(0,hi.K)((()=>(0,mi.of)(this.getActions().setBillingAddress({validating:!1})))),(0,ei.O)(this.getActions().setBillingAddress({validating:!0}))))))}saveBillingAddress(e){return e.pipe((0,ge.M)(this.state$),(0,gi.z)((([e,t])=>this.service.saveBillingAddress({region:"us",zip_code:t.billingAddress.postalCode}).pipe((0,gi.z)((i=>{var o,n,a;return(null===(o=i.data)||void 0===o?void 0:o.is_saved)?(0,mi.of)(this.getActions().placeOrder({source:2})):(this.report.handleBillingAddressFailed({enter_from:null!==(n=t.reportState.enterFrom)&&void 0!==n?n:"",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:e.isMobile?"mobile_h5":"webapp",event_module:t.paymentState.selectedComboId===t.customerCoinId?"customized":"normal",recharge_package:t.paymentState.coinAmount,charge_from:null!==(a=t.refhash)&&void 0!==a?a:""}),(0,mi.of)(this.getActions().updateOrder({loadingState:3})))})),(0,hi.K)((()=>{var i,o;return this.report.handleBillingAddressFailed({enter_from:null!==(i=t.reportState.enterFrom)&&void 0!==i?i:"",is_web_recharged_before:t.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:e.isMobile?"mobile_h5":"webapp",event_module:t.paymentState.selectedComboId===t.customerCoinId?"customized":"normal",recharge_package:t.paymentState.coinAmount,charge_from:null!==(o=t.refhash)&&void 0!==o?o:""}),(0,mi.of)(this.getActions().updateOrder({loadingState:3}))}))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setUserPermission",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setNotice",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setCoinsConfig",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setPaymentState",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setPaymentMethod",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setExchangePackages",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setExchangeCustomPackage",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setExchangeState",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setCustomCoin",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"updateOrder",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"updateNonce",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setTransactionHistory",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setTransactionSize",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setInAppState",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setRefHash",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,String]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setEnterFrom",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setMobileInputVisible",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setCashierModalLoaded",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setPaymentResultModalLoaded",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setBillingAddress",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Object]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setDefaultSelectedMethod",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"initPayment",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"updateCoinsAmount",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"fetchPermission",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"fetchNotice",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"placeOrder",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"fetchExchangePackages",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"fetchCustomExchangePackage",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"setExchangePackageList",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"updateExchangeAmount",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"placeExchangeOrder",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"initExchangeOrderStatus",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"fetchCoinsConfig",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"getTransactionHistoryList",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"loadTransactionHistory",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"getNonce",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"init",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"updateInAppState",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"verifyPostalCode",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],M_.prototype,"saveBillingAddress",null),M_=(0,g.__decorate)([(0,pe.Y)("Recharge"),(0,g.__metadata)("design:paramtypes",[R_,G.G,w_,O_,I_])],M_);const D_=(0,re.Z)("div",{target:"equhrky0"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginStart:"16px"})),{cursor:"pointer",height:"32px",position:"relative",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},"label:DivRechargeContainer;");D_.defaultProps=Object.assign(Object.assign({},D_.defaultProps),{"data-e2e":"recharge-icon"});const F_=(0,re.Z)("span",{target:"equhrky1"})({width:"24px",height:"24px",display:"block"},"label:SpanLogoContainer;"),N_=(0,re.Z)("span",{target:"equhrky2"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginEnd:"8px"})),{width:"20px",height:"20px",display:"block"},"label:SpanLogoContainerInner;"),B_=(0,re.Z)("div",{target:"equhrky3"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginStart:"16px"})),{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",cursor:"pointer",height:"36px",position:"relative",padding:"7px 16px",borderRadius:"2px",border:"1px solid rgba(22, 24, 35, 0.12)",boxSizing:"border-box"},"label:DivRechargeContainerWithText;");B_.defaultProps=Object.assign(Object.assign({},B_.defaultProps),{"data-e2e":"recharge-icon"});const z_=(0,re.Z)("h2",{target:"equhrky4"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e})),{fontFamily:"Proxima Nova",height:"24px",position:"relative",fontStyle:"normal",whiteSpace:"nowrap",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#161823"},"label:H2RechargeTextContainer;"),$_="HAS_ENTERED_KEY",U_="HAS_ENTERED_VALUE",W_=()=>(0,o.jsx)(N_,{children:(0,o.jsx)(S_.Z,{width:20,height:20},void 0)},void 0),G_=()=>{const e=(0,Ji.Q)();return(0,o.jsx)(Gu.u,Object.assign({placement:"bottom",overlay:e("WebApp_coin_recharge_1")},{children:(0,o.jsx)(F_,{children:(0,o.jsx)(S_.Z,{width:22.5,height:22.5},void 0)},void 0)}),void 0)},H_=()=>{const e=(0,Ji.Q)(),t=(0,j.k6)(),i=(0,ee.fz)(w_),n=(0,U.mp)(M_),a=n.userState.showEntry,r=(0,w.useCallback)((()=>{i.handleLiveWebGetCoinShow({show_page:"live_page",is_web_recharged_before:n.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[n.transactionHistory.isWebRechargedBefore,i]);(0,w.useEffect)((()=>{r()}),[r]);const s=(0,w.useCallback)((()=>{i.handleLiveWebGetCoinClick({show_page:"live_page",is_web_recharged_before:n.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[n.transactionHistory.isWebRechargedBefore,i]),l=(0,w.useCallback)((()=>{t.push(`${pi.$J.coin}?enter_from=web_live_nav`)}),[t]),d=(0,w.useCallback)((()=>{s(),l()}),[s,l]);return a?(0,o.jsxs)(B_,Object.assign({onClick:d},{children:[(0,o.jsx)(W_,{},void 0),(0,o.jsx)(z_,{children:e("WebApp_coin_recharge_1")},void 0)]}),void 0):null},q_=()=>{const[e,t]=(0,w.useState)(!0),[i,n]=(0,w.useState)(!1),a=(0,j.k6)(),r=(0,Ji.Q)(),s=(0,ee.fz)(w_),l=(0,oe.L)((()=>["$abTestVersion"]),[]),d=(0,U.mp)(M_),c=d.userState.showEntry,p=(0,X.x)(null==l?void 0:l.$abTestVersion,"expose_recharge_entry_pc"),u=void 0===p||"v1"===p,g=void 0!==p&&"v2"===p,m=g&&e;(0,w.useEffect)((()=>{e&&g&&(0,Y.le)($_)===U_&&t(!1),n(!0)}),[e,g]);const h=(0,w.useCallback)((e=>{const t={show_page:"main_page",is_web_recharged_before:d.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:m?"icon_and_text":"icon_only"};0===e?s.handleLiveWebGetCoinShow(t):1===e&&s.handleLiveWebGetCoinClick(t)}),[s,d.transactionHistory.isWebRechargedBefore,m]),_=(0,w.useCallback)((()=>{h(0)}),[h]);(0,w.useEffect)((()=>{i&&c&&!u&&_()}),[i,e,c,u,_]);const v=(0,w.useCallback)((()=>{(0,Y.D$)($_,U_)}),[]),y=(0,w.useCallback)((()=>{a.push(`${pi.$J.coin}?enter_from=web_main_nav`)}),[a]),f=(0,w.useCallback)((()=>{h(1)}),[h]),b=(0,w.useCallback)((()=>{g&&e&&v(),f(),y()}),[g,e,v,y,f]);return!c||u?null:m?(0,o.jsxs)(B_,Object.assign({onClick:b},{children:[(0,o.jsx)(W_,{},void 0),(0,o.jsx)(z_,{children:r("WebApp_coin_recharge_1")},void 0)]}),void 0):(0,o.jsx)(D_,Object.assign({onClick:b},{children:(0,o.jsx)(G_,{},void 0)}),void 0)},Z_=({alwaysShowRechargeIconAndText:e})=>e?(0,o.jsx)(H_,{},void 0):(0,o.jsx)(q_,{},void 0);var V_=i(83023),Q_=i(57690),Y_=i(88266),K_=i(89771),J_=i(64288),X_=i(78214),ev=i(46989),tv=i(4962),iv=i(29585);let ov=class{constructor(){this.handleEnterFeedback=e=>{Q.WB.event("feedback",{feedback_type:e})}}};ov=(0,g.__decorate)([(0,ne.G)()],ov);var nv=i(77593);let av=class{handleEntryShow(e){Q.WB.event("livesdk_subscription_entrance_show",e)}handleClickSubOnlyChat(e){Q.WB.event("livesdk_sub_only_chat_button_click",e)}handleClickEmoteAdd(e){Q.WB.event("livesdk_go_to_add_emote_click",e)}handleClickEmoteSubmit(e){Q.WB.event("livesdk_submit_emote",e)}handleShowEmoteConfirmDialog(e){Q.WB.event("livesdk_submit_emote_confirm_show",e)}handleClickEmoteConfirmDialog(e){Q.WB.event("livesdk_submit_emote_confirm_click",e)}handleShowComplete(e){Q.WB.event("livesdk_subscribe_under_review",e)}handleShowEmote(e){Q.WB.event("livesdk_emote_edit_show",e)}handleClickSettingEmote(e){Q.WB.event("livesdk_emote_edit_click",e)}handleShowSettingBadge(e){Q.WB.event("livesdk_badge_edit_show",e)}handleClickSettingBadge(e){Q.WB.event("livesdk_badge_edit_click",e)}handleClickEmoteSubmitFromUpdate(e){Q.WB.event("livesdk_change_emote",e)}handleServieTermShow(e){Q.WB.event("livesdk_subscription_service_term_show",e)}handleServiceTermClick(e){Q.WB.event("livesdk_subscription_service_term_click",e)}handleBadgeConfigmButtonShow(e){Q.WB.event("livesdk_badge_confirm_button_show",e)}handleGoToAddEmoteClick(e){Q.WB.event("livesdk_go_to_add_emote_click",e)}handleBadgeEditShow(e){Q.WB.event("livesdk_badge_edit_show",e)}handleChangeBadge(e){Q.WB.event("livesdk_change_badge",e)}};av=(0,g.__decorate)([(0,ne.G)()],av);let rv=class{constructor(e){this.service=e,this.defaultTag={where:"Subscription"},this.defaultMetrics={count:1},this.reportError=e=>{this.service.sendLog(null==e?void 0:e.message,"error")},this.handleUploadEmoteError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_upload_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetEmoteDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_emote_error",this.defaultMetrics,this.defaultTag)},this.handleGetBadgeDetailError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_badge_detail_error",this.defaultMetrics,this.defaultTag)},this.handleUpdateBadgeError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_update_badge_error",this.defaultMetrics,this.defaultTag)},this.handlePermissionError=e=>{this.reportError(e),this.service.emitEvent("live_sdk_subscription_get_permission_error",this.defaultMetrics,this.defaultTag)}}};rv=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[vi.n])],rv);let sv=class{constructor(e){this.fetch=e,this.getSubPermissionInfo=e=>this.fetch.get("/webcast/sub/privilege/get_sub_info",{query:e,baseUrlType:4}),this.getDetails=e=>this.fetch.get("/webcast/sub/privilege/get_sub_privilege_detail",{query:{sec_anchor_id:e,for_anchor:!0},baseUrlType:4}),this.getBadgeDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_badge_detail",{query:e,baseUrlType:4}),this.getSubscriberList=e=>this.fetch.get("/webcast/sub/anchor/subscriber/",{query:e,baseUrlType:4}),this.updateBadge=e=>this.fetch.post("/webcast/sub/privilege/update_badge",{body:JSON.stringify(e),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.getEmoteDetail=e=>this.fetch.get("/webcast/sub/privilege/get_sub_emote_detail/",{query:e,baseUrlType:4}),this.updateEmote=e=>this.fetch.post("/webcast/sub/privilege/update_emote",{body:JSON.stringify(Object.assign({},e)),headers:{"Content-Type":"application/json"},baseUrlType:4}),this.uploadImage=e=>{const t=new FormData;return t.append("data",e),this.fetch.post("/webcast/resource/upload/",{query:{scene:"tikcast_subscription"},body:t,omitContentType:!0,baseUrlType:4})}}};sv=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[ve.r])],sv);let lv=class extends de.D{constructor(e,t){super(),this.service=e,this.slardar=t,this.defaultState={loading:0,showInitModal:!1,showUpdateModal:!1,enableSubscription:!1,initializedSubscription:!1,emoteStatus:0,badgeStatus:0,hasFetchedPermission:!1,initStep:0,hasEditEmote:!1,hasEditBadge:!1}}setEnableSubscription(e,t){e.enableSubscription=t}setInitializedSubscription(e,t){e.initializedSubscription=t}setBadgeStatus(e,t){e.badgeStatus=t}setEmoteStatus(e,t){e.emoteStatus=t}setLoading(e,t){e.loading=t}setShowInitModal(e,t){e.showInitModal=t}setShowUpdateModal(e,t){e.showUpdateModal=t}setInitStep(e,t){e.initStep=t}setHasFetchedPermission(e,t){e.hasFetchedPermission=t}setHasEditEmote(e,t){e.hasEditEmote=t}setHasEditBadge(e,t){e.hasEditBadge=t}getSubPermissionInfo(e){return e.pipe((0,ge.M)(this.state$),(0,he.z)((([e,{hasFetchedPermission:t}])=>t?(0,mi.of)(this.noop()):this.service.getSubPermissionInfo(e).pipe((0,gi.z)((({status_code:e,data:t})=>{var i,o;if(0!==e||!t)return(0,mi.of)(this.noop());const{enable:n,initialized:a,badge_info:r,emote_info:s}=t;return(0,mi.of)(this.getActions().setEnableSubscription(null!=n&&n),this.getActions().setInitializedSubscription(null!=a&&a),this.getActions().setBadgeStatus(null!==(i=null==r?void 0:r.current_status)&&void 0!==i?i:0),this.getActions().setEmoteStatus(null!==(o=null==s?void 0:s.current_status)&&void 0!==o?o:0),this.getActions().setHasFetchedPermission(!0))})),(0,ei.O)(this.getActions().setLoading(1)),(0,Si.l)(this.getActions().setLoading(2)),(0,hi.K)((e=>(this.slardar.handlePermissionError(e),(0,mi.of)(this.noop()))))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setEnableSubscription",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setInitializedSubscription",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setBadgeStatus",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setEmoteStatus",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setLoading",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setShowInitModal",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setShowUpdateModal",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Number]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setInitStep",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setHasFetchedPermission",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setHasEditEmote",null),(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"setHasEditBadge",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],lv.prototype,"getSubPermissionInfo",null),lv=(0,g.__decorate)([(0,pe.Y)("SubscriptionCommonModule"),(0,g.__metadata)("design:paramtypes",[sv,rv])],lv);const dv=(0,re.Z)("div",{target:"e1xkydcv0"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P3",fontFamily:"Proxima"})),{minWidth:"223px"},"label:DivContainer;"),cv=(0,re.Z)("div",{target:"e1xkydcv1"})({display:"flex",alignItems:"center",position:"relative",height:"50px"},"label:DivHeader;"),pv=(0,re.Z)(Ud.Z,{target:"e1xkydcv2"})((({theme:{direction:e}})=>[(0,se.YJ)({direction:e,marginStart:"28px"}),"ltr"===e?null:{transform:"rotate(180deg)"}]),{width:"20px",height:"20px"},"label:StyledBackIcon;"),uv=(0,re.Z)("p",{target:"e1xkydcv3"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",fontWeight:"semiBold"})),{position:"absolute",left:"50%",transform:"translateX(-50%)"},"label:PTitle;"),gv=(0,re.Z)("ul",{target:"e1xkydcv4"})({listStyle:"none",margin:0,padding:0,maxHeight:"590px",overflowY:"auto"},"label:UlListWrapper;"),mv=(0,re.Z)("li",{target:"e1xkydcv5"})((({theme:e,theme:{colors:t},active:i})=>[{padding:"10px 24px",background:i?t.BGPlaceholderDefault:"transparent",":hover":{background:t.BGPlaceholderDefault}},(0,se.GI)({theme:e,fontFamily:"Sofia"})]),"label:LiListItem;"),hv=function(e){var t,i;const n=(0,Ji.Q)(),{$language:a}=null!==(t=(0,oe.L)((()=>["$language"]),[]))&&void 0!==t?t:{},r=null!==(i=Ee.LANGUAGE_LIST.reduce(((e,t)=>(t.value===a?e.unshift(t):e.push(t),e)),[]))&&void 0!==i?i:[],{pathname:s,search:l}=(0,j.TH)(),d=function(){const e=(0,ee.fz)(to._);return(0,w.useCallback)((({lang:t,url:i,currentLang:o,isMobile:n})=>{n?e.handleMobileLanguageChange(t,null!=o?o:""):e.handleLanguageChange(t),ss().remove(Ee.LANGUAGE_COOKIE_NAME,{domain:"www.tiktok.com"}),ss().set(Ee.LANGUAGE_COOKIE_NAME,t,{secure:!0,expires:300,domain:".tiktok.com"}),window.location.replace(i)}),[e])}(),c=(0,w.useCallback)((e=>()=>{let t;t=(0,Le.Hg)(s)?`/${e}`:(0,S.stringifyUrl)({url:s,query:Object.assign(Object.assign({},(0,S.parse)(l)),{lang:e})}),d({lang:e,url:t})}),[s,d,l]),{showModal:p,hideModal:u}=(0,Sr.J)();return(0,w.useEffect)((()=>(p(),()=>{u()})),[u,p]),(0,o.jsxs)(dv,{children:[(0,o.jsxs)(cv,{children:[(0,o.jsx)("i",Object.assign({onClick:e.onBack},{children:(0,o.jsx)(pv,{},void 0)}),void 0),(0,o.jsx)(uv,{children:n("Language")},void 0)]},void 0),(0,o.jsx)(gv,{children:r.map((({value:e,label:t})=>(0,o.jsx)(mv,Object.assign({active:a===e,onClick:c(e)},{children:t}),e)))},void 0)]},void 0)};var _v=i(75089),vv=i(14400),yv=i(78629);const fv=(0,re.Z)("ul",{target:"exws2ct0"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"Proxima"})),{padding:"8px 0",margin:0,minWidth:"223px",listStyle:"none"},"label:UlPopupContainer;"),bv=(0,re.Z)("li",{target:"exws2ct1"})((({theme:{colors:e},withBorder:t})=>[{padding:"10px 16px",":hover":{background:e.BGView}},t?{borderTop:`1px solid ${e.LineSecondary}`}:null]),"label:LiItemWrapper;"),xv={display:"flex",whiteSpace:"nowrap",flexDirection:"row",alignItems:"center",":hover":{textDecoration:"none"}},kv=(0,re.Z)(Wo.v,{target:"exws2ct2"})(xv,"label:StyledLinkItem;"),Sv=(0,re.Z)(so.D,{target:"exws2ct3"})(xv,"label:StyledUserLink;"),wv=(0,re.Z)("div",{target:"exws2ct4"})(xv,"label:DivSettingItem;"),Cv=(0,re.Z)("i",{target:"exws2ct5"})((({theme:{colors:e,direction:t}})=>[{width:"8px",height:"8px",borderRadius:"50%",background:e.Primary},(0,se.YJ)({direction:t,marginStart:"8px"})]),"label:INewIcon;");Cv.defaultProps=Object.assign(Object.assign({},Cv.defaultProps),{"data-e2e":"red-dot"});const jv=function({Icon:e,text:t,href:i,renderLink:n,withBorder:r,hasNew:s,forceSSR:l=!1,e2eTag:d,onClick:c}){const p=(0,Ji.Q)(),{direction:u}=(0,a.u)(),g=function(e){const t=(0,se.YJ)({direction:e,marginEnd:"8px"});return(0,yv.iv)([t,{width:"20px",height:"20px",flex:"0 0 20px"}])}(u),m=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e,{className:g},void 0),(0,o.jsx)("span",{children:p(t)},void 0),s&&(0,o.jsx)(Cv,{},void 0)]},void 0);return(0,o.jsx)(bv,Object.assign({withBorder:r,"data-e2e":d,onClick:c},{children:n?n(m):i?(0,o.jsx)(kv,Object.assign({forceSSR:l,to:null!=i?i:"#"},{children:m}),void 0):(0,o.jsx)(wv,{children:m},void 0)}),void 0)},Tv=(0,w.memo)((function({active:e,margin:t=-17,e2eTag:i}){var n,r,s,l,d,c,p,u,g,m;const{direction:h}=(0,a.u)(),{pathname:_,search:v}=(0,j.TH)(),y=(0,ee.fz)(to._),f=(0,ee.fz)(Ti),b=(0,U.qj)(Qi),x=function(){const e=(0,j.k6)(),t=(0,w.useCallback)((t=>{Pi(t)?e.push(t):window.location.href=`https://www.tiktok.com${t}`}),[e]);return(0,w.useMemo)((()=>({push:t,goBack:e.goBack})),[t,e])}(),k=ui(),C=(0,ee.fz)(w_),T=(0,oe.L)((()=>["$user","$language","$abTestVersion","$region","$searchVideoForLoggedin","$studioDownloadEntrance","$liveStudioEnable","$liveCenterConfig"]),[]),O=(0,w.useMemo)((()=>{var e,t;return(null!==(t=null===(e=Ee.LANGUAGE_LIST.find((({value:e})=>e===(null==T?void 0:T.$language))))||void 0===e?void 0:e.label)&&void 0!==t?t:"Language").replace(/[(].+?$/,"")}),[null==T?void 0:T.$language]),I=null==T?void 0:T.$user,P=null!==(n=null==T?void 0:T.$region)&&void 0!==n?n:"",E=null!==(r=null==T?void 0:T.$liveStudioEnable)&&void 0!==r&&r,L=null!==(l=null===(s=null==T?void 0:T.$studioDownloadEntrance)||void 0===s?void 0:s.all)&&void 0!==l&&l,A=(0,w.useMemo)((()=>{var e,t;return null!==(t=null===(e=null==T?void 0:T.$studioDownloadEntrance)||void 0===e?void 0:e.regions)&&void 0!==t?t:[]}),[null===(d=null==T?void 0:T.$studioDownloadEntrance)||void 0===d?void 0:d.regions]),R=(0,w.useMemo)((()=>_===pi.$J.studioDownload),[_]),M=(0,w.useMemo)((()=>L||A.includes(P)&&E),[L,A,P,E]),{roomCreateInfo:D}=(0,U.mp)(Qi),F=!!(null===(c=null==T?void 0:T.$liveCenterConfig)||void 0===c?void 0:c.entrance)&&0===(null==D?void 0:D.never_go_live_flag),N=(null!==(u=null===(p=null==T?void 0:T.$liveCenterConfig)||void 0===p?void 0:p.showCreatorHubRegion)&&void 0!==u?u:[]).includes(P),B=(0,w.useMemo)((()=>Pi(_)),[_]),[z,W]=(0,U.b7)(fg,{selector:e=>{var t;return null!==(t=e.redDot)&&void 0!==t?t:[]},dependencies:[]});(0,w.useEffect)((()=>{var e;(null===(e=null==T?void 0:T.$user)||void 0===e?void 0:e.uid)&&!k&&b.getCreateRoomInfo({})}),[b,null===(g=null==T?void 0:T.$user)||void 0===g?void 0:g.uid,k]),(0,w.useEffect)((()=>{var e;F&&f.handleLiveCenterShow({anchor_id:null===(e=null==T?void 0:T.$user)||void 0===e?void 0:e.uid})}),[F,f,null===(m=null==T?void 0:T.$user)||void 0===m?void 0:m.uid]);const[G,H]=(0,w.useState)(!1),{keyboardMenuItem:q}=(({setShowKeyboardShortcut:e})=>{const{enhanceVideoConsumptionVersion:t="v1"}=(0,vv.m)(),i=(0,ee.fz)(to._),n=(0,w.useCallback)((()=>{e(!0),i.handleEnterPage("enter_keyboard_setting",{}),_g.u8.setItem("hasCloseKeyboardShortcut",!0)}),[i,e]);return{keyboardMenuItem:"v3"===t?(0,o.jsx)(jv,{Icon:_v.Z,text:"desktop_kb_shortcuts_menu",href:null,onClick:n,e2eTag:"keyboard-shortcut-entrance"},void 0):null}})({setShowKeyboardShortcut:H}),Z=(0,ee.fz)(ov),V=(0,U.mp)(oi,{selector:e=>e.hasNewFeedbackReply,dependencies:[]}),Q=(0,w.useCallback)((()=>{Z.handleEnterFeedback(V?"history":"new")}),[Z,V]),Y=V?"/feedback/report":"/feedback",K=(0,w.useCallback)((()=>{y.handleEnterPage("enter_setting_page",{enter_method:"top_bar"})}),[y]),J=(0,w.useCallback)((()=>{H(!1),_g.u8.setItem("hasCloseKeyboardShortcut",!0)}),[]),[te,ie]=(0,w.useState)(0);(0,w.useEffect)((()=>{e||ie(0)}),[e]);const ne=(0,w.useCallback)((()=>{y.handleLanguageClick(),ie(1)}),[y]),ae=(0,w.useCallback)((()=>{ie(0)}),[]),re="ltr"===h?"bottomRight":"bottomLeft",se=(0,w.useCallback)((e=>I?(0,o.jsx)(Sv,Object.assign({secUid:I.secUid,uniqueId:I.uniqueId,shouldStopPropagation:!1,reportTea:!1,teaParams:{to_user_id:I.uid}},{children:e}),void 0):null),[I]),le=(0,w.useCallback)((()=>{y.handleEnterPage("enter_personal_homepage",{})}),[y]),de=(0,w.useCallback)((()=>{y.handleEnterPage("click_insight",{})}),[y]),ce=(0,w.useCallback)((()=>{window.location.href=`${pi.$J.studioDownload}?enter_from=profile`}),[]),pe=(0,w.useCallback)((()=>{-1!==z.indexOf(2)&&W.updateRedDot({type:2,redirect:`${location.origin}/business-suite`}),y.handleEnterPage("enter_business_suite",{})}),[y,z,W]),[ue,ge]=(0,U.b7)(M_);(0,w.useEffect)((()=>{(null==T?void 0:T.$user)&&ge.fetchPermission()}),[T,ge]);const me=ue.userState.showEntry,he=(0,X.x)(null==T?void 0:T.$abTestVersion,"expose_recharge_entry_pc"),_e=me&&!B&&(void 0===he||"v1"===he),ve=(0,ee.fz)(av),[ye,fe]=(0,U.b7)(lv);(0,w.useEffect)((()=>{var e;(null==T?void 0:T.$user)&&fe.getSubPermissionInfo({sec_anchor_id:null===(e=null==T?void 0:T.$user)||void 0===e?void 0:e.secUid,need_current_state:!0})}),[fe,T]),(0,w.useEffect)((()=>{var t,i;e&&ye.enableSubscription&&ve.handleEntryShow({anchor_id:null!==(i=null===(t=null==T?void 0:T.$user)||void 0===t?void 0:t.uid)&&void 0!==i?i:"",click_position:"profile"})}),[T,ve,e,ye]);const be=ye.enableSubscription,xe=(null==T?void 0:T.$searchVideoForLoggedin)&&[$.zp.searchHome(),$.zp.searchVideo()].includes(_),ke=(0,S.stringify)(br()((0,S.parse)(v),"q","t")),Se=ke?`?${ke}`:"",we=`https://www.tiktok.com${$.zp.foryou()}${Se}`,Ce=`/logout?redirect_url=${encodeURIComponent(xe?we:"undefined"==typeof window?"":(0,Te.AY)())}`,je=(0,w.useCallback)((()=>{C.handleLiveWebGetCoinShow({show_page:"setting",is_web_recharged_before:ue.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[C,ue.transactionHistory.isWebRechargedBefore]);(0,w.useEffect)((()=>{_e&&je()}),[_e,je]);const Oe=(0,w.useCallback)((()=>{C.handleLiveWebGetCoinClick({show_page:"setting",is_web_recharged_before:ue.transactionHistory.isWebRechargedBefore?"yes":"no",request_page:"webapp",style:"icon_and_text"})}),[C,ue.transactionHistory.isWebRechargedBefore]),Ie=(0,w.useCallback)((()=>{Oe(),x.push(`${pi.jT.coin()}?enter_from=web_main_nav`)}),[Oe,x]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(sn.G,Object.assign({placement:re,active:e,arrowMargin:15,margin:t},{children:(()=>{var e,t;switch(te){case 0:return(0,o.jsxs)(fv,Object.assign({"data-e2e":i},{children:[I&&(0,o.jsx)(jv,{renderLink:se,onClick:le,Icon:Nr.Z,text:"View profile",href:null,e2eTag:"profile-info"},void 0),_e&&(0,o.jsx)(jv,{Icon:S_.Z,text:"WebApp_coin_recharge_1",href:"/coin?enter_from=web_main_nav",forceSSR:!0,e2eTag:"recharge-entrance",onClick:Ie},void 0),Boolean((null==I?void 0:I.analyticsOn)&&!(null===(e=I.proAccountInfo)||void 0===e?void 0:e.businessSuiteEntrance))&&(0,o.jsx)(jv,{Icon:V_.Z,text:"view_analytics",forceSSR:!0,href:"/analytics",e2eTag:"analytics-entrance",onClick:de},void 0),!R&&I&&!I.ftcUser&&M&&(0,o.jsx)(jv,{Icon:Q_.Z,text:"ls_live_studio",forceSSR:!0,href:null,e2eTag:"live-studio-entrance",onClick:ce},void 0),(null===(t=null==I?void 0:I.proAccountInfo)||void 0===t?void 0:t.businessSuiteEntrance)&&(0,o.jsx)(jv,{Icon:Y_.Z,text:"web_business_suite_entry",href:-1!==z.indexOf(2)?"":"/business-suite",forceSSR:!0,hasNew:-1!==z.indexOf(2),onClick:pe,e2eTag:"business-entrance"},void 0),F&&(0,o.jsx)(jv,{Icon:K_.Z,text:"live_center_title",href:`https://livecenter.tiktok.com?enter_from=profile_hover&lang=${null==T?void 0:T.$language}`,forceSSR:!0,e2eTag:"live-center"},void 0),N&&(0,o.jsx)(jv,{Icon:J_.Z,text:"live_creator_hub_name",href:`https://wwww.tiktok.com/live/creators?enter_from=profile_hover&lang=${null==T?void 0:T.$language}&region=${null==T?void 0:T.$region}`,forceSSR:!0,e2eTag:"live-creator-hub"},void 0),I&&(0,o.jsx)(jv,{Icon:X_.Z,text:"settings",href:"/setting",onClick:K,forceSSR:!0,e2eTag:"settings-entrance"},void 0),be&&(0,o.jsx)(jv,{Icon:ev.Z,text:"Sub_entry",href:"/live/subscription"},void 0),(0,o.jsx)(jv,{Icon:tv.Z,text:O,href:null,onClick:ne,e2eTag:"language-select"},void 0),(0,o.jsx)(jv,{Icon:$d.Z,text:"Feedback and help",href:Y,onClick:Q,hasNew:V,forceSSR:!0,e2eTag:"feedback-entrance"},void 0),q,I&&(0,o.jsx)(jv,{withBorder:!0,Icon:iv.Z,text:"Log out",forceSSR:!0,href:Ce,e2eTag:"logout-entrance"},void 0)]}),void 0);case 1:return(0,o.jsx)(hv,{onBack:ae},void 0);default:return null}})()}),void 0),(0,o.jsx)(ht.u,Object.assign({visible:G,onClose:J,maskCloseable:!1},{children:(0,o.jsx)(nv.e,{onClose:J,isModal:!0},void 0)}),void 0)]},void 0)}));var Ov=i(54588);const Iv=(0,re.Z)("div",{target:"e13wiwn60"})({display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},"label:DivHeaderRightContainer;"),Pv=(0,re.Z)("button",{target:"e13wiwn61"})(se.Ph,(({theme:e})=>[(0,se.GI)({theme:e,typography:"P2",fontFamily:"Sofia",fontWeight:"semiBold",color:"Primary"}),(0,se.YJ)({direction:e.direction,marginStart:"6px",marginEnd:"-24px"})]),{minWidth:"88px",padding:"6px 8px",userSelect:"none",cursor:"pointer"},"label:ButtonSignUp;"),Ev=(0,re.Z)(_t.W,{target:"e13wiwn62"})((({theme:e,theme:{direction:t}})=>[(0,se.GI)({theme:e,typography:"P2",fontFamily:"Proxima",fontWeight:"bold"}),(0,se.YJ)({direction:t,marginStart:"16px"}),{minWidth:"100px"}]),"label:StyledLoginButton;");Ev.defaultProps=Object.assign(Object.assign({},Ev.defaultProps),{"data-e2e":"top-login-button"});const Lv=(0,re.Z)("i",{target:"e13wiwn63"})((({theme:{direction:e}})=>(0,se.YJ)({direction:e,marginStart:"16px"})),{position:"relative",cursor:"pointer",fontStyle:"normal",padding:"0 4px"},"label:IMoreIconWrapper;");Lv.defaultProps=Object.assign(Object.assign({},Lv.defaultProps),{"data-e2e":"see-more-icon"});const Av=(0,re.Z)(Ov.Z,{target:"e13wiwn64"})({width:"20px",height:"20px",display:"block"},"label:StyledEllipsisVertical;"),Rv=(0,re.Z)("i",{target:"e13wiwn65"})((({theme:e})=>[(0,se.YJ)({direction:e.direction,right:"unset",left:0}),{position:"absolute",width:"8px",height:"8px",borderRadius:"50%",background:e.colors.Primary,border:`1px solid ${e.colors.ConstTextInverse}`,boxSizing:"content-box",right:0,top:"-4px"}]),"label:IStyledRedDot;");Rv.defaultProps=Object.assign(Object.assign({},Rv.defaultProps),{"data-e2e":"profile-icon-red"});let Mv=class{handleEnter(e){Q.WB.event("click_upload_entrance",e)}};Mv=(0,g.__decorate)([(0,ne.G)()],Mv);var Dv=i(64772);const Fv=(0,re.Z)("div",{target:"e18d3d940"})((({needMarginLeft:e})=>({marginLeft:e?"16px":"0px",position:"relative",height:"36px","a:hover":[{textDecoration:"none"}],"@media screen and (max-width: 479px)":{display:"none"}})),"label:DivUploadContainer;");Fv.defaultProps=Object.assign(Object.assign({},Fv.defaultProps),{"data-e2e":"upload-icon"});const Nv=(0,re.Z)(Wo.v,{target:"e18d3d941"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"Proxima"})),{display:"block",":hover":{textDecoration:"none"}},"label:StyledLinkText;");Nv.defaultProps=Object.assign(Object.assign({},Nv.defaultProps),{"data-e2e":"upload-icon"});const Bv=(0,re.Z)("div",{target:"e18d3d942"})({padding:"16px",width:"282px",wordBreak:"break-word"},"label:DivTipWrapper;"),zv=(0,re.Z)("div",{target:"e18d3d943"})({minWidth:"110px",padding:"0 16px",height:"36px",border:"1px solid rgba(22, 24, 35, 0.12)",borderRadius:"2px",display:"flex",alignItems:"center",justifyContent:"center",":hover":{backgroundColor:"rgba(22, 24, 35, 0.03)"},":target":{backgroundColor:"rgba(22, 24, 35, 0.06)"}},"label:DivUpload;"),$v=(0,re.Z)(Dv.Z,{target:"e18d3d944"})({height:"20px",width:"20px",marginRight:"8px"},"label:StyledPlusIcon;"),Uv=(0,re.Z)("span",{target:"e18d3d945"})({fontStyle:"normal",fontWeight:600,fontSize:"16px",lineHeight:"24px",color:"#161823"},"label:SpanUploadText;"),Wv=(0,re.Z)("h3",{target:"e18d3d946"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{marginBottom:"4px"},"label:H3TipTitle;"),Gv=(0,re.Z)("p",{target:"e18d3d947"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P3",color:"ConstTextInverse"})),"label:PTipDesc;"),Hv=(0,re.Z)("div",{target:"e18d3d948"})({display:"flex",justifyContent:"flex-end"},"label:DivButtonWrapper;"),qv=(0,re.Z)("button",{target:"e18d3d949"})(se.Ph,(({theme:e})=>(0,se.GI)({theme:e,typography:"P2",color:"ConstTextInverse",fontWeight:"semiBold"})),{cursor:"pointer"},"label:ButtonOk;"),Zv=(0,re.Z)(qv,{target:"e18d3d9410"})({width:"100%",height:"36px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, .12)",marginTop:"8px"},"label:StyledButtonUpload;"),Vv=function({needMarginLeft:e}){var t,i;const n=(0,Ji.Q)(),{colors:r,direction:s}=(0,a.u)(),[{tooltipPriority:l,uploadTooltipType:d},c]=(0,U.b7)(fg),p=(0,oe.L)((()=>["$user"]),[]),u=null!==(i=null===(t=null==p?void 0:p.$user)||void 0===t?void 0:t.longVideoMinutes)&&void 0!==i?i:0,[g,m]=(0,w.useState)(!1),{lang:h}=(0,U.mp)(G.G,{selector:e=>({lang:e.lang}),dependencies:[]}),_=(0,w.useCallback)((()=>{c.setTooltipPriority(2),c.postScheduleRecord({ack_type:1})}),[c]),v=(0,ee.fz)(Mv),y=(0,ee.fz)(to._),{isInVideoFeedRedesign:f}=(0,lo.y7)(),b=(0,w.useMemo)((()=>f?{play_mode:"large_video_mode"}:{}),[f]),x=(0,w.useCallback)((()=>{v.handleEnter(Object.assign({enter_method:"navigation_bar"},b)),y.handleClickNav({target:"upload",order:1})}),[y,b,v]);(0,w.useEffect)((()=>{1===l?setTimeout((()=>{m(!0)}),1e3):m(!1)}),[l]),(0,w.useEffect)((()=>{g&&1===d&&(_g.iv.setItem(yg,!0),setTimeout((()=>{c.setTooltipPriority(2)}),15e3))}),[g,d,c]);const k=(0,w.useCallback)((()=>{c.setTooltipPriority(2),window.location.href=`https://www.tiktok.com/upload?lang=${h}`}),[c,h]),S=(0,o.jsxs)(zv,{children:[(0,o.jsx)($v,{},void 0),(0,o.jsx)(Uv,{children:n("Upload")},void 0)]},void 0),C="ltr"===s?"bottomRight":"bottomLeft";return(0,o.jsxs)(Fv,Object.assign({needMarginLeft:e},{children:[(0,o.jsx)(Wo.v,Object.assign({forceSSR:!0,to:`/upload?lang=${h}`,onClick:x},{children:S}),void 0),(0,o.jsx)(sn.G,Object.assign({active:g,backgroundColor:r.ConstSecondary2,placement:C,arrowMargin:"16px",margin:"-12px"},{children:(0,o.jsxs)(Bv,{children:[(0,o.jsx)(Wv,{children:0===d?n("scheduler_welcome_tooltip_title"):n("new_feature_guidance_title",{num:u}).replace(/%\w/,String(u))},void 0),(0,o.jsx)(Gv,{children:0===d?n("scheduler_welcome_tooltip_des"):n("new_feature_guidance_text",{num:u}).replace(/%\w/,String(u))},void 0),0===d?(0,o.jsx)(Hv,{children:(0,o.jsx)(qv,Object.assign({onClick:_},{children:n("OK")}),void 0)},void 0):(0,o.jsx)(Zv,Object.assign({onClick:k},{children:n("new_feature_guidance_Upload")}),void 0)]},void 0)}),void 0)]}),void 0)},Qv=function(){const e=(0,Ji.Q)(),t=(0,U.qj)(K.r),i=(0,ee.fz)(Mv),{isInVideoFeedRedesign:n}=(0,lo.y7)(),a=(0,w.useMemo)((()=>n?{play_mode:"large_video_mode"}:{}),[n]),r=(0,w.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),i.handleEnter(Object.assign({enter_method:"navigation_bar"},a)),t.openModal({query:{enter_method:"click_navigation_bar",redirect_url:"https://www.tiktok.com/upload/"}})}),[a,t,i]);return(0,o.jsx)("div",{children:(0,o.jsx)(Nv,Object.assign({forceSSR:!0,to:"/upload",onClick:r},{children:(0,o.jsxs)(zv,{children:[(0,o.jsx)($v,{},void 0),(0,o.jsx)(Uv,{children:e("Upload")},void 0)]},void 0)}),void 0)},void 0)},Yv=function({alwaysShowRechargeIconAndText:e=!1}){const t=(0,Ji.Q)(),{$user:i,$deviceLimitRegisterExpired:n,signUpOpen:a=!0}=(0,U.mp)(G.G,{selector:e=>{var t,i,o,n;return{$user:null===(t=e.appContext)||void 0===t?void 0:t.$user,$deviceLimitRegisterExpired:null===(i=e.appContext)||void 0===i?void 0:i.$deviceLimitRegisterExpired,signUpOpen:null===(n=null===(o=e.appContext)||void 0===o?void 0:o.$config)||void 0===n?void 0:n.signUpOpen}},dependencies:[]}),[r,s]=(0,w.useState)(!0),l=(0,ee.fz)(to._),{hasNewFeedbackReply:d}=(0,U.mp)(oi),c=(0,U.qj)(K.r),[p,u]=(0,U.b7)(fg,{selector:e=>-1!==e.redDot.indexOf(1),dependencies:[]}),g=(0,w.useCallback)(((e=!1)=>()=>{c.openModal({closeable:!0,isSignup:e,query:{enter_method:"click_top_bar",redirect_url:(0,Te.AY)()}})}),[c]),{active:m,handleMouseEnter:h,handleMouseLeave:_}=(0,rn.R)(500),v=(0,oe.L)((()=>["$abTestVersion"]),[]),y=(0,X.x)(null==v?void 0:v.$abTestVersion,"expose_recharge_entry_pc"),f=void 0!==y&&"v2"===y,b=f&&r;(0,w.useEffect)((()=>{r&&f&&"HAS_ENTERED_VALUE"===(0,Y.le)("HAS_ENTERED_KEY")&&s(!1)}),[r,f]);const x=(0,w.useCallback)((()=>{p&&u.updateRedDot({type:1}),h(),l.handleProfileHoveShow()}),[p,u,h,l]);if(!i)return(0,o.jsxs)(Iv,{children:[(0,o.jsx)(Qv,{},void 0),!n&&a&&(0,o.jsx)(Pv,Object.assign({onClick:g(!0)},{children:t("common_notification_unlogged_button")}),void 0),(0,o.jsx)(Ev,Object.assign({size:"medium",buttonTheme:"primary",onClick:g(!1)},{children:t("Log In")}),void 0),(0,o.jsxs)(Lv,Object.assign({onMouseEnter:x,onMouseLeave:_},{children:[(0,o.jsx)(Av,{},void 0),(0,o.jsx)(Tv,{active:m,e2eTag:"see-more-popup",margin:-13},void 0)]}),void 0)]},void 0);const{uniqueId:k,secUid:S}=i;return(0,o.jsxs)(Iv,{children:[!b&&(0,o.jsx)(Vv,{},void 0),(null==i?void 0:i.hasIMPermission)&&b&&(0,o.jsx)(hg,{removeMarginLeft:!0},void 0),(null==i?void 0:i.hasIMPermission)&&!b&&(0,o.jsx)(hg,{},void 0),(0,o.jsx)(g_,{},void 0),b&&(0,o.jsx)(Vv,{needMarginLeft:!0},void 0),(0,o.jsx)(Z_,{alwaysShowRechargeIconAndText:e},void 0),(0,o.jsx)(m_,{children:(0,o.jsxs)(xg,Object.assign({onMouseEnter:x,onMouseLeave:_},{children:[(d||p)&&(0,o.jsx)(Rv,{className:"red-dot"},void 0),(0,o.jsx)(Tv,{margin:-12,active:m,e2eTag:"profile-popup"},void 0)]}),void 0)},void 0),(0,o.jsx)(k_,{uniqueId:k,secUid:S,userPopupActive:m},void 0)]},void 0)};let Kv=class{constructor(){this.handlePushShowReport=e=>{Q.WB.event("browser_push_notifications_show",{show_method:e})},this.handlePushGrantedReport=e=>{Q.WB.event("browser_push_notifications_allow",{show_method:e})},this.handlePushDeniedReport=e=>{Q.WB.event("browser_push_notifications_block",{show_method:e})},this.handlePushDefaultReport=e=>{Q.WB.event("browser_push_notifications_close",{show_method:e})},this.handleGuideShowReport=()=>{Q.WB.event("guide_permission_popup_show")},this.handleGuideYesReport=()=>{Q.WB.event("guide_permission_popup_turn_on")},this.handleGuideNoReport=()=>{Q.WB.event("guide_permission_popup_cancel")}}};Kv=(0,g.__decorate)([(0,ne.G)()],Kv);var Jv=i(18703);function Xv(){return(0,g.__awaiter)(this,void 0,void 0,(function*(){const{FCM:e}=yield Promise.all([i.e(9602),i.e(1565),i.e(7954)]).then(i.bind(i,4063));return e}))}const ey="web-push-permission";let ty=class{constructor(e){this.security=e}initFCM(e,t){const i={firebaseConfig:{apiKey:"AIzaSyDHGqRfibWT6DffZBTYlhXfTQHAP_ri1MI",appId:"1:943363548815:web:f9a03b69b49a48fb5c72fa",authDomain:"tiktok-webapp.firebaseapp.com",databaseURL:"https://tiktok-webapp.firebaseio.com",measurementId:"G-WTKRD0C8TF",messagingSenderId:"943363548815",projectId:"tiktok-webapp",storageBucket:"tiktok-webapp.appspot.com"},messagingConfig:{vapidKey:"BAxZo-Q87DGZeDuCG33n7l9hsdXb2Zwf3-Cc9_NPuaNZvqMCHhCtCm-5kivnFwhVef1N06SoKbWlJBpZU0jcfa4",onMessageShow:!0,requestPermission:!1},commonParameter:{aid:1988,sender_id:17,app_region:e,app_language:t,version_code:"1.0.0"}};return(0,Cs.D)([Xv(),this.security.init$]).pipe((0,gi.z)((([e])=>{const t=new e(i.firebaseConfig,i.messagingConfig,i.commonParameter);return(0,Bs.D)(t.requestPermission().then((e=>{switch(e){case"granted":return t.onTokenRefresh().then((()=>"GRANTED_SUCCESS")).catch((()=>"GRANTED_FAILED"));case"denied":return"DENIED";default:return"DEFAULT"}})))})),(0,hi.K)((()=>(console.warn("fcm init failed"),(0,mi.of)("FAILED")))))}getPushPermissionAllowed(){var e;try{const t=null!==(e=_g.iv.getItem(ey))&&void 0!==e?e:[],i=Date.now();return 0===t.length?(t.unshift(i),_g.iv.setItem(ey,t),(0,mi.of)(!0)):i-t[0]<864e5?(0,mi.of)(!1):t.length<3?(t.unshift(i),_g.iv.setItem(ey,t),(0,mi.of)(!0)):i-t[2]<2592e6?(0,mi.of)(!1):(t.unshift(i),_g.iv.setItem(ey,t.slice(0,3)),(0,mi.of)(!0))}catch(e){return(0,mi.of)(!1)}}};ty=(0,g.__decorate)([(0,ne.G)(),(0,g.__metadata)("design:paramtypes",[Jv.$])],ty);let iy=class extends de.D{constructor(e,t){super(),this.service=e,this.pushPermissionReport=t,this.defaultState={pushPermissionOn:!1}}setPushPermissionOn(e,t){e.pushPermissionOn=t}initFCM(e){return e.pipe((0,ti.b)((({showMethod:e})=>{e&&this.pushPermissionReport.handlePushShowReport(e)})),(0,gi.z)((({region:e,lang:t,showMethod:i})=>this.service.initFCM(e,t).pipe((0,ti.b)((e=>{if(i)switch(e){case"GRANTED_SUCCESS":case"GRANTED_FAILED":this.pushPermissionReport.handlePushGrantedReport(i);break;case"DENIED":this.pushPermissionReport.handlePushDeniedReport(i);break;case"DEFAULT":this.pushPermissionReport.handlePushDefaultReport(i)}})),(0,me.U)((()=>this.noop()))))))}judgeIfPush(e){return e.pipe((0,gi.z)((({region:e,lang:t,vid:i})=>this.service.getPushPermissionAllowed().pipe((0,me.U)((o=>o?"v3"===i?this.getActions().setPushPermissionOn(!0):this.getActions().initFCM({region:e,lang:t,showMethod:"direct_ask_notification_permission"}):this.noop())),(0,hi.K)((()=>(0,mi.of)(this.noop())))))))}};(0,g.__decorate)([(0,ce.lF)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[Object,Boolean]),(0,g.__metadata)("design:returntype",void 0)],iy.prototype,"setPushPermissionOn",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],iy.prototype,"initFCM",null),(0,g.__decorate)([(0,ce.Qm)(),(0,g.__metadata)("design:type",Function),(0,g.__metadata)("design:paramtypes",[ue.y]),(0,g.__metadata)("design:returntype",void 0)],iy.prototype,"judgeIfPush",null),iy=(0,g.__decorate)([(0,pe.Y)("Push"),(0,g.__metadata)("design:paramtypes",[ty,Kv])],iy);const oy=(0,re.Z)("div",{target:"epysjln0"})((({theme:{colors:e}})=>({position:"absolute",boxSizing:"border-box",width:"400px",padding:"32px",top:"0",left:"50%",transform:"translateX(-50%)",background:e.BGPrimary,boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px",zIndex:2,textAlign:"center"})),"label:DivPushPermissionContainer;"),ny=(0,re.Z)("div",{target:"epysjln1"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P0",fontWeight:"bold",fontFamily:"Proxima"})),"label:DivPushPermissionTitle;"),ay=(0,re.Z)("div",{target:"epysjln2"})((({theme:e})=>(0,se.GI)({theme:e,typography:"P2",fontFamily:"Proxima"})),(({theme:{colors:e}})=>({margin:"8px 0 24px",color:e.TextPrimary})),"label:DivPushPermissionSubtitle;"),ry=(0,re.Z)("div",{target:"epysjln3"})({display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center"},"label:DivPushPermissionButtonContainer;"),sy=(0,re.Z)(_t.W,{target:"epysjln4"})({"min-width":"164px"},"label:StyledButton;"),ly=function({permissionCallback:e}){const t=(0,Ji.Q)(),i=(0,ee.fz)(Kv);(0,w.useEffect)((()=>{i.handleGuideShowReport()}),[i]);const n=(0,w.useCallback)((()=>{e("denied"),i.handleGuideNoReport()}),[e,i]),a=(0,w.useCallback)((()=>{e("granted"),i.handleGuideYesReport()}),[e,i]);return(0,o.jsxs)(oy,{children:[(0,o.jsx)(ny,{children:t("push_popup_title")},void 0),(0,o.jsx)(ay,{children:t("push_popup_content")},void 0),(0,o.jsxs)(ry,{children:[(0,o.jsx)(sy,Object.assign({buttonTheme:"default",size:"largeNew",onClick:n},{children:t("push_popup_btn1")}),void 0),(0,o.jsx)(sy,Object.assign({buttonTheme:"primary",size:"largeNew",onClick:a},{children:t("push_popup_btn2")}),void 0)]},void 0)]},void 0)},dy=(0,re.Z)("div",{target:"e1lv5j0x0"})({position:"relative"},(0,se.f1)({max:767,style:{display:"none"}}),"label:DivHeaderCenterContainer;"),cy=(0,w.memo)((e=>{const{pathname:t}=(0,j.TH)(),{isInVideoFeedRedesign:i}=(0,lo.y7)(),{isDetailPageCoverQuantityTestGroup:n}=(0,lo.t1)(),{isInNewVideoDetail:a}=(0,lo.xy)(),r=i||n||a||(0,Le.BL)(t)?ru:au;return(0,o.jsx)(r,Object.assign({},e),void 0)})),py=(0,w.memo)((function(){const e=(0,U.mp)(G.G,{selector:({appContext:e})=>Boolean(e),dependencies:[]}),[t,i]=(0,w.useState)(0),n=(0,w.useCallback)((({hasModal:e,scrollWidth:t})=>{i(e?t:0)}),[]),{pushPermissionOn:a,permissionCallback:r}=function(){const[{pushPermissionOn:e},t]=(0,U.b7)(iy),{lang:i,$region:o,$user:n,$abTestVersion:a}=(0,U.mp)(G.G,{selector:e=>{var t,i,o,n;return{lang:e.lang,$region:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.$region)&&void 0!==i?i:"",$user:null===(o=e.appContext)||void 0===o?void 0:o.$user,$abTestVersion:null===(n=e.appContext)||void 0===n?void 0:n.$abTestVersion}},dependencies:[]}),r=(0,X.x)(a,"web_push_test"),s=(0,w.useCallback)((e=>{t.setPushPermissionOn(!1),"granted"===e&&t.initFCM({region:o,lang:i,showMethod:"click_guide_permission_popup_turn_on"})}),[o,i,t]),l=(0,w.useCallback)((()=>{Xv().then((e=>{if(("v2"===r||"v3"===r)&&e.isAvailable()&&("US"!==o||n))switch(Notification.permission){case"denied":return;case"granted":t.initFCM({region:o,lang:i});break;default:t.judgeIfPush({region:o,lang:i,vid:r})}})).catch((()=>{console.warn("load fcm failed")}))}),[r,o,n,t,i]);return(0,w.useEffect)((()=>{l()}),[l]),{pushPermissionOn:e,permissionCallback:s}}(),{subscribeModalChange:s}=(0,Sr.J)();return(0,w.useEffect)((()=>{const e=s(n);return()=>{e()}}),[n,s]),(0,o.jsxs)(nu,Object.assign({style:{right:t/2+"px"}},{children:[a?(0,o.jsx)(ly,{permissionCallback:r},void 0):null,(0,o.jsxs)(cy,{children:[(0,o.jsx)(lu,{},void 0),(0,o.jsx)(dy,{children:(0,o.jsx)(Wu,{},void 0)},void 0),e&&(0,o.jsx)(Yv,{},void 0)]},void 0)]}),void 0)})),uy=(0,s.ZP)({resolved:{},chunkName:()=>"following",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(2539),i.e(528),i.e(5690),i.e(8376),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(215),i.e(5407),i.e(4485),i.e(5579),i.e(2702),i.e(4992),i.e(5530),i.e(8686),i.e(6442),i.e(556)]).then(i.bind(i,90600)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>90600}),gy=(0,s.ZP)({resolved:{},chunkName:()=>"search",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(7991),i.e(2848),i.e(801),i.e(8229),i.e(215),i.e(1139),i.e(6464)]).then(i.bind(i,38691)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>38691}),my=(0,s.ZP)({resolved:{},chunkName:()=>"user",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(7991),i.e(9754),i.e(8992),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(215),i.e(5407),i.e(4485),i.e(1139),i.e(5579),i.e(635),i.e(1795),i.e(378)]).then(i.bind(i,7133)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>7133}),hy=(0,s.ZP)({resolved:{},chunkName:()=>"challenge",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(7991),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(215),i.e(5407),i.e(4485),i.e(1139),i.e(5579),i.e(635),i.e(1795),i.e(7454)]).then(i.bind(i,40788)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>40788}),_y=(0,s.ZP)({resolved:{},chunkName:()=>"video",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(215),i.e(5407),i.e(2702),i.e(4992),i.e(6791)]).then(i.bind(i,40390)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>40390}),vy=(0,s.ZP)({resolved:{},chunkName:()=>"playlist",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(2848),i.e(801),i.e(5616),i.e(5407),i.e(4485),i.e(635),i.e(4764),i.e(7449)]).then(i.bind(i,3086)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>3086}),yy=(0,s.ZP)({resolved:{},chunkName:()=>"music",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(7991),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(215),i.e(5407),i.e(4485),i.e(1139),i.e(5579),i.e(635),i.e(1795),i.e(4764),i.e(4106)]).then(i.bind(i,56569)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>56569}),fy=(0,s.ZP)({resolved:{},chunkName:()=>"foryou",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(2539),i.e(528),i.e(5690),i.e(8376),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(215),i.e(2702),i.e(4992),i.e(5530),i.e(8686),i.e(6442),i.e(9563),i.e(8782)]).then(i.bind(i,106)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>106}),by=(0,s.ZP)({resolved:{},chunkName:()=>"topics",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(2702),i.e(8686),i.e(9563),i.e(3062)]).then(i.bind(i,37206)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>37206},{resolveComponent:e=>e.Topics}),xy=(0,s.ZP)({resolved:{},chunkName:()=>"question",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(7785),i.e(5029),i.e(8674),i.e(2968),i.e(4585),i.e(8844),i.e(7991),i.e(2848),i.e(801),i.e(5616),i.e(8229),i.e(9894),i.e(215),i.e(5407),i.e(4485),i.e(1139),i.e(5579),i.e(635),i.e(6516)]).then(i.bind(i,3340)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>3340}),ky=(0,s.ZP)({resolved:{},chunkName:()=>"kep",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!i.m[t]},importAsync:()=>Promise.all([i.e(3975),i.e(2848),i.e(5616),i.e(9894),i.e(8726)]).then(i.bind(i,73399)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve:()=>73399}),Sy=(0,re.Z)("div",{target:"eg65pf90"})((({extraTop:e=0,maxWidth:t})=>({marginTop:se.Mz+e,display:"flex",width:"100vw",maxWidth:null!=t?t:se.XP,justifyContent:"space-between",alignSelf:"center",flex:"1 1 auto"})),"label:DivBodyContainer;"),wy=(0,re.Z)("div",{target:"eg65pf91"})({},"label:DivSideNavContainer;"),Cy=(0,re.Z)("div",{target:"eg65pf92"})((({status:e,theme:{colors:t}})=>(0,se.f1)({max:767,style:[{position:"fixed",inset:se.Mz-1+"px 0 0",zIndex:99,backgroundColor:t.ConstBGInverse2,opacity:e===W.d0||e===W.cn?1:0},e===W.d0||e===W.Ix?{transition:"all 0.3s"}:null,e===W.Wj?{pointerEvents:"none"}:null]})),"label:DivSideNavMask;"),jy=(0,re.Z)(Sy,{target:"e1pqe3e80"})({maxWidth:"unset",justifyContent:"flex-start"},"label:StyledDivBodyContainerV2;"),Ty=(0,w.memo)((e=>{const{pathname:t}=(0,j.TH)(),{isInVideoFeedRedesign:i}=(0,lo.y7)(),n=i||(0,Le.BL)(t)?jy:Sy;return(0,o.jsx)(n,Object.assign({},e),void 0)}));function Oy({location:e}){const t=(0,w.useMemo)((()=>({pathname:e.pathname.replace(/\/\/+/g,"/"),search:e.search})),[e.pathname,e.search]);return(0,o.jsx)(j.l_,{to:t},void 0)}const Iy=()=>{const[{appContext:e,isSideNavActive:t},i]=(0,U.b7)(G.G,{selector:e=>({appContext:e.appContext,isSideNavActive:e.sideNavActive}),dependencies:[]}),{$user:n,$language:a="en",$appId:r,$env:s}=(0,H.m7)(e),l=(0,w.useRef)(null);(()=>{const{$language:e}=(0,H.m7)((0,oe.L)((()=>["$language"]),[])),t=(0,w.useRef)(e),i=(0,U.qj)(ni.X),o=(0,w.useCallback)((()=>{i.setCookieBannerShowing(!0)}),[i]),n=(0,w.useCallback)((()=>{i.setCookieBannerShowing(!1)}),[i]);(0,w.useEffect)((()=>{Yt.f.loadCookieBanner({locale:e,onShow:o,onHide:n})}),[e,n,o]),(0,w.useEffect)((()=>{t.current&&e!==t.current&&Yt.f.updateBannerLocale(e),t.current=e}),[e])})(),function(e){const t=(0,U.qj)(oi);(0,w.useEffect)((()=>{e&&!e.ftcUser&&t.getNewestReply()}),[e,t])}(n),function(e,t,i){(0,w.useEffect)((()=>{e&&new Qt.R({aid:1459,service:"www.tiktok.com",host:"boe"===(null==i?void 0:i.type)?"https://boei18n-device.bytedance.net":1180===t?"https://ttwid-sg.byteoversea.com":"https://ttwid-va.byteoversea.com"}).init()}),[t,null==i?void 0:i.type,e])}(n,r,s),function(){const[e,t]=(0,U.b7)(Kt.D);(0,w.useEffect)((()=>{const i=i=>{if(e.isModalShow)return;i.preventDefault();const o=e.isExpand||!(0,Y.le)(J.OV);o&&t.handleShowSnack(!0),t.storeDeferredPrompt(i),t.setIsPwaInstallable(!0),t.setIsExpand(o)};return window.addEventListener("beforeinstallprompt",i),()=>{window.removeEventListener("beforeinstallprompt",i)}}),[t,e.isExpand,e.isModalShow])}(),(0,q.u8)(!1),function(){const e=(0,U.qj)(Z.f),t=(0,w.useCallback)((()=>{window.ttWebappFocusTime||(window.ttWebappFocusTime=Date.now(),window.ttWebappBlurTime=null)}),[]),i=(0,w.useCallback)((()=>{const t=Date.now();e.updateVideoFocusTime({blurTime:t}),window.ttWebappFocusTime=null,window.ttWebappBlurTime=t}),[e]);(0,w.useEffect)((()=>{window.ttWebappFocusTime=Date.now()}),[]),(0,w.useEffect)((()=>(window.addEventListener("blur",i),window.addEventListener("focus",t),()=>{window.removeEventListener("blur",t),window.removeEventListener("focus",i)})),[i,t])}(),function(){const{pathname:e}=(0,j.TH)();(0,w.useEffect)((()=>{window.scrollTo(0,0)}),[e])}(),function(){const[e,t]=(0,U.b7)(K.r),{vv_time:i,current_mode:o}=(0,U.mp)(Z.f),{$user:n,$abTestVersion:a,$region:r}=(0,U.mp)(G.G,{selector:e=>{var t,i,o;return{$user:null===(t=e.appContext)||void 0===t?void 0:t.$user,$abTestVersion:null===(i=e.appContext)||void 0===i?void 0:i.$abTestVersion,$region:null===(o=e.appContext)||void 0===o?void 0:o.$region}},dependencies:[]}),s=(0,X.x)(a,"google_one_tap_test"),{openModal:l,closeModal:d,setIframeHeight:c}=t,p=(0,w.useCallback)((()=>{const e=(0,Y.le)(J.uU);if(Date.now()-Number(e)<864e5)return!0}),[]),u=(0,w.useCallback)((()=>{var t;p()||e.showGoogleOneTap&&(null!==(t=e.iframeHeight)&&void 0!==t?t:0)>0&&(c(0),d({enter_method:"click_blank"}),(0,Y.D$)(J.uU,`${Date.now()}`))}),[d,c,e.iframeHeight,e.showGoogleOneTap,p]);(0,w.useEffect)((()=>(window.addEventListener("click",u,!1),()=>{window.removeEventListener("click",u,!1)})),[u]),(0,w.useEffect)((()=>{p()||n||"US"===r||"IT"===r||"v1"===s||2===o||(Q.WB.event("one_tap_not_return",{vid:s}),("v2"===s||"v3"===s&&i>=1||"v4"===s&&i>=3||"v5"===s&&i>=10)&&!e.isOpen&&l({isSignup:!1,isOpen:!0,loginPath:V.IU.oauthGoogleOneTap,closeable:!1,query:{redirect_url:location.href,enter_method:"google_onetap",type:"login"},showGoogleOneTap:!0}))}),[n,l,s,r,p,i,o,e.isOpen])}(),function(){const e=(0,ee.fz)(ai.W),{photoSensitiveVideosSetting:t}=(0,U.mp)(ri.P);(0,w.useEffect)((()=>{e.handleRemovePhotosensitiveStatus(1===t?"on":"off")}),[])}();const{bodyContainerWidth:d,sideNavWidth:c}=(()=>{const{pathname:e}=(0,j.TH)(),{isInVideoFeedRedesign:t}=(0,lo.y7)(),{isDetailPageCoverQuantityTestGroup:i}=(0,lo.t1)(),{isInNewVideoDetail:o}=(0,lo.xy)(),n=t||i||o||(0,Le.BL)(e);return{sideNavWidth:n?240:void 0,bodyContainerWidth:n?"100vw":void 0}})(),p=(0,w.useCallback)((()=>{i.setSideNavActive(!1)}),[i]),{popupHeight:u,handlePopupHide:g,handlePopupShow:m}=function(){const[e,t]=(0,w.useState)(0),i=(0,w.useCallback)((()=>{t(0)}),[]);return{popupHeight:e,handlePopupShow:(0,w.useCallback)((e=>{t(e)}),[]),handlePopupHide:i}}(),h=(0,o.jsx)(W.ZP,Object.assign({timeout:300,in:t,nodeRef:l},{children:e=>(0,o.jsxs)("div",Object.assign({ref:l},{children:[(0,o.jsx)(Cy,{status:e,onClick:p},void 0),(0,o.jsx)(yr,{extraWidth:c,extraTop:u,transStatus:e,lang:a},void 0)]}),void 0)}),void 0);return(0,o.jsxs)(Er,Object.assign({isMobile:!1},{children:[(0,o.jsx)(Ie,{appContext:e,slardarBid:Pe.Li},void 0),(0,o.jsx)(Ne,{appContext:e},void 0),(0,o.jsx)(ze,{appContext:e},void 0),(0,o.jsx)(py,{},void 0),(0,o.jsx)(Bt,{onShow:m,onHide:g},void 0),(0,o.jsxs)(Ty,Object.assign({extraTop:u,maxWidth:d},{children:[(0,o.jsx)(wy,{children:h},void 0),(0,o.jsxs)(j.rs,{children:[(0,o.jsx)(j.AW,{path:"(.*//+.*)",exact:!0,strict:!0,component:Oy},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.following,component:uy},void 0),(0,o.jsx)(j.AW,{path:$.Ad.searchHome,component:gy},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.user,component:my},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.challenge,component:hy},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.video,component:_y},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.musicPlaylist,component:vy},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.music,component:yy},void 0),(0,o.jsx)(j.AW,{exact:!0,path:zt.Vh,component:fy},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.topics,component:by},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.question,component:xy},void 0),(0,o.jsx)(j.AW,{exact:!0,path:$.Ad.expansion,component:ky},void 0),(0,o.jsx)($t,{path:"*"},void 0)]},void 0)]}),void 0),(0,o.jsx)(Vt,{},void 0),(0,o.jsx)(ou,{},void 0)]}),void 0)},Py=x()(Object.values($.Ad));!function(e,t){const{beforeStart:r=c(),ns:d}=null!=t?t:{};(function(){return(0,g.__awaiter)(this,void 0,void 0,(function*(){"Promise"in window?(m.some((e=>!(e in window)))&&(yield i.e(1342).then(i.bind(i,23253))),(h.some((e=>!(e in Array.prototype)))||_.some((e=>!(e in Object))))&&(yield Promise.all([i.e(800).then(i.t.bind(i,75093,23)),i.e(800).then(i.t.bind(i,10086,23)),i.e(800).then(i.t.bind(i,68049,23)),i.e(800).then(i.t.bind(i,71934,23))]))):window.location.href="https://www.tiktok.com/unsupported"}))})().then((()=>Promise.all([(0,l.g)(),(0,v.Bs)(),r(),(0,s.TA)(),y(d)]))).then((()=>{!function(e){const t=document.querySelector("#app");{const i=(0,n.Z)({key:"tiktok"});(0,p.hydrate)((0,o.jsx)(a.C,Object.assign({value:i},{children:(0,o.jsx)(e,{},void 0)}),void 0),t)}}(e)})).catch((e=>{console.error(e)}))}((()=>(0,o.jsx)(z,Object.assign({supportRoutes:Py},{children:(0,o.jsx)(Iy,{},void 0)}),void 0)),{beforeStart:void 0})},80002:(e,t,i)=>{"use strict";i.d(t,{s:()=>o});const o=new(i(30130).O)("i18n")},35129:(e,t,i)=>{"use strict";i.d(t,{Jc:()=>n,Vh:()=>a});var o=i(54348);const n=["/en","/ar","/de-DE","/es","/fi-FI","/fr","/id-ID","/ja-JP","/ko-KR","/ms-MY","/ru-RU","/th-TH","/tr-TR","/vi-VN","/zh-Hans","/zh-Hant-TW","/he-IL","/jv-ID","/ceb-PH","/cs-CZ","/it-IT","/hu-HU","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/sv-SE","/fil-PH","/el-GR","/uk-UA","/ur","/hi-IN","/bn-IN","/my-MM","/km-KH"],a=[o.Ad.home,o.Ad.foryou,...n];o.gs.home,o.gs.foryou,o.gs.discover,o.gs.topics},82394:(e,t,i)=>{"use strict";i.d(t,{L:()=>o});const o=i(32735).useLayoutEffect},66164:(e,t,i)=>{"use strict";i.d(t,{fB:()=>l,Nr:()=>d});var o=i(33259),n=i.n(o),a=i(45750),r=i.n(a),s=i(32735);function l(e,t,i){return(0,s.useMemo)((()=>n()(e,i)),t)}function d(e,t,i){return(0,s.useMemo)((()=>r()(e,i)),t)}},90938:(e,t,i)=>{"use strict";i.d(t,{H:()=>s,Q:()=>l});var o=i(32735),n=i(22538),a=i(90152),r=i(68316);function s(e,t){const{pathname:i,search:o}=(0,n.TH)();return(0,a.getI18nNamespace)({isMobile:e,search:o,pathname:i,isSearchbot:t})}const l=(e="Webapp")=>{const t=(0,o.useContext)(r.OO).t;return(0,o.useCallback)(((i,o,n)=>t(i,Object.assign({ns:e},o),n)),[e,t])}},68316:(e,t,i)=>{"use strict";i.d(t,{CJ:()=>l,OO:()=>d,bd:()=>c});var o=i(74512),n=i(32321),a=i(32735),r=i(80002);let s;const l={type:"intl3rdParty",name:"intl-react-plugin",init(e){s=e}},d=(0,a.createContext)({t:e=>e,lang:"en"}),c=({lang:e,t,children:i})=>{const l=(0,a.useMemo)((()=>[{provide:r.s,useValue:s.t}]),[]),c=(0,a.useMemo)((()=>({t:null!=t?t:s.t,lang:e})),[e,t]);return(0,o.jsx)(d.Provider,Object.assign({value:c},{children:(0,o.jsx)(n.yx,Object.assign({providers:l},{children:i}),void 0)}),void 0)}},44435:(e,t,i)=>{"use strict";i.d(t,{P4:()=>n,MB:()=>a,JD:()=>r,yl:()=>l,fH:()=>d,nY:()=>p,_9:()=>c,cC:()=>h});var o=i(764);const{getPureLivePath:n,getPureMusicPath:a,getPureTagPath:r,getPureStickerPath:s,getPureUserPath:l,getPureVideoPath:d,getPureQuestionPath:c}=o.default,{getPureUniqueId:p,hasIllegalText:u,isPureNumber:g,isRealUniqueId:m,purifyMusicName:h}=o.Utils},28698:(e,t,i)=>{"use strict";i.d(t,{Hg:()=>r,oC:()=>s,Xq:()=>l,Io:()=>d,FZ:()=>c,cQ:()=>p,ws:()=>u,Dj:()=>g,bf:()=>m,BL:()=>h,u7:()=>_,C2:()=>v});var o=i(22538),n=i(54348),a=i(35129);function r(e){const t=e.replace(/\/$/,"");return e===n.Ad.home||a.Jc.includes(t)}function s(e){return e.replace(/\/$/,"")===n.Ad.foryou||r(e)}function l(e){if(s(e))return"fyp";if(e.match("/following"))return"following";if(e.match("/setting"))return"setting";if(e.match("/search"))return"search";if(e.match("/message"))return"message";if(e.match("/video"))return"video";if(e.match("/@"))return"user";if(e.match("/music"))return"music";if(e.match("/tag"))return"hashtag";if(e.match(/\/discover\/.+/))return"expansion";if(e.match("/discover"))return"discover";if(e.match("/live"))return"live";if(d(e)){const t=(0,o.LX)(e,{path:n.Ad.topics,exact:!0});return"topics_"+(null==t?void 0:t.params.name)}return e.match("/profile")?"profile":""}function d(e){return!!(0,o.LX)(e,{path:n.Ad.topics,exact:!0})}function c(e){return e===n.Ad.following}function p(e){return/^\/@[^/]+\/video\/\d+/.test(e)}function u(e){return/^\/music\/.+/.test(e)}function g(e){return/^\/tag\/.+/.test(e)}function m(e){return!/^\/@.+\/video\/\d+/.test(e)&&/^\/@.+/.test(e)}function h(e){return/^\/discover\/.+/.test(e)}function _(e){return/^\/question\/.+/.test(e)}function v(e){return s(e)?5:c(e)?11:p(e)?0:u(e)?4:g(e)?3:m(e)?1:function(e){return e===n.Ad.searchUser}(e)?106:function(e){return e===n.Ad.searchVideo}(e)?107:function(e){return e===n.Ad.searchHome}(e)?105:_(e)?16:d(e)?113:5}},65723:(e,t,i)=>{"use strict";i.d(t,{eD:()=>c,zv:()=>p,GV:()=>u});var o=i(31191),n=i(21296),a=i(9405),r=i(28698),s=i(59719),l=i(95379);const d="webapp-session-referer",c="tt-csrf-token",p={FORM_ENCODE:"application/x-www-form-urlencoded; charset=UTF-8"};let u=class{constructor(){this.appContext$=new a.t(1),this.appLanguage="en",this.isPageVisible=!0,this.isFocus=!0}setAppContext(e){this.appContext||(this.appContext$.next(e),this.appContext=e,(0,s.Y8)(this.handleVisibilityChange.bind(this,!1),this.handleVisibilityChange.bind(this,!0)),this.bindFocusChange())}getBaseUrl(e=0){var t,i,o,n,a,r,s,l,d,c,p,u,g,m,h,_,v,y,f,b,x,k;switch(e){case 1:return"https://api.tiktok.com";case 2:return null!==(i=null===(t=this.appContext)||void 0===t?void 0:t.$domains.rootApi)&&void 0!==i?i:"https://www.tiktok.com";case 3:return this.appContext?this.appContext.$domains.mTApi:"";case 6:return this.appContext?this.appContext.$domains.rootApi:"";case 4:return null!==(n=null===(o=this.appContext)||void 0===o?void 0:o.$domains.webcastRootApi)&&void 0!==n?n:"https://webcast.tiktok.com";case 5:return this.appContext?this.appContext.$domains.webcastApi:"";case 0:return null!==(r=null===(a=this.appContext)||void 0===a?void 0:a.$domains.rootApi)&&void 0!==r?r:"";case 7:return null!==(m=null!==(u=null===(p=null===(c=null===(d=null===(l=null===(s=this.appContext)||void 0===s?void 0:s.$abTestVersion)||void 0===l?void 0:l.parameters)||void 0===d?void 0:d.like_comment_domain)||void 0===c?void 0:c.vid)||void 0===p?void 0:p.like)&&void 0!==u?u:null===(g=this.appContext)||void 0===g?void 0:g.$domains.mTApi)&&void 0!==m?m:"";case 8:return null!==(k=null!==(b=null===(f=null===(y=null===(v=null===(_=null===(h=this.appContext)||void 0===h?void 0:h.$abTestVersion)||void 0===_?void 0:_.parameters)||void 0===v?void 0:v.like_comment_domain)||void 0===y?void 0:y.vid)||void 0===f?void 0:f.comment)&&void 0!==b?b:null===(x=this.appContext)||void 0===x?void 0:x.$domains.rootApi)&&void 0!==k?k:""}}getRiskParams(e,t=!1){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.appContext)return{};if(2===e)return{};(0,s.St)(d)||(0,s.D9)(d,document.referrer);const i=1===e;let o=null;if(!t&&navigator.getBattery&&(o=(yield navigator.getBattery()).level),i)return Object.assign(Object.assign({},(0,l.$b)()),{from_page:(0,r.Xq)(location.pathname)});const n={};return"ageVerify"===(0,s.St)("enter_method")&&(n.security_verification_aid="1459"),Object.assign(Object.assign(Object.assign({},(0,l.Kj)(this.appContext,this.isPageVisible,this.isFocus,o)),{from_page:(0,r.Xq)(location.pathname)}),n)}))}handleVisibilityChange(e){this.isPageVisible=e}bindFocusChange(){const e=()=>{this.isFocus=!0},t=()=>{this.isFocus=!1};return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}}};u=(0,o.__decorate)([(0,n.G)()],u)},70336:(e,t,i)=>{"use strict";i.d(t,{r:()=>S});var o=i(31191),n=i(21296),a=i(86349),r=i.n(a),s=i(9086),l=i.n(s),d=i(35002),c=i(37674),p=i(56383),u=i(2355),g=i(52702),m=i(65723),h=i(95379),_=i(18703),v=i(2930);const y=1e4;let f=class{constructor(){this.domId="tiktok-verify-ele",this.captcha=null,this.verifyElement=null,this.open=!1,this.rejectPass=!1,this.checkVerify=(e,t,i,n)=>(0,o.__awaiter)(this,void 0,void 0,(function*(){var o;if("object"!=typeof e)return e;const{statusCode:a,code:r}=null!=e?e:{};if(a===y||r===String(y)){const a=r===String(y)?e:e.verifyConfig,s=yield this.loadCaptcha(n&&i?"ttp":a.region,t);if(-1===a.fp){const e=yield null===(o=this.captcha)||void 0===o?void 0:o.getFp();a.fp=e}return s?this.open?(yield this.updateState(),this.rejectPass?1:2):this.goVerify(a,n):1}return 0})),this.destroy=()=>{var e;null===(e=this.captcha)||void 0===e||e.close(),this.verifyElement&&(document.body.removeChild(this.verifyElement),this.verifyElement=null)}}init(){this.verifyElement||(this.verifyElement=document.createElement("div"),this.verifyElement.setAttribute("id",this.domId),document.body.appendChild(this.verifyElement))}goVerify(e,t){return this.init(),new Promise((i=>{this.openVerify((()=>{this.closeVerify(),i(2)}),(()=>{this.closeVerify(!0),i(1)}),e,t)}))}closeVerify(e=!1){var t;this.open=!1,this.rejectPass=e,null===(t=this.captcha)||void 0===t||t.close()}openVerify(e,t,i,o){var n;const a={ele:this.domId,lang:"en",successCb:e,showMode:"mask",closeCb:t,errorCb:()=>{},fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}};o&&(a.host=o),this.open=!0,this.rejectPass=!0,null===(n=this.captcha)||void 0===n||n.render({verify_data:i,captchaOptions:a})}updateState(){return new Promise((e=>{if(!this.open)return void e();const t=setInterval((()=>{this.open||(clearInterval(t),e())}),800)}))}loadCaptcha(e,t){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(!this.captcha){let o;switch(e){case"boe":case"sg":o=i.e(3975).then(i.bind(i,51049));break;case"va":o=i.e(3975).then(i.bind(i,5339));break;case"in":case"ttp":o=i.e(3975).then(i.bind(i,85856));break;default:return!1}const n=yield o;this.captcha=n,n.init({commonOptions:{aid:1988,did:t||"0",iid:"0"},captchaOptions:{fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}}})}return!0}))}};f=(0,o.__decorate)([(0,n.G)()],f);const b="content-type",x=["application/pdf"],k={m:"va",t:"sg",us:"ttp",boe:"boe"};let S=class{constructor(e,t,i){this.verify=e,this.util=t,this.security=i,this.get=this.rxFetchFactory("GET"),this.post=this.fetchPost,this.put=this.rxFetchFactory("PUT"),this.delete=this.rxFetchFactory("DELETE")}get csrfToken(){var e,t;return this.util.appContext,null!==(t=null===(e=this.util.appContext)||void 0===e?void 0:e.$csrfToken)&&void 0!==t?t:""}get appContext(){return this.util.appContext,this.util.appContext}rxFetchFactory(e){return(t,i)=>this.rxFetch(t,Object.assign(Object.assign({},i),{method:e}))}judgeNeedEncryption(e){return v.kS.some((t=>e.indexOf(t)>-1))}fetchPost(e,t={}){var{omitContentType:i=!1}=t,n=(0,o.__rest)(t,["omitContentType"]);const a=new Headers(n.headers);return a.get(b)||i||a.set(b,"application/x-www-form-urlencoded"),n.body||(n.body=""),n.headers=a,this.rxFetch(e,Object.assign(Object.assign({},n),{method:"POST"}))}getVerifyJson(e,t){var i,o;const n=e.status_code,a=3058===n,r=3059===n,s=k[null!==(o=null===(i=this.appContext)||void 0===i?void 0:i.$domains.kind)&&void 0!==o?o:""];return t.includes("/api/update/profile/")&&(a||r)?{code:"10000",from:"shark_admin",type:"verify",version:1,region:s,subtype:a?"slide":"text",verify_event:"",detail:{},fp:-1}:e}rawFetch(e,t){var i,n,a,r,s,l;return(0,o.__awaiter)(this,void 0,void 0,(function*(){const o=yield window.fetch.call(null,e,t);if(o.status>=400)return Promise.reject(o);{const d=o.headers.get(b);if(null==d?void 0:d.includes("application/json")){const l=yield o.json(),d=this.getVerifyJson(l,e),c=yield this.verify.checkVerify(d,null!==(n=null===(i=this.appContext)||void 0===i?void 0:i.$wid)&&void 0!==n?n:"0",null!==(r=null===(a=this.appContext)||void 0===a?void 0:a.$isTTP)&&void 0!==r&&r,null===(s=this.appContext)||void 0===s?void 0:s.$domains.captcha);return 0===c?l:2===c?this.rawFetch(e,t):{statusCode:-1}}return(null===(l=o.headers.get(b))||void 0===l?void 0:l.includes("text/"))?o.text():-1!==x.indexOf(String(d))?o.blob():(null==d?void 0:d.includes("application/x-protobuf"))?o.arrayBuffer():o.text()}}))}rxFetch(e,t){var{credentials:i="include"}=t,n=(0,o.__rest)(t,["credentials"]);return(!e.startsWith("/")||e.startsWith("//")||"GET"!==n.method||v.rJ.some((t=>e.startsWith(t)))?this.security.init$:(0,c.of)([!0,!0])).pipe((0,g.z)((()=>{var e;const t=null!==(e=n.riskParamsType)&&void 0!==e?e:0,i=n.isInstantApp;return(0,p.D)(this.util.getRiskParams(t,i))})),(0,g.z)((t=>new u.y((o=>{var a;const s="AbortController"in window?new AbortController:{signal:{aborted:!1},abort(){this.signal.aborted=!0}},c=Object.assign({},t,n.query);e.startsWith("http:")||e.startsWith("https:")||(e=this.util.getBaseUrl(n.baseUrlType)+e);const p=l()(r()(n,{signal:s.signal,credentials:i}),"query","riskParamsType","baseUrlType");if(this.judgeNeedEncryption(e)){const i=(0,h.J4)(c);p.headers=Object.assign(Object.assign({},null!==(a=p.headers)&&void 0!==a?a:{}),{"x-tt-params":i}),t&&(e=(0,d.stringifyUrl)({url:e,query:t}))}else e=(0,d.stringifyUrl)({url:e,query:c});return this.rawFetch(e,p).then((e=>{o.next(e),o.complete()})).catch((e=>{o.error(e)})),()=>{s.signal.aborted||s.abort()}})))))}};S=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[f,m.GV,_.$])],S)},95379:(e,t,i)=>{"use strict";i.d(t,{Kj:()=>a,$b:()=>r,J4:()=>s});const o=i(43130),n=(e,t)=>{try{return sessionStorage.getItem(e)||t}catch(e){return console.warn("sessionStorage get failed"),t}},a=(e,t,i,o)=>{const a=document.cookie.match(/s_v_web_id=(\w+)/);try{const r={aid:"1988",app_name:"tiktok_web",channel:"tiktok_web",device_platform:(e||{}).$isMobile?"web_mobile":"web_pc",device_id:(e||{}).$wid,region:(e||{}).$region,priority_region:((e||{}).$user||{}).region||"",os:(e||{}).$os,referer:document.referrer,root_referer:n("webapp-session-referer"),cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,verifyFp:(a||"")[1],app_language:(e||{}).$language,webcast_language:(e||{}).$language,tz_name:Intl.DateTimeFormat().resolvedOptions().timeZone,is_page_visible:t,focus_state:i,is_fullscreen:window.matchMedia("(display-mode: fullscreen)").matches,history_len:window.history.length};return"ageVerify"===n("enter_method")&&(r.security_verification_aid="1459"),navigator.getBattery&&(r.battery_info=o),r}catch(e){}return{}},r=()=>({cookie_enabled:navigator.cookieEnabled,screen_width:screen.width,screen_height:screen.height,browser_language:navigator.language,browser_platform:navigator.platform,browser_name:navigator.appCodeName,browser_version:navigator.appVersion,browser_online:navigator.onLine,timezone_name:Intl.DateTimeFormat().resolvedOptions().timeZone}),s=e=>{const t=[];return Object.keys(e).forEach((i=>{const o=i+"="+e[i];t.push(o)})),t.push("is_encryption=1"),((e,t)=>{const i=((e,t)=>{let i=e.toString();const o=i.length;return o<16?i=new Array(16-o+1).join("0")+i:o>16&&(i=i.slice(0,16)),i})("webapp1.0+20210628"),n=o.enc.Utf8.parse(i);return o.AES.encrypt(e,n,{iv:n,mode:o.mode.CBC,padding:o.pad.Pkcs7}).toString()})(t.join("&"))}},2930:(e,t,i)=>{"use strict";i.d(t,{rJ:()=>n,kS:()=>s,Yf:()=>l});const o=["/api/impression/write/","/api/user/set/animation/","/api/aweme/set/react_duet_stitch/","/api/aweme/delete/","/api/schedule/aweme/delete/","/passport/web/login_name/update/","/api/update/profile/","/api/upload/image/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/commit/follow/user/"],n=["/node/share/","/share/item/list","/discover/render/undefined","/node/feedback/upload_image/","/share/item/explore/list","/api/comment/list/","/api/comment/list/reply/","/api/commit/follow/user/","/api/commit/item/digg/","/aweme/v1/upload/image2/","/api/notice/multi/","/api/notice/count/","/api/notice/digg/list/","/api/user/following/request/list/","/api/commit/follow/request/approve/","/api/commit/follow/request/reject/","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/sticker/item_list/","/api/user/contact/list/","/api/at/default/list/","/api/comment/search/user/","/web/aweme/v1/search/challengesug","/web/aweme/v1/discover/search/","/api/v1/item/create/","/api/search/user/full/","/api/search/user/preview/","/api/search/item/full/","/api/search/general/full/","/api/music/detail/","/api/challenge/detail/","/api/user/detail/","/api/user/list/","/api/item/detail/","/api/question/detail/","/api/question/item_list/","/api/discover/challenge/","/api/discover/user/","/api/discover/music/","/api/discover/expansion/item/","/api/discover/expansion/word_list/","/api/challenge/item_list/","/api/music/item_list/","/api/post/item_list/","/api/favorite/item_list/","/api/following/item_list/","/api/recommend/item_list/","/api/recommend/user/","/api/recommend/embed_videos/","/api/live/detail/","/api/im/multi_user/","/api/user/get/animation/","/api/user/settings/","/aweme/v1/music/list/","/api/mix/detail","/api/mix/item_list","/api/uniqueid/check/",...o,"/node/report/reasons","/aweme/v1/aweme/feedback/","/webcast.*","/v1/message/send","/v2/conversation/create","/v1/voip/call","/v1/conversation/add_participants","/1/conversation/remove_participants","/v1/conversation/update_participant","/v1/conversation/set_setting_info","/v1/conversation/get_setting_info","/v1/conversation/upsert_core_ext_info","/v1/conversation/upsert_settings_ext","/v1/conversation/dissolve","/v1/message/mark","/v1/message/batch_unmark","/v1/message/set_property","/node-a/send/download_link","/api/uniqueid/check/","/api/v3/register/user/info/sync/","/api/policy/notice/approve/","/api/private_banner/ack/","/api/privacy/agreement/record/agree/v1","/api/v3/register/verification/age/","/api/register/check/login/name/","/api/user/detail/self/","/api/policy/notice/","api/compliance/settings","/passport/web/","/shorten/"],a=["/webcast/room/chat/","/webcast/room/create_info/","/webcast/room/enter/","/webcast/room/leave/","/webcast/room/live_podcast/","/webcast/room/ping/audience/","/webcast/user/relation/update/","/webcast/gift/send/","/webcast/room/emote_chat/","/webcast/room/share/"],r=["/api/private_banner/ack/","/cloudpush/update_sender_token/","/cloudpush/app_notice_status/","/api/user/set/settings/","/api/reddot/report","/api/comment/digg/","/api/comment/publish/","/api/comment/delete/","/api/aweme/delete/","/api/schedule/aweme/delete/","/api/privacy/user/private_account/update/v1","/api/im_setting/update/v1","/api/privacy/agreement/record/agree/v1"],s=["/api/post/item_list/","/api/music/item_list/"],l={"webcast.tiktok.com":{POST:a},"webcast-t.tiktok.com":{POST:a},"webcast-m.tiktok.com":{POST:a},"www.tiktok.com":{POST:r},"us.tiktok.com":{POST:r},"m.tiktok.com":{POST:o},"t.tiktok.com":{POST:o}}},18703:(e,t,i)=>{"use strict";i.d(t,{$:()=>v});var o=i(31191),n=i(21296),a=i(71519),r=i(37674),s=i(56383),l=i(52078),d=i(51166),c=i(30526),p=i(71011),u=i(61080),g=i(67381),m=i(65156),h=i(65723),_=i(2930);let v=class{constructor(e){this.util=e,this.init$=(0,a.D)([this.initAcrawler().pipe((0,l.q)(1)),this.initCSRF().pipe((0,l.q)(1))]),this.acrawlerInitliazed=!1,this.csrfInitliazed=!1}getSecSdkMode({isVA:e,isLogin:t,isFTC:i,isHighRisk:o}){return i?517:t?513:e&&o?515:e&&!o?514:516}initAcrawler(){return this.util.appContext$.pipe((0,d.z)((e=>{const{$appId:t,$sgOpen:i,$user:o,$isTTP:n}=e,a=1233===t&&!i;let r=a?"va-tiktok":"sg-tiktok";return r=n?"ttp":r,this.loadSdk("acrawler").pipe((0,c.b)((()=>{var e;this.acrawlerInitliazed||(this.acrawlerInitliazed=!0,window.byted_acrawler.init({aid:1988,dfp:!1,boe:!1,intercept:!0,enablePathList:_.rJ,region:r,mode:this.getSecSdkMode({isVA:a,isLogin:!!o,isFTC:null!==(e=null==o?void 0:o.ftcUser)&&void 0!==e&&e,isHighRisk:!1}),isSDK:!1}))})))})),(0,p.U)((()=>!0)),(0,u.K)((()=>(0,r.of)(!0))))}initCSRF(){return this.util.appContext$.pipe((0,d.z)((e=>{const{$appId:t,$sgOpen:i}=e,o=1233!==t||i?"secsdk_sg":"secsdk_va";return this.loadSdk(o)})),(0,p.U)((()=>!0)),(0,c.b)((()=>{this.csrfInitliazed||(this.csrfInitliazed=!0,window.secsdk.csrf.setProtectedHost(_.Yf))})),(0,u.K)((()=>(0,r.of)(!0))))}loadSdk(e,t=1e4){return(0,s.D)((0,m.yy)({moduleId:e,retry:1})).pipe((0,g.V)(t))}};v=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[h.GV])],v)},3585:(e,t,i)=>{"use strict";i.d(t,{WB:()=>m});var o=i(86349),n=i.n(o),a=i(13581),r=i.n(a),s=i(35002),l=i(90674),d=i(59719);const c=/h5_t|h5_m|landing_page|webapp/,p=/embed/,u="header.custom";function g(){}g.send=r(),g.init=r(),g.config=r(),g.setDomain=r(),r(),r();const m=new class{constructor(e=i(81366).Z,t=[],o=!1,n={}){this.instance=e,this.missEventsCaches=t,this.initialized=o,this.baseConfig=n,this.commonEventParams={}}get commonParams(){return this.commonEventParams}config({conf:e,commonEventParams:t}={}){this.initialized||this.init(e);const i=n()(this.baseConfig,e);t&&(this.commonEventParams=Object.assign(Object.assign({},this.commonEventParams),t)),this.instance.config(i)}beconEvent(e,t={}){if(this.initialized)try{this.instance.beconEvent(e,Object.assign(Object.assign({},this.commonEventParams),t))}catch(e){}}event(e,t={}){if(this.initialized)try{this.instance.event(e,Object.assign(Object.assign({},this.commonEventParams),t)),this.missEventsCaches.length&&(this.missEventsCaches.forEach((e=>{this.instance.event(e[0],Object.assign(Object.assign({},this.commonEventParams),e[1]))})),this.missEventsCaches.length=0)}catch(e){}else this.missEventsCaches.push([e,t])}setDomain(e){this.instance.setDomain(e),this.instance.event("reactive_domain")}resetStayDuration(e,t,i){var o,n;null===(n=(o=this.instance).resetStayDuration)||void 0===n||n.call(o,e,t,i)}init(e){var t,i;const o=v();"microsoft-store"!==o["app-install-source"]&&"app-info://platform/microsoft-store"!==(null===document||void 0===document?void 0:document.referrer)||(o.source="msft");const{traffic_type:a,utm_source:r,utm_medium:s,utm_campaign:g,referer_video_id:m,utm_content:y,utm_term:f}=o,{lm:b="",refer:x="",source:k="",is_from_webapp:S="",referer_url:w="",_r:C=""}=function(e,t){const i={};return["refer","source","is_from_webapp","referer_url","lm","_r"].forEach((t=>{const o=e[t];Array.isArray(o)?i[t]=o[0]:i[t]=null!=o?o:void 0})),i}(o),j=(null!==(t=new RegExp(`${location.origin}/(@?\\w+)`).exec(document.referrer))&&void 0!==t?t:[])[1],T=function(e=""){let t={};if(URL)try{t=new URL(e)}catch(e){t={}}const{origin:i="",pathname:o=""}=t;return`${i}${o}`||e}(document.referrer),O=Boolean(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/))||navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1?"mobile":"pc",I=function(e){const t=(0,d.St)(l.hw,void 0),{refer:i,refererUrl:o,lm:n,device:a,trafficType:r,source:s,fromWebapp:c,siteOnePath:p,queryR:u}=e,g="embed"===p||"embed"===i,m="creator_embed"===i,h="amp"===p||/^amp_\w+/.test(o);return!t||g||h||m?"msft"===s?"msft":"twa"===s?"twa":"push"===s?"push":navigator.standalone||"pc"===a&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui)").matches||"mobile"===a&&window.matchMedia("(display-mode: standalone), (display-mode: minimal-ui), (display-mode: fullscreen)").matches?"pwa":"11"===n?"paid":g?"referral_embed":m?"referral_creator_embed":h?"referral_amp":"tiktok_browse"===i?"referral_tiktok_browse":/google|yahoo|yandex|bing|naver|duckduckgo/gi.test(r)?"organic":"1"===u?"reflow":"webapp"===s||c?"webapp_reflow":i||o||document.referrer?"referral":"direct":t}({refer:x,refererUrl:w,lm:b,trafficType:h(),device:O,source:k,fromWebapp:S,siteOnePath:j,queryR:C});(0,d.D9)(l.hw,I),function(e){_.forEach((t=>{e[t]&&(0,d.D9)(t,e[t])}))}(o);const P=function(e,t){var i,o,n,a,r,s;const c=(0,d.St)(l.lF,"");if(c&&"{}"!==c)return c;const p=v()||{},u={object_id:null!==(i=p.object_id)&&void 0!==i?i:p.referer_video_id,object_type:p.object_type,share_device:null!==(n=null!==(o=p.share_device)&&void 0!==o?o:p.sender_device)&&void 0!==n?n:"",share_web_id:null!==(r=null!==(a=p.share_web_id)&&void 0!==a?a:p.sender_web_id)&&void 0!==r?r:"",share_user_id:null!==(s=p.share_user_id)&&void 0!==s?s:""};"referral_amp"===e||"referral_embed"===e?(u.object_type="video",u.object_id=p.referer_video_id):"reflow"===e||"webapp_reflow"===e?(u.object_type=t.object_type,u.object_id=t.object_id):"push"===e&&(u.push_type=p.push_type),Object.keys(u).forEach((e=>{u[e]||delete u[e]}));const g=JSON.stringify(u);return(0,d.D9)(l.lF,g),g}(I,e),E={channel:"sg",device:O,launch_mode:I,region:"unknown",traffic_type:null!=a?a:h(),source:c.test(k)?"":k,referer_url:w?decodeURIComponent(w):(null==x?void 0:x.replace(p,""))||j||T||"direct",utm_source:null!=r?r:"",utm_medium:null!=s?s:"",utm_campaign:null!=g?g:"",utm_content:null!=y?y:"",utm_term:null!=f?f:"",referer_video_id:null!=m?m:"",extraData:P,user_is_login:!1},L=n()(E,e);e.id===l.CO?(this.baseConfig={user_type:12,[u]:Object.assign({traffic_type:L.traffic_type,utm_source:L.utm_source,source:L.source,launch_mode:L.launch_mode,device:L.device,region:L.region,utm_medium:L.utm_medium,utm_campaign:L.utm_campaign,utm_content:L.utm_content,utm_term:L.utm_term,referer_url:L.referer_url,referer_video_id:L.referer_video_id,session_id:L.session_id,extraData:L.extraData},L[u])},this.baseConfig.user_id&&(this.baseConfig.user_id=Number(L.user_id),this.baseConfig.user_is_login=!0)):(this.baseConfig={user_type:12,[u]:Object.assign({traffic_type:L.traffic_type,launch_mode:L.launch_mode,referer_url:L.referer_url},L[u])},this.commonEventParams={traffic_type:L.traffic_type,refer_source:L.referer_url}),this.instance.init({enable_ttwebid:!0,channel_domain:L.channel_domain,app_id:null!==(i=e.id)&&void 0!==i?i:l.CO,enable_stay_duration:!0,channel_type:"tcpy"}),this.initialized=!0,this.instance.start()}};function h(){var e;let t=(0,d.St)(l.Gb);if(!t){if(document.referrer){const i=/https?:\/\/.*(google|yahoo|yandex|bing|naver|wikipedia|facebook|instagram|youtube|twitter|tiktok|buzzfeed|debate|greenlemon|cloudfront|multimedios|huffpost|sdpnoticias|pinterest|bluradio|eluniversal|elcomercio|insider|medialeaks|intheknow|distractify|telediario|msn|duckduckgo|linkedin|discord|whatsapp|telegram|viber|reddit|twitch|snapchat|messenger).*\/?/;t=(null!==(e=document.referrer.match(i))&&void 0!==e?e:[])[1]||"others"}else t="no_referrer";(0,d.D9)(l.Gb,t)}return t}const _=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","referer_url","referer_video_id"];function v(){return"undefined"==typeof document?{}:(0,s.parse)(location.search,{arrayFormat:"bracket"})}},60083:(e,t,i)=>{"use strict";i.d(t,{G:()=>o,k:()=>n});const o=e=>null,n=(e,t,i)=>{}},81104:(e,t,i)=>{"use strict";i.d(t,{n:()=>r});var o=i(2480),n=i(30094),a=i(61080);const r=({msg:e,shouldShowMsg:t=!1,prevent:i=!0,callback:r})=>s=>s.pipe((0,a.K)((a=>(t&&console.error("Effect error: ",null!=e?e:a),null==r||r(),i?o.E:(0,n._)((()=>a))))))},59719:(e,t,i)=>{"use strict";i.d(t,{G6:()=>a,Y8:()=>r,Di:()=>s,Ii:()=>l,YT:()=>d,cx:()=>c,uf:()=>u,KZ:()=>g,YZ:()=>m,le:()=>h,D$:()=>_,e8:()=>v,St:()=>y,D9:()=>f,lD:()=>b,NS:()=>x,UW:()=>k,PF:()=>S});var o=i(13581),n=i.n(o);function a(){return navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")}function r(e=n(),t=n()){let i,o;function a(){i&&document[i]?e():t()}return"hidden"in document?(i="hidden",o="visibilitychange"):"msHidden"in document?(i="msHidden",o="msvisibilitychange"):"webkitHidden"in document&&(i="webkitHidden",o="webkitvisibilitychange"),"addEventListener"in document&&i&&o?(document.addEventListener(o,a,!1),document.removeEventListener.bind(document,o,a,!1)):n()}function s(e,t){let i={top:0,bottom:0,left:0,right:0};try{i=e.getBoundingClientRect()}catch(e){}let{top:o,bottom:n}=i;const{height:a}=i;return o-=t,n-=t,o=Math.abs(o),n<=0||o>=a?0:Number((n/a).toFixed(2))}function l(){return window.innerHeight<document.body.offsetHeight&&"hidden"!==document.body.style.overflow}function d(){return window.innerWidth-document.body.offsetWidth}function c(){const e=document.documentElement||document.body.parentNode||document.body;return void 0!==window.pageYOffset?window.pageYOffset:e.scrollTop}const p="webapp-scroll_invoke_by_click";function u(){return y(p)}function g(){b(p)}function m(e=0,t=100){const i=c(),o=Date.now(),n=()=>{window.pageYOffset.toFixed()===e.toFixed()&&(f(p,"done"),window.removeEventListener("scroll",n))};f(p,"start"),window.addEventListener("scroll",n),function n(){const a=Date.now()-o;if(a>=t)return void window.scrollTo({top:e,behavior:"smooth"});const r=(t-a)/t*(e-i)+i;window.scrollTo({top:r,behavior:"smooth"}),requestAnimationFrame(n)}()}function h(e,t=""){var i;try{return null!==(i=localStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function _(e,t){try{localStorage.setItem(e,t)}catch(e){}}function v(e){try{localStorage.removeItem(e)}catch(e){}}function y(e,t=""){var i;try{return null!==(i=sessionStorage.getItem(e))&&void 0!==i?i:t}catch(e){return t}}function f(e,t){try{sessionStorage.setItem(e,t)}catch(e){}}function b(e){try{sessionStorage.removeItem(e)}catch(e){}}const x=e=>{e.preventDefault(),e.stopPropagation()},k=e=>{e.stopPropagation()},S=e=>{e.preventDefault()}},81275:(e,t,i)=>{"use strict";function o(){return"undefined"==typeof window||"undefined"==typeof document}function n(){return!o()&&!window.SIGI_STATE}i.d(t,{y:()=>o,W:()=>n})},74509:(e,t,i)=>{"use strict";i.d(t,{y:()=>r});var o=i(31191),n=i(21296),a=i(3585);let r=class{constructor(){this.handleLiveEntranceShow=e=>{a.WB.event("livesdk_live_show",e)},this.handleLiveEntranceClick=e=>{a.WB.event("livesdk_rec_live_play",e)},this.handleLiveStreamEntranceClick=e=>{a.WB.event("livesdk_live_action",Object.assign({live_type:"third_party"},e))}}};r=(0,o.__decorate)([(0,n.G)()],r)},65768:(e,t,i)=>{"use strict";i.d(t,{y7:()=>d,t1:()=>c,It:()=>p,xy:()=>u,II:()=>g});var o=i(22538),n=i(28698),a=i(86987),r=i(17941),s=i(14656);const l="$abTestVersion";function d(){var e;const{$abTestVersion:t}=(0,r.m7)((0,a.L)((()=>[l]),[])),{pathname:i}=(0,o.TH)(),d=(0,s.T)(t,"xgplayer_preload_test"),c=null!==(e=(0,s.T)(t,"video_feed_redesign"))&&void 0!==e?e:"v1",p="v2"===c,u="v3"===c;return{xgplayerVid:d,isUseNativePlayer:"v2"!==d,isVideoFeedRedesignV1:!p&&!u,isVideoFeedRedesignV2:p,isVideoFeedRedesignV3:u,isInVideoFeedRedesign:(p||u)&&((0,n.oC)(i)||(0,n.FZ)(i))}}const c=()=>{var e,t;const{$abTestVersion:i}=null!==(e=(0,a.L)((()=>[l]),[]))&&void 0!==e?e:{},{pathname:r}=(0,o.TH)(),d=(0,n.ws)(r)||(0,n.Dj)(r)||(0,n.bf)(r)||(0,n.u7)(r),c=null!==(t=(0,s.T)(i,"increase_detail_page_cover_quantity_test"))&&void 0!==t?t:"v1";return{isDetailPageCoverQuantityTestGroup:("v2"===c||"v3"===c)&&d,ssrLimit:"v3"===c&&d?16:6}};function p(){var e;const{$abTestVersion:t}=(0,r.m7)((0,a.L)((()=>[l]),[])),i=null!==(e=(0,s.T)(t,"xgplayer_preload_test"))&&void 0!==e?e:"v1";return{isUseNativePlayer:"v2"!==i,xgplayerVid:i}}function u(){var e;const{$abTestVersion:t}=(0,r.m7)((0,a.L)((()=>[l]),[])),{pathname:i}=(0,o.TH)(),d=null!==(e=(0,s.x)(t,"non_login_comment_video_detail_page"))&&void 0!==e?e:"v1",c="v1"!==d;return{hasNewVideoDetailPage:c,hasFYPBack:"v1"!==d&&"v3"!==d,verticalVideoPanel:"v1"!==d&&"v4"!==d&&"v8"!==d&&"v9"!==d,hasBrowserMode:"v7"!==d,actionBarInPlayer:"v8"!==d,isInNewVideoDetail:c&&(0,n.cQ)(i)}}function g(){var e;const{$abTestVersion:t}=(0,r.m7)((0,a.L)((()=>[l]),[])),i=null!==(e=(0,s.T)(t,"add_transcript"))&&void 0!==e?e:"v1";return{isDownloadTranscript:"v1"!==i,isOriginVideoDetail:"v1"===i,isInActionBar:"v2"===i,isDefaultHidden:"v2"===i,isDefaultExpanded:"v2"===i||"v3"===i,isDefaultFolded:"v4"===i,isShowCloseIcon:"v2"===i}}},90674:(e,t,i)=>{"use strict";i.d(t,{OV:()=>o,AH:()=>n,uU:()=>a,S0:()=>r,Gb:()=>s,hw:()=>l,lF:()=>d,vN:()=>c,HW:()=>p,m8:()=>u,OB:()=>g,b7:()=>m,kU:()=>h,CO:()=>_,ES:()=>v,lK:()=>y,kg:()=>f,_T:()=>b,eQ:()=>x,jd:()=>k});const o="webapp-pwa-expanded",n="webapp-live-nav-click",a="webapp_google_one_tap_close_time",r="webapp_showed_profile_tip",s="webapp_original_traffic_type",l="webapp_launch_mode",d="webapp_extra_data",c="webapp_tiktok_open",p="webapp_session_id",u="webapp_tiktok_privious",g="webapp_open_edit_profile_modal_from",m="popup_profile_toast",h="Sorry, something wrong with the server, please try again.",_=1988,v=3e4,y=30,f=9,b=9,x=30,k=30},93990:(e,t,i)=>{"use strict";i.d(t,{Li:()=>o,Zy:()=>n});const o="tiktok_webapp",n="tiktok_webapp_login"},85795:(e,t,i)=>{"use strict";i.d(t,{s:()=>a,q:()=>r});var o=i(32735),n=i(66164);function a({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const r=(0,n.fB)((()=>{if(!e.current)return;const{offsetHeight:o,scrollTop:n,scrollHeight:a}=e.current;o+n+i>=a&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>{const{current:t}=e;return null==t||t.addEventListener("scroll",r),()=>{null==t||t.removeEventListener("scroll",r)}}),[e,e.current,r])}function r({elemRef:e,onHitBottom:t,bottomThreshold:i=10,throttle:a=100}){const r=(0,n.fB)((()=>{if(!e.current)return;const{bottom:o}=e.current.getBoundingClientRect();o-i<=window.innerHeight&&(null==t||t())}),[i,e,t],a);(0,o.useEffect)((()=>(window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)})),[r])}},52687:(e,t,i)=>{"use strict";i.d(t,{s:()=>a});var o=i(32735),n=i(66164);function a({threshold:e=1e3,onHitBottom:t,onPageBottom:i,shouldRunOnMount:a}){const r=(0,o.useRef)(null),s=(0,o.useRef)(0),l=(0,n.fB)((()=>{var o;if(!r)return;const n=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageYOffset?window.pageYOffset:n.scrollTop,l=Number(null===(o=r.current)||void 0===o?void 0:o.scrollHeight)-a-window.innerHeight;l-e<=0&&s.current<a&&(null==t||t()),l<=-60&&a-s.current>=18&&(null==i||i()),s.current=a}),[t,e,i],100);return(0,o.useEffect)((()=>{a&&l()}),[]),(0,o.useEffect)((()=>(window.addEventListener("scroll",l),()=>{window.removeEventListener("scroll",l)})),[l]),r}},45257:(e,t,i)=>{"use strict";i.d(t,{R:()=>l,J:()=>d});var o=i(13581),n=i.n(o),a=i(32735),r=i(59719);const s=(0,a.createContext)({counterRef:{current:0},scrollWidthRef:{current:0},subscribeRef:{current:[]},setCounter:n(),setScrollWidth:n(),subscribeModalChange:()=>n()});function l(){const e=(0,a.useRef)(0),t=(0,a.useRef)(0),i=(0,a.useRef)([]),o=(0,a.useCallback)((t=>{e.current=t}),[]),n=(0,a.useCallback)((e=>{t.current=e}),[]),r=(0,a.useCallback)((e=>(i.current.push(e),()=>{const t=i.current.indexOf(e);i.current.splice(t)})),[]),l=(0,a.useMemo)((()=>({counterRef:e,subscribeRef:i,scrollWidthRef:t,setCounter:o,setScrollWidth:n,subscribeModalChange:r})),[r,o,n]);return{GlobalModalProvider:s.Provider,value:l}}function d(){const{counterRef:e,setCounter:t,setScrollWidth:i,subscribeRef:o,scrollWidthRef:n,subscribeModalChange:l}=(0,a.useContext)(s),d=(0,a.useCallback)((e=>{o.current.forEach((t=>{t({hasModal:e,scrollWidth:n.current})}))}),[n,o]);return{showModal:(0,a.useCallback)((o=>{if(!(0,r.Ii)()&&!o)return;const{current:n}=e;if(t(n+1),0===n){const e=(0,r.YT)();i(e),document.body.style.paddingRight=`${e}px`,document.body.className+=" hidden",d(!0)}}),[e,d,t,i]),hideModal:(0,a.useCallback)((()=>{const{current:o}=e,n=Math.max(0,o-1);t(n),0===n&&(i(0),document.body.className=document.body.className.replace(/\s?hidden/g,""),document.body.style.paddingRight="0px",d(!1))}),[e,d,t,i]),subscribeModalChange:l}}},76427:(e,t,i)=>{"use strict";i.d(t,{o:()=>s,e:()=>l});var o=i(24246),n=i(32735),a=i(90938),r=i(88916);function s(){return(0,o.mp)(r.G,{selector:e=>{var t,i,o,n;return{domain:null!==(i=null===(t=e.appContext)||void 0===t?void 0:t.$domains.starling)&&void 0!==i?i:"https://starling-oversea.byteoversea.com",teaDomain:null!==(n=null===(o=e.appContext)||void 0===o?void 0:o.$domains.tea)&&void 0!==n?n:"https://maliva-mcs.byteoversea.com"}},dependencies:[]})}const l=(e="Webapp")=>{const t=(0,a.Q)(e),i=(0,n.useCallback)(((e,i)=>{const o=function(e){if(!e||isNaN(e))return"";const t=new Date(Number(e)),i=new Date,o=Math.max(i.getTime()-t.getTime(),0);return t.getFullYear()!==i.getFullYear()?`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`:~~(o/u)>7?`${t.getMonth()+1}-${t.getDate()}`:7==~~(o/u)?{num:1,unit:"unit_week"}:o>u?{num:~~(o/u),unit:"unit_day"}:o>p?{num:~~(o/p),unit:"unit_hr"}:o>c?{num:~~(o/c),unit:"unit_min"}:{num:1+~~(o/d),unit:"unit_sec"}}(e);if("string"==typeof o)return o;const{num:n,unit:a}=o;return i?`${n}${t(a)}`:t("time_ago",{num:n,unit:t(a)})}),[t]);return{t,timeTranslator:i}},d=1e3,c=6e4,p=36e5,u=24*p},74146:(e,t,i)=>{"use strict";i.d(t,{J:()=>n});var o=i(32735);const n=({upHandler:e,downHandler:t,confirmHandler:i})=>(0,o.useCallback)((o=>{const{keyCode:n}=o;switch(n){case 38:o.preventDefault(),e();break;case 40:o.preventDefault(),t();break;case 13:null==i||i()}}),[i,t,e])},66583:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var o=i(32735),n=i(22538),a=i(86987),r=i(17941);function s(){const e=(0,n.k6)(),{$config:t}=(0,r.m7)((0,a.L)((()=>["$config"]),[])),i=!1===t.isInWebappV1;return(0,o.useCallback)(((t,{href:o,state:n,shouldUsePush:a})=>{i?a&&(t.preventDefault(),e.push(o,n)):location.href=o}),[e,i])}},33586:(e,t,i)=>{"use strict";i.d(t,{A:()=>n,S:()=>a});const o={bid:"tiktok_webapp",plugins:{ajax:{ignoreUrls:[".byteoversea.com","tiktokv.com/v1/list","mcs-sg.tiktok.com","mcs-va.tiktok.com","mcs.us.tiktok.com"]},jsError:{ignoreErrors:["Blocked a frame with origin","__msg_type","vid_mate_check is not defined","ResizeObserver loop limit exceeded"]},resource:!0},sample:{sample_rate:1,sample_granularity:"event",include_users:[],rules:{resource:{enable:!0,sample_rate:.01,conditional_sample_rules:[]},resource_error:{enable:!0,sample_rate:.05,conditional_sample_rules:[]},performance_longtask:{enable:!0,sample_rate:.001,conditional_sample_rules:[]}}},env:"production",release:"1.0.1.2460"},n=(e,t={})=>`!function(e,n,r,t,d){if(window[n]&&window[n].config)return;var i=document.createElement(r),s=document.getElementsByTagName(r)[0];i.async=1,i.src=e;var a=s.parentNode;a&&a.insertBefore(i,s);var o=[];function c(){o.push(arguments[0])}window[n]={error:o,config:t,listener:c,sf:d},window.addEventListener("error",c,!0),window.addEventListener("unhandledrejection",c)}("${"t"===e?"https://sf16-short-sg.bytedapm.com/slardar/fe/sdk_lite/browser-nocookie.lite.0.7.7.sg.js":"https://sf16-short-va.bytedapm.com/slardar/fe/sdk_lite/browser-nocookie.lite.0.7.7.maliva.js"}","SlardarLite","script",${JSON.stringify(Object.assign(o,t))},0);`,a=["lcp","fp","fid","ttfb","mpfid"]},14127:(e,t,i)=>{"use strict";i.d(t,{q:()=>s});var o=i(32321),n=i(32735),a=i(35370);let r=!0;function s({pid:e}){const t=(0,o.fz)(a.n);(0,n.useEffect)((()=>{t.config({pid:e}),t.context({isLandingPage:r?1:0}),r=!1}),[e,t])}},35370:(e,t,i)=>{"use strict";i.d(t,{n:()=>c});var o=i(31191),n=i(21296),a=i(55685),r=i(3585),s=i(81275),l=i(93990),d=i(33586);let c=class{constructor(){if(this.cachePreBid="",!(0,s.y)())try{a.Z.on("beforeSend",(e=>{var t;try{if("performance"===e.ev_type&&("metrics"in e.payload?e.payload.metrics.forEach(this.collectSlardarMetricsToTea):this.collectSlardarMetricsToTea(e.payload)),"performance_timing"===e.ev_type){const{responseEnd:i,responseStart:o,domContentLoadedEventEnd:n,fetchStart:a,navigationStart:s}=null!==(t=e.payload.timing)&&void 0!==t?t:{},l=n-a,d=i-o,c=o-s;r.WB.event("slardar_perf_domready",{metric_duration:l&&l>0?l.toString():-1}),r.WB.event("slardar_perf_response",{metric_duration:d&&d>0?d.toString():-1}),r.WB.event("slardar_perf_ttfb",{metric_duration:c&&c>0?c.toString():-1})}}catch(e){}return e}))}catch(e){}}config(e){try{a.Z.config(e)}catch(e){}}toggleLoginSlardar(e){var t,i;e?(this.cachePreBid=null===(i=null===(t=window.SlardarLite)||void 0===t?void 0:t.config)||void 0===i?void 0:i.bid,this.config({bid:l.Zy})):this.config({bid:this.cachePreBid})}context(e){try{Object.entries(e).forEach((([e,t])=>{var i;return null===(i=a.Z.context)||void 0===i?void 0:i.set(e,t)}))}catch(e){}}captureMessage(e="",t,i={}){var o;try{null===(o=a.Z.captureException)||void 0===o||o.call(a.Z,new Error(e),t?Object.assign(Object.assign({},i),{level:t}):i)}catch(e){console.info("slardar: capture exception error")}}emitEvent(e,t,i){var o;try{null===(o=a.Z.sendEvent)||void 0===o||o.call(a.Z,{name:e,categories:i,metrics:t})}catch(e){}}reportI18nLoadedFailed(e,t){this.emitEvent("I18nLoadFailed",{count:1},{staringName:e,lang:t})}sendLog(e,t,i){var o;try{null===(o=a.Z.sendLog)||void 0===o||o.call(a.Z,{content:e,level:t,extra:i})}catch(e){}}sendPV(e){var t;try{null===(t=a.Z.sendPageview)||void 0===t||t.call(a.Z,e)}catch(e){}}collectSlardarMetricsToTea(e){if(e.isSupport||e.isPolyfill){const t=e.name.toLowerCase();d.S.includes(t)&&r.WB.event(`slardar_perf_${t}`,{metric_duration:e.value.toString()})}}};c=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[])],c)},90883:(e,t,i)=>{"use strict";i.d(t,{_:()=>r});var o=i(31191),n=i(21296),a=i(3585);let r=class{constructor(){this.handlePageView=e=>{a.WB.event("page_view",e)},this.handleToTop=()=>{a.WB.event("click_to_top")},this.handleLanguageChange=e=>{a.WB.event("change_langauage",{enter_method:"top_bar",to_language:e})},this.handleMobileLanguageChange=(e,t)=>{a.WB.event("change_langauage",{language:t,to_language:e})},this.handleLoginBannerShow=()=>{a.WB.event("login_banner_show")},this.handleLoginNotify=()=>{a.WB.event("login_notify",{enter_method:"click_banner"})},this.handleSignUp=()=>{a.WB.event("enter_sign_up",{enter_method:"click_banner"})},this.handleLoginBannerClose=()=>{a.WB.event("login_banner_close")},this.handleLoginModalHide=({enter_method:e="click_x"})=>{a.WB.event("login_notify_close",{enter_method:e})},this.handleLanguageClick=()=>{a.WB.event("click_change_language",{enter_method:"top_bar"})},this.handleLanguageSelect=({language:e})=>{a.WB.event("click_change_language",{language:e})},this.handleEnterPage=(e,t)=>{a.WB.event(e,t)},this.handleClickLogo=()=>{a.WB.event("click_logo")},this.handleClickNav=e=>{a.WB.event("click_navigation_bar",e)},this.handleClickHamburgerMenu=()=>{a.WB.event("click_hamburger_menu")},this.handleClickMusicCard=e=>{a.WB.event("click_music_play",e)},this.handleClickAnalyticsButton=()=>{a.WB.event("click_insight"),a.WB.event("enter_insight_detail",{widget_name:null,sub_widget:null})},this.handleClickAnalyticsVideoCover=()=>{a.WB.event("video_play",{enter_from:"insight_page",widget_name:"null",sub_widget:"null",enter_method:"video_card"})},this.handleProfileHoveShow=()=>{a.WB.event("livesdk_web_profile_hover_show")},this.handleNewUserGuideShow=e=>{a.WB.event("swipe_up_guide_show",e)},this.handleNewUserGuideClose=e=>{a.WB.event("swipe_up_guide_close",e)},this.handleClickCommentButton=e=>{a.WB.event("click_comment_button",e)},this.handleVideoLoginGuideShow=e=>{a.WB.event("video_login_guide_show",e)},this.handleVideoLoginGuideClick=e=>{a.WB.event("video_login_guide_click",e)},this.handleCloseCommentPanel=e=>{a.WB.event("close_comment_panel",e)},this.handleCommentLoginGuideShow=e=>{a.WB.event("comment_login_guide_show",e)},this.handleVideoLimitNotify=()=>{a.WB.event("video_limit_notify")}}};r=(0,o.__decorate)([(0,n.G)()],r)},40567:(e,t,i)=>{"use strict";i.d(t,{p:()=>r});var o=i(31191),n=i(21296),a=i(3585);let r=class{constructor(){this.handleSaveReport=e=>{a.WB.event("save_profile",e)},this.handleClickEditProfile=e=>{a.WB.event("click_edit_profile",e)},this.handleShowProfileTooltip=e=>{a.WB.event("edit_profile_notify_show",e)},this.handleCancelEditProfile=e=>{a.WB.event("cancel_edit_profile",e)},this.handleCloseProfileTooltip=e=>{a.WB.event("cancel_edit_profile_show",e)}}};r=(0,o.__decorate)([(0,n.G)()],r)},53551:(e,t,i)=>{"use strict";i.d(t,{M3:()=>b,k0:()=>x,mn:()=>k,u8:()=>S,nV:()=>w});var o=i(31191),n=i(32321),a=i(35002),r=i(32735),s=i(22538),l=i(3585),d=i(59719),c=i(81275),p=i(28698),u=i(14656),g=i(86987),m=i(90674),h=i(24489),_=i(90883),v=i(79006),y=i(73895),f=i(48214);function b(){var e;const{$abTestVersion:t,$user:i}=null!==(e=(0,g.L)((()=>["$abTestVersion","$user"]),[]))&&void 0!==e?e:{},o=(0,u.x)(t,"webapp_version"),n=(0,u.x)(t,"webapp_version_non_loggedin"),a="v2"===o||"v2"===n||!o&&!n;(0,r.useEffect)((()=>{if(!a){const e=i?"webapp_server_reorg_login":"webapp_server_reorg_non_login";l.WB.event("ab_test_traffic_cross",{content:e})}}),[])}function x(e,t,i=[]){const n=(0,g.L)((()=>["$region","$user","$appId","$sgOpen","$wid","$domains"]),[]),{$region:a="",$user:s,$appId:p,$sgOpen:u,$wid:h="",$domains:_}=null!=n?n:{},v=(0,r.useCallback)((t=>{var i;const{seo_ab_version:n}=t,r=(0,o.__rest)(t,["seo_ab_version"]);if((0,d.St)(m.vN))r.is_landing_page=0;else{const{page_name:t}=e();r.is_landing_page=1,(0,d.D9)(m.vN,t)}return r.userAgent=navigator.userAgent,r.previous_page=function(e){var t;let i;try{i=JSON.parse(null!==(t=(0,d.St)(m.m8))&&void 0!==t?t:"null")||{}}catch(e){i={}}return location.href!==i.href||e!==i.pageName?((0,d.D9)(m.m8,JSON.stringify({href:location.href,pageName:e,twoPrev:i.pageName,twoPrevHref:i.href})),i.pageName):i.twoPrev}(r.page_name),r.region=a,r.page_url=null!==(i=r.page_url)&&void 0!==i?i:window.location.href,r}),[a,e]);(0,r.useEffect)((()=>{var t;const o=e();if(!o||!n)return;const{page_name:r,object_id:g,object_type:y}=o;let f=(0,d.St)(m.HW);f||(f=h+Date.now().toString(),(0,d.D9)("webapp_session_id",f));const b=v(o),x=i.reduce(((e,t)=>(e[t]=b[t],e)),{}),k={is_downgrade:(0,c.W)(),channel_domain:_.tea,id:m.CO,channel:1180===p||u?"sg":"va",region:a,session_id:f,object_id:g,object_type:y,user_id:null!==(t=null==s?void 0:s.uid)&&void 0!==t?t:"",user_is_login:Boolean(s),evtParams:Object.assign({page_name:r},x),"header.custom":{is_kids_mode:(null==s?void 0:s.ftcUser)?1:0,landing_page:(0,d.St)(m.vN)||r,user_is_login:s?1:0,region:a}};l.WB.config({conf:k,commonEventParams:b})}),[n,...t])}function k({seo_ab_version:e,eParams:t}){var i;const l=(0,n.fz)(_._),{$botType:d,$isMobile:c}=null!==(i=(0,g.L)((()=>["$botType","$isMobile"]),[]))&&void 0!==i?i:{},{search:u,pathname:m}=(0,s.TH)(),h=(0,a.parse)(u);return(0,r.useCallback)((()=>{const i=t||{},{is_from_webapp:n}=i,a=(0,o.__rest)(i,["is_from_webapp"]),r=h.sender_web_id?{sender_device:h.sender_device,sender_web_id:h.sender_web_id}:{},s=c||(0,p.oC)(m)||(u=`#${location.pathname}`,/^#\/@.+\/video\/\d+$/.test(u))||location.search.indexOf("item_id")>-1?Object.assign({is_from_webapp:n||["v1","v2","v3"].indexOf(h.is_from_webapp)>-1?h.is_from_webapp:"0"},r):{};var u;const g=Object.assign(Object.assign({seo_ab_version:e,bot_type:null!=d?d:"others",keyword:h.keyword,sub_keyword:h.sub_keyword},a),s);l.handlePageView(g)}),[t,h.sender_web_id,h.sender_device,h.is_from_webapp,c,h.keyword,h.sub_keyword,m,e,d,l])}function S(e){const{pathname:t}=(0,s.TH)(),i=(0,n.fz)(v.KF);(0,r.useEffect)((()=>{const e=(0,h.BB)(t);i.updateCurrentPage(e),i.setCurrentPageReport(!1),i.resetExist(),i.reportVideoAdditionStart({startTime:Date.now(),situation:"addition_first_load"})}),[i,e,t])}function w(){const e=(0,n.fz)(y.e),t=(0,n.fz)(f.k);(0,r.useEffect)((()=>{e.reset(),t.resetState()}),[e,t])}},41107:(e,t,i)=>{"use strict";i.d(t,{R:()=>r});var o=i(31191),n=i(21296),a=i(3585);let r=class{handleEnterChatList(e){a.WB.event("enter_chat_list",{num:e})}handleClickReport(e){var{videoId:t,authorId:i}=e,n=(0,o.__rest)(e,["videoId","authorId"]);a.WB.event("click_report",Object.assign({group_id:t,author_id:i},n))}handleSendMessage({relation_tag:e,conversation_id:t,message_type:i,chat_type:o}){a.WB.event("send_message",{relation_tag:e,conversation_id:t,message_type:i,chat_type:o})}handleFailSendMessage({relation_tag:e,conversation_id:t,message_type:i,chat_type:o,error_code:n}){a.WB.event("fail_send_message",{relation_tag:e,conversation_id:t,message_type:i,chat_type:o,error_code:n})}handleShareHeadShow({rank_index:e,is_self:t,to_user_id:i,user_type:o}){a.WB.event("share_head_show",{rank_index:e,is_self:t,to_user_id:i,user_type:o})}handleShareVideoToChat({platform:e,is_self:t,group_id:i,author_id:o,is_with_text:n,chat_cnt:r,to_user_id:s}){a.WB.event("share_video_to_chat",{platform:e,is_self:t,group_id:i,author_id:o,is_with_text:n,chat_cnt:r,to_user_id:s})}handleSearchContact(){a.WB.event("search_contact",{action_type:"share"})}handleShareVideo({platform:e,enter_method:t,is_self:i,group_id:o,author_id:n,to_user_id:r}){a.WB.event("share_video",{platform:e,enter_method:t,is_self:i,group_id:o,author_id:n,to_user_id:r})}};r=(0,o.__decorate)([(0,n.G)()],r)},73085:(e,t,i)=>{"use strict";i.d(t,{x:()=>r});var o=i(31191),n=i(21296),a=i(3585);let r=class{constructor(){this.handleSugClick=e=>{a.WB.event("trending_words_click",e)},this.handleSugImpression=e=>{a.WB.event("trending_words_show",e)}}handleSearchEntry(){a.WB.event("enter_search")}handleSearchImpression(e){a.WB.event("search_result_show",Object.assign(Object.assign({},e),{token_type:"person"}))}handleSearchVideoImpression(e){a.WB.event("search_result_show_video",Object.assign({},e))}handleSearch(e){var{enter_method:t}=e,i=(0,o.__rest)(e,["enter_method"]);a.WB.event("search",Object.assign(Object.assign({},i),{enter_method:null!=t?t:"",is_success:1}))}handleSearchResultClick(e){a.WB.event("search_result_click",Object.assign({},e))}handleSearchSessionFinish(e){a.WB.event("search_session_finish",Object.assign({},e))}};r=(0,o.__decorate)([(0,n.G)()],r)},79006:(e,t,i)=>{"use strict";i.d(t,{KF:()=>r});var o=i(31191),n=i(21296),a=i(3585);let r=class{constructor(){this.additionQueue=[],this.existedQueue=[],this.firstLoadReport=!1,this.firstFrameReport=!1,this.currentPageReport=!1,this.currentPage="",this.reportedCanPlayVideoSource="",this.reportedPlayingVideoSource="",this.reportedScrollPrevIndex=-1,this.reportedScrollCurrIndex=-1,this.slideTransitionExsitedQueue=[],this.emit=(e,t)=>{try{a.WB.event(e,t)}catch(e){console.error(`Video Scene Evnet Tea Report Error: ${e}`)}},this.reportVideoPageFCP=e=>{this.emit("page_content_paint",e)},this.reportVideoFirstScreen=e=>{const{endTime:t,videoSource:i}=e;if(!this.firstLoadReport){if(this.firstLoadReport=!0,this.currentPageReport=!0,!this.checkIfCanReportFirstPlay())return;const e=performance.timeOrigin||performance.timing.navigationStart,o={duration:Math.round(t-e),to_page:this.currentPage};this.emit("first_screen_video",o),this.resetAddition(),this.setReportVideoSource(i,0)}},this.reportVideoFirstFrame=e=>{if(e&&!this.firstFrameReport){if(this.firstFrameReport=!0,!this.checkIfCanReportFirstFrame())return;const e=performance.timeOrigin||performance.timing.navigationStart,t={duration:Math.round(Date.now()-e),to_page:this.currentPage};this.emit("first_frame_video",t)}},this.reportVideoAddition=e=>{const t=this.additionQueue[0],{endTime:i,videoSource:o}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(o,0))return;const{startTime:n=0,situation:a="",from_page:r=""}=t,s=this.currentPage;if(!this.currentPageReport&&r!==s){this.currentPageReport=!0;const e={situation:a,from_page:r,to_page:s,duration:i-n};this.emit("interact_additional_video_end",e),this.resetAddition(),this.setReportVideoSource(o,0)}},this.reportVideoInteract=e=>{const t=this.existedQueue[0]||{},{startTime:i=0,situation:o="",from_page:n=""}=t,{endTime:a,videoSource:r}=e;if(this.isEmptyEvent(t)||this.checkIfHasReported(r,1)&&"open_browser_mode"!==o)return;const s={situation:o,from_page:n,to_page:this.currentPage,duration:a-i};this.emit("interact_existed_video_end",s),this.resetExist(),this.setReportVideoSource(r,1)},this.reportVideoAdditionStart=e=>{const{situation:t,startTime:i}=e;this.currentPageReport=!1,this.additionQueue=[{startTime:i,situation:t,from_page:this.currentPage}]},this.reportVideoInteractStart=e=>{var t;const i=this.existedQueue[0];if(!this.isEmptyEvent(i)){const{situation:o=""}=i;if((null!==(t=e.situation)&&void 0!==t?t:"").indexOf("one_column_scroll")>-1&&o.indexOf("browser_mode")>-1)return}const{startTime:o,situation:n,currVideoIndex:a,prevVideoIndex:r,enterMethod:s}=e;if(a&&a>0&&a===this.reportedScrollCurrIndex&&r===this.reportedScrollPrevIndex)return;const l=this.currentPage;this.existedQueue=[{startTime:o,situation:n,from_page:l}];const d={situation:n,from_page:this.currentPage,enter_method:s};this.emit("interact_existed_video_start",d),this.reportedScrollCurrIndex=null!=a?a:-1,this.reportedScrollPrevIndex=null!=r?r:-1},this.reportSlideTransitionStart=e=>{const{from_page:t,start_time:i,current_index:o}=e;this.slideTransitionExsitedQueue=[{from_page:t,start_time:i,current_index:o}]},this.reportSlideTransitionEnd=e=>{const t=this.slideTransitionExsitedQueue[0]||{},{from_page:i,start_time:o,current_index:n}=t,{from_page:a,end_time:r,current_index:s}=e;if(this.isEmptyEvent(t)||a!==i||s===n)return;const l={from_page:a,situation:s-n>0?"swiper_slide_next":"swiper_slide_prev",duration:r-o};this.emit("swiper_slide_transition_end",l),this.slideTransitionExsitedQueue=[]},this.updateCurrentPage=e=>{this.currentPage=e},this.setReportVideoSource=(e,t)=>{0===t?this.reportedCanPlayVideoSource=e:this.reportedPlayingVideoSource=e},this.setCurrentPageReport=e=>{this.currentPageReport=e},this.getCurrentPageReport=()=>this.currentPageReport,this.getFirstLoadReport=()=>this.firstLoadReport,this.getFirstFrameReport=()=>this.firstFrameReport,this.isEmptyEvent=e=>!e||0===Object.keys(e).length,this.checkIfCanReportFirstPlay=()=>s.indexOf(this.currentPage)>-1&&performance,this.checkIfCanReportFirstFrame=()=>l.indexOf(this.currentPage)>-1&&performance,this.checkIfHasReported=(e,t)=>(0===t?this.reportedCanPlayVideoSource:this.reportedPlayingVideoSource)===e,this.resetAddition=()=>this.additionQueue=[],this.resetExist=()=>this.existedQueue=[]}};r=(0,o.__decorate)([(0,n.G)()],r);const s=["homepage_hot","homepage_hot_h5","homepage_following","others_homepage","challenge","single_song","video_detail","video_detail_h5"],l=["homepage_hot","homepage_follow","others_homepage","challenge","video_detail","single_song"]},92007:(e,t,i)=>{"use strict";i.d(t,{W:()=>r});var o=i(31191),n=i(21296),a=i(3585);let r=class{constructor(){this.handleRemovePhotosensitiveStatus=e=>{a.WB.event("tns_remove_photosensitive_status",{status:e})},this.handleShowMaskLayer=e=>{a.WB.event("tns_show_mask_layer",e)},this.handleShowPhotosensitiveRemoved=e=>{a.WB.event("tns_show_photosensitive_removed",e)},this.handleMaskLayerClickSkip=e=>{a.WB.event("tns_mask_layer_click_skip",e)},this.handleMaskLayerClickWatch=e=>{a.WB.event("tns_mask_layer_click_watch",e)}}};r=(0,o.__decorate)([(0,n.G)()],r)},73895:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var o=i(31191),n=i(21296),a=i(35002),r=i(3585);let s=class{constructor(){this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1,this.isPause=!1,this.startPlayTimestamp=0,this.enterMethod="",this.prevReportId="",this.videoFocusTime=0,this.isThreeColumnAuto=!1,this.isVideoDetail=!1,this.setEnterMethod=e=>{this.enterMethod=e},this.setIsThreeColumnAuto=e=>{this.isThreeColumnAuto=e},this.setIsVideoDetail=e=>{this.isVideoDetail=e},this.reset=()=>{this.isFirstPlayReported=!1,this.isFirstPlayEndReported=!1},this.updateVideoFocusTime=e=>{const{isPause:t,startPlayTimestamp:i}=this,{ttWebappFocusTime:o}=window;!t&&o&&(this.videoFocusTime+=o>i?e-o:e-i)},this.handlePlayTime=e=>{this.playTimeEvent(e)},this.handleTimeUpdate=(e,t=!1)=>{const{isFirstPlayReported:i,startPlayTimestamp:o,enterMethod:n}=this,{itemId:a,authorId:s,isScheduled:l,autoplayStatus:d=0,currentTime:c,searchId:p="",searchKeyword:u,searchResultId:g,questionId:m,playMode:h,isMute:_=!1}=e;if(!c)return;let v=null;if(!i){const e=Object.assign({group_id:a,author_id:s,play_mode:this.getPlayModeForTea(h),autoplay_status:d,enter_method:n,search_id:p,search_keyword:u,search_result_id:g,question_id:m},this.getExtraParams()),i=l?"schedule_video_play":1===h?"preview_video_play":"video_play",o=t&&this.prevReportId===a;"video_play"===i&&(e.is_mute=_?"1":"0"),o||(v=i,r.WB.event(i,e),this.isFirstPlayReported=!0,this.prevReportId=a)}return 0===o&&this.setStartPlay(),this.isPause=!1,v},this.handleEnded=e=>{this.playFinishEvent(e)},this.handlePause=e=>{const{currentTime:t,duration:i}=e;i!==t&&this.playTimeEvent(e),this.isPause=!0},this.handleWaiting=e=>{const{currentTime:t,duration:i}=e;0!==t&&t!==i&&this.playTimeEvent(e)},this.handleError=e=>{this.playTimeEvent(e)},this.triggerPause=e=>{if(!this.isPause){const{enter_method:t,playMode:i}=e,o={enter_method:t,play_mode:this.getPlayModeForTea(i)};r.WB.event("video_pause",o)}this.isPause=!0}}getPlayModeForTea(e){let t="others";switch(e){case 2:t="browser_mode";break;case 0:t=this.isVideoDetail?"others":"one_column";break;case 1:t=this.isThreeColumnAuto?"list_auto":"list_mouse_trigger";break;case 3:t="large_video_mode";break;case 4:t="video_detail"}return t}setStartPlay(){this.startPlayTimestamp=Date.now(),this.videoFocusTime=0}playFinishEvent(e){const{isFirstPlayEndReported:t,enterMethod:i}=this,{itemId:o,authorId:n,isScheduled:a,autoplayStatus:s=0,searchId:l="",searchKeyword:d,searchResultId:c,playMode:p}=e;if(!t){const e=Object.assign({group_id:o,author_id:n,play_mode:this.getPlayModeForTea(p),autoplay_status:s,enter_method:i,search_id:l,search_keyword:d,search_result_id:c},this.getExtraParams()),t=a?"schedule_video_play_finish":1===p?"preview_video_play_finish":"video_play_finish";r.WB.event(t,e),this.isFirstPlayEndReported=!0}}playTimeEvent(e){const{startPlayTimestamp:t,enterMethod:i,videoFocusTime:o}=this,{itemId:n,authorId:a,isScheduled:s,autoplayStatus:l=0,searchId:d="",searchKeyword:c,searchResultId:p,questionId:u,playMode:g}=e,{ttWebappFocusTime:m,ttWebappBlurTime:h}=window;let _=0;const v=Date.now();if(m?_=m<t?v-t:o+v-m:h&&(_=h>t?o:0),0!==t){const e=Object.assign({group_id:n,author_id:a,play_mode:this.getPlayModeForTea(g),autoplay_status:l,duration:v-t,enter_method:i,search_id:d,search_keyword:c,search_result_id:p,question_id:u,focus_time:_},this.getExtraParams()),o=s?"schedule_video_play_time":1===g?"preview_play_time":"play_time";r.WB.event(o,e),this.startPlayTimestamp=0}}getExtraParams(){var e;const{href:t,search:i}=window.location;return{is_from_webapp:null!==(e=(0,a.parse)(i).is_from_webapp)&&void 0!==e?e:"0",page_url:t}}};s=(0,o.__decorate)([(0,n.G)()],s)},48214:(e,t,i)=>{"use strict";i.d(t,{k:()=>p});var o=i(31191),n=i(21296),a=i(35002),r=i(3585);const s={isPause:null,isVideoLoaded:!1,isFirstPlayReported:!1,isFirstPlayEndReported:!1,isInPlaybackStage:!1,triggerPlayTimestamp:0,firstTriggerPlayTimestamp:0,loadStartTimestamp:0,blockStartTimestamp:0,blockStartProgress:0,playingStartTimestamp:0,pauseStartTimestamp:0,totalPauseDuration:0},l={currentSrc:"",duration:0,error:null,currentTime:0,readyState:0,buffered:{start:()=>0,end:()=>0,length:0}},d={0:"one_column",1:"three_column",2:"browser_mode",3:"large_video_mode",4:"video_detail"},c=e=>{var t;return e?null!==(t=(0,a.parse)(e).lr)&&void 0!==t?t:"none":"unknown"};let p=class{constructor(){this.innerStates=Object.assign({},s),this.innerVideoAttributeStates=Object.assign({},l),this.isFirstFrameReported=!1,this.currentVideoId="",this.setCurrentVideoId=e=>{this.currentVideoId=e},this.resetState=()=>{this.innerStates=Object.assign({},s),this.currentVideoId="",this.isFirstFrameReported=!1,this.innerVideoAttributeStates=Object.assign({},l)},this.resetStateWhenSlideChange=()=>{this.innerStates=Object.assign({},s),this.innerVideoAttributeStates=Object.assign({},l)},this.reset=(e,t)=>{this.currentVideoId!==e&&(this.playEndEvent(t),this.blockEndEvent(Object.assign(Object.assign({},t),{endType:0})),this.innerStates=Object.assign({},s))},this.resetWhenSlideChange=e=>{this.playEndEvent(Object.assign(Object.assign({},e),this.innerVideoAttributeStates)),this.blockEndEvent(Object.assign(Object.assign(Object.assign({},e),{endType:0}),this.innerVideoAttributeStates)),this.innerVideoAttributeStates=Object.assign({},l)},this.handlePlay=()=>{this.innerStates.triggerPlayTimestamp=Date.now();const{firstTriggerPlayTimestamp:e}=this.innerStates;e||(this.innerStates.firstTriggerPlayTimestamp=Date.now())},this.handlePause=e=>{const{id:t}=e,{playingStartTimestamp:i,isPause:o}=this.innerStates;t&&i&&!o&&(this.innerStates.pauseStartTimestamp=Date.now()),this.innerStates.isPause=!0},this.handleTimeUpdate=e=>{var t;const{triggerPlayTimestamp:i,isFirstPlayReported:o,pauseStartTimestamp:n}=this.innerStates,{id:a,authorId:s,playMode:l,currentTime:p=0,duration:u=0,bitrate:g,format:m,encodedType:h,videoQuality:_,encodeUserTag:v,codecType:y,definition:f,buffered:b,currentSrc:x,error:k,readyState:S,forFriend:w=!1,secret:C=!1,preload_time:j=-1,preload_size:T=-1,video_type:O="mp4",player_type:I="defaultPlayer"}=e;if(this.innerVideoAttributeStates.duration=u,this.innerVideoAttributeStates.currentTime=p,this.innerVideoAttributeStates.buffered=b,this.innerVideoAttributeStates.currentSrc=x,this.innerVideoAttributeStates.error=k,this.innerVideoAttributeStates.readyState=S,!(p<=0)){if(!o&&0!==i){const e=Date.now()-i-1e3*p,o={group_id:a,author_id:s,play_mode:null!==(t=d[l])&&void 0!==t?t:"others",duration:Math.round(e),video_duration:Math.round(1e3*u),video_bitrate:g,video_format:m,codec_format:y,encoded_type:h,bitrate_quality:_,video_quality:_&&f?`${_}_${f}`:"",video_encodeUserTag:v,is_bytevc1:(null!=y?y:"").indexOf("h265")>-1?1:0,logo_type:c(x),item_status:w?2:C?1:0,preload_time:j,preload_size:T,video_type:O,player_type:I};r.WB.event("video_play_quality",o),this.innerStates.isFirstPlayReported=!0,this.innerStates.playingStartTimestamp=Date.now()}if(!this.isFirstFrameReported&&performance&&this.firstFrameEvent(),this.innerStates.isPause){const e=n?Date.now()-n:0;this.innerStates.totalPauseDuration+=e}this.blockEndEvent(Object.assign(Object.assign({},e),{endType:1})),this.innerStates.isInPlaybackStage=!0,this.innerStates.isPause=!1}},this.handleEnded=()=>{this.innerStates.isInPlaybackStage=!1},this.handleError=e=>{var t;const{isVideoLoaded:i,isInPlaybackStage:o}=this.innerStates,{id:n,authorId:a,playMode:s,error:l,currentSrc:p="",bitrate:u=-1,format:g="",encodedType:m="",videoQuality:h="",encodeUserTag:_="",codecType:v="",forFriend:y=!1,secret:f=!1}=e,{code:b=0,message:x=""}=null!=l?l:{};if(i&&o){const e={group_id:n,author_id:a,play_mode:null!==(t=d[s])&&void 0!==t?t:"others",error_code:String(b),error_info:x,play_url:p,video_bitrate:u,video_format:g,codec_format:v,encoded_type:m,bitrate_quality:h,video_encodeUserTag:_,is_bytevc1:v.indexOf("h265")>-1?1:0,logo_type:c(p),item_status:y?2:f?1:0};r.WB.event("video_play_failed",e)}else this.responseEvent(e)},this.handleWaiting=e=>{var t;const{id:i,authorId:o,playMode:n,currentTime:a=0,duration:s=0,currentSrc:l,forFriend:p=!1,secret:u=!1}=e,{isInPlaybackStage:g,blockStartTimestamp:m,isPause:h}=this.innerStates;if(0!==a&&a!==s&&g&&!1===h&&0===m){const e={group_id:i,author_id:o,play_mode:null!==(t=d[n])&&void 0!==t?t:"others",logo_type:c(l),item_status:p?2:u?1:0};r.WB.event("video_block_start",e),this.innerStates.blockStartTimestamp=Date.now(),this.innerStates.blockStartProgress=1e3*a}},this.handleLoadStart=e=>{var t;const{id:i,authorId:o,playMode:n}=e,a={group_id:i,author_id:o,play_mode:null!==(t=d[n])&&void 0!==t?t:"others"};r.WB.event("video_request",a),this.innerStates.loadStartTimestamp=Date.now()},this.handleLoadedData=e=>{this.responseEvent(e),this.innerStates.isVideoLoaded=!0},this.videoFeedRequestEvent=()=>{r.WB.event("feed_request",{request_method:"load_more"})},this.videoFeedResponseEvent=e=>{const{duration:t,list_length:i}=e,o={duration:t,is_success:i?"1":"0",request_method:"load_more",video_num:i};r.WB.event("feed_request_response",o)},this.firstFrameEvent=()=>{const e=performance.timeOrigin,t={feed_total:e?Math.round(Date.now()-e):-1};r.WB.event("first_feed_show_time",t),this.isFirstFrameReported=!0}}getCacheSize(e){return void 0!==e&&e.length>0?1e3*(e.end(0)-e.start(0)):0}blockEndEvent(e){var t;const{id:i,authorId:o,playMode:n,currentTime:a=0,bitrate:s,format:l,encodedType:p,videoQuality:u,encodeUserTag:g,codecType:m,endType:h,definition:_,currentSrc:v,forFriend:y=!1,secret:f=!1,video_type:b="mp4",should_filter:x=!1,player_type:k="defaultPlayer"}=e,{blockStartTimestamp:S,blockStartProgress:w,isInPlaybackStage:C,isVideoLoaded:j}=this.innerStates;if(j&&C&&0!==S&&(1e3*a!==w||0===h)){const e=Date.now()-S-(1e3*a-w),C={group_id:i,author_id:o,play_mode:null!==(t=d[n])&&void 0!==t?t:"others",duration:Math.round(e),video_bitrate:s,video_format:l,codec_format:m,encoded_type:p,bitrate_quality:u,video_quality:u&&_?`${u}_${_}`:"",video_encodeUserTag:g,is_bytevc1:(null!=m?m:"").indexOf("h265")>-1?1:0,end_type:h,position:Math.round(1e3*a),logo_type:c(v),item_status:y?2:f?1:0,video_type:b,player_type:k,should_filter:x?"1":"0"};r.WB.event("video_block",C),this.innerStates.blockStartTimestamp=0}}responseEvent(e){var t;const{loadStartTimestamp:i}=this.innerStates,{id:o,authorId:n,playMode:a,error:s,videoQuality:l,definition:p,currentSrc:u,forFriend:g=!1,secret:m=!1}=e,h=Date.now()-i,_={group_id:o,author_id:n,play_mode:null!==(t=d[a])&&void 0!==t?t:"others",error_code:String(null==s?void 0:s.code),duration:h,is_success:s?"0":"1",video_quality:l&&p?`${l}_${p}`:"",logo_type:c(u),item_status:g?2:m?1:0};r.WB.event("video_request_response",_)}playEndEvent(e){var t;const{isFirstPlayReported:i,isFirstPlayEndReported:o,playingStartTimestamp:n,totalPauseDuration:a,firstTriggerPlayTimestamp:s}=this.innerStates;if(!o){const{id:o,authorId:l,playMode:p,buffered:u,duration:g=0,currentTime:m=0,readyState:h,bitrate:_,videoQuality:v,definition:y,currentSrc:f,forFriend:b=!1,secret:x=!1,preload_time:k=-1,preload_size:S=-1}=e,w=n?Date.now()-n-a:0,C={group_id:o,author_id:l,play_mode:null!==(t=d[p])&&void 0!==t?t:"others",is_success:i?"1":"0",video_duration:isNaN(g)?0:Math.round(1e3*g),play_duration:Math.round(1e3*m),buffering:(null!=h?h:0)<=2?1:0,duration:w>=0?Math.round(w):0,wait_duration:n>0?null:Date.now()-s,cur_cache_duration:Math.round(this.getCacheSize(u)),video_bitrate:null!=_?_:-1,video_quality:v&&y?`${v}_${y}`:"",local_time_ms:Date.now(),logo_type:c(f),item_status:b?2:x?1:0,preload_time:k,preload_size:S};r.WB.event("video_play_end",C),this.innerStates.isFirstPlayEndReported=!0}}};p=(0,o.__decorate)([(0,n.G)()],p)},99915:(e,t,i)=>{"use strict";i.d(t,{B:()=>s});var o=i(31191),n=i(21296),a=i(3585);const r={0:"one-column",1:"three-column",2:"browser-mode",3:"swiper-mode",4:"video-detail"};let s=class{handleListMore(e){a.WB.event("load_more",e)}handleVideoChange(e){var{direction:t}=e,i=(0,o.__rest)(e,["direction"]);const n="next"===t?"video_slide_up":"video_slide_down";a.WB.event(n,i)}handleHotVideoChange(e){var{direction:t}=e,i=(0,o.__rest)(e,["direction"]);const n="next"===t?"homepage_hot_slide_up":"homepage_hot_slide_down";a.WB.event(n,i)}handleEnterBrowser(e){var t;a.WB.event("feed_enter",Object.assign(Object.assign({},e),{from_mode:null!==(t=e.from_mode)&&void 0!==t?t:0}))}handleSeekBarShow(e){a.WB.event("show_progress_bar",Object.assign({show_method:"preview"},e))}handleSeekBarClick(e){var{fromPercent:t,toPercent:i,video_length:n}=e,r=(0,o.__rest)(e,["fromPercent","toPercent","video_length"]);const s=i>t?"front":"back",l=n*t,d=n*i;a.WB.event("click_progress_bar",Object.assign({action_type:s,seek_from:l,seek_to:d,video_length:n},r))}handleSeekBarAutoShow(e){a.WB.event("show_progress_bar",Object.assign({show_method:"preview"},e))}handleLikeVideoResult(e){var{actionType:t}=e,i=(0,o.__rest)(e,["actionType"]);const n=1===t?"like":"like_cancel";a.WB.event(n,i)}handleCommentShow(e,t){a.WB.event("click_comment_button",{author_id:e,group_id:t})}handleSelectPrivacySettingVideo(e){a.WB.event("select_privacy_setting_video",e)}handlePrivateSetting(e){a.WB.event("privacy_setting_allow_interaction",e)}handleClickDeleteVideo(e){a.WB.event("click_delete_video",e)}handleVideoDelete(e){a.WB.event("action_on_delete_video",{action:e})}handleScheduleConfirm(e){a.WB.event("click_delete_scheduled_video",{group_id:e})}handleScheduleDelete(e){a.WB.event("action_on_delete_scheduled_video",{action:e})}handleDropdownCardShow(){a.WB.event("dropdown_card_show")}handleFollowUser(e){var{actionType:t}=e,i=(0,o.__rest)(e,["actionType"]);const n=0===t?"unfollow":"follow";a.WB.event(n,i)}handleSwitchSound(e){const{muted:t,playMode:i,enter_method:o="click",volume_from:n,volume_to:s}=e;void 0!==n&&void 0!==s?a.WB.event("switch_sound",{sound_mode:s>n?"adjust_up":"adjust_down",play_mode:r[i],enter_method:o,volume_from:n,volume_to:s}):a.WB.event("switch_sound",{sound_mode:t?"off":"on",play_mode:r[i],enter_method:o})}};s=(0,o.__decorate)([(0,n.G)()],s)},14656:(e,t,i)=>{"use strict";i.d(t,{x:()=>a,T:()=>r});var o=i(3585);const n=[];function a(e,t){try{return e.parameters[t].vid}catch(e){return void(-1===n.indexOf(t)&&(o.WB.event("abtest_vid_failed",{experiment_name:t}),n.push(t)))}}function r(e,t){try{if((null==e?void 0:e.parameters.webapp_version)||(null==e?void 0:e.parameters.webapp_version_non_loggedin))return;return e.parameters[t].vid}catch(e){return void(-1===n.indexOf(t)&&(o.WB.event("abtest_vid_failed",{experiment_name:t}),n.push(t)))}}},17941:(e,t,i)=>{"use strict";function o(e,t=1){return Math.round(Number(`${e}e${t}`))/Math.pow(10,t)}i.d(t,{BT:()=>n,a1:()=>a,ZT:()=>s,yk:()=>d,u0:()=>c,Nn:()=>p,Bm:()=>u,sA:()=>g,m7:()=>h,G:()=>_,y7:()=>v,vp:()=>y});function n(e=0){let t;return t=e<1e4?e.toString():e<999999?`${o(e/1e3)}K`:e<999999999?`${o(e/1e6)}M`:`${o(e/1e9)}B`,t}function a(e,t=99,i="99+"){return e>t?i:String(e)}function r(e){var t,i;return null!==(i=null===(t=null==e?void 0:e.url_list)||void 0===t?void 0:t.find((e=>!/\.webp/.test(e))))&&void 0!==i?i:""}function s(e){var t;return void 0===e?"":e.url_list&&(null===(t=e.url_list)||void 0===t?void 0:t.length)>0?e.url_list[0]:""}function l({is_block:e,is_blocked:t,follow_status:i}){if(null!=i)return e?4:t?5:u[i]}function d(e,t){const{avatar_larger:i,avatar_medium:o,avatar_thumb:n,uid:a,short_id:s,unique_id:d,sec_uid:c,room_id:p,nickname:u,is_block:g,is_blocked:m,follow_status:h,signature:_,show_favorite_list:v,custom_verify:y,enterprise_verify_reason:f,comment_setting:b,duet_setting:x,is_ad_fake:k,is_private_account:S,secret:w,create_time:C,show_secret_banner:j,stitch_setting:T,follower_status:O}=e;return{avatarLarger:r(i),avatarMedium:r(o),avatarThumb:r(n),id:a,shortId:s,uniqueId:null!=d?d:"",secUid:null!=c?c:"",roomId:String(null!=p?p:""),nickname:u,relation:l({is_block:g,is_blocked:m,follow_status:h}),signature:_,openFavorite:v,verified:Boolean(y||f),commentSetting:b,duetSetting:x,stitchSetting:T,isADVirtual:k,privateAccount:Boolean(S),secret:Boolean(w),createTime:C,showPrivateBanner:Boolean(j),extraInfo:Object.assign({followerStatus:O},t)}}function c(e,t=!1){const{follower_count:i,following_count:o,aweme_count:n}=e;return{diggCount:0,followerCount:null!=i?i:0,followingCount:null!=o?o:0,heart:0,heartCount:0,videoCount:null!=n?n:0,needFix:t}}function p(e){const{id_str:t,title:i,play_url:o,cover_medium:n,cover_large:a,cover_thumb:r,is_original:l,duration:d,author:c}=e;return{id:String(t),title:i,duration:d,keyToken:"",playUrl:s(o),coverMedium:s(n),coverLarge:s(a),coverThumb:s(r),original:null!=l&&l,authorName:c}}const u={[-1]:-1,0:0,1:1,2:2,4:3};function g(e,t){if(!e)return!0;const{commentSetting:i,relation:o,id:n}=e;return 1===i&&2!==o&&t!==n}const m=Object.freeze({});function h(e){return null!=e?e:m}function _(e){return Number(null!=e?e:0)}function v(e,t,i){if((null==e?void 0:e.vv)&&Number(null==e?void 0:e.vv)>0)return Number(e.vv);let o=0;return t&&t.forEach((e=>{var t,i;o+=null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.playCount)&&void 0!==i?i:0})),i&&i.forEach((e=>{var t,i;o+=Number(null!==(i=null===(t=null==e?void 0:e.stats)||void 0===t?void 0:t.viewCount)&&void 0!==i?i:0)})),o}function y(e){return e.replace(/\n(\n)*( )*(\n)*\n/g,"\n")}},28223:(e,t,i)=>{"use strict";i.d(t,{Re:()=>l,Ld:()=>p});var o=i(31191),n=i(21296);const a=8*Math.pow(10,5),r="keyvaluepairs",s={byteLength:-1,duration:-1,type:-1,vid:"unknown"};let l=class{constructor(){this.preloadQueue=[],this.preloadStartIndex=-1,this.currentPage="",this.preloadUrlsPool=new Set,this.setPreloadQueue=e=>{e.length&&(this.preloadQueue=null!=e?e:[],e.forEach((({id:e})=>{e&&this.preloadUrlsPool.add(e)})))},this.setPreloadIndex=e=>{e>=0&&(this.preloadStartIndex=e)},this.getPreloadUrls=()=>{const{preloadStartIndex:e}=this;return this.preloadQueue.slice(e+1,e+4)},this.getPreloadedPool=()=>this.preloadUrlsPool,this.reset=()=>{this.preloadQueue=[],this.preloadStartIndex=-1,this.preloadUrlsPool.clear()},this.setCurrentPage=e=>{this.currentPage=e||"unknown"},this.clearAllVideoCaches=()=>{this.currentPage&&(this.preloadUrlsPool.clear(),this.clearIndexDBCache())},this.clearSingleVideoCache=e=>{this.clearIndexDBCache(!1,[e],(()=>{this.preloadUrlsPool.delete(e)}))},this.clearIndexDBCache=(e=!0,t=[],i=(()=>{}))=>{const o=this;if(!window.indexedDB)return void console.warn("Browser doesn't support a stable version of IndexedDB, preload feature may not be available. ");const n=window.indexedDB.open("__PRE_CACHE__");n.onsuccess=function(){const s=n.result;try{const n=s.transaction([r],"readwrite"),l=n.objectStore(r);e?l.clear().onsuccess=function(){i.call(o)}:t.forEach((e=>{l.delete(((e,t="video",i=0)=>`TT-vCache-${e}#${t}#${i}#${a-1}`)(e)).onsuccess=function(){i.call(o,e)}})),n.onerror=function(){console.error("[IndexDB]: transaction error: ",n.error)}}catch(e){return}},n.onerror=function(e){console.error("[IndexDB]: Open database error, maybe no authorization. For more: ",n.error,e.target.errorCode)}}}};l=(0,o.__decorate)([(0,n.G)()],l);class d{constructor(){this.preloadVideoId="",this.preloadVideoCache=s,this.setPreloadCacheInfo=(e,t)=>{e&&t&&e!==this.preloadVideoId&&(this.preloadVideoId=e,this.preloadVideoCache=t)},this.getPreloadCacheInfo=e=>e&&this.preloadVideoId&&e===this.preloadVideoId?this.preloadVideoCache:s}}let c=null;const p=()=>(c||(c=new d),c)},25197:(e,t,i)=>{"use strict";i.d(t,{X:()=>n});var o=i(35002);const n=({src:e,sgOpen:t})=>{const i=/^https?:\/\/[a-zA-Z0-9-]+-sg/.test(e)||t?"t.tiktok.com":"m.tiktok.com";return(0,o.stringifyUrl)({url:`https://${i}/node-a/video/playsv`,query:{play_url:e}})}},57852:(e,t,i)=>{"use strict";i.d(t,{iv:()=>l,F3:()=>d,To:()=>c,Bv:()=>p,u8:()=>u,$I:()=>g});var o=i(59719);const n=()=>'""',a=()=>{},r=()=>{};class s{constructor(e,t){this.key=e,this.type=t,this.storageObject=null,this.getter=n,this.setter=a,this.remove=r,this.getter="local"===t?o.le:o.St,this.setter="local"===t?o.D$:o.D9,this.remove="local"===t?o.e8:o.lD}get storage(){return this.storageObject||(this.storageObject=this.tryParseJson(this.getter(this.key,"{}"))),this.storageObject}setItem(e,t){this.storage[e]=t,this.setter(this.key,JSON.stringify(this.storage))}getItem(e){return this.storage[e]}removeItem(e){this.storage[e]=void 0,this.setter(this.key,JSON.stringify(this.storage))}removeAll(){this.storageObject=null,this.remove(this.key)}tryParseJson(e){try{return JSON.parse(e)}catch(e){return{}}}}const l=new s("frequency-control-config","local"),d=new s("webapp-common-config","local"),c=new s("webapp-common-config","session"),p=new s("webapp-video-mute","local"),u=new s("keyboard-shortcut-config","local"),g=new s("webapp-comment-url","session")},24489:(e,t,i)=>{"use strict";i.d(t,{BB:()=>s,AY:()=>l});var o=i(22538),n=i(54348),a=i(94473),r=i(28698);function s(e){return(0,r.oC)(e)?"homepage_hot":/^\/@(.*?)\/video\/(.*?)/.test(e)?"video_detail":/^\/@(.*?)\/live\/(.*?)/.test(e)?"live_detail":/^\/@(.*?)/.test(e)?"others_homepage":/^\/music\//.test(e)?"single_song":/^\/tag\//.test(e)?"challenge":/^\/following\//.test(e)?"homepage_follow":(0,o.LX)(e,{path:n.Ad.searchHome,exact:!0})?"general_search":(0,o.LX)(e,{path:n.Ad.searchUser,exact:!0})?"search_user":(0,o.LX)(e,{path:n.Ad.searchVideo,exact:!0})?"search_video":(0,o.LX)(e,{path:a.$J.liveGoLive,exact:!0})?"live_take":(0,o.LX)(e,{path:[a.$J.liveReferralHost,a.$J.liveReferralHostFaq],exact:!0})?"live_referral_host":(0,o.LX)(e,{path:a.$J.liveDiscover,exact:!0})?"live_discover":(0,o.LX)(e,{path:a.$J.liveRoom,exact:!0})?"live_detail":(0,o.LX)(e,{path:a.$J.rechargePayment,exact:!0})||(0,o.LX)(e,{path:a.$J.coinPayment,exact:!0})?"live_recharge_cashier":(0,o.LX)(e,{path:n.gY.loginHome,exact:!1})||(0,o.LX)(e,{path:n.gY.oauth,exact:!1})||(0,o.LX)(e,{path:n.gY.oauthLine,exact:!1})?"login":(0,o.LX)(e,{path:n.gY.signupHome,exact:!1})?"signup":(0,o.LX)(e,{path:[a.$J.recharge,a.$J.rechargePaymentCode,a.$J.rechargePaymentResult,a.$J.rechargeTransactions,a.$J.rechargeUnavailable,a.$J.rechargeTerms,a.$J.rechargeTransactionsDetail,a.$J.rechargeCardManagement,a.$J.coin,a.$J.coinPaymentCode,a.$J.coinPaymentResult,a.$J.coinTransactions,a.$J.coinUnavailable,a.$J.coinTerms,a.$J.coinTransactionsDetail,a.$J.coinCardManagement],exact:!0})?"live_recharge":"unknown"}function l(){return location.pathname.startsWith(n.Ad.musicPlaylist.split(":")[0])?`${location.origin}${location.pathname.replace(/%23|%3F|%2F/g,"")}${location.search}`:location.href}},99971:(e,t,i)=>{"use strict";i.d(t,{k:()=>v});var o=i(31191),n=i(74512),a=i(90938),r=i(75246),s=i(40200),l=i(29984),d=i(18654);const c=(0,r.F4)({"0%":{transform:"scale(.95)"},"50%":{transform:"scale(.9)"},"100%":{transform:"scale(.95)"}}),p=(0,r.F4)({"0%":{transform:"scale(1)"},"40%":{transform:"scale(1.15)"},"45%":{transform:"scale(1.16)"},"95%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),u=(0,s.Z)("svg",{target:"e1vl87hj0"})({position:"absolute"},"label:SvgRoundCircle;"),g=(0,s.Z)("div",{target:"e1vl87hj1"})({position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},(({isAnimating:e})=>e?{":after":{content:'""',position:"absolute",left:1,top:1,right:1,bottom:1,borderRadius:"50%",border:"1px solid rgba(255, 119, 146, .5)",animation:`${p} 1800ms ease-out infinite`,boxShadow:"0 -0.5px 0.5px 0.5px rgba(255,119,146,.5)"}}:null),"label:DivContainer;"),m=(0,s.Z)(d.q,{target:"e1vl87hj2"})((({enable:e,theme:{colors:t},isAnimating:i})=>[{borderColor:t.LineSecondary,borderWidth:"0.5px",cursor:e?"pointer":"unset"},i?{animation:`${c} 1800ms ease-out infinite`,animationDelay:".9s"}:null]),"label:StyledAvatar;"),h=(0,s.Z)("span",{target:"e1vl87hj3"})((({theme:e})=>(0,l.GI)({theme:e,typography:"P4",fontWeight:"bold",color:"ConstTextInverse"})),{position:"absolute",background:"linear-gradient(131.17deg, #FF1764 0%, #ED3495 94.15%)",height:"15px",lineHeight:"15px",padding:"0 4px",bottom:"-2px",left:"50%",transform:"translateX(-50%)",wordBreak:"keep-all",borderRadius:"2px",zIndex:1},"label:SpanLiveBadge;"),_=function({size:e=48}){return(0,n.jsxs)(u,Object.assign({width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,n.jsx)("circle",{cx:e/2,cy:e/2,r:e/2-.75,stroke:"url(#paint0_linear)",strokeWidth:"1.5"},void 0),(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",Object.assign({id:"paint0_linear",x1:-20.9902*e/48,y1:24*e/48,x2:27.0098*e/48,y2:65.9805*e/48,gradientUnits:"userSpaceOnUse"},{children:[(0,n.jsx)("stop",{stopColor:"#FF1764"},void 0),(0,n.jsx)("stop",{offset:"1",stopColor:"#ED3495"},void 0)]}),void 0)},void 0)]}),void 0)},v=function(e){var{className:t,needAnimation:i=!1,isShowLive:r=!0,size:s=32,isShowLiveTag:l=!0,e2eTag:d}=e,c=(0,o.__rest)(e,["className","needAnimation","isShowLive","size","isShowLiveTag","e2eTag"]);const p=(0,a.Q)(),u=r&&i,v=r?s-6:s,y=u?s-4:s;return(0,n.jsxs)(g,Object.assign({isAnimating:u,className:t,"data-e2e":d,style:{width:s,height:s}},{children:[r&&(0,n.jsx)(_,{size:y},void 0),(0,n.jsx)(m,Object.assign({isAnimating:u,enable:!0,size:v},c),void 0),r&&l&&(0,n.jsx)(h,{children:p("LIVE")},void 0)]}),void 0)}},40809:(e,t,i)=>{"use strict";i.d(t,{T:()=>u});var o=i(74512),n=i(40200),a=i(48504);const r=(0,n.Z)("div",{target:"emuynwa0"})((({isFullScreen:e})=>e?{flex:"1 1 auto"}:null),{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",margin:"0 auto"},"label:DivErrorContainer;"),s={1:"rgba(22, 24, 35, 1.0)",0:"rgba(255, 255, 255, 0.9)"},l=(0,n.Z)("p",{target:"emuynwa1"})((({brightness:e=1,theme:{typography:t,fontWeights:i,fontFamilies:o}})=>[t.H4,{fontFamily:o.Sofia,fontWeight:i.bold,color:s[e],marginTop:"24px"}]),"label:PTitle;"),d={1:"rgba(22, 24, 35, 0.75)",0:"rgba(255, 255, 255, 0.5)"},c=(0,n.Z)("p",{target:"emuynwa2"})((({brightness:e=1,theme:{typography:t,fontWeights:i,fontFamilies:o}})=>[t.P2,{fontFamily:o.Proxima,fontWeight:i.normal,color:d[e],marginTop:"8px"}]),"label:PDesc;"),p=(0,n.Z)(a.W,{target:"emuynwa3"})({marginTop:"62px"},"label:StyledButton;"),u=function(e){const{iconElem:t,title:i,desc:n,buttonText:a,isFullScreen:s,brightness:d=1,e2eTitle:u,e2eDesc:g}=e;return(0,o.jsxs)(r,Object.assign({isFullScreen:s},{children:[t,i&&(0,o.jsx)(l,Object.assign({"data-e2e":u,brightness:d},{children:i}),void 0),n&&(0,o.jsx)(c,Object.assign({"data-e2e":g,brightness:d},{children:n}),void 0),Boolean(a)&&(0,o.jsx)(p,Object.assign({type:"button",onClick:e.onButtonClick,buttonTheme:"default",size:"large"},{children:a}),void 0)]}),void 0)}},14400:(e,t,i)=>{"use strict";i.d(t,{m:()=>a});var o=i(14656),n=i(86987);const a=()=>{var e,t;const{$abTestVersion:i}=null!==(e=(0,n.L)((()=>["$abTestVersion"]),[]))&&void 0!==e?e:{},a=null!==(t=(0,o.x)(i,"enhance_video_consumption_test"))&&void 0!==t?t:"v1";return{isEnhanceVideoConsumptionV1:"v1"===a,enhanceVideoConsumptionVersion:a}}},77593:(e,t,i)=>{"use strict";i.d(t,{e:()=>T});var o=i(74512),n=i(56208),a=i(73408),r=i(99527),s=i(1256),l=i(958),d=i(13581),c=i.n(d),p=i(32735),u=i(90938),g=i(86987),m=i(28698),h=i(57852),_=i(14400),v=i(40200),y=i(29984);const f=(0,v.Z)("div",{target:"e1l04njg0"})((({isModal:e=!1,theme:t})=>[{marginBottom:e?"0":"12px",minWidth:e?"400px":"300px",minHeight:e?"280px":"258px",padding:e?"40px 32px 32px":"44px 24px 16px",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",backgroundColor:t.colors.BGPrimary,borderRadius:"8px",border:`1px solid ${t.colors.LineSecondary3}`,boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.06)"}]),"label:DivKeyboardShortcutContainer;"),b=(0,v.Z)("div",{target:"e1l04njg1"})((({isModal:e=!1,theme:t})=>[(0,y.GI)({theme:t,typography:e?"P0":"P1",fontWeight:"bold",fontFamily:"Proxima"}),{width:"100%",height:"22px",lineHeight:"22px",textAlign:"center",color:t.colors.TextPrimary,whiteSpace:"nowrap"}]),"label:DivKeyboardShortcutTitle;"),x=(0,v.Z)("div",{target:"e1l04njg2"})((({theme:e})=>[{marginTop:"16px",width:"100%",display:"flex",boxSizing:"border-box",flexDirection:"column",alignItems:"center",borderTop:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContent;"),k=(0,v.Z)("div",{target:"e1l04njg3"})((({theme:e})=>[(0,y.GI)({theme:e,typography:"P3",fontWeight:"normal",fontFamily:"Proxima"}),{width:"100%",height:"40px",textAlign:"left",color:e.colors.ConstBGInverse,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.colors.LineSecondary}`}]),"label:DivKeyboardShortcutContentItem;"),S=(0,v.Z)("div",{target:"e1l04njg4"})((({theme:{direction:e}})=>(0,y.YJ)({direction:e,end:"16px"})),{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:16,cursor:"pointer"},"label:DivXMarkWrapper;"),w=(0,v.Z)(S,{target:"e1l04njg5"})((({theme:{colors:e}})=>({width:"24px",height:"24px",borderRadius:"100px",backgroundColor:e.BGView})),"label:StyledModalXMarkWrapper;"),C=24,j=[{content:"desktop_kb_shortcuts_tooltip_previous",icon:(0,o.jsx)(n.Z,{width:C,height:C},void 0)},{content:"desktop_kb_shortcuts_tooltip_next",icon:(0,o.jsx)(a.Z,{width:C,height:C},void 0)},{content:"desktop_kb_shortcuts_tooltip_like_vid",icon:(0,o.jsx)(r.Z,{width:C,height:C},void 0)},{content:"desktop_kb_shortcuts_tooltip_mute_unmute_vid",icon:(0,o.jsx)(s.Z,{width:C,height:C},void 0)}],T=(0,p.memo)((function({isModal:e=!1,onClose:t=c()}){const i=(0,u.Q)(),n=(0,g.L)((()=>["$abTestVersion","$wid"]),[]),{showKeyboardShortcut:a,handleClose:r}=((e=!1,t,i)=>{const o=h.u8.getItem("webid"),[n,a]=(0,p.useState)(!0),{enhanceVideoConsumptionVersion:r}=(0,_.m)(),[s,l]=(0,p.useState)(e),d=(0,p.useCallback)((()=>{e?t():(h.u8.setItem("hasCloseKeyboardShortcut",!0),a(!1))}),[e,t]);return(0,p.useEffect)((()=>{var t;if(!e)if("v3"!==r)l(!1);else if((null==i?void 0:i.$wid)!==o)l(!0),h.u8.setItem("webid",null!==(t=null==i?void 0:i.$wid)&&void 0!==t?t:""),h.u8.setItem("hasCloseKeyboardShortcut",!1);else{const e=h.u8.getItem("hasCloseKeyboardShortcut");l(!e)}}),[]),(0,p.useEffect)((()=>{const{pathname:t=""}=location;e||(0,m.oC)(t)||t.startsWith("/following")||/^\/@.+\/video\/\d+/.test(t)||l(!1)}),[]),{showKeyboardShortcut:n&&s,handleClose:d}})(e,t,n),s=i(e?"desktop_kb_shortcuts_modal":"desktop_kb_shortcuts_tooltip_title");return a?(0,o.jsxs)(f,Object.assign({isModal:e},{children:[e?(0,o.jsx)(w,Object.assign({onClick:r},{children:(0,o.jsx)(l.Z,{width:20,height:20},void 0)}),void 0):(0,o.jsx)(S,Object.assign({onClick:r},{children:(0,o.jsx)(l.Z,{width:20,height:20},void 0)}),void 0),(0,o.jsx)(b,Object.assign({isModal:e},{children:s}),void 0),(0,o.jsx)(x,{children:j.map((({content:t,icon:n})=>(0,o.jsxs)(k,Object.assign({isModal:e},{children:[i(t),n]}),t)))},void 0)]}),void 0):null}));T.defaultProps=Object.assign(Object.assign({},T.defaultProps),{"data-e2e":"keyboard-shortcut"})},48689:(e,t,i)=>{"use strict";i.d(t,{G:()=>u});var o=i(31191),n=i(74512),a=i(32321),r=i(88423),s=i.n(r),l=i(32735),d=i(44435),c=i(74509),p=i(59230);const u=function(e){var{uniqueId:t,secUid:i,extraQuery:r={},children:u,replace:g=!1,isInBrowserMode:m=!1,teaParams:h,stopPropagation:_=!0,onClick:v,onLinkClick:y}=e,f=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","stopPropagation","onClick","onLinkClick"]);const b=(0,l.useMemo)((()=>({pathname:(0,d.P4)({uniqueId:t,secUid:i}),search:r})),[r,i,t]),x=(0,a.fz)(c.y),k=(0,l.useCallback)((e=>{_&&e.stopPropagation(),x.handleLiveEntranceClick(s()(h,["anchor_id","follow_status","room_id","enter_from_merge","action_type","enter_method"])),null==v||v(e),null==y||y(e,b.pathname)}),[_,x,h,v,y,b.pathname]);return(0,n.jsx)(p.v,Object.assign({forceSSR:!0,to:b},f,{replace:g||m,onClick:k},{children:u}),void 0)}},34011:(e,t,i)=>{"use strict";i.d(t,{D:()=>g});var o=i(31191),n=i(74512),a=i(32321),r=i(32735),s=i(44435),l=i(90883),d=i(59230),c=i(14584),p=i(35002),u=i(22538);const g=(0,r.memo)((function(e){var{uniqueId:t,secUid:i,extraQuery:g={},children:m,replace:h=!1,isInBrowserMode:_=!1,teaParams:v,shouldStopPropagation:y=!0,reportTea:f=!0,onClick:b,onLinkClick:x}=e,k=(0,o.__rest)(e,["uniqueId","secUid","extraQuery","children","replace","isInBrowserMode","teaParams","shouldStopPropagation","reportTea","onClick","onLinkClick"]);const S=function(e,t={}){var i;const{search:o}=(0,u.TH)(),n=t.disableAutoLang?"":null!==(i=(0,p.parse)(o).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:o}=(0,p.parseUrl)(e);return(0,p.stringifyUrl)({url:i,query:Object.assign({lang:n},o)},Object.assign({skipEmptyString:!0},t))}const{pathname:a="",search:r={},hash:s}=e,l=s?`#${s}`:"";return`${(0,p.stringifyUrl)({url:a,query:Object.assign({lang:n},r)},Object.assign({skipEmptyString:!0},t))}${l}`}({pathname:(0,s.yl)({uniqueId:t,secUid:i}),search:g}),w=(0,a.fz)(l._),C=(0,r.useCallback)((e=>{y&&e.stopPropagation(),f&&w.handleEnterPage("enter_personal_detail",v),null==b||b(e),null==x||x(e,S)}),[y,w,v,b,x,S,f]),j=(0,c.p)(t),T=null==j?void 0:j.isADVirtual;return(0,n.jsx)(d.v,Object.assign({to:S,disabled:T},k,{replace:h||_,onClick:C},{children:m}),void 0)}))},69847:(e,t,i)=>{"use strict";i.d(t,{X:()=>s,Q:()=>l});var o=i(24246),n=i(32735),a=i(86987),r=i(86303);function s({action:e,modalConfig:t={}}){const i=(0,a.L)((()=>["$user"]),[]),s=(0,o.qj)(r.r);return(0,n.useCallback)(((...o)=>{if(null==i?void 0:i.$user)return e(...o);s.openModal(t)}),[e,null==i?void 0:i.$user,s,t])}function l(e={}){const t=(0,o.qj)(r.r),i="function"==typeof e?e():e;return(0,n.useCallback)((()=>{t.openModal(i)}),[i,t])}},473:(e,t,i)=>{"use strict";i.d(t,{u:()=>b});var o=i(74512),n=i(13581),a=i.n(n),r=i(32735),s=i(12788),l=i(36773),d=i(45257),c=i(31191),p=i(958),u=i(40200),g=i(29984);const m=(0,u.Z)("div",{target:"e1gjoq3k0"})({position:"fixed",left:0,top:0,bottom:0,right:0,zIndex:1001,overflow:"auto",outline:"0px",transition:"all 500ms cubic-bezier(.075, .82, .165, 1)"},(({status:e,isShow:t})=>({display:t||e===l.Ix?"flex":"none",opacity:Number(e!==l.Ix&&e!==l.Wj)})),"label:DivModalContainer;"),h=(0,u.Z)("div",{target:"e1gjoq3k1"})((({theme:{colors:e}})=>({background:e.SDSecondary,position:"fixed",left:0,right:0,top:0,bottom:0})),"label:DivModalMask;"),_=(0,u.Z)("div",{target:"e1gjoq3k2"})({position:"relative",borderRadius:"8px",margin:"auto",transition:"all 300ms cubic-bezier(.075, .82, .165, 1)"},(e=>{var{status:t,theme:{colors:i}}=e,o=e.contentStyle,{transform:n}=o,a=(0,c.__rest)(o,["transform"]);return[{transform:t===l.Wj||t===l.Ix?n||"scale(0.1, 0.1)":"none",backgroundColor:i.BGPrimary},a]}),"label:DivContentContainer;"),v=(0,u.Z)(p.Z,{target:"e1gjoq3k3"})("label:StyledIcon;");function y(e){const{closeStyle:t,theme:{colors:i,direction:o}}=e,n=[(0,g.YJ)({direction:o,end:"24px"})];switch(t){case 2:n.push({width:"24px",height:"24px",background:i.BGView,[`${v}`]:{width:"15px",height:"15px"}});break;case 3:n.push({width:"24px",height:"24px",[`${v}`]:{width:"24px",height:"24px",fill:"rgba(22, 24, 35, 0.75)"}});break;case 1:n.push({width:"40px",height:"40px",background:i.BGPrimary,[`${v}`]:{width:"24px",height:"24px"}})}return n}const f=(0,u.Z)("div",{target:"e1gjoq3k4"})({position:"absolute",top:"24px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},y,"label:DivCloseWrapper;"),b=function({children:e,onClose:t,visible:i,timeout:n,onWheel:c=a(),closeStyle:p=0,closeStyles:u={},maskCloseable:g=!0,keyboardCloseable:y=!0,zIndex:b=1001,mask:x=!0,fixed:k=!0,contentStyle:S={},maskStyle:w={},e2eData:C="",backgroundColor:j}){const T=(0,r.useRef)(),O=(0,r.useRef)(!!i),{showModal:I,hideModal:P}=(0,d.J)(),[E,L]=(0,r.useState)(!1);(0,r.useEffect)((()=>{i&&x?(I(),n&&(clearTimeout(T.current),T.current=window.setTimeout((()=>{null==t||t(2)}),n))):O.current&&(P(),clearTimeout(T.current)),O.current=!!i}),[i,x]),(0,r.useEffect)((()=>(L(!0),()=>{O.current&&P()})),[]),(0,r.useEffect)((()=>{const e=e=>{i&&y&&27===e.keyCode&&(null==t||t(1))};return i&&window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[y,t,i]);const A=(0,r.useCallback)((()=>{g&&(null==t||t(3))}),[g,t]),R=(0,r.useCallback)((()=>{null==t||t(0)}),[t]),M=(0,r.useRef)(null),D=(0,r.useRef)(null);return E?(0,s.createPortal)((0,o.jsx)(l.ZP,Object.assign({timeout:300,in:i,nodeRef:M},{children:t=>(0,o.jsxs)(m,Object.assign({status:t,isShow:i,onWheel:c,ref:M,style:{zIndex:b,position:k?"fixed":"relative"}},{children:[x&&(0,o.jsx)(h,Object.assign({style:w,onClick:A},{children:1===p&&(0,o.jsx)(f,Object.assign({closeStyle:p,onClick:R,style:u},{children:(0,o.jsx)(v,{},void 0)}),void 0)}),void 0),(0,o.jsx)(l.ZP,Object.assign({timeout:300,in:i,unmountOnExit:!0,nodeRef:D},{children:t=>(0,o.jsxs)(_,Object.assign({"data-e2e":C,status:t,ref:D,contentStyle:S,style:{backgroundColor:j}},{children:[e,(2===p||3===p)&&(0,o.jsx)(f,Object.assign({closeStyle:p,onClick:R,"data-e2e":"modal-close-inner-button",style:u},{children:(0,o.jsx)(v,{},void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),document.body):null}},41967:(e,t,i)=>{"use strict";i.d(t,{R:()=>n});var o=i(32735);function n(e=0){const t=(0,o.useRef)(0),[i,n]=(0,o.useState)(!1),a=(0,o.useCallback)((()=>{n(!0),window.clearTimeout(t.current)}),[]),r=(0,o.useCallback)((()=>{window.clearTimeout(t.current),t.current=window.setTimeout((()=>{n(!1)}),e)}),[e]);return{active:i,setActive:n,handleMouseEnter:a,handleMouseLeave:r}}},25491:(e,t,i)=>{"use strict";i.d(t,{G:()=>g});var o=i(74512),n=i(32735),a=i(36773),r=i(40200),s=i(38444);function l(e,t){return e||t?t?e?{left:"50%",transform:`translate(-50%, ${t}px)`}:{transform:`translateY(${t}px)`}:{left:"50%",transform:"translateX(-50%)"}:null}const d=(0,r.Z)("div",{target:"e2ipgxl0"})((({state:e,duration:t=300,theme:i,centered:o,verticalPropKey:n,verticalOffset:a})=>[{position:"absolute",zIndex:1,background:i.colors.BGPrimary,borderRadius:"8px",[n]:"calc(100% + 12px)",boxShadow:"0 4px 16px rgba(0, 0, 0, .12)",transition:`opacity ${t}ms`,opacity:Number("entering"===e||"entered"===e)},l(o,a)]),"label:DivContainer;"),c=(0,r.Z)(s.Z,{target:"e2ipgxl1"})({display:"block",width:"24px",height:"8px",position:"absolute"},(({centered:e})=>e?{left:"50%",transform:"translateX(-50%)"}:null),(({verticalPropKey:e})=>"top"===e?{top:"-8px"}:{bottom:"-8px",transform:"rotate(180deg)"}),"label:StyledTopArrow;"),p={topRight:"right",bottomRight:"right",topLeft:"left",bottomLeft:"left",bottom:null},u={topRight:"bottom",topLeft:"bottom",bottomRight:"top",bottomLeft:"top",bottom:"top"},g=function({placement:e,margin:t="-2px",arrowMargin:i=6,duration:r=300,backgroundColor:s="#fff",active:l=!1,verticalOffset:g=0,style:m,children:h}){const _=(0,n.useRef)(null),v=p[e],y=u[e],f=Object.assign({backgroundColor:s},m),b={};return v&&(b[v]=i,f[v]=t),(0,o.jsx)(a.ZP,Object.assign({in:l,timeout:r,unmountOnExit:!0,nodeRef:_},{children:e=>(0,o.jsxs)(d,Object.assign({verticalPropKey:y,state:e,duration:r,ref:_,style:f,centered:!v,verticalOffset:g},{children:[(0,o.jsx)(c,{fill:s,style:b,centered:!v,verticalPropKey:y},void 0),h]}),void 0)}),void 0)}},34525:(e,t,i)=>{"use strict";i.d(t,{C:()=>F});var o=i(74512),n=i(24246),a=i(32321),r=i(89793),s=i.n(r),l=i(32735),d=i(39917),c=i(18654),p=i(48504),u=i(44435),g=i(90938),m=i(60083),h=i(66583),_=i(99915),v=i(17941),y=i(86987),f=i(54167),b=i(14584),x=i(24448),k=i(69847),S=i(40200),w=i(29984),C=i(34011);const j=(0,S.Z)("div",{target:"er095110"})((({paddingTop:e=40})=>({height:e,cursor:"pointer"})),"label:DivPaddingTop;"),T=(0,S.Z)("div",{target:"er095111"})((({paddingStart:e=0,theme:{direction:t}})=>[{zIndex:100,position:"absolute"},(0,w.YJ)({direction:t,paddingStart:e})]),"label:DivProfileOuterContainer;"),O=(0,S.Z)("div",{target:"er095112"})((({theme:{colors:e}})=>({position:"relative",width:"320px",boxSizing:"border-box",padding:"20px",background:e.BGPrimary,boxShadow:`0px 4px 16px ${e.ShadowPrimary}`,borderRadius:"8px"})),"label:DivProfileContainer;"),I=(0,S.Z)("div",{target:"er095113"})({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},"label:DivHeadContainer;"),P=(0,S.Z)(C.D,{target:"er095114"})((({theme:e})=>(0,w.GI)({theme:e,color:"TextPrimary",fontWeight:"bold",fontFamily:"Sofia",typography:"H5"})),w.gi,"label:StyledUserTitle;"),E=(0,S.Z)(C.D,{target:"er095115"})((({theme:e})=>(0,w.GI)({theme:e,color:"TextPrimary",fontWeight:"semiBold",fontFamily:"Proxima",typography:"P3"})),w.gi,"label:StyledUserName;"),L=(0,S.Z)(C.D,{target:"er095116"})({display:"block",width:"44px",flex:"0 0 44px"},"label:StyledAvatarLink;"),A=(0,S.Z)("p",{target:"er095117"})({marginTop:"8px"},"label:PUserStat;"),R=(0,S.Z)("span",{target:"er095118"})((({theme:e})=>[(0,w.GI)({theme:e,fontWeight:"bold",typography:"H3"}),(0,w.YJ)({direction:e.direction,marginEnd:"6px"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block"}]),"label:SpanUserStatsText;"),M=(0,S.Z)("span",{target:"er095119"})((({theme:e})=>[(0,w.GI)({theme:e,color:"TextSecondary",typography:"H3"}),{fontSize:"17px",lineHeight:"20px",display:"inline-block",":not(:last-of-type)":(0,w.YJ)({direction:e.direction,marginEnd:"12px"})}]),"label:SpanUserStatsDesc;"),D=(0,S.Z)("p",{target:"er0951110"})((({theme:e})=>[(0,w.GI)({theme:e,typography:"P3"}),{paddingTop:"16px",marginTop:"16px",borderTop:`1px solid ${e.colors.LineSecondary2}`}]),"label:PSignature;"),F=(0,l.memo)((function(e){var t,i;const{uniqueId:r,top:S,hideSignature:w,fixedLeft:C,paddingStart:F,paddingTop:N,groupId:B,followTheme:z,onClick:$}=e,U=(0,g.Q)(),W=(0,a.fz)(_.B),[G,H]=(0,n.b7)(x.z,{selector:e=>({user:e.users[r],stats:e.stats[r]}),dependencies:[r],equalFn:(e,t)=>s()(e,t)}),{isADVirtual:q}=null!==(t=null==G?void 0:G.user)&&void 0!==t?t:{},{$language:Z}=null!==(i=(0,y.L)((()=>["$language"]),[]))&&void 0!==i?i:{},V=(0,k.Q)(),Q={enter_method:"click_hover"};B&&(Q.group_id=B);const{isFollowing:Y,handleFollow:K,text:J}=(0,b.w)({uniqueId:r,onNeedLogin:V,teaParams:Q}),{secUid:X,id:ee}=(0,v.m7)(G.user);(0,l.useEffect)((()=>{G.stats&&!G.stats.needFix||H.getUserDetail({uniqueId:r,secUid:X,language:Z})}),[H,G.stats,Z,X,r]),(0,l.useEffect)((()=>{W.handleDropdownCardShow()}),[W]);const te=(0,l.useMemo)((()=>({to_user_id:ee,author_id:ee,enter_method:"click_dropdown_card"})),[ee]),ie=(0,f.ot)({pathname:(0,u.yl)({uniqueId:r,secUid:X})}),oe=(0,h.e)(),ne=(0,l.useCallback)((e=>{null==$||$(e),q||oe(e,{href:ie,shouldUsePush:!0})}),[oe,ie,$,q]);if(!G.user)return(0,m.G)(["item.user"]);const{avatarThumb:ae,nickname:re,verified:se,signature:le}=G.user,de=G.stats;return B&&(te.group_id=B),(0,o.jsxs)(T,Object.assign({paddingStart:F,paddingTop:N,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,style:{top:S,left:C}},{children:[(0,o.jsx)(j,{onClick:ne},void 0),(0,o.jsxs)(O,{children:[(0,o.jsxs)(I,{children:[(0,o.jsx)(L,Object.assign({uniqueId:r,secUid:X,target:"_blank",rel:"noopener",teaParams:te,"data-e2e":"user-card-avatar"},{children:(0,o.jsx)(c.q,{size:44,src:ae},void 0)}),void 0),(0,o.jsx)(p.W,Object.assign({size:"small",onClick:K,buttonTheme:Y?"default":null!=z?z:"line","data-e2e":"user-card-follow"},{children:J}),void 0)]},void 0),(0,o.jsxs)(P,Object.assign({uniqueId:r,secUid:X,target:"_blank",rel:"noopener",teaParams:te},{children:[(0,o.jsx)("span",Object.assign({"data-e2e":"user-card-username"},{children:r}),void 0),se&&(0,o.jsx)(d.Q,{width:14,height:14,"data-e2e":"user-card-bluev"},void 0)]}),void 0),(0,o.jsx)("br",{},void 0),(0,o.jsx)(E,Object.assign({uniqueId:r,secUid:X,target:"_blank",rel:"noopener",teaParams:te,"data-e2e":"user-card-nickname"},{children:re}),void 0),(0,o.jsxs)(A,{children:[(0,o.jsx)(R,Object.assign({"data-e2e":"user-card-follower-count"},{children:de?(0,v.BT)(de.followerCount):"--"}),void 0),(0,o.jsx)(M,Object.assign({"data-e2e":"user-card-follower"},{children:U("Followers")}),void 0),(0,o.jsx)(R,Object.assign({"data-e2e":"user-card-like-count"},{children:de?(0,v.BT)(de.heartCount):"--"}),void 0),(0,o.jsx)(M,Object.assign({"data-e2e":"user-card-like"},{children:U("Likes")}),void 0)]},void 0),le&&!w&&(0,o.jsx)(D,Object.assign({"data-e2e":"user-card-user-bio"},{children:le}),void 0)]},void 0)]}),void 0)}))},18643:(e,t,i)=>{"use strict";i.d(t,{U:()=>se});var o=i(74512),n=i(89808),a=i(24246),r=i(89793),s=i.n(r),l=i(32735),d=i(69612),c=i(66164),p=i(90938),u=i(17941),g=i(473),m=i(43942),h=i(86987),_=i(37039),v=i(32321),y=i(44435),f=i(90883),b=i(99971),x=i(48689),k=i(34011),S=i(69847),w=i(99350),C=i(14584),j=i(24448),T=i(8666),O=i(40200),I=i(29984),P=i(48504),E=i(59230);const L=(0,O.Z)(E.v,{target:"e85wp610"})({":hover":{textDecoration:"none"}},"label:StyledLink;"),A=(0,O.Z)("div",{target:"e85wp611"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"8px 12px",borderRadius:"4px",transition:"background-color 300ms",":hover":{backgroundColor:e.BGView},":active":{backgroundColor:e.BGInput}})),"label:DivUserContainer;"),R=(0,O.Z)("div",{target:"e85wp612"})((({theme:{direction:e}})=>[{display:"flex",flex:"1"},(0,I.YJ)({direction:e,paddingEnd:"24px"})]),"label:DivUserInfo;"),M=(0,O.Z)("div",{target:"e85wp613"})((({theme:{direction:e}})=>[{maxWidth:"450px",padding:"1px 0"},(0,I.YJ)({direction:e,paddingStart:"12px"})]),"label:DivUserDesc;"),D=(0,O.Z)("div",{target:"e85wp614"})({display:"flex",alignItems:"center",height:"22px",lineHeight:"22px"},"label:DivTopPart;"),F=(0,O.Z)("span",{target:"e85wp615"})((({theme:e})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",typography:"P2"})]),"label:SpanUniqueId;"),N=(0,O.Z)("span",{target:"e85wp616"})((({theme:e,theme:{direction:t,colors:i}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",lineHeight:"15px",typography:"P4"}),{color:i.TextSecondary},(0,I.YJ)({direction:t,paddingStart:"4px"})]),"label:SpanNickname;"),B=(0,O.Z)("div",{target:"e85wp617"})((({theme:e,theme:{colors:t}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P3"}),{height:"20px",marginTop:"4px",color:t.TextSecondary}]),"label:DivBottomPart;"),z=(0,O.Z)("p",{target:"e85wp618"})({maxWidth:"450px"},I.wj,"label:PSignature;"),$=(0,O.Z)("p",{target:"e85wp619"})({maxWidth:"450px"},I.wj,"label:POther;"),U=(0,O.Z)("span",{target:"e85wp6110"})((({theme:{direction:e}})=>(0,I.YJ)({direction:e,paddingStart:"8px"})),"label:SpanSecond;"),W=(0,O.Z)(P.W,{target:"e85wp6111"})((({theme:{direction:e}})=>({flexShrink:0,"& > svg":[(0,I.YJ)({direction:e,marginEnd:"6px"})]})),"label:StyledFollowButton;"),G=(0,O.Z)(T.Z,{target:"e85wp6112"})((({theme:{direction:e}})=>(0,I.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifiedBadgeColor;"),H=(0,l.memo)((function({uniqueId:e,enterMethod:t,onClose:i}){const n=(0,p.Q)(),r=(0,a.mp)(j.z,{selector:t=>{const i=t.users[e],o=t.stats[e];if(!i)return null;const{verified:n,avatarThumb:a,secUid:r,nickname:s,roomId:l,id:d,relation:c,signature:p,secret:u}=i,{followerCount:g=0,videoCount:m=0}=null!=o?o:{};return{avatarThumb:a,secUid:r,verified:n,nickname:s,roomId:l,id:d,uniqueId:e,signature:p,relation:c,secret:u,followerCount:g,videoCount:m}},dependencies:[e]}),{id:s,nickname:d,secUid:c,signature:g,verified:m,followerCount:h,videoCount:T}=(0,u.m7)(r),O=(0,y.yl)({uniqueId:e,secUid:null!=c?c:""}),I=(0,w.zW)(r),{isShowLive:P}=I,E=P?x.G:k.D,H=(0,w.CN)({user:r,enterMethod:t}),q=(0,S.Q)(),{handleFollow:Z,text:V,isFollowing:Q,relation:Y}=(0,C.w)({uniqueId:e,onNeedLogin:q}),K=Q?"default":"line",J=(0,l.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),Z(e)}),[Z]),X=(0,v.fz)(f._),ee=(0,l.useCallback)((()=>{X.handleEnterPage("enter_personal_detail",{to_user_id:s,enter_method:t}),null==i||i()}),[X,t,s,i]),te=(0,l.useCallback)((e=>{e.stopPropagation(),null==i||i()}),[i]);return(0,o.jsx)(L,Object.assign({to:O,onClick:ee},{children:(0,o.jsxs)(A,{children:[(0,o.jsxs)(R,{children:[(0,o.jsx)(E,Object.assign({uniqueId:e,secUid:c,teaParams:H,shouldStopPropagation:!1,onClick:te},{children:(0,o.jsx)(b.k,Object.assign({},I,{liveTheme:6,size:48}),void 0)}),void 0),(0,o.jsxs)(M,{children:[(0,o.jsxs)(D,{children:[(0,o.jsx)(F,{children:e},void 0),m&&(0,o.jsx)(G,{width:14,height:14},void 0),(0,o.jsx)(N,{children:d},void 0)]},void 0),(0,o.jsx)(B,Object.assign({className:"bottom-part"},{children:g?(0,o.jsx)(z,Object.assign({className:"signature"},{children:g}),void 0):(0,o.jsxs)($,{children:[(0,o.jsxs)("span",{children:[n("Video"),": ",T]},void 0),(0,o.jsxs)(U,{children:[n("Followers"),": ",(0,u.BT)(h)]},void 0)]},void 0)}),void 0)]},void 0)]},void 0),(0,o.jsxs)(W,Object.assign({size:"small",id:s,buttonTheme:K,onClick:J},{children:[2===Y?(0,o.jsx)(_.Z,{},void 0):null,V]}),void 0)]},void 0)}),s)})),q=(0,O.Z)("div",{target:"exlovqy0"})({display:"flex",flexDirection:"column",position:"absolute",width:"700px",height:"500px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",boxShadow:"0 2px 12px rgba(0, 0, 0, .12)",borderRadius:"8px"},"label:DivAccountListModal;"),Z=(0,O.Z)("div",{target:"exlovqy1"})((({theme:{colors:e}})=>({position:"relative",height:"56px","::after":{position:"absolute",left:"0",bottom:"0",content:'""',width:"100%",height:"1px",transform:"scaleY(.5)",background:e.LinePrimary}})),"label:DivHeader;"),V=(0,O.Z)("div",{target:"exlovqy2"})((({theme:{direction:e}})=>[{display:"flex"},(0,I.YJ)({direction:e,marginStart:"14px"})]),"label:DivTabsContainer;"),Q=(0,O.Z)("div",{target:"exlovqy3"})((({theme:e,active:t,theme:{colors:i}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",fontWeight:t?"bold":"semiBold",typography:"P2"}),{position:"relative",margin:"24px 30px 0",color:t?i.TextPrimary:i.TextTertiary,cursor:"pointer"},t?{"::after":{position:"absolute",left:"0",bottom:"-10px",content:'""',width:"100%",height:"2px",background:i.TextPrimary}}:null]),"label:DivTab;"),Y=(0,O.Z)("span",{target:"exlovqy4"})((({theme:{direction:e}})=>[(0,I.YJ)({direction:e,paddingStart:"4px"})]),"label:SpanCount;"),K=(0,O.Z)("div",{target:"exlovqy5"})((({theme:{colors:e,direction:t}})=>[{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"16px",width:"32px",height:"32px",background:e.BGView,borderRadius:"16px",cursor:"pointer"},(0,I.YJ)({direction:t,end:"16px"})]),"label:DivCloseBtn;"),J=(0,O.Z)("div",{target:"exlovqy6"})((({isHidden:e})=>({flex:"1",overflowY:e?"hidden":"auto"})),"label:DivMain;"),X=(0,O.Z)("div",{target:"exlovqy7"})({boxSizing:"border-box",width:"100%",padding:"16px 0 16px 12px"},"label:DivUserList;"),ee=(0,O.Z)("div",{target:"exlovqy8"})({boxSizing:"border-box",display:"flex",alignItems:"center",width:"100%",padding:"8px 12px"},"label:DivLoadingContainer;"),te=(0,O.Z)("div",{target:"exlovqy9"})({width:"48px",height:"48px",flexShrink:0},"label:DivAvatarContainer;"),ie=(0,O.Z)("div",{target:"exlovqy10"})((({theme:{direction:e}})=>[{flexGrow:1},(0,I.YJ)({direction:e,marginStart:"12px"})]),"label:DivSkeletonTitleContainer;"),oe=(0,O.Z)("div",{target:"exlovqy11"})({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"label:DivEmptyContainer;"),ne=(0,O.Z)("p",{target:"exlovqy12"})((({theme:e})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",fontWeight:"bold",lineHeight:"24px",typography:"P1"})]),"label:PTitle;"),ae=(0,O.Z)("p",{target:"exlovqy13"})((({theme:e,theme:{colors:t}})=>[(0,I.GI)({theme:e,fontFamily:"Proxima",fontWeight:"normal",typography:"P2"}),{marginTop:"8px",color:t.TextSecondary}]),"label:PDesc;"),re={following:{title:"following",empty:"following_my_empty_desc"},follower:{title:"Followers",empty:"followers_my_empty_desc"},suggest:{title:"common_registration_username_suggested",empty:"profile_suggested_empty_toast"}},se=(0,l.memo)((function(e){var t;const{visible:i,type:r,shouldShowSuggested:_=!0}=e,v=(0,p.Q)(),{$user:y}=null!==(t=(0,h.L)((()=>["$user"]),[]))&&void 0!==t?t:{},f=(0,l.useRef)(null),[b,x]=(0,a.b7)(m.G,{selector:e=>({following:Object.assign(Object.assign({},e.following),{hasMore:-1!==e.following.maxCursor}),follower:Object.assign(Object.assign({},e.follower),{hasMore:-1!==e.follower.maxCursor}),suggest:Object.assign(Object.assign({},e.suggest),{hasMore:!1})}),dependencies:[],equalFn:(e,t)=>s()(e,t)}),k={following:"pop_up_following",follower:"pop_up_follower",suggest:"pop_up_suggest"},[S,w]=(0,l.useState)(y?r:"suggest");(0,l.useEffect)((()=>{const{loading:e,list:t}=b.follower;i&&!t.length&&e&&x.getFollowerList({count:20})}),[b,x,i]),(0,l.useEffect)((()=>{i&&w(r)}),[r,i]);const C=(0,l.useCallback)((e=>()=>{w(e),f.current&&(f.current.scrollTop=0)}),[w]),{list:j,loading:T,hasMore:O}=b[S],I=0!==j.length||T,P=(0,c.fB)((()=>{var e;if("suggest"===S||T||!O)return;const{scrollTop:t=0,scrollHeight:i=0}=null!==(e=null==f?void 0:f.current)&&void 0!==e?e:{};t&&i-t<480&&("following"===S?x.getFollowingList({count:20}):x.getFollowerList({count:20}))}),[x,S,T,O],200),E=(0,l.useMemo)((()=>Array.from({length:j.length?1:7}).fill(0)),[j.length]);return(0,o.jsx)(g.u,Object.assign({visible:i,maskColor:"rgba(0, 0, 0, .5)",maskCloseable:!0,onClose:e.onClose},{children:(0,o.jsxs)(q,{children:[(0,o.jsxs)(Z,{children:[(0,o.jsxs)(V,{children:[y&&["following","follower"].map((e=>(0,o.jsxs)(Q,Object.assign({active:S===e,onClick:C(e)},{children:[(0,o.jsx)("span",{children:v(re[e].title)},void 0),(b[e].total||!b[e].loading)&&(0,o.jsx)(Y,{children:(0,u.BT)(b[e].total)},void 0)]}),e))),_&&(0,o.jsx)(Q,Object.assign({active:"suggest"===S,onClick:C("suggest")},{children:(0,o.jsx)("span",{children:v("common_registration_username_suggested")},void 0)}),void 0)]},void 0),(0,o.jsx)(K,Object.assign({onClick:e.onClose},{children:(0,o.jsx)(n.Z,{width:14,height:14,style:{color:"rgba(22, 24, 35, 0.75)"}},void 0)}),void 0)]},void 0),(0,o.jsx)(J,Object.assign({isHidden:T&&!j.length,ref:f,onScroll:P},{children:I?(0,o.jsxs)(X,{children:[b[S].list.map((t=>(0,o.jsx)(H,{uniqueId:t,enterMethod:k[S],onClose:e.onClose},t))),T&&E.map(((e,t)=>(0,o.jsxs)(ee,{children:[(0,o.jsx)(te,{children:(0,o.jsx)(d.Od.Avatar,{},void 0)},void 0),(0,o.jsxs)(ie,{children:[(0,o.jsx)(d.Od.Title,{style:{width:"119px",height:"16px",margin:"4px 0 12px"}},void 0),(0,o.jsx)(d.Od.Title,{style:{width:"254px",height:"12px"}},void 0)]},void 0),(0,o.jsx)(d.Od.Button,{style:{width:"106px",height:"36px",flexShrink:0}},void 0)]},t)))]},void 0):(0,o.jsxs)(oe,{children:[(0,o.jsx)(ne,{children:v(re[S].title)},void 0),(0,o.jsx)(ae,{children:v(re[S].empty)},void 0)]},void 0)}),void 0)]},void 0)}),void 0)}))},43942:(e,t,i)=>{"use strict";i.d(t,{G:()=>S});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(91815),l=i.n(s),d=i(37674),c=i(2355),p=i(51166),u=i(52702),g=i(60194),m=i(86319),h=i(31144),_=i(71011),v=i(81104),y=i(24448),f=i(21296),b=i(28698),x=i(70336);let k=class{constructor(e){this.fetch=e}getUserDiscoverData(e,t){let i=28,o=17;return(0,b.FZ)(e)?i=50:(0,b.bf)(e)?(i=30,o=15):i=30,this.fetch.get("/node/share/discover",{query:{noUser:"0",count:i,scene:o,pageId:t,userId:t}}).pipe((0,_.U)((e=>e.body[0].exploreList)))}getFollowingUserList(e){return this.fetch.get("/api/user/list/",{query:e})}};k=(0,o.__decorate)([(0,f.G)(),(0,o.__metadata)("design:paramtypes",[x.r])],k);let S=class extends n.D{constructor(e,t){super(),this.service=e,this.user=t,this.defaultState={following:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},follower:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0},suggest:{list:[],hasMore:!0,loading:!0,maxCursor:0,minCursor:0,total:0}}}setList(e,t){const{list:i,key:o,maxCursor:n,minCursor:a,total:r}=t;e[o].list=l()(e[o].list.concat(i)),e[o].maxCursor=n,e[o].minCursor=a,r&&(e[o].total=r)}resetList(e,t){const{key:i}=t;e[i].list=[],e[i].maxCursor=0,e[i].minCursor=0}setLoading(e,t){const{loading:i,key:o}=t;e[o].loading=i}getRecommendList(e){return e.pipe((0,p.z)((({pathname:e,userId:t=""})=>this.service.getUserDiscoverData(e,t).pipe((0,u.z)((e=>{const t=e.map((({cardItem:e})=>({avatarLarger:e.cover,avatarMedium:e.cover,avatarThumb:e.cover,id:e.id,nickname:e.title,relation:e.extraInfo.relation,signature:e.description,uniqueId:e.subTitle.replace(/^@/,""),verified:e.extraInfo.verified,secUid:e.extraInfo.secUid,roomId:e.extraInfo.roomId}))).sort(((e,t)=>{var i,o;return(null!==(i=null==e?void 0:e.relation)&&void 0!==i?i:0)-(null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:0)})).sort(((e,t)=>{var i,o,n,a;return(null!==(o=null===(i=null==t?void 0:t.roomId)||void 0===i?void 0:i.length)&&void 0!==o?o:0)-(null!==(a=null===(n=null==e?void 0:e.roomId)||void 0===n?void 0:n.length)&&void 0!==a?a:0)}));return(0,d.of)(this.user.getActions().multiSetUser(t),this.getActions().setList({key:"suggest",list:t.map((({uniqueId:e})=>e)),hasMore:!1}))})),(0,g.O)(this.getActions().resetList({key:"suggest"}),this.getActions().setLoading({key:"suggest",loading:!0})),(0,m.l)(this.getActions().setLoading({key:"suggest",loading:!1}),this.terminate()),(0,v.n)({})))))}getFollowingList(e){return e.pipe((0,h.M)(this.state$),(0,_.U)((([{count:e},t])=>Object.assign(Object.assign({},t.following),{count:e}))),(0,p.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:21,maxCursor:t,minCursor:i,count:o}).pipe((0,u.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,d.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"following",list:n.sort(((e,t)=>{var i,o,n,a,r,s;return(null!==(n=null===(o=null===(i=null==t?void 0:t.user)||void 0===i?void 0:i.roomId)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-(null!==(s=null===(r=null===(a=null==e?void 0:e.user)||void 0===a?void 0:a.roomId)||void 0===r?void 0:r.length)&&void 0!==s?s:0)})).map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,g.O)(this.getActions().setLoading({key:"following",loading:!0})),(0,m.l)(this.getActions().setLoading({key:"following",loading:!1})),(0,v.n)({})))))}getFollowerList(e){return e.pipe((0,h.M)(this.state$),(0,_.U)((([{count:e},t])=>Object.assign(Object.assign({},t.follower),{count:e}))),(0,p.z)((({list:e,maxCursor:t=0,minCursor:i=0,count:o})=>this.service.getFollowingUserList({scene:67,maxCursor:t,minCursor:i,count:o}).pipe((0,u.z)((t=>{const{maxCursor:i,minCursor:o,userList:n=[],total:a}=t;return(0,d.of)(this.user.getActions().multiSetUser(n.map((({user:e})=>e))),this.user.getActions().multiSetUserStats(n.map((({user:e,stats:t})=>({uniqueId:e.uniqueId,stats:t})))),this.getActions().setList({key:"follower",list:n.map((({user:{uniqueId:e}})=>e)).filter((t=>!e||e.indexOf(t)<0)),maxCursor:i,minCursor:o,total:a}))})),(0,g.O)(this.getActions().setLoading({key:"follower",loading:!0})),(0,m.l)(this.getActions().setLoading({key:"follower",loading:!1})),(0,v.n)({})))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"resetList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setLoading",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"getRecommendList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"getFollowingList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"getFollowerList",null),S=(0,o.__decorate)([(0,r.Y)("AccountList"),(0,o.__metadata)("design:paramtypes",[k,y.z])],S)},86987:(e,t,i)=>{"use strict";i.d(t,{b:()=>s,L:()=>l});var o=i(24246),n=i(88423),a=i.n(n),r=i(88916);function s(){return(0,o.mp)(r.G)}function l(e,t){return(0,o.mp)(r.G,{selector:t=>{const i=t.appContext;return i?a()(i,...e()):i},dependencies:t})}},88916:(e,t,i)=>{"use strict";i.d(t,{G:()=>x});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(97889),l=i(2480),d=i(55251),c=i(37674),p=i(2355),u=i(31144),g=i(71011),m=i(51166),h=i(52702),_=i(60194),v=i(86319),y=(i(90152),i(17941)),f=i(28985),b=i(55578);let x=class extends n.D{constructor(e,t){super(),this.service=e,this.i18n=t,this.defaultState={appContext:null,initialized:!1,lang:"en",sideNavActive:!1}}setSideNavActive(e,t){e.sideNavActive=t}toggleSideNav(e){return e.pipe((0,u.M)(this.state$),(0,g.U)((([e,t])=>this.getActions().setSideNavActive(!t.sideNavActive))))}setAppContext(e,t){var{statusCode:i}=t,n=(0,o.__rest)(t,["statusCode"]);0===i&&(e.appContext=(0,s.vV)(Object.assign({$baseUrl:"",$fullUrl:"",$isAndroid:!1,$isIMessage:!1,$isIOS:!1,$pageUrl:""},n)))}setInitialized(e,t){e.initialized=t}setLang(e,t){e.lang=t}init(e){return e.pipe((0,u.M)(this.state$),(0,m.z)((([{starlingNs:e,lang:t},{initialized:i}])=>i?l.E:this.service.getAppContext(t).pipe((0,h.z)((i=>{const{$domains:o}=i,{starling:n,tea:a}=(0,y.m7)(o);return(0,d.T)((0,c.of)(this.getActions().setAppContext(i),this.getActions().setLang(t)),this.i18n.init$({lang:t,namespaces:e,domain:n,teaDomain:a}))})),(0,_.O)(this.getActions().setInitialized(!1)),(0,v.l)(this.getActions().setInitialized(!0),this.terminate())))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setSideNavActive",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"toggleSideNav",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setAppContext",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setInitialized",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"setLang",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],x.prototype,"init",null),x=(0,o.__decorate)([(0,r.Y)("AppContext"),(0,o.__metadata)("design:paramtypes",[b.i,f.L])],x)},55578:(e,t,i)=>{"use strict";i.d(t,{i:()=>l});var o=i(31191),n=i(141),a=i(21296),r=i(70336),s=i(90674);let l=class{constructor(e){this.fetch=e,this.initTargetIdcRequest=()=>this.fetch.get("/passport/web/account/info/",{baseUrlType:2,query:{aid:1459}})}getAppContext(e){return this.fetch.get("/node-webapp/api/app-context",{query:{lang:e},baseUrlType:2})}checkTTwid(){return(0,o.__awaiter)(this,void 0,void 0,(function*(){const e=new n.t({aid:s.CO,service:"www.tiktok.com",union:!1,unionHost:""});try{yield e.checkWebId()}catch(e){console.error(e)}}))}};l=(0,o.__decorate)([(0,a.G)(),(0,o.__metadata)("design:paramtypes",[r.r])],l)},44141:(e,t,i)=>{"use strict";i.d(t,{D:()=>v});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(2480),l=i(56383),d=i(2355),c=i(30526),p=i(71011),u=i(504),g=i(52702),m=i(21296),h=i(3585);let _=class{constructor(){this.handleShowSnack=e=>{const t=e?"show_snackbar_auto":"show_snackbar";h.WB.event(t)},this.handleClickDownload=()=>{h.WB.event("click_download_bar")},this.handleGetForPC=()=>{h.WB.event("click_get_for_pc")},this.handleInstallApp=()=>{h.WB.event("install_web_app")}}};_=(0,o.__decorate)([(0,m.G)()],_);let v=class extends n.D{constructor(e){super(),this.report=e,this.defaultState={isPwaInstallable:!1,isModalShow:!1,isExpand:!1}}storeDeferredPrompt(e){return e.pipe((0,c.b)((e=>{this.deferredPrompt=e})),(0,p.U)((()=>this.noop())))}setIsPwaInstallable(e,t){e.isPwaInstallable=t}setIsModalShow(e,t){e.isModalShow=t}setIsExpand(e,t){e.isExpand=t}handleShowSnack(e){return e.pipe((0,c.b)((e=>this.report.handleShowSnack(e))),(0,p.U)((()=>this.noop())))}handleClickDownload(e){return e.pipe((0,c.b)((()=>this.report.handleClickDownload())),(0,p.U)((()=>this.noop())))}handleInstallationClick(e){return e.pipe((0,c.b)((()=>this.report.handleGetForPC())),(0,u.g)(0),(0,g.z)((()=>this.deferredPrompt?(this.deferredPrompt.prompt(),(0,l.D)(this.deferredPrompt.userChoice).pipe((0,c.b)((e=>{"accepted"===e.outcome?this.report.handleInstallApp():console.warn("choice result outcome is not accepted")})),(0,p.U)((e=>"accepted"===e.outcome?this.getActions().setIsPwaInstallable(!1):this.noop())))):s.E)))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"storeDeferredPrompt",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setIsPwaInstallable",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setIsModalShow",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"setIsExpand",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"handleShowSnack",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"handleClickDownload",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[d.y]),(0,o.__metadata)("design:returntype",void 0)],v.prototype,"handleInstallationClick",null),v=(0,o.__decorate)([(0,r.Y)("AppPromotion"),(0,o.__metadata)("design:paramtypes",[_])],v)},3192:(e,t,i)=>{"use strict";i.d(t,{X:()=>l});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(2355);let l=class extends n.D{constructor(){super(),this.defaultState={isCookieBannerShowing:!1}}setCookieBannerShowing(e,t){e.isCookieBannerShowing=t}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",s.y)],l.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],l.prototype,"setCookieBannerShowing",null),l=(0,o.__decorate)([(0,r.Y)("FixBottomModule"),(0,o.__metadata)("design:paramtypes",[])],l)},28985:(e,t,i)=>{"use strict";i.d(t,{L:()=>C});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(97889),l=i(71519),d=i(37674),c=i(2480),p=i(55251),u=i(2355),g=i(52702),m=i(30526),h=i(71011),_=i(61080),v=i(35370),y=i(36512),f=i(69327),b=i(21296),x=i(56383),k=i(90152);let S=class{setLanguage$(e){return new u.y((t=>{var i;f.ZP.setLang(null!==(i=window._I18N_LANG_)&&void 0!==i?i:e,(e=>{e?t.error(e):(t.next(),t.complete())}))}))}loadStarling$(e){const{teaDomain:t,domain:i,lang:o,namespace:n="Webapp"}=e;return(0,x.D)(new y.Z({namespace:n,api_key:k.API_KEY,locale:o||"en",zoneHost:i,timeout:1e4,TEAChannelDomain:t}).load())}registerTranslationData({lang:e,namespace:t="Webapp",data:i}){f.ZP.addResourceBundle(e,t,i,!0)}hasLoaded(e,t){return f.ZP.i18nInstance.instance.hasResourceBundle(e,t)}};function w(e){return!e.loaded}S=(0,o.__decorate)([(0,b.G)()],S);let C=class extends n.D{constructor(e,t){super(),this.service=e,this.slardar=t,this.defaultState={lang:"en",translations:{}}}setLang(e,t){e.lang=t}setTranslation(e,{lang:t,namespace:i,data:o}){e.translations[t]||(e.translations[t]={}),e.translations[t][i]=(0,s.vV)(o)}loadData(e){return e.pipe((0,g.z)((e=>this.loadData$(e))))}loadData$(e){const{lang:t,namespaces:i}=e,n=(0,o.__rest)(e,["lang","namespaces"]);return(0,l.D)(i.map((e=>this.service.hasLoaded(t,e)?(0,d.of)({loaded:!0}):this.service.loadStarling$(Object.assign({lang:t,namespace:e},n)).pipe((0,m.b)((i=>{this.service.registerTranslationData({lang:t,namespace:e,data:i})})),(0,h.U)((t=>({loaded:!1,namespace:e,data:t}))),(0,_.K)((i=>(console.error(i),this.slardar.reportI18nLoadedFailed(e,t),c.E))))))).pipe((0,g.z)((e=>(0,d.of)(...e.filter(w).map((({namespace:e,data:i})=>this.getActions().setTranslation({lang:t,namespace:e,data:i})))))))}init$(e){const{lang:t,namespaces:i}=e;return this.service.setLanguage$(t).pipe((0,g.z)((()=>(0,p.T)((0,d.of)(this.getActions().setLang(t)),this.loadData$(Object.assign(Object.assign({},e),{namespaces:i}))))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setLang",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"setTranslation",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[u.y]),(0,o.__metadata)("design:returntype",void 0)],C.prototype,"loadData",null),C=(0,o.__decorate)([(0,r.Y)("I18n"),(0,o.__metadata)("design:paramtypes",[S,v.n])],C)},99350:(e,t,i)=>{"use strict";i.d(t,{zW:()=>p,TB:()=>u,CN:()=>g});var o=i(31191),n=i(24246),a=i(32321),r=i(32735),s=i(44435),l=i(3585),d=i(74509),c=i(88916);function p(e){const t=(0,n.mp)(c.G,{dependencies:[],selector:e=>{var t;return null===(t=e.appContext)||void 0===t?void 0:t.$user}}),i=Boolean(t);return{isShowLive:(0,r.useMemo)((()=>Boolean(i&&(null==e?void 0:e.roomId)&&"0"!==(null==e?void 0:e.roomId)&&(null==t?void 0:t.uid)!==e.id)),[null==t?void 0:t.uid,i,null==e?void 0:e.id,null==e?void 0:e.roomId]),src:null==e?void 0:e.avatarThumb,uniqueId:null==e?void 0:e.uniqueId,pureLivePath:e?(0,s.P4)({uniqueId:null==e?void 0:e.uniqueId,secUid:null==e?void 0:e.secUid}):""}}function u({reportTrigger:e,user:t,enterMethod:i,autoReport:o,reportValidator:n,once:s}){const c=(0,a.fz)(d.y),[p,u]=(0,r.useState)(!1),m=(0,r.useMemo)((()=>{var e,o;return{anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:l.WB.commonParams.page_name,action_type:"click",enter_method:i}}),[i,null==t?void 0:t.id,null==t?void 0:t.relation,null==t?void 0:t.roomId]),h=(0,r.useCallback)((()=>{p&&s||(c.handleLiveEntranceShow(m),u(!0))}),[p,c,s,m]);return(0,r.useEffect)((()=>{o&&e&&n()&&h()}),[e]),{handleExposure:h,teaParams:g({user:t,enterMethod:i})}}function g(e){var{user:t,enterMethod:i}=e,n=(0,o.__rest)(e,["user","enterMethod"]);return(0,r.useMemo)((()=>{var e,o,a;return Object.assign({anchor_id:null!==(e=null==t?void 0:t.id)&&void 0!==e?e:"",follow_status:null!==(o=null==t?void 0:t.relation)&&void 0!==o?o:-1,room_id:null==t?void 0:t.roomId,enter_from_merge:l.WB.commonParams.page_name,enter_from:l.WB.commonParams.page_name,action_type:"click",enter_method:i,to_user_id:null!==(a=null==t?void 0:t.id)&&void 0!==a?a:""},n)}),[t,i,n])}},86303:(e,t,i)=>{"use strict";i.d(t,{r:()=>S});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(13581),l=i.n(s),d=i(35002),c=i(37674),p=i(2355),u=i(31144),g=i(30526),m=i(52702),h=i(14722),_=i(3585),v=i(59719),y=i(90674),f=i(35370),b=i(90883),x=i(14656),k=i(88916);let S=class extends n.D{constructor(e,t,i){super(),this.home=e,this.report=t,this.slardar=i,this.defaultState={isOpen:!1,url:"",closeable:!1,isBannerActive:!1,bannerEnabled:!1,content:{title:"",desc:""},iframeStyle:{},showGoogleOneTap:!1,handleDownload:l(),handleLogin:l(),closeCallback:l(),loginModalShow:!1,maskCloseable:!1}}setCloseable(e,t){e.closeable=t}setIframeHeight(e,t){e.iframeHeight=t}setShowGoogleOneTap(e,t){e.showGoogleOneTap=t}setUrl(e,t){e.url=t}setLoginPath(e,t){e.loginPath=t}setCloseCallback(e,t){e.closeCallback=t}setIsOpen(e,t){e.isOpen=t}setContent(e,t){t&&(e.content=t)}setHandleDownload(e,t){t&&(e.handleDownload=t)}setHandleLogin(e,t){t&&(e.handleLogin=t)}setIframeStyle(e,t){e.iframeStyle=t}setLoginModalShow(e,t){this.slardar.toggleLoginSlardar(t),e.loginModalShow=t}setMaskCloseable(e,t){e.maskCloseable=t}openModal(e){return e.pipe((0,u.M)(this.home.state$,this.state$),(0,g.b)((([{loginPath:e},t,{url:i,isOpen:o}])=>{o&&!e&&i.match(h.IU.oauthGoogleOneTap)&&(0,v.D$)(y.uU,`${Date.now()}`)})),(0,m.z)((([{url:e,loginPath:t,isSignup:i,closeable:o=!0,query:n={},iframeStyle:a={},content:r,handleDownload:s,handleLogin:l,showGoogleOneTap:p=!1,maskCloseable:u=!1},{lang:g,appContext:m}])=>{const h=(0,x.x)(null==m?void 0:m.$abTestVersion,"login_refactor_test"),v=null!=t?t:"/"+(i?"signup":"login"),y=(0,d.stringifyUrl)({url:v,query:Object.assign(Object.assign({lang:g,is_modal:1,hide_close_btn:1,event_name:i?"enter_sign_up":null,type:-1!==(window.location.pathname+window.location.search).indexOf("recharge")?"recharge":"",enter_from:_.WB.commonParams.page_name},n),{no_refactor:"v2"!==h?"1":null})},{skipNull:!0});return"v2"===h&&v.match(/login|signup/)?(0,c.of)(this.getActions().setLoginModalShow(!0),this.getActions().setUrl(null!=e?e:y),this.getActions().setCloseable(o)):(0,c.of)(this.getActions().setUrl(null!=e?e:y),this.getActions().setIframeHeight(0),this.getActions().setShowGoogleOneTap(p),this.getActions().setCloseable(o),this.getActions().setIsOpen(!0),this.getActions().setContent(r),this.getActions().setHandleDownload(s),this.getActions().setHandleLogin(l),this.getActions().setIframeStyle(a),this.getActions().setMaskCloseable(u))})))}closeModal(e){return e.pipe((0,u.M)(this.state$),(0,g.b)((([{enter_method:e,disableReport:t},{url:i}])=>{i.match(h.IU.oauthGoogleOneTap)&&"login_success"!==e&&(0,v.D$)(y.uU,`${Date.now()}`),t||this.report.handleLoginModalHide({enter_method:e})})),(0,m.z)((([e,{closeCallback:t=l()}])=>{const i=[this.getActions().setIsOpen(!1)];return t(),(0,c.of)(...i)})))}setIsBannerActive(e,t){e.isBannerActive=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setCloseable",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setIframeHeight",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setShowGoogleOneTap",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setUrl",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setLoginPath",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Function]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setCloseCallback",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setIsOpen",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setContent",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setHandleDownload",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setHandleLogin",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setIframeStyle",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setLoginModalShow",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setMaskCloseable",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"openModal",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"closeModal",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setIsBannerActive",null),S=(0,o.__decorate)([(0,r.Y)("LoginModal"),(0,o.__metadata)("design:paramtypes",[k.G,b._,f.n])],S)},70018:(e,t,i)=>{"use strict";i.d(t,{O:()=>L});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(55251),l=i(37674),d=i(2480),c=i(62598),p=i(2355),u=i(30526),g=i(71011),m=i(52702),h=i(31144),_=i(51166),v=i(60194),y=i(61080),f=i(28698),b=i(81104),x=i(41107),k=i(24448),S=i(21296),w=i(72284),C=i(56383),j=i(30094),T=i(40804),O=i(7211),I=i(69006),P=i(70336);let E=class{constructor(e){this.fetch=e,this.retryTime=0,this.hasMore$=new w.x,this.options$=new w.x,this.init$=this.options$.pipe((0,_.z)((e=>{let t,o;return(0,C.D)(Promise.all([Promise.all([i.e(8776),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(4683),i.e(2128),i.e(622)]).then(i.bind(i,84480)),Promise.all([i.e(8776),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(4683),i.e(2128)]).then(i.bind(i,17226)),Promise.all([i.e(8776),i.e(2308),i.e(3251),i.e(3685),i.e(672),i.e(4276),i.e(4683),i.e(2128)]).then(i.bind(i,87889))]).then((([i,n,a])=>(e.authType=i.im_proto.AuthType.SESSION_AUTH,o=i,t=new i.BytedIM(e,[n.ExtensionPlugin,a.StrangerPlugin]),t.init()))).then((e=>({result:e,instance:t,sdk:o}))).catch((e=>(console.error(`[IM SDK] init failed, e=${e}`),{result:2,instance:t,sdk:o}))))})),(0,m.z)((({result:e,instance:t,sdk:i})=>t?(0,l.of)({instance:t,sdk:i}):(0,j._)((()=>new Error(`[IM SDK] init failed with initResult=${e}`)))))),this.refreshMessage$=(0,c.a)([this.init$,(0,T.F)(360)]).pipe((0,m.z)((([{instance:e}])=>(0,C.D)(e.getMessagesByUserInit({inboxType:0,cursor:this.cursor}).then((({hasMore:e,cursor:t=0})=>(this.cursor=t.toString(),e))).catch((e=>(console.error(e),!(this.retryTime++>5))))))),(0,O.o)((e=>e))),this.conversationChange$=this.init$.pipe((0,m.z)((({instance:e,sdk:t})=>new p.y((i=>{e.event.subscribe(t.IMEvent.ConversationChange,(()=>{i.next({instance:e,sdk:t})}))})))),(0,I.B)()),this.cursor="0"}getMessageToken(){return this.fetch.get("/api/im/reboot/misc/",{query:{aid:1988,im_token:1},baseUrlType:2})}getConversationListOnline({instance:e}){return(0,C.D)(e.getConversationListOnline())}createConversation({uid:e,instance:t}){return(0,C.D)(t.createConversation({participants:e}))}createMessage({type:e,content:t,conversation:i,instance:o}){return(0,C.D)(o.createMessage({conversation:i,type:e,content:t}))}sendMessage({message:e,instance:t}){return(0,C.D)(t.sendMessage({message:e}))}getMultiUsersByUids(e){return this.fetch.get("/api/im/multi_user/",{query:{aid:1988,uids:e}})}getFollowingUserListWithCanShare(e){const{minCursor:t=0,count:i=30}=e;return this.fetch.get("/api/im/spotlight/relation/",{query:{source:"web",with_fstatus:1,device_platform:"webapp_pc",count:i,max_time:t,min_time:0}})}getMultiUsersRelation({to_user_id:e,userId:t}){return this.fetch.get("/api/im/spotlight/multi_relation/",{query:{to_user_id:e,userId:t}})}};E=(0,o.__decorate)([(0,S.G)(),(0,o.__metadata)("design:paramtypes",[P.r])],E);let L=class extends n.D{constructor(e,t,i){super(),this.service=e,this.user=t,this.report=i,this.defaultState={initialized:!1,messageCount:0,recentUserList:[],recentUserNameList:[],recentUidList:[],followingUser:{list:[],nicknameList:[],uidList:[],hasMore:!0,maxCursor:0,minCursor:0},isFollowingLoading:!1,isSendMessageFailed:!1,isSendMessageLoading:!1,conversationMap:{},successSentMessageCount:0},this.recentUids=""}initSDK(e){return e.pipe((0,u.b)((e=>{this.service.options$.next(e)})),(0,g.U)((()=>this.noop())))}startRefreshMessage(e){return(0,s.T)(this.service.refreshMessage$,e).pipe((0,g.U)((()=>this.noop())))}setMessageCount(e,t){e.messageCount=t}setConversationMap(e,t){e.conversationMap=Object.assign({},t)}updateRecentUserList(e,t){const{uniqueIdList:i,nicknameList:o,uidList:n}=t;e.recentUserList=[...i],e.recentUserNameList=[...o],e.recentUidList=[...n]}updateFollowingUserList(e,t){e.followingUser=t}setFollowingLoading(e,t){e.isFollowingLoading=t}addSentMessageSuccessCount(e){e.successSentMessageCount=e.successSentMessageCount+1}setSendMessageStatus(e,t){var i,o;e.isSendMessageFailed=null!==(i=t.isFailed)&&void 0!==i&&i,e.isSendMessageLoading=null!==(o=t.isLoading)&&void 0!==o&&o,void 0!==t.successCount&&(e.successSentMessageCount=t.successCount)}startConversationChange(e){return(0,s.T)(this.service.conversationChange$,this.service.init$).pipe((0,m.z)(this.service.getConversationListOnline),(0,m.z)((e=>{const t=[],i={},o=e.reduce(((e,o)=>{if(0===o.mode&&!o.isStrangerConversation){const n=o.toParticipantUserId;if(n&&(t.push(n),i[n]=o),0!==o.unreadCount&&!o.isMuted&&!o.customIsSelected)return e+1}return e}),0),n=t.slice(0,30);return(0,l.of)(this.getActions().setMessageCount(o),this.getActions().setConversationMap(i),this.getActions().getMultiUsersByUids({uidList:n}))})),(0,b.n)({}))}getMultiUsersByUids(e){return e.pipe((0,m.z)((({uidList:e})=>{const t=location.pathname;if(!(0,f.oC)(t)&&5===(0,f.C2)(t))return d.E;const i=String(e);return e.length&&this.recentUids!==i?(this.recentUids=i,this.service.getMultiUsersByUids(i).pipe((0,m.z)((t=>{var i;const o=null!==(i=null==t?void 0:t.userMap)&&void 0!==i?i:{},n=[],a=[],r=[],s=e.map((e=>{if(o[e])return o[e].id=e,n.push(o[e].uniqueId),a.push(o[e].nickname),r.push(e),o[e]})).filter((e=>e));return s.length?(0,l.of)(this.getActions().updateRecentUserList({uniqueIdList:n,nicknameList:a,uidList:r}),this.user.getActions().multiSetUser(s)):(0,l.of)(this.noop())})))):d.E})),(0,b.n)({}))}getFollowingUserListWithCanShare(e){return e.pipe((0,h.M)(this.state$),(0,g.U)((([{count:e},t])=>Object.assign(Object.assign({},t.followingUser),{count:e}))),(0,m.z)((e=>{var{list:t,nicknameList:i,uidList:n}=e,a=(0,o.__rest)(e,["list","nicknameList","uidList"]);return this.service.getFollowingUserListWithCanShare(a).pipe((0,_.z)((e=>{const{statusCode:o,maxTime:a,minTime:r,followings:s=[],hasMore:d}=e,c=[],p=[],u=[];return 0===o?(s&&s.forEach((e=>{c.push(e.uniqueId),p.push(e.nickname),u.push(e.id)})),(0,l.of)(this.getActions().updateFollowingUserList({list:[...t,...c],nicknameList:[...i,...p],uidList:[...n,...u],maxCursor:a,minCursor:r,hasMore:!!d}),this.user.getActions().multiSetUser(null!=s?s:[]),this.getActions().setFollowingLoading(!1))):(0,l.of)(this.noop(),this.getActions().setFollowingLoading(!1))})),(0,v.O)(this.getActions().setFollowingLoading(!0)))})),(0,b.n)({}))}sendMessage(e){return(0,c.a)([e,this.service.init$]).pipe((0,h.M)(this.state$),(0,m.z)((([[{uid:e,relation:t,type:i,content:o,hasConversation:n},{instance:a}],{conversationMap:r}])=>(n?(0,l.of)({type:i,content:o,conversation:r[e]}):this.service.createConversation({uid:e,instance:a}).pipe((0,g.U)((({payload:e})=>({type:i,content:o,conversation:null!=e?e:{}}))),(0,b.n)({}))).pipe((0,m.z)((({type:e,content:t,conversation:i})=>this.service.createMessage({conversation:i,type:e,content:JSON.stringify(t),instance:a}))),(0,m.z)((e=>this.service.sendMessage({message:e,instance:a}))),(0,m.z)((e=>{var i,o,n,a,r,s;return 0===(null==e?void 0:e.statusCode)?this.report.handleSendMessage({chat_type:"private",conversation_id:null!==(o=null===(i=null==e?void 0:e.payload)||void 0===i?void 0:i.conversationId)&&void 0!==o?o:"",message_type:"share_video",relation_tag:t}):this.report.handleFailSendMessage({chat_type:"private",conversation_id:null!==(a=null===(n=null==e?void 0:e.payload)||void 0===n?void 0:n.conversationId)&&void 0!==a?a:"",message_type:"share_video",error_code:null!==(s=JSON.parse(null!==(r=null==e?void 0:e.checkMsg)&&void 0!==r?r:"{}").status_code)&&void 0!==s?s:-1,relation_tag:t}),(0,l.of)(this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1}),this.getActions().addSentMessageSuccessCount())})),(0,y.K)((()=>(this.report.handleFailSendMessage({chat_type:"private",conversation_id:"",message_type:"share_video",error_code:-1,relation_tag:t}),(0,l.of)(this.getActions().setSendMessageStatus({isFailed:!0,isLoading:!1})))))))),(0,v.O)(this.getActions().setSendMessageStatus({isFailed:!1,isLoading:!1})))}};(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"initSDK",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"startRefreshMessage",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"setMessageCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"setConversationMap",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"updateRecentUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"updateFollowingUserList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"setFollowingLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"addSentMessageSuccessCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"setSendMessageStatus",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"startConversationChange",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"getMultiUsersByUids",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"getFollowingUserListWithCanShare",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],L.prototype,"sendMessage",null),L=(0,o.__decorate)([(0,r.Y)("MessageModule"),(0,o.__metadata)("design:paramtypes",[E,k.z,x.R])],L)},86494:(e,t,i)=>{"use strict";i.d(t,{R:()=>s});var o=i(31191),n=i(6229),a=i(16219),r=i(11359);let s=class extends n.D{constructor(){super(...arguments),this.defaultState={uniqueId:void 0}}setUniqueId(e,t){e.uniqueId=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setUniqueId",null),s=(0,o.__decorate)([(0,r.Y)("RecommendUserList")],s)},13934:(e,t,i)=>{"use strict";i.d(t,{B:()=>k});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(37674),l=i(2355),d=i(30526),c=i(71011),p=i(89991),u=i(99449),g=i(31144),m=i(29866),h=i(60194),_=i(86319),v=i(73085),y=i(88916),f=i(21296),b=i(70336);let x=class{constructor(e){this.fetch=e}getSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/user/preview/",{query:t,baseUrlType:2})}getGeneralSugList(e){const t=Object.assign(Object.assign({},e),{aid:1988});return this.fetch.get("/api/search/general/preview/",{query:t,baseUrlType:2})}};x=(0,o.__decorate)([(0,f.G)(),(0,o.__metadata)("design:paramtypes",[b.r])],x);let k=class extends n.D{constructor(e,t,i){super(),this.service=e,this.report=t,this.home=i,this.defaultState={sugList:[],loading:!1,activeIndex:-1,searchValue:"",inputFocus:!1}}setSearchValue(e,t){e.searchValue=t}setInputFocus(e,t){e.inputFocus=t}handleInputFocusChange(e){return e.pipe((0,d.b)((e=>{e&&this.report.handleSearchEntry()})),(0,c.U)(this.getActions().setInputFocus))}setList(e,t){e.sugList=t}setLoading(e,t){e.loading=t}setActiveIndex(e,t){e.activeIndex=t}setActiveUp(e){e.activeIndex=Math.max(0,e.activeIndex-1)}setActiveDown(e){const{sugList:t,activeIndex:i}=e;e.activeIndex=Math.min(t.length,i+1)}getSugList(e){return e.pipe((0,p.g)("keyword"),(0,u.b)(500),(0,g.M)(this.state$,this.home.state$),(0,c.U)((([e,t,{appContext:i}])=>({payload:e,inputFocus:t.inputFocus,isLogin:Boolean(null==i?void 0:i.$user),searchVideoForLoggedin:null==i?void 0:i.$searchVideoForLoggedin}))),(0,m.w)((({payload:e,inputFocus:t,isLogin:i,searchVideoForLoggedin:o})=>e.keyword?(i||!o?this.service.getGeneralSugList({keyword:e.keyword,app_language:e.app_language}):this.service.getSugList(e)).pipe((0,c.U)((e=>{const{status_code:t,sug_list:i=[],log_pb:o}=e;let n=[];return 0===t&&i.length&&(n=i.map((e=>{var t;return Object.assign(Object.assign({},e),{impr_id:null!==(t=null==o?void 0:o.impr_id)&&void 0!==t?t:""})}))),Object.assign(Object.assign({},e),{sug_list:n})})),(0,d.b)((({sug_list:i,words_query_record:o,log_pb:n})=>{t&&i.forEach(((t,i)=>{var a,r;this.report.handleSugImpression({impr_id:null!==(a=null==n?void 0:n.impr_id)&&void 0!==a?a:"",words_source:"sug",words_position:i,words_content:t.content,raw_query:e.keyword,sug_type:t.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!==(r=null==o?void 0:o.query_id)&&void 0!==r?r:"",group_id:t.word_record.group_id})}))})),(0,c.U)((e=>this.getActions().setList(e.sug_list))),(0,h.O)(this.getActions().setLoading(!0),this.getActions().setActiveIndex(-1)),(0,_.l)(this.getActions().setLoading(!1))):(0,s.of)(this.getActions().setList([])))))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setSearchValue",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setInputFocus",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"handleInputFocusChange",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setActiveIndex",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setActiveUp",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"setActiveDown",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[l.y]),(0,o.__metadata)("design:returntype",void 0)],k.prototype,"getSugList",null),k=(0,o.__decorate)([(0,r.Y)("Sug"),(0,o.__metadata)("design:paramtypes",[x,v.x,y.G])],k)},74036:(e,t,i)=>{"use strict";i.d(t,{w:()=>g,if:()=>m,Ob:()=>h,Zx:()=>_});var o=i(24246),n=i(32321),a=i(35002),r=i(32735),s=i(22538),l=i(54348),d=i(73085),c=i(86987),p=i(62904),u=i(38424);function g(){var e;const{search:t,state:i}=(0,s.TH)(),{enterMethod:o,searchSource:n}=null!=i?i:{},{q:r}=(0,a.parse)(t);return{enterMethod:o,searchSource:n,keyword:null!==(e=Array.isArray(r)?r.toString():r)&&void 0!==e?e:""}}function m(e){var t;const{keyword:i,enterMethod:n,searchSource:a}=g(),{$user:d,$searchVideoForLoggedin:m}=null!==(t=(0,c.L)((()=>["$user","$abTestVersion","$searchVideoForLoggedin"]),[]))&&void 0!==t?t:{},h=(0,s.TH)(),{pathname:_}=h,v=Boolean(d),[y,f]=(0,o.b7)(u.t8,{dependencies:[],selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}}}),b=(0,o.qj)(p.h),x=_===l.Ad.searchUser;return(0,r.useCallback)(((t=!0,o=!1)=>{const r=i!==(null==y?void 0:y.keyword)||t,s=i!==(null==y?void 0:y.keyword)||o,d=!m||v,c="_solved"===n?void 0:{search_source:null!=a?a:"search_outer",search_type:e,enter_method:n};switch(e){case"general":_===l.Ad.searchHome&&r&&d&&(s&&(f.setSearchResult({key:"general",result:u._P}),b.resetItemList({key:"search_top",loading:!0})),f.getTopSearch({keyword:i,teaParams:c}));break;case"user":x&&r&&(s&&f.setSearchResult({key:"user",result:u.i8}),f.getUserSearch({keyword:i,teaParams:c}));break;case"video":_===l.Ad.searchVideo&&r&&d&&(s&&(f.setSearchResult({key:"video",result:u.i8}),b.resetItemList({key:"search_video",loading:!0})),f.getVideoSearch({keyword:i,teaParams:c}))}}),[f,n,v,x,b,e,i,_,a,null==y?void 0:y.keyword,m])}function h(e,t=!0){const{keyword:i}=g(),n=(0,s.TH)(),a=(0,s.k6)(),{state:d,pathname:c}=n,p=Boolean((0,s.LX)(c,{path:l.Ad.searchHome})),[h,_]=(0,o.b7)(u.t8,{dependencies:[],selector:t=>{var i;return null!==(i=t[e])&&void 0!==i?i:{}}}),v=m(e);return(0,r.useEffect)((()=>{var e,o,r,s,l;if(!p)return;const c=h.data?!h.error&&0===(null===(o=null===(e=h.data)||void 0===e?void 0:e.videoList)||void 0===o?void 0:o.length)&&0===(null===(s=null===(r=h.data)||void 0===r?void 0:r.otherDataList)||void 0===s?void 0:s.length):0===(null===(l=null==h?void 0:h.items)||void 0===l?void 0:l.length),u=i!==h.keyword||c;return t&&a.replace(Object.assign(Object.assign({},n),{state:Object.assign(Object.assign({},d),{enterMethod:"_solved"})})),v(u),()=>{_.dispose()}}),[i]),Object.assign(Object.assign({},h),{keyword:i,handleSearch:v})}function _(e,t){const i=(0,n.fz)(d.x),o=(0,r.useRef)(0),a=(0,s.k6)(),c=(0,s.TH)(),{pathname:p}=c;(0,r.useEffect)((()=>{if((0,s.LX)(p,{path:l.Ad.searchHome}))return o.current||(o.current=Date.now()),a.listen((({pathname:n})=>{if(!(0,s.LX)(n,{path:l.Ad.searchHome})){const n=Date.now()-o.current;i.handleSearchSessionFinish({duration:n,impr_id:e,search_id:e,search_type:t})}}))}),[i,e,t])}},38424:(e,t,i)=>{"use strict";i.d(t,{i8:()=>L,_P:()=>A,t8:()=>R});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(53899),l=i(37674),d=i(55251),c=i(2355),p=i(31144),u=i(71011),g=i(29866),m=i(52702),h=i(60194),_=i(86319),v=i(20370),y=i(30526),f=i(61080),b=i(54348),x=i(55643),k=i(3585),S=i(80002),w=i(17941),C=i(73085),j=i(88916),T=i(47159),O=i(24448),I=i(70221),P=i(62904),E=i(79095);const L={keyword:"",error:null,loading:!1,hasMore:!1,cursor:0,items:[],preloadList:[]},A={keyword:"",error:null,loading:!1,hasMore:!1,totalLength:0,cursor:0,data:{videoList:[],otherDataList:[]},preloadList:[]};let R=class extends n.D{constructor(e,t,i,o,n,a,r,s){super(),this.service=e,this.user=t,this.seoModule=i,this.itemList=o,this.reporter=n,this.videoMask=a,this.appContext=r,this.t=s,this.defaultState={showTabs:!0,general:A,user:L,video:L}}setSearchResult(e,t){const{key:i,result:o}=null!=t?t:{};e[i]=o}addSearchResult(e,t){var i,o,n,a,r;const{key:s,result:l}=null!=t?t:{};if(!e[s])return e[s]=l,e;e[s]=Object.assign(Object.assign(Object.assign({},e[s]),l),{items:null===(o=null===(i=e[s])||void 0===i?void 0:i.items)||void 0===o?void 0:o.concat(l.items),preloadList:null===(a=null===(n=e[s])||void 0===n?void 0:n.preloadList)||void 0===a?void 0:a.concat(null!==(r=l.preloadList)&&void 0!==r?r:[])})}addTopSearchResult(e,t){var i,o;const n=e.general;null===(i=t.data)||void 0===i||i.forEach((e=>{var t,i,o,a,r,s,l,d,c,p,u;if(4===e.type){const o={},a=n.data.videoList.length;o.type=e.type,o.items=null===(t=null==e?void 0:e.user_list)||void 0===t?void 0:t.map((({user_info:e})=>{var t;return n.totalLength++,null!==(t=e.unique_id)&&void 0!==t?t:""})),o.position=a%6==0?a:6*Math.ceil(a/6),o.hasMore=null!==(i=e.view_more)&&void 0!==i&&i,n.data.otherDataList=[...n.data.otherDataList,o]}else{n.totalLength++,n.data.videoList=[...n.data.videoList,null!==(a=null===(o=e.item)||void 0===o?void 0:o.id)&&void 0!==a?a:""];const t={id:null!==(l=null===(s=null===(r=e.item)||void 0===r?void 0:r.video)||void 0===s?void 0:s.id)&&void 0!==l?l:"",url:null!==(p=null===(c=null===(d=e.item)||void 0===d?void 0:d.video)||void 0===c?void 0:c.playAddr)&&void 0!==p?p:""};n.preloadList=[...null!==(u=n.preloadList)&&void 0!==u?u:[],t]}})),e.general=Object.assign(Object.assign({},e.general),{hasMore:Boolean(t.has_more),cursor:null!==(o=t.cursor)&&void 0!==o?o:0,data:Object.assign({},n.data),rid:t.rid,preloadList:n.preloadList})}setSearchLoading(e,t){const{key:i,loading:o}=null!=t?t:{};e[i].loading=o}setShowTabs(e,t){e.showTabs=t}setKeyword(e,t){const{key:i,keyword:o}=t;e[i].keyword=o}resetSearchResult(e){e.general=A,e.user=L,e.video=L}getTopSearch(e){return e.pipe((0,p.M)(this.state$,this.appContext.state$,this.videoMask.state$),(0,u.U)((([e,t,i,o])=>({query:e,appContextState:i,state:t.general,videoMaskState:o}))),(0,g.w)((e=>{var t=e.query,{teaParams:i}=t,n=(0,o.__rest)(t,["teaParams"]),{appContextState:a,state:r,state:{cursor:s,data:c,rid:p},videoMaskState:u}=e;return(n.keyword?this.service.getTopSearch(Object.assign(Object.assign({},n),{offset:s,search_id:p})):(0,l.of)({})).pipe(this.handleTopSearchReport({state:r,keyword:n.keyword,teaParams:i}),(0,m.z)((e=>{var t,i,o;const{$user:s}=null!==(t=a.appContext)&&void 0!==t?t:{},c=this.seoModule.setSearchSEOProps(e,{$language:a.lang},{pathname:b.Ad.searchHome,input_keyword:n.keyword}),{has_more:g,data:m=[],extra:h={},search_nil_info:_,suicide_prevent:v,search_nil_text:y,status_code:f,log_pb:x}=e,k=[0,203,403].includes(f)?0:f,{logid:S}=h,w=null!==(i=null!=p?p:S)&&void 0!==i?i:"";if(!m.length&&!g)return this.generateErrorState({search_nil_info:_,search_nil_text:y,suicide_prevent:v,state:r,key:"general",keyword:n.keyword,pathname:b.Ad.searchHome,action$s:[c]});const C=[],j=[],T={hasMore:Boolean(g),statusCode:k,itemList:[],rid:w};m.forEach((e=>{if(4===e.type){const t=Object.assign(Object.assign({},e),{items:[]}),{user_list:i=[]}=e;i.forEach((({user_info:e={}})=>{const{user:i,stats:o}=this.userConvertor(e,w,null==x?void 0:x.impr_id),{unique_id:n=""}=e;C.push(i),j.push(o),t.items.push(n)}))}else T.itemList.push(e.item)})),(1===(null==s?void 0:s.photoSensitiveVideosSetting)||!s&&1===u.photoSensitiveVideosSetting)&&(e.data=null===(o=e.data)||void 0===o?void 0:o.filter((e=>{var t;return 4===e.type||4!==(null===(t=e.item)||void 0===t?void 0:t.maskType)})));const O=(0,l.of)(this.user.getActions().multiSetUser(C),this.user.getActions().multiSetUserStats(j),this.itemList.getActions().setList({response:T,key:"search_top"}),this.getActions().addTopSearchResult(Object.assign(Object.assign({},e),{rid:w})));return(0,d.T)(O,c)})),this.catchError({isEmpty:Boolean(c.videoList.length||c.otherDataList.length),key:"general",keyword:n.keyword,state:r,teaParams:i}),(0,h.O)(this.getActions().setSearchLoading({key:"general",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"general",keyword:n.keyword})),(0,_.l)(this.getActions().setSearchLoading({key:"general",loading:!1}),this.terminate()),(0,v.R)(this.getAction$().dispose))})))}getUserSearch(e){return e.pipe((0,p.M)(this.state$,this.appContext.state$),(0,u.U)((([e,t,i])=>({query:e,appContextState:i,state:t.user}))),(0,g.w)((e=>{var t=e.query,{teaParams:i}=t,n=(0,o.__rest)(t,["teaParams"]),{appContextState:a,state:r,state:{cursor:s,items:c,rid:p}}=e;return(n.keyword?this.service.getUserSearch(Object.assign(Object.assign({},n),{cursor:s,search_id:p})):(0,l.of)({})).pipe((0,y.b)((e=>{var t;const{user_list:o=[],log_pb:a,extra:r}=e,{impr_id:s}=null!=a?a:{},{logid:l}=null!=r?r:{},d=null!==(t=null!=p?p:l)&&void 0!==t?t:"";if(o.length){const e=c.length,t=(null==i?void 0:i.enter_method)?k.WB.commonParams.page_name:"search_outer";o.forEach(((i,o)=>{this.reporter.handleSearchImpression({search_type:"user",enter_from:t,rank:e+o,search_keyword:n.keyword,search_result_id:i.user_info.uid,impr_id:s,search_id:d})}))}i&&this.reporter.handleSearch(Object.assign({search_id:d,search_keyword:n.keyword},i))})),(0,m.z)((e=>{var t;const i=this.seoModule.setSearchSEOProps(e,{$language:a.lang},{pathname:b.Ad.searchUser,input_keyword:n.keyword}),{has_more:o,cursor:s,user_list:c=[],extra:u,search_nil_info:g,suicide_prevent:m,search_nil_text:h,log_pb:_}=e,v=null!==(t=null!=p?p:null==u?void 0:u.logid)&&void 0!==t?t:"";if(!c.length&&!o)return this.generateErrorState({res:e,search_nil_info:g,search_nil_text:h,suicide_prevent:m,state:r,key:"user",keyword:n.keyword,pathname:b.Ad.searchUser,action$s:[i]});if(c.length){const e=[],t=[],a=c.map((({user_info:i})=>{const{user:o,stats:n}=this.userConvertor(i,v,null==_?void 0:_.impr_id);return e.push(o),t.push(n),o.uniqueId})),r=(0,l.of)(this.user.getActions().multiSetUser(e),this.user.getActions().multiSetUserStats(t),this.getActions().addSearchResult({key:"user",result:{hasMore:Boolean(o),keyword:n.keyword,cursor:s,error:null,items:a,loading:!1,rid:v,preloadList:[]}}));return(0,d.T)(r,i)}return i})),this.catchError({isEmpty:!!c.length,key:"user",keyword:n.keyword,state:r,teaParams:i}),(0,h.O)(this.getActions().setSearchLoading({key:"user",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"user",keyword:n.keyword})),(0,_.l)(this.getActions().setSearchLoading({key:"user",loading:!1}),this.terminate()),(0,v.R)(this.getAction$().dispose))})))}getVideoSearch(e){return e.pipe((0,p.M)(this.state$,this.appContext.state$,this.videoMask.state$),(0,u.U)((([e,t,i,o])=>({query:e,appContextState:i,state:t.video,videoMaskState:o}))),(0,g.w)((e=>{var t=e.query,{teaParams:i}=t,n=(0,o.__rest)(t,["teaParams"]),{appContextState:a,state:r,state:{cursor:s,items:c,rid:p},videoMaskState:u}=e;return((null==n?void 0:n.keyword)?this.service.getVideoSearch(Object.assign(Object.assign({},n),{offset:s,count:20,search_id:p})):(0,l.of)({})).pipe((0,y.b)((e=>{var t;const{item_list:o=[],log_pb:a,extra:r}=e,s=null!==(t=null!=p?p:null==r?void 0:r.logid)&&void 0!==t?t:"";if(o.length){const e=c.length,t=(null==i?void 0:i.enter_method)?k.WB.commonParams.page_name:"search_outer";o.forEach(((i,o)=>{var r;this.reporter.handleSearchVideoImpression({search_type:"video",enter_from:t,group_id:null==i?void 0:i.id,author_id:null===(r=null==i?void 0:i.author)||void 0===r?void 0:r.id,rank:e+o,search_keyword:n.keyword,impr_id:null==a?void 0:a.impr_id,search_id:s})}))}i&&this.reporter.handleSearch(Object.assign({search_id:s,search_keyword:n.keyword},i))})),(0,m.z)((e=>{var t,i;const o=null===(t=a.appContext)||void 0===t?void 0:t.$user,s=this.seoModule.setSearchSEOProps(e,{$language:a.lang},{pathname:b.Ad.searchVideo,input_keyword:n.keyword}),{has_more:c,cursor:g,item_list:m=[],extra:h,search_nil_info:_,suicide_prevent:v,search_nil_text:y,status_code:f}=e,x=[0,203,403].includes(f)?0:f;if(!m.length&&!c)return this.generateErrorState({search_nil_info:_,search_nil_text:y,suicide_prevent:v,state:r,key:"video",keyword:n.keyword,pathname:b.Ad.searchVideo,action$s:[s]});let k=[];k=1===(null==o?void 0:o.photoSensitiveVideosSetting)||!o&&1===u.photoSensitiveVideosSetting?m.filter((e=>4!==(null==e?void 0:e.maskType))).map((({id:e})=>e)):m.map((({id:e})=>e));const S=null!==(i=m.map((e=>{const{video:{id:t,playAddr:i=""}}=e;return{id:t,url:i}})))&&void 0!==i?i:[],w=(0,l.of)(this.itemList.getActions().setList({response:{itemList:m,hasMore:Boolean(c),statusCode:x},key:"search_video"}),this.getActions().addSearchResult({key:"video",result:{hasMore:Boolean(c),keyword:n.keyword,cursor:null!=g?g:0,error:null,items:k,loading:!1,rid:null!=p?p:null==h?void 0:h.logid,preloadList:S}}));return(0,d.T)(w,s)})),this.catchError({isEmpty:!!c.length,state:r,keyword:n.keyword,teaParams:i,key:"video"}),(0,h.O)(this.getActions().setSearchLoading({key:"video",loading:!0}),this.getActions().setShowTabs(!0),this.getActions().setKeyword({key:"video",keyword:n.keyword})),(0,_.l)(this.getActions().setSearchLoading({key:"video",loading:!1}),this.terminate()),(0,v.R)(this.getAction$().dispose))})))}handleTopSearchReport({state:{data:e,totalLength:t,rid:i},teaParams:o,keyword:n}){return(0,y.b)((a=>{var r;const{data:s=[],log_pb:l,extra:d={}}=a,{logid:c}=d,p=null!==(r=null!=i?i:c)&&void 0!==r?r:"",{impr_id:u}=null!=l?l:{};if(s.length){const i=e.videoList.length,a=t-e.videoList.length,r=(null==o?void 0:o.enter_method)?k.WB.commonParams.page_name:"search_outer";let l=0,d=0,c=0;s.forEach((e=>{var o,s,g,m;4===e.type?null===(o=e.user_list)||void 0===o||o.forEach((e=>{this.reporter.handleSearchImpression({search_type:"general",enter_from:r,rank:a+d,item_rank:t+l,search_keyword:n,search_result_id:e.user_info.uid,impr_id:u,search_id:p}),l++,d++})):(this.reporter.handleSearchVideoImpression({search_type:"general",enter_from:r,rank:i+c,item_rank:t+l,search_keyword:n,search_id:p,group_id:null===(s=e.item)||void 0===s?void 0:s.id,author_id:null===(m=null===(g=e.item)||void 0===g?void 0:g.author)||void 0===m?void 0:m.id,impr_id:u}),l++,c++)}))}o&&this.reporter.handleSearch(Object.assign({search_id:p,search_keyword:n},o))}))}catchError({isEmpty:e,teaParams:t,keyword:i,key:o,state:n}){return(0,f.K)((()=>e?(x.h.open({content:this.t("server_error_title"),duration:3,widthType:"half"}),(0,l.of)(this.noop())):(t&&this.reporter.handleSearch(Object.assign({search_id:"",search_keyword:i},t)),(0,l.of)(this.getActions().setSearchResult({key:o,result:Object.assign(Object.assign({},n),{keyword:i,error:{type:-1}})})))))}generateErrorState(e){const{search_nil_info:t,search_nil_text:i,suicide_prevent:o,state:n,key:a,keyword:r,actions:s=[],action$s:c=[]}=e,{text_type:p}=null!=t?t:{text_type:10},u={type:p||10};switch(p){case 11:u.extra=o;break;case 12:u.extra=i}const g=(0,l.of)(this.getActions().setSearchResult({key:a,result:Object.assign(Object.assign({},n),{keyword:r,error:u})}),this.getActions().setShowTabs(11!==p),...s);return(0,d.T)(g,...c)}userConvertor(e,t,i){var o;return{user:(0,w.yk)(e,{search_id:t,impr_id:i}),stats:{uniqueId:null!==(o=e.unique_id)&&void 0!==o?o:"",stats:(0,w.u0)(e,!0)}}}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",c.y)],R.prototype,"dispose",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"setSearchResult",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"addSearchResult",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"addTopSearchResult",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"setSearchLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"setShowTabs",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"setKeyword",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"resetSearchResult",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"getTopSearch",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"getUserSearch",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],R.prototype,"getVideoSearch",null),R=(0,o.__decorate)([(0,r.Y)("Search"),(0,o.__param)(7,(0,s.t)(S.s)),(0,o.__metadata)("design:paramtypes",[E.o,O.z,T.q,P.h,C.x,I.P,j.G,Function])],R)},79095:(e,t,i)=>{"use strict";i.d(t,{o:()=>r});var o=i(31191),n=i(21296),a=i(70336);let r=class{constructor(e){this.fetch=e}getTopSearch(e){return this.fetch.get("/api/search/general/full/",{query:e,baseUrlType:3})}getUserSearch(e){return this.fetch.get("/api/search/user/full/",{query:e})}getVideoSearch(e){return this.fetch.get("/api/search/item/full/",{query:e,baseUrlType:3})}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.r])],r)},47159:(e,t,i)=>{"use strict";i.d(t,{q:()=>S});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(53899),l=i(37674),d=i(55251),c=i(2355),p=i(31144),u=i(51166),g=i(52702),m=i(61080),h=i(71011),_=i(80002),v=i(88916),y=i(12115),f=i(21296),b=i(44200);const x=[...b.PAGE_CONTENTS,...b.EXPERIMENT_CONTENT];let k=class{constructor(e){this.t=e}fetchSEOProps(e){var t,i,o,n;e.t=this.t;const a=null!==(i=null===(t=(0,b.applyMetaParamsSERP)(e,x).seoProps)||void 0===t?void 0:t.metaParams)&&void 0!==i?i:{},r=null!==(n=null===(o=(0,b.applyJSONLDSERP)(e,x).seoProps)||void 0===o?void 0:o.jsonldList)&&void 0!==n?n:[];return(0,l.of)(Object.assign(Object.assign({},e.seoProps),{metaParams:a,jsonldList:r}))}getUA(){return window.navigator.userAgent}};k=(0,o.__decorate)([(0,f.G)(),(0,o.__param)(0,(0,s.t)(_.s)),(0,o.__metadata)("design:paramtypes",[Function])],k);let S=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.appContext=t,this.sharingMeta=i,this.t=o,this.defaultState={metaParams:{},jsonldList:[],testId:void 0,pageType:999}}setSEOState(e,t){e.metaParams=t.metaParams,e.jsonldList=t.jsonldList,e.testId=t.testId}setFeedSEOProps(e){return e.pipe((0,p.M)(this.appContext.state$),(0,u.z)((([e,t])=>{const{pageType:i,topic:o,topicType:n}=e,{lang:a="en"}=t,r={seoProps:{pageId:"",pageType:i},topic:o,topicType:n,$language:a};return this.service.fetchSEOProps(r).pipe((0,g.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,m.K)((e=>(0,l.of)(this.noop(),this.terminate()))))})))}setGoLiveSEOProps(e){return e.pipe((0,p.M)(this.appContext.state$),(0,u.z)((([e,t])=>{var i;const{lang:o="en"}=t,n={seoProps:{pageId:"",pageType:14},$user:null===(i=t.appContext)||void 0===i?void 0:i.$user,$language:o,t:this.t};return this.service.fetchSEOProps(n).pipe((0,g.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,m.K)((()=>(0,l.of)(this.noop()))))})))}setVideoSEOProps(e,t,i){var o,n,a;if(-1===e.statusCode)return(0,l.of)(this.noop());const r=null!==(a=null===(n=null===(o=null==e?void 0:e.itemInfo)||void 0===o?void 0:o.itemStruct)||void 0===n?void 0:n.id)&&void 0!==a?a:"",s=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:r,pageType:0},t:this.t});return this.service.fetchSEOProps(s).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setVideoSharingMeta(t,e,i)))))}setSearchSharingSEOProps(e,t,i){if(-1===e.statusCode)return(0,l.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:111},eventName:i,t:this.t});return this.service.fetchSEOProps(o).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setSearchSharingMeta(t,e,i)))))}setQuestionSEOProps(e,t,i,o,n){var a;if(-1===e.statusCode)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(a=e.questionInfo)||void 0===a?void 0:a.id,pageType:16},answers:i,t:this.t,items:n});return this.service.fetchSEOProps(r).pipe((0,g.z)((t=>(0,l.of)(this.getActions().setSEOState(t),this.sharingMeta.setQuestionSharingMeta(e,i[0],o)))))}setVideoPlaylistSEOProps(e,t){var i;if(-1===e.statusCode)return(0,l.of)(this.noop());const o=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null===(i=e.mixInfo)||void 0===i?void 0:i.id,pageType:119},t:this.t});return this.service.fetchSEOProps(o).pipe((0,g.z)((t=>(0,l.of)(this.getActions().setSEOState(t),this.sharingMeta.setVideoPlaylistSharingMeta(e)))))}setUserSEOProps(e,t,i){var o;const{userInfo:n,statusCode:a}=e,r=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(o=null==n?void 0:n.user.id)&&void 0!==o?o:"",pageType:1},t:this.t,items:i});return-1===a?(0,l.of)(this.noop()):this.service.fetchSEOProps(r).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setUserSharingMeta(t,e)))))}setStickerSEOProps(e,t){var i,o,n;const{statusCode:a}=e;if(-1===a)return(0,l.of)(this.noop());const r=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:a,seoProps:{pageId:null!==(n=null===(o=null===(i=null==e?void 0:e.stickerInfo)||void 0===i?void 0:i.sticker)||void 0===o?void 0:o.id)&&void 0!==n?n:"",pageType:6},t:this.t});return this.service.fetchSEOProps(r).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setStickerSharingMeta(t,e)))))}setChallengeSEOProps(e,t,i){var o;const{statusCode:n}=e;if(-1===n)return(0,l.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:n,seoProps:{pageId:null===(o=e.challengeInfo)||void 0===o?void 0:o.challenge.id,pageType:3},t:this.t,items:i});return this.service.fetchSEOProps(a).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setChallengeSharingMeta(t,e)))))}setMusicSEOProps(e,t,i){var o;const{statusCode:n}=e;if(-1===n)return(0,l.of)(this.noop());const a=Object.assign(Object.assign(Object.assign({},e),t),{statusCode:n,seoProps:{pageId:null===(o=e.musicInfo)||void 0===o?void 0:o.music.id,pageType:4},items:i,t:this.t});return this.service.fetchSEOProps(a).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setMusicSharingMeta(t,e)))))}setMusicPlaylistSEOProps(e,t){var i;const{status_code:o}=e;if(-1===o)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign({},e),t),{status_code:o,seoProps:{pageId:null===(i=e.mc_info)||void 0===i?void 0:i.id_str,pageType:17},t:this.t});return this.service.fetchSEOProps(n).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setMusicPlaylistSharingMeta(t,e)))))}setKeywordExpansionSEOProps(e,t){const i=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:104},t:this.t});return this.service.fetchSEOProps(i).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setKeywordsExpansionSharingMeta(t,e,this.service.getUA())))))}setSearchSEOProps(e,t,i){const{status_code:o}=e;if(-1===o)return(0,l.of)(this.noop());const n=Object.assign(Object.assign(Object.assign(Object.assign({},e),t),i),{seoProps:{pageId:"",pageType:105},t:this.t});return this.service.fetchSEOProps(n).pipe((0,h.U)((e=>this.getActions().setSEOState(e))))}setLiveRoomSEOProps(e,t){var i;const{userInfo:o,statusCode:n}=e,a=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageId:null!==(i=null==o?void 0:o.user.id)&&void 0!==i?i:"",pageType:12},t:this.t});return-1===n?(0,l.of)(this.noop()):this.service.fetchSEOProps(a).pipe((0,g.z)((t=>(0,d.T)((0,l.of)(this.getActions().setSEOState(t)),this.sharingMeta.setLiveRoomSharingMeta(t,e)))))}setFollowingSEOProps(e,t){if(-1===e.statusCode)return(0,l.of)(this.noop());const i=Object.assign(Object.assign(Object.assign({},e),t),{seoProps:{pageType:11},t:this.t});return this.service.fetchSEOProps(i).pipe((0,g.z)((e=>(0,d.T)((0,l.of)(this.getActions().setSEOState(e)),this.sharingMeta.setFollowingSharingMeta(e)))))}setEventDetailSEOProps(e){return e.pipe((0,p.M)(this.appContext.state$),(0,u.z)((([e,t])=>{const{lang:i="en"}=t,{eventTitle:o,eventId:n,subscriberCount:a}=e,r={seoProps:{pageId:"",pageType:114},t:this.t,eventTitle:o,$language:i,eventId:n,subscriberCount:a};return this.service.fetchSEOProps(r).pipe((0,g.z)((e=>(0,l.of)(this.getActions().setSEOState(e),this.terminate()))),(0,m.K)((()=>(0,l.of)(this.noop()))))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setSEOState",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",void 0)],S.prototype,"setFeedSEOProps",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",c.y)],S.prototype,"setGoLiveSEOProps",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[c.y]),(0,o.__metadata)("design:returntype",c.y)],S.prototype,"setEventDetailSEOProps",null),S=(0,o.__decorate)([(0,r.Y)("SEO"),(0,o.__param)(3,(0,s.t)(_.s)),(0,o.__metadata)("design:paramtypes",[k,v.G,y.I,Function])],S)},12115:(e,t,i)=>{"use strict";i.d(t,{I:()=>_});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(53899),l=i(17901),d=i.n(l),c=i(37674),p=i(97475),u=i(80002),g=i(17941),m=i(88916);const h="https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/share_img.png";let _=class extends n.D{constructor(e,t){super(),this.appContext=e,this.t=t,this.defaultState={value:{}}}setSharingMetaState(e,t){var i;e.value=d()(t,{"og:image":h,"twitter:image":null!==(i=t["og:image"])&&void 0!==i?i:h})}getBaseConfig(){var e;const t="m"===(null===(e=this.appContext.state.appContext)||void 0===e?void 0:e.$appType);return{isM:t,protocal:t?"snssdk1233://":"snssdk1180://"}}getBaseMetaParams(e){var t,i,o,n;const{schema:a="",pageType:r,shareMeta:s,metaParams:l}=e,d=this.getBaseConfig(),{isM:c}=d,{APP_INFO:u}=p.g,g=c?u.M_NAME:u.T_NAME,m=c?u.M_STORE:u.T_STORE,h=c?u.M_PACKAGE:u.T_PACKAGE,_=0===r?null!==(t=null==s?void 0:s.title)&&void 0!==t?t:"":null!==(i=null==l?void 0:l.title)&&void 0!==i?i:"",v=0===r?null!==(o=null==s?void 0:s.desc)&&void 0!==o?o:"":null!==(n=null==l?void 0:l.description)&&void 0!==n?n:"",y={"al:ios:url":a,"al:android:url":a,"al:ios:app_store_id":m,"al:ios:app_name":g,"al:android:app_name":g,"al:android:package":h},f={"og:site_name":"TikTok","og:type":"website","og:title":_,"og:description":v,"fb:app_id":c?u.M_FACEBOOK_ID:u.T_FACEBOOK_ID},b={"twitter:app:id:iphone":m,"twitter:app:id:googleplay":h,"twitter:card":"summary","twitter:site":"TikTok","twitter:title":_,"twitter:description":v};return Object.assign(Object.assign(Object.assign({},y),f),b)}setVideoSharingMeta(e,t,i){var o,n,a,r,s,l,d,p,u,g,m,h,_,v;const{protocal:y}=this.getBaseConfig(),f=this.getBaseMetaParams({schema:`${y}aweme/detail/${null===(o=t.itemInfo)||void 0===o?void 0:o.itemStruct.id}?${i}`,metaParams:e.metaParams,pageType:0,shareMeta:null==t?void 0:t.shareMeta,response:t}),b=null===(n=t.itemInfo)||void 0===n?void 0:n.itemStruct.video,x=null===(a=t.itemInfo)||void 0===a?void 0:a.itemStruct.imagePost,k=null!==(p=x?null===(l=null===(s=null===(r=x.shareCover)||void 0===r?void 0:r.imageURL)||void 0===s?void 0:s.urlList)||void 0===l?void 0:l[1]:null===(d=null==b?void 0:b.shareCover)||void 0===d?void 0:d[1])&&void 0!==p?p:"",S=null!==(m=null!==(g=String(null===(u=null==x?void 0:x.shareCover)||void 0===u?void 0:u.imageWidth))&&void 0!==g?g:null==b?void 0:b.width)&&void 0!==m?m:"",w=null!==(v=null!==(_=String(null===(h=null==x?void 0:x.shareCover)||void 0===h?void 0:h.imageHeight))&&void 0!==_?_:null==b?void 0:b.height)&&void 0!==v?v:"",C=Object.assign(Object.assign({},f),{"og:image":k,"twitter:image":k,"og:image:width":S,"og:image:height":w});return(0,c.of)(this.getActions().setSharingMetaState(C))}setUserSharingMeta(e,t){var i,o,n,a;const{protocal:r}=this.getBaseConfig(),s=this.getBaseMetaParams({response:t,pageType:1,schema:`${r}user/profile/`,metaParams:e.metaParams}),l=null===(i=t.userInfo)||void 0===i?void 0:i.user,d=null!==(n=null!==(o=null==l?void 0:l.avatarMedium)&&void 0!==o?o:null==l?void 0:l.avatarThumb)&&void 0!==n?n:h,p=Object.assign(Object.assign({},s),{"og:image":d,"twitter:image":d,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,c.of)(this.getActions().setSharingMetaState(p))}setMusicSharingMeta(e,t){var i,o,n,a,r,s;const l=null===(i=t.musicInfo)||void 0===i?void 0:i.music,{protocal:d}=this.getBaseConfig(),p=this.getBaseMetaParams({response:t,pageType:4,schema:`${d}user/profile/${null==l?void 0:l.id}`,metaParams:e.metaParams}),u=null!==(n=null!==(o=null==l?void 0:l.coverMedium)&&void 0!==o?o:null==l?void 0:l.coverThumb)&&void 0!==n?n:"https://lf16-tiktok-web.ttwstatic.com/obj/tiktok-web-common-sg/mtact/static/images/music-default.png",g=null!==(a=null==l?void 0:l.title)&&void 0!==a?a:"",m=null!==(r=null==l?void 0:l.authorName)&&void 0!==r?r:"",h=Object.assign(Object.assign({},p),{"og:image":u,"twitter:image":u,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title,"music:duration":"0","music:album:track":g,"music:musician":m});return(0,c.of)(this.getActions().setSharingMetaState(h))}setMusicPlaylistSharingMeta(e,t){var i,o,n,a;const r=t.mc_info,{protocal:s}=this.getBaseConfig(),l=this.getBaseMetaParams({schema:`${s}assmusic/category/${null==r?void 0:r.id_str}?name=${encodeURIComponent(null!==(i=null==r?void 0:r.name)&&void 0!==i?i:"")}&previous_page=reflow_playlist&enter_method=reflow_return`,metaParams:Object.assign(Object.assign({},e.metaParams),{title:null===(o=null==r?void 0:r.share_info)||void 0===o?void 0:o.share_title,description:null===(n=null==r?void 0:r.share_info)||void 0===n?void 0:n.share_desc})}),d=(null==r?void 0:r.share_cover)?(0,g.ZT)(null==r?void 0:r.share_cover):"http://p19-aop-sg.ibyteimg.com/tos-alisg-i-yzb763657w-sg/d2f2b037e19646ad5f2bbd779a550302.png~tplv-yzb763657w-resize:800:800.jpeg",p=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,c.of)(this.getActions().setSharingMetaState(p))}setStickerSharingMeta(e,t){var i,o,n,a;const{protocal:r}=this.getBaseConfig(),s=null===(i=t.stickerInfo)||void 0===i?void 0:i.sticker,l=this.getBaseMetaParams({pageType:3,response:t,schema:`${r}sticker/detail/${null==s?void 0:s.id}`,metaParams:e.metaParams}),d=null===(n=null===(o=null==s?void 0:s.coverUrls)||void 0===o?void 0:o.urlList)||void 0===n?void 0:n[0],p=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,c.of)(this.getActions().setSharingMetaState(p))}setChallengeSharingMeta(e,t){var i,o,n,a;const{protocal:r}=this.getBaseConfig(),s=null===(i=t.challengeInfo)||void 0===i?void 0:i.challenge,l=this.getBaseMetaParams({pageType:3,response:t,schema:`${r}challenge/detail/${null==s?void 0:s.id}`,metaParams:e.metaParams}),d=null!==(n=null!==(o=null==s?void 0:s.profileMedium)&&void 0!==o?o:null==s?void 0:s.profileThumb)&&void 0!==n?n:"https://lf16-tiktok-web.ttwstatic.com/obj/ttfe-malisg/tiktok_web/amp/m-hashtag-default.png",p=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(a=e.metaParams)||void 0===a?void 0:a.title});return(0,c.of)(this.getActions().setSharingMetaState(p))}setMessageSharingMeta(e){var t,i;const{protocal:o}=this.getBaseConfig(),n=e.shareMeta,a=this.getBaseMetaParams({pageType:13,response:e,schema:`${o}messages/group/`,metaParams:{title:null==n?void 0:n.title,description:null==n?void 0:n.desc}}),r=null!==(t=null==e?void 0:e.cover)&&void 0!==t?t:"",s=Object.assign(Object.assign({},a),{"og:image":r,"twitter:image":r,"og:image:width":"720","og:image:height":"720","og:image:alt":null===(i=e.shareMeta)||void 0===i?void 0:i.title});return(0,c.of)(this.getActions().setSharingMetaState(s))}setKeywordsExpansionSharingMeta(e,t,i){var o,n,a,r,s;const{protocal:l}=this.getBaseConfig(),d=this.getBaseMetaParams({schema:`${l}user/profile/`,metaParams:e.metaParams,pageType:104,response:{keywordInfo:t}}),[p="",u="",g=""]=null!==(r=null===(a=null===(n=null===(o=t.itemResponse)||void 0===o?void 0:o.itemList)||void 0===n?void 0:n[0])||void 0===a?void 0:a.video.shareCover)&&void 0!==r?r:[],m=i.includes("WhatsApp")||i.includes("line-poker")?u:g,h=Object.assign(Object.assign({},d),{"og:image":m,"twitter:image":m,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(s=e.metaParams)||void 0===s?void 0:s.title});return(0,c.of)(this.getActions().setSharingMetaState(h))}setSearchSharingMeta(e,t,i){var o,n,a,r;const{protocal:s}=this.getBaseConfig(),l=this.getBaseMetaParams({schema:`${s}search?keyword=${null!==(n=null===(o=null==t?void 0:t.contentInfo)||void 0===o?void 0:o.query)&&void 0!==n?n:i}`,metaParams:e.metaParams}),d=null!==(r=null===(a=null==t?void 0:t.contentInfo)||void 0===a?void 0:a.thirdPartyPreviewImg)&&void 0!==r?r:"https://sf16-muse-va.ibytedtos.com/obj/search-static-maliva/maliva/ugvonpsj1631257573250",p=Object.assign(Object.assign({},l),{"og:image":d,"twitter:image":d,"og:image:width":"1200","og:image:height":"678"});return(0,c.of)(this.getActions().setSharingMetaState(p))}setLiveRoomSharingMeta(e,t){var i,o,n,a,r,s,l;const{protocal:d}=this.getBaseConfig(),p=this.getBaseMetaParams({schema:`${d}live?room_id=${null===(o=null===(i=t.userInfo)||void 0===i?void 0:i.user)||void 0===o?void 0:o.roomId}`,metaParams:e.metaParams,pageType:12}),u=null===(n=t.userInfo)||void 0===n?void 0:n.user,g=null!==(r=null!==(a=null==u?void 0:u.avatarMedium)&&void 0!==a?a:null==u?void 0:u.avatarThumb)&&void 0!==r?r:h,m=null!==(s=null==u?void 0:u.nickname)&&void 0!==s?s:null==u?void 0:u.uniqueId,_=null==u?void 0:u.uniqueId,v=Object.assign(Object.assign({},p),{"og:image":g,"og:image:secure_url":g,"og:image:width":"360","og:image:height":"360","og:image:alt":null===(l=e.metaParams)||void 0===l?void 0:l.title,"twitter:creator":m,"twitter:creator:id":_});return(0,c.of)(this.getActions().setSharingMetaState(v))}setQuestionSharingMeta(e,t,i){var o,n,a,r,s,l,d,c;const{protocal:p}=this.getBaseConfig(),u=this.getBaseMetaParams({schema:`${p}qna/detail/${null===(o=e.questionInfo)||void 0===o?void 0:o.id}`,metaParams:{title:null===(n=e.shareMeta)||void 0===n?void 0:n.title,description:null===(a=e.shareMeta)||void 0===a?void 0:a.desc},pageType:16,response:e}),g="qna"===(null===(r=i)||void 0===r?void 0:r.scene)?{"og:title":this.t("qaoop_title",{},"Hi friends, Im inviting you to answer a question on #TikTok!"),"og:description":this.t("qaoop_desc",{},"Share your wisdom!")}:void 0,m=null!==(l=null===(s=null==t?void 0:t.video.shareCover)||void 0===s?void 0:s[1])&&void 0!==l?l:h,_=Object.assign(Object.assign(Object.assign({},u),{"og:image":m,"twitter:image":m,"og:image:alt":null!==(c=null===(d=e.shareMeta)||void 0===d?void 0:d.title)&&void 0!==c?c:"the cover of first video"}),g);return this.getActions().setSharingMetaState(_)}setVideoPlaylistSharingMeta(e){var t,i,o,n,a,r,s,l;const{protocal:d}=this.getBaseConfig(),c="@"+(null===(i=null===(t=e.mixInfo)||void 0===t?void 0:t.creator)||void 0===i?void 0:i.nickname),p=null!==(n=null===(o=e.mixInfo)||void 0===o?void 0:o.name)&&void 0!==n?n:"Untitled playlist",u=this.getBaseMetaParams({schema:`${d}mix/detail?id=${null!==(r=null===(a=e.mixInfo)||void 0===a?void 0:a.id)&&void 0!==r?r:"nan"}`,metaParams:{title:this.t("playlist_share_title",{Playlist_name:p,username:c},`Playlist ${p} created by ${c}`),description:this.t("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!")},pageType:119,response:e}),{videoList:g=[]}=e,[m]=g,h=Object.assign(Object.assign({},u),{"og:image":null===(s=null==m?void 0:m.video.shareCover)||void 0===s?void 0:s[1],"twitter:image":null===(l=null==m?void 0:m.video.shareCover)||void 0===l?void 0:l[1],"og:image:alt":`first video of ${p}`});return this.getActions().setSharingMetaState(h)}setFollowingSharingMeta(e){const t=this.getBaseMetaParams({metaParams:e.metaParams}),i=Object.assign(Object.assign({},t),{"og:title":this.t("serp_following_title"),"og:description":this.t("serp_following_desc"),"og:image":h,"twitter:image":h,"twitter:title":this.t("SEO_following_title"),"twitter:description":this.t("SEO_following_desc")});return(0,c.of)(this.getActions().setSharingMetaState(i))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],_.prototype,"setSharingMetaState",null),_=(0,o.__decorate)([(0,r.Y)("SharingMeta"),(0,o.__param)(1,(0,s.t)(u.s)),(0,o.__metadata)("design:paramtypes",[m.G,Function])],_)},54167:(e,t,i)=>{"use strict";i.d(t,{ot:()=>a});var o=i(35002),n=i(22538);function a(e,t={}){var i;const{search:a}=(0,n.TH)(),r=t.disableAutoLang?"":null!==(i=(0,o.parse)(a).lang)&&void 0!==i?i:"";if("string"==typeof e){const{url:i,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:i,query:Object.assign({lang:r},n)},Object.assign({skipEmptyString:!0},t))}const{pathname:s="",search:l={},hash:d}=e,c=d?`#${d}`:"";return`${(0,o.stringifyUrl)({url:s,query:Object.assign({lang:r},l)},Object.assign({skipEmptyString:!0},t))}${c}`}},59230:(e,t,i)=>{"use strict";i.d(t,{v:()=>d});var o=i(31191),n=i(74512),a=i(32735),r=i(14911),s=i(86987),l=i(54167);const d=(0,a.memo)((0,a.forwardRef)((function(e,t){var i,{forceSSR:d=!1,to:c,replace:p,onClick:u,children:g,disableAutoLang:m,disabled:h}=e,_=(0,o.__rest)(e,["forceSSR","to","replace","onClick","children","disableAutoLang","disabled"]);const{$config:v}=null!==(i=(0,s.L)((()=>["$config"]),[]))&&void 0!==i?i:{},y=d||(null==v?void 0:v.isInWebappV1),f=(0,l.ot)(c,{disableAutoLang:m}),b=(0,a.useCallback)((e=>{if(h)return e.preventDefault(),void e.stopPropagation();null==u||u(e),y&&p&&(e.preventDefault(),e.stopPropagation(),location.replace(f))}),[f,u,p,y,h]);return y?(0,n.jsx)("a",Object.assign({ref:t,href:f},_,{onClick:b},{children:g}),void 0):(0,n.jsx)(r.rU,Object.assign({ref:t,to:f},_,{onClick:b},{children:g}),void 0)})))},76631:(e,t,i)=>{"use strict";i.d(t,{C:()=>n});var o=i(35002);function n({to:e,location:{search:t}={search:""}},i={}){var n;const a=null!==(n=(0,o.parse)(t).lang)&&void 0!==n?n:"";if("string"==typeof e){const{url:t,query:n}=(0,o.parseUrl)(e);return(0,o.stringifyUrl)({url:t,query:Object.assign({lang:a},n)},Object.assign({skipEmptyString:!0},i))}const{pathname:r="",search:s={},hash:l}=e,d=l?`#${l}`:"";return`${(0,o.stringifyUrl)({url:r,query:Object.assign({lang:a},s)},Object.assign({skipEmptyString:!0},i))}${d}`}},14584:(e,t,i)=>{"use strict";i.d(t,{p:()=>l,w:()=>c});var o=i(24246),n=i(32735),a=i(90938),r=i(86987),s=i(24448);function l(e=""){return(0,o.mp)(s.z,{selector:t=>t.users[e],dependencies:[e]})}const d={[-1]:"Follow",0:"Follow",1:"Following",3:"requested",2:"friends",4:"webapp_unblocked_button1",5:"Follow"};function c({uniqueId:e,followerStatus:t,prevent:i,onNeedLogin:l,teaParams:c={}}){const p=(0,r.L)((()=>["$user"]),[]),u=Boolean(null==p?void 0:p.$user),[{relation:g,secUid:m},h]=(0,o.b7)(s.z,{selector:t=>{var i,o,n,a;return{relation:null!==(o=null===(i=t.users[e])||void 0===i?void 0:i.relation)&&void 0!==o?o:-1,secUid:null!==(a=null===(n=t.users[e])||void 0===n?void 0:n.secUid)&&void 0!==a?a:""}},dependencies:[e]}),_=(0,n.useCallback)((t=>{if(i&&(t.preventDefault(),t.stopPropagation()),!u)return null==l?void 0:l();4!==g?h.postCommitFollowUser(Object.assign({uniqueId:e},c)):h.blockOrUnblockUser({uniqueId:e,secUid:m,isBlock:!0})}),[h,u,l,i,c,e,m,g]),v=(0,a.Q)()(((e,t)=>{if(1===t){if(e<1)return"Inbox_Follow_back";if(1===e)return d[2]}return d[e]})(g,t));return{isFollowing:1===g||2===g,text:v,handleFollow:_,relation:g}}},24448:(e,t,i)=>{"use strict";i.d(t,{z:()=>F});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(53899),l=i(36866),d=i.n(l),c=i(54754),p=i.n(c),u=i(37674),g=i(2480),m=i(40804),h=i(2355),_=i(29866),v=i(30526),y=i(52702),f=i(11834),b=i(31144),x=i(71011),k=i(89991),S=i(60194),w=i(51166),C=i(55643),j=i(81104),T=i(60083),O=i(80002),I=i(17941),P=i(99915),E=i(52545);function L({relation:e,handleIsUnfollow:t,handleIsFollow:i}){switch(e){case 0:case-1:case 4:case 5:return t();default:return i()}}function A({current:e,targetUser:t}){const i=function(e){var t;return L({relation:null!==(t=e.relation)&&void 0!==t?t:-1,handleIsUnfollow:()=>{var t;return e.privateAccount?1:(null===(t=e.extraInfo)||void 0===t?void 0:t.followed)?2:0},handleIsFollow:()=>3})}(t);switch(i){case 3:return 0;case 0:return L({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>1});case 1:return L({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>3});case 2:return L({relation:e,handleIsFollow:()=>e,handleIsUnfollow:()=>2})}}function R(e,t){return 2===e||5!==e&&t}const M=["roomId"],D=["uniqueId","avatarThumb","nickname","signature"];let F=class extends n.D{constructor(e,t,i){super(),this.service=e,this.t=t,this.report=i,this.defaultState={users:{},stats:{}}}multiSetUser(e,t){const i={};return t.forEach((t=>{i[t.uniqueId]=this.getUpdatedUser(e.users[t.uniqueId],t)})),Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),i)})}setUser(e,t){return Object.assign(Object.assign({},e),{users:Object.assign(Object.assign({},e.users),{[t.uniqueId]:this.getUpdatedUser(e.users[t.uniqueId],t,!0)})})}setUserRelation(e,{uniqueId:t,relation:i,shouldUpdateFollowed:o}){var n;const a=e.users[t];a&&(a.relation=i,o&&(a.extraInfo=Object.assign(Object.assign({},a.extraInfo),{followed:R(i,null===(n=a.extraInfo)||void 0===n?void 0:n.followed)})))}setUserStats(e,t){const{uniqueId:i,stats:o}=t;e.stats[i]=this.getUpdatedUserStats(e.stats[i],o)}multiSetUserStats(e,t){t.forEach((({uniqueId:t,stats:i})=>{e.stats[t]=i}))}getUserDetail(e){return e.pipe((0,_.w)((e=>this.service.getUserDetail(e).pipe((0,v.b)((e=>{(0!==e.statusCode&&10222!==e.statusCode||!e.userInfo)&&console.warn("Get user detail failed for getting wrong response")})),(0,y.z)((e=>0!==e.statusCode&&10222!==e.statusCode||!e.userInfo?g.E:(0,u.of)(this.getActions().setUser(Object.assign(Object.assign({},e.userInfo.user),{extraInfo:{statusCode:e.statusCode}})),this.getActions().setUserStats({stats:Object.assign(Object.assign({},e.userInfo.stats),{needFix:!1}),uniqueId:e.userInfo.user.uniqueId})))),(0,j.n)({})))))}postCommitFollowUser(e){return e.pipe((0,f.v)((({uniqueId:e})=>e)),(0,y.z)((e=>e.pipe((0,b.M)(this.state$),(0,x.U)((([e,t])=>{const i=t.users[e.uniqueId],{id:n,secUid:a="",relation:r=-1}=i,s=function(e){return L({relation:e,handleIsUnfollow:()=>1,handleIsFollow:()=>0})}(r),l={type:s,user_id:n,sec_user_id:a,from:18,channel_id:0,from_pre:0},{uniqueId:d,group_id:c,enter_method:p="click_direct_btn",action_position:u}=e;return{query:l,type:s,group_id:c,enter_method:p,action_position:u,restReportParams:(0,o.__rest)(e,["uniqueId","group_id","enter_method","action_position"]),id:n,uniqueId:d,relation:r,targetUser:i}})),(0,k.g)("type"),(0,_.w)((({query:e,group_id:t,enter_method:i,action_position:o,restReportParams:n,id:a,uniqueId:r,relation:s,targetUser:l})=>this.service.postCommitFollowUser(e).pipe((0,v.b)((({status_code:r,follow_status:s})=>{24===r?C.h.open({content:this.t("inbox_follow_failed_banned"),duration:3,widthType:"half"}):-1===r?C.h.open({content:this.t("inbox_follow_failed_noconnection"),duration:3,widthType:"half"}):0!==r?C.h.open({content:this.t("inbox_follow_failed_other"),duration:3,widthType:"half"}):(0,T.k)(r,[24,-1,0]),this.report.handleFollowUser(Object.assign(Object.assign({},n),{actionType:e.type,status_code:r,follow_status:s,group_id:t,enter_method:i,action_position:o,to_user_id:a,author_id:a,follow_type:2===s?"mutual":"single",tab_name:null,is_private:4===s?1:0}))})),(0,x.U)((({follow_status:e,status_code:t})=>0===t?this.getActions().setUserRelation({uniqueId:r,relation:I.Bm[e],shouldUpdateFollowed:!0}):this.getActions().setUserRelation({uniqueId:r,relation:s}))),(0,S.O)(this.getActions().setUserRelation({uniqueId:r,relation:A({current:s,targetUser:l})})),(0,j.n)({}))))))))}blockOrUnblockUser(e){return e.pipe((0,w.z)((({secUid:e,isBlock:t,uniqueId:i})=>this.service.blockUser({sec_user_id:null!=e?e:"",block_type:t?0:1}).pipe((0,v.b)((({status_code:e})=>{0!==e||t||C.h.open({content:this.t("webapp_mig_blocked"),duration:3,widthType:"half"})})),(0,x.U)((({status_code:e})=>0===e?this.getActions().setUserRelation({uniqueId:i,relation:t?0:4}):this.noop())),(0,j.n)({})))))}getLiveStatus(e){return e.pipe((0,_.w)((()=>(0,m.F)(6e5).pipe((0,b.M)(this.state$),(0,x.U)((([e,{users:t}])=>Object.values(t).filter((e=>!!(null==e?void 0:e.roomId))))),(0,y.z)((e=>(0,u.of)(...e.map((e=>this.getActions().getUserDetail({secUid:null==e?void 0:e.secUid}))))))))))}getUpdatedUser(e,t,i){var o,n;if(!e)return t;const a=null!==(o=t.relation)&&void 0!==o?o:e.relation;return p()({},e,t,{extraInfo:{followed:R(a,null===(n=e.extraInfo)||void 0===n?void 0:n.followed)}},((e,t,o)=>!M.includes(o)&&d()(t)||!i&&D.includes(o)?e:"uniqueIdModifyTime"!==o||t?void 0:e))}getUpdatedUserStats(e,t){return t}};(0,o.__decorate)([(0,a.j)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"multiSetUser",null),(0,o.__decorate)([(0,a.j)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"setUser",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"setUserRelation",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"setUserStats",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"multiSetUserStats",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"getUserDetail",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"postCommitFollowUser",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"blockOrUnblockUser",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[h.y]),(0,o.__metadata)("design:returntype",void 0)],F.prototype,"getLiveStatus",null),F=(0,o.__decorate)([(0,r.Y)("UserModule"),(0,o.__param)(1,(0,s.t)(O.s)),(0,o.__metadata)("design:paramtypes",[E.K,Function,P.B])],F)},52545:(e,t,i)=>{"use strict";i.d(t,{K:()=>s});var o=i(31191),n=i(21296),a=i(65723),r=i(70336);let s=class{constructor(e){this.fetch=e}getUserDetail(e){return this.fetch.get("/api/user/detail/",{query:e})}postCommitFollowUser(e){return this.fetch.post("/api/commit/follow/user/",{query:Object.assign(Object.assign({},e),{fromWeb:1}),baseUrlType:3,headers:{[a.eD]:this.fetch.csrfToken}})}blockUser(e){return this.fetch.post("/api/user/block/",{query:Object.assign(Object.assign({},e),{source:3}),baseUrlType:3,headers:{[a.eD]:this.fetch.csrfToken}})}};s=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[r.r])],s)},54332:(e,t,i)=>{"use strict";i.d(t,{e:()=>s});var o=i(31191),n=i(6229),a=i(16219),r=i(11359);let s=class extends n.D{constructor(){super(...arguments),this.defaultState={enterForyou:!1}}setEnterForyou(e,t){e.enterForyou=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setEnterForyou",null),s=(0,o.__decorate)([(0,r.Y)("VideoAsForyou")],s)},70221:(e,t,i)=>{"use strict";i.d(t,{P:()=>y});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(31144),l=i(51166),d=i(37674),c=i(71011),p=i(2355),u=i(57852),g=i(88916),m=i(21296),h=i(65723),_=i(70336);let v=class{constructor(e){this.fetch=e}postUserSetting(e){return this.fetch.post("/api/user/set/settings/",{query:Object.assign(Object.assign({},e),{tt_csrf_token:this.fetch.csrfToken}),headers:{[h.eD]:this.fetch.csrfToken}})}};v=(0,o.__decorate)([(0,m.G)(),(0,o.__metadata)("design:paramtypes",[_.r])],v);let y=class extends n.D{constructor(e,t){super(),this.service=e,this.appContext=t,this.defaultState={photoSensitiveVideosSetting:u.F3.getItem("photo_sensitive_video_setting"),hideMaskTempVideoId:"",loginStatePhotoSensitiveVideosSetting:void 0,hasClosedVideoMask:!1}}setSkipPhotoSensitiveAction(e,t){const{skipPhotoSensitiveVideo:i,login:o=!1}=t,n=i?1:2;e.photoSensitiveVideosSetting=n,o&&(e.loginStatePhotoSensitiveVideosSetting=n)}setHideMaskTempVideoId(e,t){e.hideMaskTempVideoId=t}setHasClosedMask(e,t){e.hasClosedVideoMask=t}setPhotoSensitiveVideosSetting(e,t){e.photoSensitiveVideosSetting=t}setLoginStatePhotoSensitiveVideosSetting(e,t){e.loginStatePhotoSensitiveVideosSetting=t}setSkipPhotoSensitive(e){return e.pipe((0,s.M)(this.appContext.state$),(0,l.z)((([e,{appContext:t}])=>{const i=e?1:2;return u.F3.setItem("photo_sensitive_video_setting",i),(null==t?void 0:t.$user)?this.service.postUserSetting({field:"photosensitive_videos_setting",value:i}).pipe((0,c.U)((({status_code:t})=>0===t?this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e,login:!0}):this.noop()))):(0,d.of)(this.getActions().setSkipPhotoSensitiveAction({skipPhotoSensitiveVideo:e}))})))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setSkipPhotoSensitiveAction",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setHideMaskTempVideoId",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setHasClosedMask",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setPhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setLoginStatePhotoSensitiveVideosSetting",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[p.y]),(0,o.__metadata)("design:returntype",void 0)],y.prototype,"setSkipPhotoSensitive",null),y=(0,o.__decorate)([(0,r.Y)("VideoMaskModule"),(0,o.__metadata)("design:paramtypes",[v,g.G])],y)},11166:(e,t,i)=>{"use strict";i.d(t,{x:()=>s});var o=i(31191),n=i(6229),a=i(16219),r=i(11359);let s=class extends n.D{constructor(){super(...arguments),this.defaultState={mute:!0,loop:!0,muteSetting:!0,playing:!0,volume:0}}setMute(e,t){e.mute=t}setVolume(e,t){e.volume=Math.min(Math.max(0,t),1)}setMuteSetting(e,t){e.muteSetting=t}setPlaying(e,t){e.playing=t}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setMute",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Number]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setVolume",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setMuteSetting",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Boolean]),(0,o.__metadata)("design:returntype",void 0)],s.prototype,"setPlaying",null),s=(0,o.__decorate)([(0,r.Y)("BasicPlayer")],s)},73323:(e,t,i)=>{"use strict";i.d(t,{f:()=>g});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(2355),l=i(30526),d=i(71011),c=i(73895),p=i(48214),u=i(28223);let g=class extends n.D{constructor(e,t,i){super(),this.reporter=e,this.qualityReporter=t,this.preloadUtil=i,this.defaultState={prevVideo:null,currentVideo:null,playProgress:null,vv_time:0}}setCurrentVideo(e,t){var i;e.prevVideo=e.currentVideo,e.currentVideo=t.currentVideo,e.playProgress=t.playProgress,e.current_mode=null===(i=t.currentVideo)||void 0===i?void 0:i.mode}updateVVTime(e){const t=e.vv_time+1;t<=20&&(e.vv_time=t)}updateVideo(e){return e.pipe((0,l.b)((e=>{const{currentVideo:{id:t,index:i},teaParams:{isThreeColumnAuto:o=!1,isVideoDetail:n=!1,enterMethod:a=""}={}}=e;this.reporter.setIsThreeColumnAuto(o),this.reporter.setEnterMethod(a),this.reporter.setIsVideoDetail(n),this.qualityReporter.setCurrentVideoId(null!=t?t:""),this.preloadUtil.setPreloadIndex(i),this.reporter.reset()})),(0,d.U)((e=>this.getActions().setCurrentVideo(e))))}updateVideoFocusTime(e){return e.pipe((0,l.b)((({blurTime:e})=>{this.reporter.updateVideoFocusTime(e)})),(0,d.U)((()=>this.noop())))}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"setCurrentVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVVTime",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[s.y]),(0,o.__metadata)("design:returntype",void 0)],g.prototype,"updateVideoFocusTime",null),g=(0,o.__decorate)([(0,r.Y)("VideoPlayer"),(0,o.__metadata)("design:paramtypes",[c.e,p.k,u.Re])],g)},29451:(e,t,i)=>{"use strict";i.d(t,{W:()=>r});var o=i(30130),n=i(13581),a=i.n(n);const r={provide:new o.O("FirstVideoCover"),useValue:a()}},62904:(e,t,i)=>{"use strict";i.d(t,{n:()=>D,h:()=>N});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(53899),l=(i(15362),i(67905)),d=i.n(l),c=i(10268),p=i.n(c),u=i(37674),g=i(2355),m=i(61080),h=i(52702),_=i(86319),v=i(51166),y=i(30526),f=i(67381),b=i(29866),x=i(71011),k=i(31144),S=i(60194),w=i(20370),C=i(55643),j=i(80002),T=i(25197),O=i(99915),I=i(48214),P=i(90674),E=i(88916),L=i(70221),A=i(54032),R=i(29451),M=i(97562);const D=Object.freeze({statusCode:0,loading:!0,list:[],browserList:[],hasMore:!0,cursor:"0",preloadList:[]});let F=-1,N=class extends n.D{constructor(e,t,i,o,n,a,r,s){super(),this.service=e,this.item=t,this.reporter=i,this.videoQualityReporter=o,this.appContext=n,this.videoMask=a,this.t=r,this.getFirstVideoCover=s,this.defaultState={},this.createItemListErrorCatcher=e=>t=>t.pipe((0,m.K)((t=>(C.h.destroy(),C.h.open({content:this.t("server_error_title"),duration:3,widthType:"padding"}),null==e||e(t),(0,u.of)({statusCode:-1}))))),this.getBrowserList=({list:e})=>e.reduce(((e,{id:t,showNotPass:i,takeDown:o})=>(i||6===o||e.push(t),e)),[])}resetItemList(e,t){const{key:i,hasMore:o=!0,loading:n=!0,cursor:a="0"}=t;e[i]={list:[],browserList:[],loading:n,statusCode:0,hasMore:o,cursor:a,preloadList:[]}}addItemList(e,t){var i;const{key:o,list:n,statusCode:a=0,hasMore:r,cursor:s,level:l,preloadList:c}=t;e[o]||(e[o]={list:[],browserList:[],loading:!1,statusCode:a,hasMore:Boolean(r),cursor:s,preloadList:[]});const u=e[o].list,g=p()(n,"id").filter((e=>!u.includes(e.id))),m=d()(e[o].list,g.map((({id:e})=>e)));e[o].list="topic"===o?u.concat(n.map((({id:e})=>e))):m,e[o].browserList="topic"===o?e[o].browserList.concat(this.getBrowserList({list:n})):d()(e[o].browserList,this.getBrowserList({list:g})),e[o].statusCode=a,e[o].hasMore=r,e[o].cursor=s,e[o].level=l,e[o].preloadList=(null!==(i=e[o].preloadList)&&void 0!==i?i:[]).concat(null!=c?c:[])}setLoading(e,t){const{loading:i,key:o}=t;e[o]||(e[o]={list:[],browserList:[],loading:i,statusCode:0,hasMore:!0,cursor:"0"}),e[o].loading=i}setListKeyword(e,t){const{keyword:i,key:o}=t;e[o]||(e[o]={keyword:i,list:[],browserList:[],loading:!1,statusCode:0,hasMore:!0,cursor:"0"}),e[o].keyword=i}getRecommendList(e){return e.pipe((0,h.z)((e=>this.getRecommendList$(e).pipe((0,_.l)(this.terminate())))))}getRecommendList$(e){return(0,u.of)(e).pipe((0,v.z)((({itemId:e,key:t,disableReport:i})=>(0,u.of)(null).pipe((0,y.b)((()=>{i||(F=Date.now(),this.videoQualityReporter.videoFeedRequestEvent())})),(0,h.z)((()=>this.service.getRecommendList({aid:P.CO,count:P.lK,insertedItemID:e}))),(0,f.V)(P.ES),(0,y.b)((e=>{var t,o;i||this.videoQualityReporter.videoFeedResponseEvent({duration:Date.now()-F,list_length:null!==(o=null===(t=e.itemList)||void 0===t?void 0:t.length)&&void 0!==o?o:0})})),this.createItemListErrorCatcher(),this.handleListData(t)))))}getTopicList(e){return e.pipe((0,b.w)((({topic:e,language:t})=>this.service.getTopicList({topic:e,language:t,count:P._T,aid:P.CO}).pipe((0,x.U)((e=>Object.assign(Object.assign({},e),{hasMore:!0}))),this.createItemListErrorCatcher(),this.handleListData("topic"),(0,_.l)(this.terminate())))))}getFollowingList(e){return e.pipe((0,k.M)(this.state$),(0,v.z)((([{language:e,pullType:t=1},i])=>{var o;const{cursor:n="",level:a=1}=null!==(o=i.following)&&void 0!==o?o:{};return this.service.getFollowingList({aid:P.CO,count:P.kg,language:e,cursor:n,pullType:t,level:a}).pipe(this.createItemListErrorCatcher(),this.handleListData("following"))})))}getMusicList(e){return e.pipe((0,h.z)((e=>this.getMusicList$(e))))}getMusicList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,v.z)((([{musicID:e,language:t},i])=>{var o,n;return this.service.getMusicList({musicID:e,language:t,cursor:null!==(n=null===(o=i.music)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0",aid:P.CO,count:P.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData("music"))})))}getQuestionList(e){return e.pipe((0,h.z)((e=>this.getQuestionList$(e))))}getQuestionList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,v.z)((([{questionID:e,language:t},i])=>{var o,n;return this.service.getQuestionList({questionID:e,language:t,cursor:null!==(n=null===(o=i.question)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0",aid:P.CO,count:P.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData("question"))})))}getChallengeList(e){return e.pipe((0,h.z)((e=>this.getChallengeList$(e))))}getChallengeList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,v.z)((([{challengeID:e,language:t="en"},i])=>{var o,n;return this.service.getChallengeList({challengeID:e,language:t,cursor:null!==(n=null===(o=i.challenge)||void 0===o?void 0:o.cursor)&&void 0!==n?n:"0",aid:P.CO,count:P.eQ}).pipe(this.createItemListErrorCatcher(),this.handleListData("challenge"))})))}getUserVideoList(e){return e.pipe((0,h.z)((e=>this.getUserVideoList$(e))))}getUserVideoList$(e){return(0,u.of)(e).pipe((0,k.M)(this.state$),(0,b.w)((([{secUid:e,language:t,key:i,userId:o},n])=>{var a,r;const s={secUid:e,aid:P.CO,count:P.jd,cursor:null!==(r=null===(a=n[i])||void 0===a?void 0:a.cursor)&&void 0!==r?r:"0",language:t,userId:o};return("user-post"===i?this.service.getUserPostList(s):this.service.getUserLikedList(s)).pipe(this.createItemListErrorCatcher(),this.handleListData(i,{secUid:e}))})))}setDeleteVideo(e,t){for(const i of Object.keys(e)){const o=e[i];if(o){const n=o.list.filter((e=>e!==t));e[i].list=n,e[i].browserList=o.browserList.filter((e=>e!==t))}}}setList(e){return e.pipe((0,k.M)(this.state$,this.appContext.state$,this.videoMask.state$),(0,y.b)((([{key:e,response:t,disableReportMore:i=!1},o])=>{var n,a,r;(null!==(a=null===(n=o[e])||void 0===n?void 0:n.list)&&void 0!==a?a:[]).length&&!i&&this.reporter.handleListMore({is_success:(null===(r=t.itemList)||void 0===r?void 0:r.length)?1:0,error_code:t.statusCode})})),(0,x.U)((([{key:e,response:t,otherInfo:i},o,n,a])=>{var r,s;const{itemList:l=[]}=t,{$sgOpen:d,$user:c}=null!==(r=n.appContext)&&void 0!==r?r:{};return 1!==(null==c?void 0:c.photoSensitiveVideosSetting)&&(c||1!==a.photoSensitiveVideosSetting)||"user-post"===e&&(null==c?void 0:c.secUid)===(null==i?void 0:i.secUid)||!("video"!==e||l.length>1)||(t.itemList=l.filter((e=>4!==(null==e?void 0:e.maskType)))),null===(s=t.itemList)||void 0===s||s.forEach((e=>{((e,t)=>{if((0,A.e)(e)&&!e.forFriend||e.scheduleTime){const i=e.takeDown?"":e.video.cover;if(!/\/node-a\/video\/playsv/.test(i)){const o=(0,T.X)({src:i,sgOpen:t});e.video.cover=o}}})(e,d)})),{key:e,response:t}})),(0,y.b)((({response:e})=>{})),(0,h.z)((({key:e,response:t})=>{const{itemList:i=[],statusCode:o=0,hasMore:n=!1,cursor:a="0",level:r}=t,s=i.map((e=>{var t,i,o,n;return{url:null!==(i=null===(t=e.video)||void 0===t?void 0:t.playAddr)&&void 0!==i?i:"",id:null!==(n=null===(o=e.video)||void 0===o?void 0:o.id)&&void 0!==n?n:""}}));return 0===o||10404===o?(0,u.of)(...this.item.addItems(i),this.getActions().addItemList({key:e,list:i,statusCode:o,hasMore:n,cursor:a,level:r,preloadList:s})):(0,u.of)(this.getActions().addItemList({key:e,list:[],statusCode:o,hasMore:!0,preloadList:s}))})))}handleListData(e,t){return i=>i.pipe((0,f.V)(P.ES),(0,x.U)((i=>this.getActions().setList({key:e,response:i,otherInfo:t}))),(0,S.O)(this.getActions().setLoading({key:e,loading:!0})),(0,_.l)(this.getActions().setLoading({key:e,loading:!1})),(0,w.R)(this.dispose$))}};(0,o.__decorate)([(0,a.cQ)(),(0,o.__metadata)("design:type",g.y)],N.prototype,"dispose$",void 0),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"resetItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"addItemList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"setLoading",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"setListKeyword",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!1}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"getRecommendList",null),(0,o.__decorate)([(0,a.Qm)({payloadGetter:1,skipFirstClientDispatch:!0}),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"getTopicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"getFollowingList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"getMusicList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"getQuestionList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"getChallengeList",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"getUserVideoList",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"setDeleteVideo",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[g.y]),(0,o.__metadata)("design:returntype",void 0)],N.prototype,"setList",null),N=(0,o.__decorate)([(0,r.Y)("ItemList"),(0,o.__param)(6,(0,s.t)(j.s)),(0,o.__param)(7,(0,s.t)(R.W.provide)),(0,o.__metadata)("design:paramtypes",[M.N,A.A,O.B,I.k,E.G,L.P,Function,Function])],N)},97562:(e,t,i)=>{"use strict";i.d(t,{N:()=>s});var o=i(31191),n=i(21296),a=i(70336),r=i(29451);let s=class{constructor(e){this.fetch=e}getRecommendList(e){return this.fetch.get("/api/recommend/item_list/",{query:e,baseUrlType:2})}getTopicList(e){return this.fetch.get("/api/topic/item_list/",{query:e,baseUrlType:3})}getFollowingList(e){return this.fetch.get("/api/following/item_list/",{query:e,baseUrlType:3})}getMusicList(e){return this.fetch.get("/api/music/item_list/",{query:e,baseUrlType:3})}getQuestionList(e){return this.fetch.get("/api/question/item_list/",{query:e,baseUrlType:3})}getChallengeList(e){return this.fetch.get("/api/challenge/item_list/",{query:e,baseUrlType:3})}getUserPostList(e){return this.fetch.get("/api/post/item_list/",{query:e,baseUrlType:3})}getUserLikedList(e){return this.fetch.get("/api/favorite/item_list/",{query:e,baseUrlType:3})}};s=(0,o.__decorate)([(0,n.G)({providers:[r.W]}),(0,o.__metadata)("design:paramtypes",[a.r])],s)},54032:(e,t,i)=>{"use strict";i.d(t,{A:()=>M,e:()=>R});var o=i(31191),n=i(6229),a=i(16219),r=i(11359),s=i(53899),l=i(86349),d=i.n(l),c=i(26714),p=i(2480),u=i(37674),g=i(84683),m=i(2355),h=i(11834),_=i(52702),v=i(31144),y=i(89991),f=i(29866),b=i(61080),x=i(30526),k=i(44866),S=i(71011),w=i(60194),C=i(55643),j=i(81104),T=i(80002),O=i(99915),I=i(24448),P=i(21296),E=i(65723),L=i(70336);let A=class{constructor(e){this.fetch=e}postLikeVideo(e){return this.fetch.post("/api/commit/item/digg/",{query:e,baseUrlType:7,headers:{[E.eD]:this.fetch.csrfToken}})}};A=(0,o.__decorate)([(0,P.G)(),(0,o.__metadata)("design:paramtypes",[L.r])],A);const R=e=>{const{vl1:t,showNotPass:i}=null!=e?e:{};return Boolean(t&&!i)};let M=class extends n.D{constructor(e,t,i,o){super(),this.service=e,this.userModule=t,this.reporter=i,this.t=o,this.defaultState={}}setItem(e,t){var i,o,n,a,r;e[t.id]=Object.assign(Object.assign({},t),{nickname:null===(i=t.author)||void 0===i?void 0:i.nickname,author:null===(o=t.author)||void 0===o?void 0:o.uniqueId,authorId:null===(n=t.author)||void 0===n?void 0:n.id,authorSecId:null===(a=t.author)||void 0===a?void 0:a.secUid,avatarThumb:null===(r=t.author)||void 0===r?void 0:r.avatarThumb})}updateItem(e,t){e[t.id]&&(e[t.id]=d()(e[t.id],t))}multiSetItem(e,t){t.forEach((t=>this.setItem(e,t)))}setLike(e,t){const{id:i,liked:o,count:n}=t,a=e[i];a&&(a.digged=o,a.stats&&(a.stats.diggCount=n))}setCommentCount(e,t){const{id:i,commentCount:o}=t,n=e[i];(null==n?void 0:n.stats)&&(n.stats.commentCount=o)}reduceOrIncreaseCommentCount(e,t){const{id:i,isReduce:o,min:n=0}=t,a=e[i];if(null==a?void 0:a.stats){const e=o?Math.max(n,a.stats.commentCount-1):a.stats.commentCount+1;a.stats.commentCount=e}}addItems(e){const t=e.filter((e=>Boolean(e.author))).map((({author:e})=>e));return[this.userModule.getActions().multiSetUser(t),this.getActions().multiSetItem(e)]}postLikeVideo(e){return e.pipe((0,h.v)((({id:e})=>e)),(0,_.z)((e=>{const t=new c.X(0);return e.pipe((0,v.M)(this.state$,this.userModule.state$,t),(0,_.z)((([e,t,i,n])=>{var a,r,s;const l=t[e.id],d=i.users[null!==(a=null==l?void 0:l.author)&&void 0!==a?a:""],{digged:c,stats:g}=l,{id:m,forceLike:h,enter_method:_="click",channel_id:v}=e,y=(0,o.__rest)(e,["id","forceLike","enter_method","channel_id"]),f=null!==(r=null==g?void 0:g.diggCount)&&void 0!==r?r:0,b={aweme_id:m,channel_id:v,type:h?1:c?0:1};return h&&c?p.E:(0,u.of)({query:b,enter_method:_,diggCount:f,digged:c,author_id:null!==(s=null==d?void 0:d.id)&&void 0!==s?s:"",group_id:l.id,restReportParams:y,changeKey:`${b.type}_${n}`})})),(0,y.g)("changeKey"),(0,f.w)((({query:e,enter_method:i,diggCount:o,author_id:n,group_id:a,digged:r,restReportParams:s})=>{let l=!1;return this.service.postLikeVideo(e).pipe((0,b.K)((()=>(0,u.of)({status_code:-1}))),(0,x.b)((({status_code:t,status_msg:o,log_pb:r={}})=>{2150!==t&&2210!==t||o&&C.h.open({content:this.t(o),duration:3,widthType:"half"}),l=!0,this.reporter.handleLikeVideoResult(Object.assign({actionType:e.type,group_id:a,author_id:n,log_pb:r,enter_method:i},s))})),(0,k.x)((()=>{l||this.reporter.handleLikeVideoResult(Object.assign({actionType:e.type,group_id:a,author_id:n,log_pb:{},enter_method:i},s))})),(0,_.z)((i=>{const{status_code:n,is_digg:s}=i;return 0!==n||s===e.type?(0,g.H)(3e3).pipe((0,S.U)((()=>this.getActions().setLike({id:a,liked:r,count:o}))),(0,k.x)((()=>{const e=t.getValue();t.next(e+1)}))):(0,u.of)(this.noop())})),(0,w.O)(this.getActions().setLike({id:a,liked:!r,count:r?Math.max(0,o-1):o+1})),(0,j.n)({}))})))})))}setItemPrivateState(e,t){const{id:i,visibility:o}=t,n=e[i];if(!n)return e;n.forFriend="3"===o,n.secret="2"===o}setDeleteVideo(e,t){e[t]&&(e[t]=void 0)}};(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"updateItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Array]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"multiSetItem",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setLike",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setCommentCount",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"reduceOrIncreaseCommentCount",null),(0,o.__decorate)([(0,a.Qm)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[m.y]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"postLikeVideo",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,Object]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setItemPrivateState",null),(0,o.__decorate)([(0,a.lF)(),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[Object,String]),(0,o.__metadata)("design:returntype",void 0)],M.prototype,"setDeleteVideo",null),M=(0,o.__decorate)([(0,r.Y)("ItemModule"),(0,o.__param)(3,(0,s.t)(T.s)),(0,o.__metadata)("design:paramtypes",[A,I.z,O.B,Function])],M)},5606:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getI18nNamespace=t.PROJECT=t.API_KEY=void 0;const o=i(35002);t.API_KEY="5dc26cf008d511e9b571e1bc0c9e23b5",t.PROJECT="FE_i18n",t.getI18nNamespace=function({isMobile:e,pathname:t,search:i,isSearchbot:n}){const a=(0,o.parse)(i);return e&&/^\/@.+\/video\/.+/.test(t)?["MT_Reflow","Webapp"]:/^\/@.+\/playlist\/.+/.test(t)?["MT_Reflow"]:e&&"1"===a._r?["MT_Reflow","Webapp"]:t.startsWith("/login")||t.startsWith("/signup")?["WebApp_Login"]:t.startsWith("/search/campaign/")||t.startsWith("/question/")||t.startsWith("/messages/group")||e&&n?["MT_Reflow","Webapp"]:["Webapp"]}},65483:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LANGUAGE_COOKIE_NAME=t.LANGUAGE_LIST=t.LOCALES=t.WEBAPP_MAIN_LANGUAGE=void 0,t.WEBAPP_MAIN_LANGUAGE={ar:{displayName:"",alias:["ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-kw","ar-lb","ar-ly","ar-ma","ar-om","ar-qa","ar-sa","ar-sy","ar-tn","ar-ye"]},"bn-IN":{displayName:" ()",alias:["bn","bn-in"]},"ceb-PH":{displayName:"Cebuano (Pilipinas)",alias:["ceb","ceb-ph"]},"cs-CZ":{displayName:"etina (esk republika)",alias:["cs","cs-cz"]},"de-DE":{displayName:"Deutsch",alias:["de","de-at","de-ch","de-de","de-li","de-lu"]},"el-GR":{displayName:" ()",alias:["el","el-gr"]},en:{displayName:"English",alias:[]},es:{displayName:"Espaol",alias:["es-es","es-xl","es-ES"]},"fi-FI":{displayName:"Suomi (Suomi)",alias:["fi","fi-fi"]},"fil-PH":{displayName:"Filipino (Pilipinas)",alias:["fil","tl-ph","tl","fil-ph"]},fr:{displayName:"Franais",alias:["fr-be","fr-ca","fr-ch","fr-fr","fr-lu","fr-mc"]},"he-IL":{displayName:" ()",alias:["he","he-il"]},"hi-IN":{displayName:"",alias:["hi","hi-in"]},"hu-HU":{displayName:"Magyar (Magyarorszg)",alias:["hu","hu-hu"]},"id-ID":{displayName:"Bahasa Indonesia (Indonesia)",alias:["id","id-id","in-id","in"]},"it-IT":{displayName:"Italiano (Italia)",alias:["it","it-ch","it-it"]},"ja-JP":{displayName:"",alias:["ja","ja-jpan","ja-jp"]},"jv-ID":{displayName:"Basa Jawa (Indonesia)",alias:["jv","jv-jv"]},"km-KH":{displayName:" ()",alias:["km","km-kh"]},"ko-KR":{displayName:" ()",alias:["ko","ko-kr","ko-kore"]},"ms-MY":{displayName:"Bahasa Melayu (Malaysia)",alias:["ms","ms-bn","ms-my"]},"my-MM":{displayName:" ()",alias:["my","my","my-mm"]},"nl-NL":{displayName:"Nederlands (Nederland)",alias:["nl","nl-be","nl-nl"]},"pl-PL":{displayName:"Polski (Polska)",alias:["pl","pl-pl"]},"pt-BR":{displayName:"Portugus (Brasil)",alias:["pt_BR","pt-br","pu","pt","pt-pt"]},"ro-RO":{displayName:"Romn (Romania)",alias:["ro","ro-ro"]},"ru-RU":{displayName:" ()",alias:["ru","ru-ru"]},"sv-SE":{displayName:"Svenska (Sverige)",alias:["sv","sv-se"]},"th-TH":{displayName:" ()",alias:["th","th-th"]},"tr-TR":{displayName:"Trke (Trkiye)",alias:["tr","tr-tr"]},"uk-UA":{displayName:" ()",alias:["uk","uk-ua"]},ur:{displayName:"",alias:[]},"vi-VN":{displayName:"Ting Vit (Vit Nam)",alias:["vi","vi-vn"]},"zh-Hans":{displayName:"",alias:["zh-hans","zh_hans","zh_Hans"]},"zh-Hant-TW":{displayName:"",alias:["zh","zh_Hant","zh_TW","zh-tw","zh-hk","zh-Hant","zh-hant-tw","zh-cn"]}},t.LOCALES=Object.entries(t.WEBAPP_MAIN_LANGUAGE).map((([e,{alias:t}])=>[e,...t])),t.LANGUAGE_LIST=Object.entries(t.WEBAPP_MAIN_LANGUAGE).map((([e,{displayName:t}])=>({label:t,value:e}))),t.LANGUAGE_COOKIE_NAME="tiktok_webapp_lang"},90152:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i(31191);(0,o.__exportStar)(i(5606),t),(0,o.__exportStar)(i(65483),t)},26547:(e,t,i)=>{"use strict";var o;i.d(t,{K:()=>o}),function(e){e.UserAvatar="0",e.CommerceHeadImage="1",e.UserVerifyIdCard="2",e.PrivateImage="3",e.ChallengeCover="4",e.CommerceLicense="5",e.MTCertMaterial="11",e.CommerceSaiYanImage_SAIYAN_IMAGE="12",e.MTImReportImage="13"}(o||(o={}))},97475:(e,t,i)=>{"use strict";var o;i.d(t,{g:()=>o}),function(e){e.APP_INFO={M_PACKAGE:"com.zhiliaoapp.musically",T_PACKAGE:"com.ss.android.ugc.trill",M_STORE:"835599320",T_STORE:"1235601864",M_NAME:"musical.ly",T_NAME:"TIKTOK",M_FACEBOOK_ID:"597615686992125",T_FACEBOOK_ID:"1862952583919182"}}(o||(o={}))},84911:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SEO:()=>oe,Sharing:()=>ne.g,StructuredData:()=>ie,api:()=>o,banner:()=>$,cmpl_common:()=>r,diamond:()=>_,extend:()=>q,feed_common:()=>X,game_live_fragment:()=>B,gift:()=>H,hashtag:()=>f,image:()=>y,info:()=>h,list:()=>K,live_scenario:()=>N,member:()=>F,notice_common:()=>c,perception:()=>A,privacy_common:()=>s,prop:()=>Z,room:()=>R,screenshot_cover:()=>z,search_common:()=>g,sourceType:()=>ae.K,struct:()=>W,sub_common:()=>Y,subscription:()=>V,subscription_invitation:()=>Q,tab:()=>U,text:()=>j,user:()=>S,web_common:()=>n});var o={};i.r(o),i.d(o,{default:()=>ee});var n={};i.r(n);var a={};i.r(a);var r={};i.r(r),i.d(r,{enum_type:()=>a});var s={};i.r(s);var l={};i.r(l);var d={};i.r(d),i.d(d,{enum_type:()=>l});var c={};i.r(c),i.d(c,{common:()=>d,enum_type:()=>l});var p={};i.r(p);var u={};i.r(u),i.d(u,{enum_type:()=>p});var g={};i.r(g),i.d(g,{common:()=>u,enum_type:()=>p});var m={};i.r(m);var h={};i.r(h),i.d(h,{wallet_common:()=>m});var _={};i.r(_);var v={};i.r(v),i.d(v,{default:()=>te});var y={};i.r(y),i.d(y,{common:()=>v});var f={};i.r(f),i.d(f,{common:()=>v,image:()=>y});var b={};i.r(b),i.d(b,{hashtag:()=>f,image:()=>y});var x={};i.r(x),i.d(x,{common:()=>v,image:()=>y});var k={};i.r(k),i.d(k,{common:()=>v,image:()=>y});var S={};i.r(S),i.d(S,{badge:()=>k,common:()=>v,image:()=>y,linkmic:()=>b,vip:()=>x});var w={};i.r(w),i.d(w,{common:()=>v});var C={};i.r(C);var j={};i.r(j),i.d(j,{common:()=>v,image:()=>y,user:()=>S});var T={};i.r(T),i.d(T,{image:()=>y,linkmic:()=>b,user:()=>S});var O={};i.r(O),i.d(O,{common:()=>v,image:()=>y});var I={};i.r(I),i.d(I,{common:()=>v});var P={};i.r(P),i.d(P,{common:()=>v});var E={};i.r(E),i.d(E,{common:()=>v,image:()=>y,user:()=>S});var L={};i.r(L),i.d(L,{common:()=>v,image:()=>y});var A={};i.r(A),i.d(A,{text:()=>j});var R={};i.r(R),i.d(R,{battle:()=>T,common:()=>v,decoration:()=>O,game:()=>C,hashtag:()=>f,image:()=>y,official_room:()=>w,perception:()=>A,pictionary:()=>E,poll:()=>P,room_sticker:()=>L,social_interaction:()=>I,text:()=>j,user:()=>S});var M={};i.r(M),i.d(M,{common:()=>v});var D={};i.r(D),i.d(D,{image:()=>y,sei:()=>M,text:()=>j});var F={};i.r(F),i.d(F,{common:()=>D,image:()=>y,text:()=>j,user:()=>S});var N={};i.r(N);var B={};i.r(B);var z={};i.r(z);var $={};i.r($),i.d($,{image:()=>y,text:()=>j});var U={};i.r(U),i.d(U,{image:()=>y});var W={};i.r(W);var G={};i.r(G),i.d(G,{image:()=>y});var H={};i.r(H),i.d(H,{asset:()=>G,image:()=>y,text:()=>j,user:()=>S});var q={};i.r(q);var Z={};i.r(Z),i.d(Z,{banner:()=>$,gift:()=>H,image:()=>y,text:()=>j});var V={};i.r(V),i.d(V,{image:()=>y});var Q={};i.r(Q),i.d(Q,{subscription:()=>V});var Y={};i.r(Y),i.d(Y,{subscription:()=>V,user:()=>S});var K={};i.r(K);var J={};i.r(J);var X={};i.r(X),i.d(X,{enum_type:()=>J});const ee={},te={};var ie,oe;!function(e){let t;!function(e){e.WebSite="WebSite",e.ItemList="ItemList",e.VideoObject="VideoObject",e.Page="Page",e.BreadcrumbList="BreadcrumbList",e.Person="Person",e.MusicRecording="MusicRecording",e.QAPage="QAPage",e.Event="Event"}(t=e.JsonldType||(e.JsonldType={}))}(ie||(ie={})),function(e){let t;!function(e){e[e.META_PATH=1]="META_PATH",e[e.META_EXP=2]="META_EXP",e[e.META_PAGE=3]="META_PAGE",e[e.JSONLD_PATH=4]="JSONLD_PATH",e[e.JSONLD_EXP=5]="JSONLD_EXP",e[e.JSONLD_PAGE=6]="JSONLD_PAGE"}(t=e.SERPProcessType||(e.SERPProcessType={}))}(oe||(oe={}));var ne=i(97475),ae=i(26547)},64446:(e,t,i)=>{"use strict";i.d(t,{Sx:()=>o,z:()=>n,o9:()=>a,Oy:()=>r,lF:()=>s});const o="4954e33ea2a4395e59ecbc20761bd889",n="1569196861",a={1233:692,1180:747},r={google:395,twitter:396,facebook:397,instagram:398,line:529,vk:528,kakaotalk:99},s="socialOauth"},64505:(e,t,i)=>{"use strict";i.d(t,{Q:()=>k});var o=i(31191),n=i(21296),a=i(9405),r=i(52702),s=i(37674),l=i(56383),d=i(2480),c=i(38066),p=i(52078),u=i(71011),g=i(30526),m=i(61080),h=i(29866),_=i(95379);const v={ar:"ar","bn-IN":"bn","ceb-PH":"ceb","cs-CZ":"cs-CZ","de-DE":"de","el-GR":"el-GR",en:"en",es:"es","fil-PH":"fil",fr:"fr","gu-IN":"gu-IN","hi-IN":"hi","hu-HU":"hu-HU","id-ID":"id","it-IT":"it","ja-JP":"ja","jv-ID":"jv","kn-IN":"kn","ko-KR":"ko","ml-IN":"ml-IN","mr-IN":"mr","ms-MY":"ms","my-MM":"my","nl-NL":"nl-NL","or-IN":"or","pa-IN":"pa-IN","pl-PL":"pl","pt-BR":"pt-BR","ro-RO":"ro-RO","ru-RU":"ru","sv-SE":"sv-SE","ta-IN":"ta","te-IN":"te","th-TH":"th","tr-TR":"tr","uk-UA":"uk","vi-VN":"vi","zh-Hans":"zh-Hant","zh-Hant-TW":"zh-Hant"},y={ar:{label:"",passportLang:"ar"},"bn-IN":{label:" ()",passportLang:"bn"},"ceb-PH":{label:"Cebuano (Pilipinas)",passportLang:"ceb"},"cs-CZ":{label:"etina (esk republika)",passportLang:"cs"},"de-DE":{label:"Deutsch (Deutschland)",passportLang:"de"},"el-GR":{label:" ()",passportLang:"el"},en:{label:"English",passportLang:"en"},es:{label:"Espaol",passportLang:"es"},"fi-FI":{label:"Suomi (Suomi)",passportLang:"fi"},"fil-PH":{label:"Filipino (Pilipinas)",passportLang:"fil"},fr:{label:"Franais",passportLang:"fr"},"he-IL":{label:" ()",passportLang:"he"},"hi-IN":{label:"",passportLang:"hi"},"hu-HU":{label:"Magyar (Magyarorszg)",passportLang:"hu"},"id-ID":{label:"Bahasa Indonesia (Indonesia)",passportLang:"id"},"it-IT":{label:"Italiano (Italia)",passportLang:"it"},"ja-JP":{label:"",passportLang:"ja"},"jv-ID":{label:"Basa Jawa (Indonesia)",passportLang:"jv"},"km-KH":{label:" ()",passportLang:"km"},"ko-KR":{label:" ()",passportLang:"ko"},"ms-MY":{label:"Bahasa Melayu (Malaysia)",passportLang:"ms"},"my-MM":{label:" ()",passportLang:"my"},"nl-NL":{label:"Nederlands (Nederland)",passportLang:"nl"},"pl-PL":{label:"Polski (Polska)",passportLang:"pl"},"pt-BR":{label:"Portugus (Brasil)",passportLang:"pt"},"ro-RO":{label:"Romn (Romania)",passportLang:"ro"},"ru-RU":{label:"",passportLang:"ru"},"sv-SE":{label:"Svenska (Sverige)",passportLang:"sv"},"th-TH":{label:" ()",passportLang:"th"},"tr-TR":{label:"Trke (Trkiye)",passportLang:"tr"},"uk-UA":{label:" ()",passportLang:"uk"},ur:{label:"",passportLang:"ur"},"vi-VN":{label:"Ting Vit (Vit Nam)",passportLang:"vi"},"zh-Hans":{label:"",passportLang:"zh-Hant"},"zh-Hant-TW":{label:"",passportLang:"zh-Hant"}};var f=i(64446),b=i(33888),x=i(55524);let k=class{constructor(e,t){this.userRegion=e,this.slardar=t,this.appContext$=new a.t(1),this.level=null,this.requestInfo={},this.extraParams={aid:1459,is_sso:!1,account_sdk_source:"web",region:"",language:"en"}}setAppContext(e){var t,i;this.appContext$.next(e),this.appContext=e,this.extraParams.region=e.$region,this.extraParams.language=(null===(t=y[e.$language])||void 0===t?void 0:t.passportLang)||"en",f.Oy.apple=f.o9[null!==(i=e.$appId)&&void 0!==i?i:1180]}initAccountSdkInstance(){return this.appContext$.pipe((0,r.z)((e=>{if(this.sdkInstance)return(0,s.of)(this.sdkInstance);const{$language:t,$appId:o}=e;return(0,l.D)(Promise.all([i.e(3432),i.e(3065),i.e(5538),i.e(5019)]).then(i.bind(i,4687)).then((({WebInterfaceSdk:e})=>e))).pipe((0,u.U)((e=>new e({aid:1459,host:"https://www.tiktok.com",isOversea:!0,region:1180===o?"sg":"va",printLog:!1,language:v[t],mode:515,captchaHost:"https://www.tiktok.com",captchaOptions:{fpCookieOption:{domain:".tiktok.com",sameSite:"None",secure:!0}},xhrConfig:{getDynamicConfig:e=>{var t;const i=this.userRegion.getRegionDomain(),o=this.userRegion.getTtWid();this.requestInfo=Object.assign(Object.assign({},e),{baseURL:i});const n={baseURL:i,params:{shark_extra:JSON.stringify(Object.assign(Object.assign({},(0,_.Kj)(null!==(t=this.appContext)&&void 0!==t?t:{},!0,!0,this.level)),{app_name:"Tik_Tok_Login",aid:1459}))},headers:{}};return o&&(n.headers={"x-tt-passport-ttwid-ticket":o}),n},cacheRedirectDomain:e=>{this.userRegion.currentRegion={domain:`https://${e}`}}},getDynamicCaptchaConfig:e=>"https://m.tiktok.com"===(e=e.replace("com/","com"))||"https://web-va.tiktok.com"===e?"https://web-va.tiktok.com":"https://t.tiktok.com"===e?"https://web-sg.tiktok.com":e,acrawler:"true",acrawlerUrl:"acrawler"}))),(0,g.b)((e=>this.sdkInstance=e)),(0,m.K)((e=>(console.error(e),(0,d.c)()))),(0,c.X)(1))})))}getAccountSdk$(e){var t,i,o;const{platform_app_id:n,email:a,mobile:r,account:s,username:l}=null!=e?e:{};return e&&(null!==(o=null!==(i=null!==(t=null!=n?n:a)&&void 0!==t?t:r)&&void 0!==i?i:s)&&void 0!==o?o:l)?this.userRegion.getUserRegions(e).pipe((0,h.w)((e=>{if(-1===e.error_code)throw new Error(`get user region error, error_code ${e.error_code}`);return this.initAccountSdkInstance().pipe((0,p.q)(1))}))):(e&&this.slardar.handleUserRegionEscape(e),this.initAccountSdkInstance().pipe((0,p.q)(1)))}sendPhoneCode(e){const{mobile:t}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCode"))),(0,r.z)((i=>(0,l.D)(i.login.sendCode({mobile:t,extra_params:Object.assign(Object.assign(Object.assign({},this.extraParams),e),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}notLoginSendCode(e){return this.getAccountSdk$({mobile:e.mobile,triggerPath:"/passport/web/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("notLoginSendCode"))),(0,r.z)((t=>(0,l.D)(t.verify.notLoginSendCode({mobile:e.mobile,extra_params:Object.assign(Object.assign({},this.extraParams),{is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeWithType(e){const{type:t,not_login_ticket:i,verify_ticket:o,method:n,mobile:a}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeWithType"))),(0,r.z)((e=>e.extra.sendCode({type:t,method:n,mobile:a,extra_params:Object.assign(Object.assign({not_login_ticket:i,verify_ticket:o},this.extraParams),{is6Digits:1})})))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForResetPwd(e){const{mobile:t,verify_ticket:i,not_login_ticket:o,type:n}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForResetPwd"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.sendCode({mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:n,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}sendPhoneCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendPhoneCodeForForceResetPwd"))),(0,r.z)((t=>(0,l.D)(t.extra.sendCode({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket,is6Digits:1})}))))).pipe(this.errorHandler.bind(this))}validatePhoneCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validatePhoneCodeForForceReset"))),(0,r.z)((t=>(0,l.D)(t.extra.validateMobile({type:13,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForSignup(e){const{email:t="",password:i=""}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForSignup"))),(0,r.z)((e=>{var o;return(0,l.D)(e.login.sendEmailCode({email:t,password:i,extra_params:Object.assign(Object.assign({},this.extraParams),{email_logic_type:(null===(o=this.appContext)||void 0===o?void 0:o.$isMobile)?1:2})}))}))).pipe(this.errorHandler.bind(this))}sendEmailCodeForLogin(e){const{email:t="",extra_params:i={}}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForLogin"))),(0,r.z)((e=>(0,l.D)(e.login.sendEmailLoginCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),i)}))))).pipe(this.errorHandler.bind(this))}verifySendEmailCode(e){const{verify_ticket:t}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifySendEmailCode"))),(0,r.z)((e=>(0,l.D)(e.verify.sendEmailCode({extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:t})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForResetPwd(e){const{email:t="",not_login_ticket:i,email_logic_type:o}=e;return this.getAccountSdk$({email:t,triggerPath:"/passport/web/email/send_code/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForResetPwd"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.sendEmailCode({email:t,extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:i,email_logic_type:o})}))))).pipe(this.errorHandler.bind(this))}sendEmailCodeForForceResetPwd(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("sendEmailCodeForForceResetPwd"))),(0,r.z)((t=>(0,l.D)(t.extra.sendEmailCode({type:11,code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForForceReset(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForForceReset"))),(0,r.z)((t=>(0,l.D)(t.verify.validateEmail({code:e.code,extra_params:Object.assign(Object.assign({},this.extraParams),{type:11,conditional_login_ticket:e.conditional_login_ticket})}))))).pipe(this.errorHandler.bind(this))}emailCodeLogin(e){const{not_login_ticket:t,verify_ticket:i,code:o,password:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailCodeLogin"))),(0,r.z)((e=>(0,l.D)(e.login.emailCodeLogin({code:o,email:"",extra_params:Object.assign(Object.assign({},this.extraParams),{not_login_ticket:t,verify_ticket:i,password:n,type:13})}))))).pipe(this.errorHandler.bind(this))}smsLogin(e){const{mobile:t="",code:i,login_only:o,birthday:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLogin"))),(0,r.z)((e=>(0,l.D)(e.login.smsLogin({mobile:t,code:i,login_only:o,extra_params:Object.assign({birthday:n},this.extraParams)}))))).pipe(this.errorHandler.bind(this))}smsVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsVerify"))),(0,r.z)((t=>(0,l.D)(t.verify.notLoginValidateMobile(e))))).pipe(this.errorHandler.bind(this))}smsLoginContinue(e){const{extra_params:t}=e,i=(0,o.__rest)(e,["extra_params"]);return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("smsLoginContinue"))),(0,r.z)((e=>(0,l.D)(e.login.smsLoginContinue(Object.assign(Object.assign({},i),{extra_params:Object.assign(Object.assign({},this.extraParams),t)})))))).pipe(this.errorHandler.bind(this))}passwordLogin(e){const{password:t,username:i="",extra_params:o,mobile:n,email:a,account:s}=e;return this.getAccountSdk$({username:i,mobile:n,email:a,account:s,triggerPath:"/passport/web/user/login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("passwordLogin"))),(0,r.z)((e=>(0,l.D)(e.login.pwdLogin({username:i,password:t,mobile:n,email:a,account:s,extra_params:Object.assign(Object.assign({},this.extraParams),o)}))))).pipe(this.errorHandler.bind(this))}verifyPwdWithoutLogin(e){const{password:t,username:i="",extra_params:o,mobile:n,email:a,account:s}=e;return this.getAccountSdk$({mobile:n,email:a,account:s,triggerPath:"/passport/web/account/verify_pwd_without_login/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("verifyPwdWithoutLogin"))),(0,r.z)((e=>(0,l.D)(e.verify.verifyPwdWithoutLogin({username:i,password:t,mobile:n,email:a,extra_params:Object.assign(Object.assign({account:s},this.extraParams),o)}))))).pipe(this.errorHandler.bind(this))}resetPwdLoginByEmail(e){const{email:t,password:i,code:o="",extra_params:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("resetPwdLoginByEmail"))),(0,r.z)((e=>(0,l.D)(e.password.resetPwdLoginByEmail({password:i,code:o,email:t,extra_params:Object.assign(Object.assign(Object.assign({},n),this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}changePwdByMobile(e){const{mobile:t,password:i,code:o}=e;return this.getAccountSdk$({mobile:t,triggerPath:"/passport/web//password/reset_by_ticket/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("changePwdByMobile"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.resetPwdByMobile({password:i,code:o,mobile:t,extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForLogin(e){const{code:t,verify_ticket:i,not_login_ticket:o}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForLogin"))),(0,r.z)((e=>(0,l.D)(e.password.validateMobile({code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:22})}))))).pipe(this.errorHandler.bind(this))}validateEmailCodeForLogin(e){const{code:t,verify_ticket:i,not_login_ticket:o}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateEmailCodeForLogin"))),(0,r.z)((e=>(0,l.D)(e.verify.notLoginValidateEmail({email:"",code:t,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o,type:6})}))))).pipe(this.errorHandler.bind(this))}validateMobileCodeForReset(e){const{code:t,verify_ticket:i,not_login_ticket:o,password:n}=e;return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("validateMobileCodeForReset"))),(0,r.z)((e=>(0,l.D)(e.forgetPwd.resetPwdByMobile({code:t,mobile:"",password:n,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:i,not_login_ticket:o})}))))).pipe(this.errorHandler.bind(this))}getOauthConfig(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getOauthConfig"))),(0,r.z)((t=>(0,l.D)(t.account.authConfig(e))))).pipe(this.errorHandler.bind(this))}thirdLogin(e){return this.getAccountSdk$(e.login_only?{openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/login_only/"}:void 0).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdLogin"))),(0,r.z)((t=>(0,l.D)(t.login.authLogin(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{birthday:e.birthday,platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}thirdVerify(e){return this.getAccountSdk$({openId:e.openid,platform_app_id:e.platform_app_id,triggerPath:"/passport/web/auth/verify/"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("thirdVerify"))),(0,r.z)((t=>(0,l.D)(t.verify.authVerify(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{platform:e.platform,id_token:e.id_token})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByMobileTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByMobileTicket"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.forceResetPwdByMobileTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}forceResetPwdByEmailTicket(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("forceResetPwdByEmailTicket"))),(0,r.z)((t=>(0,l.D)(t.forgetPwd.forceResetPwdByEmailTicket(Object.assign(Object.assign({},e),{extra_params:Object.assign(Object.assign({},this.extraParams),{rules_version:"v2"})})))))).pipe(this.errorHandler.bind(this))}cancelDeleteAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("cancelDeleteAccount"))),(0,r.z)((t=>(0,l.D)(t.cancel.cancelLogin(e))))).pipe(this.errorHandler.bind(this))}setAccount(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("setAccount"))),(0,r.z)((t=>(0,l.D)(t.account.setAccount(e))))).pipe(this.errorHandler.bind(this))}getQrCodeUrl(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("getQrCodeUrl"))),(0,r.z)((t=>(0,l.D)(t.qrcodeLogin.getQrcode(e))))).pipe(this.errorHandler.bind(this))}checkQrconnect(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkQrconnect"))),(0,r.z)((t=>(0,l.D)(t.qrcodeLogin.checkQrconnect(e))))).pipe(this.errorHandler.bind(this))}usernameRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({username:e.username,triggerPath:"/passport/web/username/register"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("usernameRegister"))),(0,r.z)((t=>(0,l.D)(t.login.usernameRegister(e))))).pipe(this.errorHandler.bind(this))}emailRegister(e){return e.extra_params=Object.assign(Object.assign({},this.extraParams),e.extra_params),this.getAccountSdk$({email:e.email,triggerPath:"/passport/web/email/register_verify_login"}).pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("emailRegister"))),(0,r.z)((t=>(0,l.D)(t.login.emailRegister(e))))).pipe(this.errorHandler.bind(this))}checkLogin(){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("checkLogin"))),(0,r.z)((e=>(0,l.D)(e.login.checkLogin({}))))).pipe(this.errorHandler.bind(this))}accountVerify(e){return this.getAccountSdk$().pipe((0,g.b)((()=>this.slardar.setCurrentRequestMethod("accountVerify"))),(0,r.z)((t=>(0,l.D)(t.verify.accountVerify({account:"",password:e.password,extra_params:Object.assign(Object.assign({},this.extraParams),{verify_ticket:e.verify_ticket})}))))).pipe(this.errorHandler.bind(this))}updateUniqueId(e){return this.getAccountSdk$().pipe((0,r.z)((t=>(0,l.D)(t.account.updateLoginName({login_name:e}))))).pipe(this.errorHandler.bind(this))}errorHandler(e){return e.pipe((0,g.b)((()=>{var e,t,i,o,n;this.slardar.handleRequestResultReport({url:this.requestInfo.url,type:null!==(i=null===(t=null===(e=this.requestInfo)||void 0===e?void 0:e.data)||void 0===t?void 0:t.type)&&void 0!==i?i:null===(n=null===(o=this.requestInfo)||void 0===o?void 0:o.params)||void 0===n?void 0:n.type,domain:this.requestInfo.baseURL})})),(0,m.K)((e=>{var t,i,o,n,a;return this.slardar.handleRequestResultReport({error_code:e.error_code||-1,url:this.requestInfo.url,type:null!==(o=null===(i=null===(t=this.requestInfo)||void 0===t?void 0:t.data)||void 0===i?void 0:i.type)&&void 0!==o?o:null===(a=null===(n=this.requestInfo)||void 0===n?void 0:n.params)||void 0===a?void 0:a.type,domain:this.requestInfo.baseURL}),(0,s.of)(Object.assign({error_code:e.error_code||-1},e))})))}};k=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[x.D,b.M])],k)},55524:(e,t,i)=>{"use strict";i.d(t,{D:()=>k});var o,n=i(31191),a=i(21296),r=i(50921),s=i(33348),l=i.n(s),d=i(37674),c=i(52702),p=i(71519),u=i(71011),g=i(61080),m=i(29866),h=i(38066),_=i(3585),v=i(70336),y=i(64446);!function(e){e[e.Mobile=1]="Mobile",e[e.Email=2]="Email",e[e.Username=3]="Username",e[e.OpenId=4]="OpenId",e[e.UnionId=5]="UnionId"}(o||(o={}));var f=i(54328),b=i(33888);const x="https://us.tiktok.com";let k=class{constructor(e,t){this.fetch=e,this.slardar=t,this.regionCache=new Map,this.userSeverRegion={},this.ttpConfig={},this.isSG=!0,this.alterRegionParams={},this.authBroadcastParams={},this.requestTime=1}setInitConfig(e){this.ttpConfig=e.ttpConfig,this.isSG=e.isSG}getRegionDomain(){return this.currentRegion.domain}getTtWid(){return this.currentRegion.ttWid}get isRetry(){return this.requestTime<=2?{is_retry:0}:{is_retry:1}}set currentRegion(e){this.userSeverRegion=e;const{domain:t}=e,i=t===x?"https://mcs.us.tiktok.com":this.isSG?"https://mcs-sg.tiktok.com":"https://mcs-va.tiktok.com";_.WB.setDomain(i)}get currentRegion(){return this.userSeverRegion}getUserRegions(e){const{open:t=!1,syncSeverList:i=[]}=this.ttpConfig;if(!t)return(0,d.of)({error_code:0});const{platform_app_id:n,email:a,mobile:s,openId:m,account:h,triggerPath:_}=e,v=m||a||this.formatMobile(s)||h||"";if(this.twitterRegion(n)||this.LineRegion(n)||this.getCacheRegion(v))return(0,d.of)({error_code:0});const y=(0,r.sha256)(`${v}aDy0TUhtql92P7hScCs97YWMT-jub2q9`),f=a?o.Email:m?o.OpenId:s?o.Mobile:o.Username;return(0,d.of)(i).pipe((0,c.z)((e=>(0,p.D)(e.map((({domain:e})=>this.fetch.post(`${e}/passport/web/region/`,{body:l().stringify({hashed_id:y,type:f,platform_app_id:n,aid:1459})})))).pipe((0,u.U)((e=>{const{maxSameRegion:t,regionResult:i,domains:o}=this.getMaxNumberDomain(e);return 1===t.count&&(this.alterRegionParams={hashed_id:y,type:f,platform_app_id:n,result:JSON.stringify(i)},this.alterUserRegions(),2===Object.keys(o).length)?{error_code:-1}:(this.currentRegion={ttWid:t.ttWid,domain:`https://${t.domain}`},this.authBroadcastParams={hashed_id:y,type:f,platform_app_id:n,pre_path:null!=_?_:"",final_domain:t.domain},this.regionCache.set(v,this.currentRegion),{error_code:0})}))))),(0,g.K)((e=>(console.error(e,"get region err"),(0,d.of)({error_code:-1})))))}alterUserRegions(){const{open:e=!1,syncSeverList:t=[]}=this.ttpConfig;return e?(this.requestTime=1,this.slardar.setCurrentRequestMethod("alterUserRegions"),(0,d.of)(t).pipe((0,c.z)((e=>e.map((({domain:e})=>this.singleRequestHandler({url:`${e}/passport/web/region_alert/`}))))))):(0,d.of)(null)}authBroadcast(e){this.requestTime=1;const{open:t=!1,syncSeverList:i=[]}=this.ttpConfig;return t?(this.slardar.setCurrentRequestMethod("authBroadcast"),f.g.show(),(0,d.of)(i).pipe((0,c.z)((t=>(0,p.D)(t.map((({domain:t})=>this.singleRequestHandler({url:`${t}/passport/web/auth_broadcast/`,userInfo:e,isAuth:!0})))).pipe((0,u.U)((()=>(f.g.hide(),null)))))))):(0,d.of)(null)}twitterRegion(e){if(e===y.Oy.twitter)return this.currentRegion={domain:x},!0}LineRegion(e){if(e===y.Oy.line)return this.currentRegion={domain:"https://t.tiktok.com"},!0}getCacheRegion(e){if(this.regionCache.get(e))return this.currentRegion=this.regionCache.get(e),!0}getMaxNumberDomain(e){this.slardar.setCurrentRequestMethod("getUserRegion");const t={},i={},{syncSeverList:o=[]}=this.ttpConfig,n={count:0,domain:"",ttWid:""};return e.forEach((({data:e},a)=>{const{domain:r,ttwid_migration_ticket:s,error_code:l}=e;this.slardar.handleRequestResultReport({error_code:l}),i[o[a].domain]=r,t[r]?t[r]=t[r]+1:t[r]=1,n.count<t[r]&&(n.count=t[r],n.domain=r),s&&(n.ttWid=s)})),{regionResult:i,maxSameRegion:n,domains:t}}singleRequestHandler(e){const{url:t,isAuth:i=!0,userInfo:o}=e,n=i?Object.assign(Object.assign({},this.authBroadcastParams),o):this.alterRegionParams;return(0,d.of)(this.isRetry).pipe((0,m.w)((({is_retry:e})=>this.fetch.post(t,{body:l().stringify(Object.assign(Object.assign({},n),{is_retry:e,aid:1459}))}).pipe((0,u.U)((({error_code:e})=>{if(this.slardar.handleRequestResultReport({error_code:e}),-1===e)throw new Error(`${e}`);return{error_code:0}}))))),(0,h.X)(2))}formatMobile(e){var t;if(!e)return"";const[i,o]=null!==(t=e.replace("+","").split(" "))&&void 0!==t?t:[];return"86"===i?o:`+${i}${o}`}};k=(0,n.__decorate)([(0,a.G)(),(0,n.__metadata)("design:paramtypes",[v.r,b.M])],k)},54328:(e,t,i)=>{"use strict";i.d(t,{g:()=>n});var o=i(80829);const n={show:()=>o.B.show("#loginContainer"),hide:()=>o.B.hide()}},33888:(e,t,i)=>{"use strict";i.d(t,{M:()=>r});var o=i(31191),n=i(21296),a=i(35370);let r=class{constructor(e){this.service=e,this.defaultMetrics={count:1},this.currentMethod=null,this.setCurrentRequestMethod=e=>{this.currentMethod=e},this.handleRequestResultReport=e=>{if(!this.currentMethod)return;const{error_code:t=0}=e,i=(0,o.__rest)(e,["error_code"]);this.service.emitEvent(this.currentMethod,this.defaultMetrics,Object.assign(Object.assign({error_code:String(t)},i),{function_type:this.getFunctionType(this.currentMethod,e)}))},this.handleThirdGetToken=e=>{this.currentMethod="thirdGetToken",this.handleRequestResultReport(e)},this.QRCodeShortenFail=e=>{this.service.emitEvent("qrcode_shorten_fail",this.defaultMetrics,e)},this.handleUserRegionEscape=e=>{this.service.emitEvent("userRegionEscape",this.defaultMetrics,e)}}getFunctionType(e,t){switch(e){case"sendPhoneCode":case"smsLogin":case"passwordLogin":case"thirdLogin":case"getQrCodeUrl":case"checkQrconnect":case"getOauthConfig":case"cancelDeleteAccount":case"thirdGetToken":return"login";case"notLoginSendCode":case"smsVerify":case"verifyPwdWithoutLogin":case"thirdVerify":return"verify";case"validateMobileCodeForLogin":case"validateEmailCodeForLogin":case"validateMobileCodeForReset":case"verifySendEmailCode":case"sendEmailCodeForLogin":case"emailCodeLogin":return"twostep";case"sendPhoneCodeWithType":return String(t.type).match(/13|12/)?"twostep":"reset";case"sendPhoneCodeForResetPwd":case"sendEmailCodeForResetPwd":case"resetPwdLoginByEmail":case"changePwdByMobile":return"reset";case"sendEmailCodeForForceResetPwd":case"sendPhoneCodeForForceResetPwd":case"validatePhoneCodeForForceReset":case"validateEmailCodeForForceReset":case"forceResetPwdByMobileTicket":case"forceResetPwdByEmailTicket":return"forcereset";case"sendEmailCodeForSignup":case"smsLoginContinue":case"usernameRegister":case"setAccount":case"emailRegister":return"signup";default:return"ttp"}}};r=(0,o.__decorate)([(0,n.G)(),(0,o.__metadata)("design:paramtypes",[a.n])],r)},14722:(e,t,i)=>{"use strict";i.d(t,{IU:()=>n});var o=i(87043);const n={oauthGoogleOneTap:"/oauthGoogleOneTap"};(0,o.t)(n)},94473:(e,t,i)=>{"use strict";i.d(t,{w_:()=>n,$J:()=>a,jT:()=>r});var o=i(87043);const n={recharge:"/recharge",rechargePayment:"/recharge/cashier",rechargePaymentCode:"/recharge/payment-code",rechargePaymentResult:"/recharge/payment-result",rechargeTransactions:"/recharge/transaction-history",rechargeUnavailable:"/recharge/unavailable",rechargeTerms:"/recharge/legal/terms-of-purchase-for-coins",rechargeTransactionsDetail:"/recharge/transaction-history/detail",rechargeCardManagement:"/recharge/card-management",rechargeExchange:"/recharge/exchange",coin:"/coin",coinPayment:"/coin/cashier",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",coinBindInfo:"/coin/bind-info",rechargeWithHash:"/recharge/:refhash",rechargenWithUser:"/recharge/@:uniqueId",rechargeWithHashAndUser:"/recharge/:refhash/@:uniqueId",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription"},a={recharge:"/recharge",rechargePayment:"/recharge/cashier",rechargePaymentCode:"/recharge/payment-code",rechargePaymentResult:"/recharge/payment-result",rechargeTransactions:"/recharge/transaction-history",rechargeUnavailable:"/recharge/unavailable",rechargeTerms:"/recharge/legal/terms-of-purchase-for-coins",rechargeTransactionsDetail:"/recharge/transaction-history/detail",rechargeCardManagement:"/recharge/card-management",rechargeExchange:"/recharge/exchange",coin:"/coin",coinPayment:"/coin/cashier",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",coinBindInfo:"/coin/bind-info",rechargeWithHash:"/recharge/:refhash",rechargenWithUser:"/recharge/@:uniqueId",rechargeWithHashAndUser:"/recharge/:refhash/@:uniqueId",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription"},r=(0,o.t)(a);(0,o.t)({recharge:"/recharge",rechargePayment:"/recharge/cashier",rechargePaymentCode:"/recharge/payment-code",rechargePaymentResult:"/recharge/payment-result",rechargeTransactions:"/recharge/transaction-history",rechargeUnavailable:"/recharge/unavailable",rechargeTerms:"/recharge/legal/terms-of-purchase-for-coins",rechargeTransactionsDetail:"/recharge/transaction-history/detail",rechargeCardManagement:"/recharge/card-management",rechargeExchange:"/recharge/exchange",coin:"/coin",coinPayment:"/coin/cashier",coinPaymentCode:"/coin/payment-code",coinPaymentResult:"/coin/payment-result",coinTransactions:"/coin/transaction-history",coinUnavailable:"/coin/unavailable",coinTerms:"/coin/legal/terms-of-purchase-for-coins",coinTransactionsDetail:"/coin/transaction-history/detail",coinCardManagement:"/coin/card-management",coinExchange:"/coin/exchange",liveDiscover:"/live",liveGoLive:"/live/producer",liveRoom:"/@:uniqueId/live",liveEvent:"/live/event/:eventId",liveRoomEmbed:"/embed/@:uniqueId/live",rechargeBindInfo:"/recharge/bind-info",coinBindInfo:"/coin/bind-info",rechargeWithHash:"/recharge/:refhash",rechargenWithUser:"/recharge/@:uniqueId",rechargeWithHashAndUser:"/recharge/:refhash/@:uniqueId",coinWithHash:"/coin/:refhash",coinWithUser:"/coin/@:uniqueId",coinWithHashAndUser:"/coin/:refhash/@:uniqueId",studioLogin:"/studio/login",studioDownload:"/studio/download",studioFaq:"/studio/faq",liveReferralHost:"/live/referral/host",liveReferralHostFaq:"/live/referral/host/faq",liveSubscription:"/live/subscription",liveSubscriptionGuide:"/live/subscription/guide",liveSubscriptionBadgeSetting:"/live/subscription/badge-setting",liveSubscriptionEmoteSetting:"/live/subscription/emote-setting",liveSubscriptionComplete:"/live/subscription/complete",liveSubscriptionSetting:"/live/subscription/setting",liveSubscriptionMysubsription:"/live/subscription/my-subscription"})},54348:(e,t,i)=>{"use strict";i.d(t,{Ad:()=>n,zp:()=>a,gs:()=>r,gY:()=>s});var o=i(87043);const n={user:"/@:uniqueId",video:"/@:uniqueId/video/:id",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",searchUser:"/search/user",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",searchHome:"/search",searchVideo:"/search/video"},a=(0,o.t)(n),r={user:"/@:uniqueId",video:"/@:uniqueId/video/:id",music:"/music/:title(.*)-:id",challenge:"/tag/:name",home:"/",foryouWithLang:["/ar","/bn-IN","/ceb-PH","/cs-CZ","/de-DE","/el-GR","/en","/es","/fi-FI","/fil-PH","/fr","/he-IL","/hi-IN","/hu-HU","/id-ID","/it-IT","/ja-JP","/jv-ID","/km-KH","/ko-KR","/ms-MY","/my-MM","/nl-NL","/pl-PL","/pt-BR","/ro-RO","/ru-RU","/sv-SE","/th-TH","/tr-TR","/uk-UA","/ur","/vi-VN","/zh-Hans","/zh-Hant-TW"],foryou:"/foryou",following:"/following",topics:"/topics/:name",expansion:"/discover/:name",searchUser:"/search/user",profile:"/profile",inbox:"/inbox",discover:"/discover",reportinbox:"/report/inbox",report:"/report/:type",setting:"/setting"},s=((0,o.t)(r),(0,o.t)({user:"/@:uniqueId",video:"/@:uniqueId/video/:id",music:"/music/:title(.*)-:id",challenge:"/tag/:name",question:"/question/:content(.+)-:id",musicPlaylist:"/playlist-music/:title(.+)-:id",searchReflow:"/search/campaign/:eventName",videoPlaylist:"/@:uniqueId/playlist/:content(.+)-:id",sticker:"/sticker/:title(.+)-:id",group:"/messages/group"}),(0,o.t)({foryou:"/foryou",user:"/@:uniqueId",setting:"/setting",ftcFallback:"*"}),{loginHome:"/login",loginPhoneOrEmail:"/login/phone-or-email",loginPhone:"/login/phone-or-email/phone",loginEmail:"/login/phone-or-email/email",loginPhonePassword:"/login/phone-or-email/phone-password",loginDownloadApp:"/login/download-app",loginTwoStepVerify:"/login/2sv/:type",loginForgetEmailPassword:"/login/email/forget-password",loginForgetPhonePassword:"/login/phone/forget-password",loginQRcode:"/login/qrcode",loginWithSignedEmail:"/login/with-signed-email",signupHome:"/signup",signupPhoneOrEmail:"/signup/phone-or-email",signupPhone:"/signup/phone-or-email/phone",signupEmail:"/signup/phone-or-email/email",signupAgeGate:"/signup/age-gate",signupAgeGateConfirm:"/signup/age-gate/confirm",signupPolicyConfirm:"/signup/policy-confirm",signupCreateAccount:"/signup/create-account",signupCreateUsername:"/signup/create-username",signupCreatePassword:"/signup/create-password",signupPrivateOn:"/signup/private-on",oauth:"/oauth",oauthLine:"/oauthLine"});(0,o.t)(s)},87043:(e,t,i)=>{"use strict";i.d(t,{t:()=>l});var o=i(53792),n=i.n(o),a=i(34461),r=i.n(a),s=i(50193);function l(e){return n()(e,(e=>function(e){return r()(e)?(0,s.compile)(e):()=>e[0]}(e)))}},65156:(e,t,i)=>{"use strict";i.d(t,{Bs:()=>s,yy:()=>r});var o=i(31191);i(16988);const n={acrawler:"https://sf16-secsdk.ttwstatic.com/obj/rc-web-sdk-gcs/webmssdk/1.0.0.200/webmssdk.js",secsdk_sg:"https://sf16-sg.tiktokcdn.com/obj/eden-sg/fapybjlz_lm_zlp/ljhwZthlaukjlkulzlp/security/secsdk.umd.js",secsdk_va:"https://sf16-va.tiktokcdn.com/obj/eden-va2/fapybjlz_lm_zlp/ljhwZthlaukjlkulzlp/security/secsdk.umd.js"};i(74512);const a="script-manager";function r(e){return(0,o.__awaiter)(this,void 0,void 0,(function*(){const{retry:t=0,moduleId:i}=e;try{return yield System.import(i)}catch(i){if(t)return yield r(Object.assign(Object.assign({},e),{retry:t-1}));throw i}}))}function s(e={importmap:"/node-webapp/api/importmap"}){return(0,o.__awaiter)(this,void 0,void 0,(function*(){if(document.querySelector(`#${a}`))return;let{importmap:t}=e;const i=document.createElement("script");if(i.type="systemjs-importmap",i.id=a,"string"==typeof t)try{const e=yield window.fetch.call(null,t,{method:"Get",redirect:"error"}),{imports:i}=yield e.json();t={imports:i}}catch(e){t={imports:n}}i.innerText=JSON.stringify(t),document.head.appendChild(i)}))}},80850:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEST_ID_MAPPING=void 0,t.TEST_ID_MAPPING={VIDEO_TD_R5:{CONTROL_GROUP:"6994771503224995846",TEST_GROUP_1:"6994771503258550277",TEST_GROUP_2:"6994771503279521797",TEST_GROUP_3:"6994771503296790534"}}},3352:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i(31191);(0,o.__exportStar)(i(61082),t),(0,o.__exportStar)(i(94287),t),(0,o.__exportStar)(i(41248),t),(0,o.__exportStar)(i(64871),t),(0,o.__exportStar)(i(80850),t)},61082:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCENE_GOOGLEBOT_TYPE=t.TIKTOK_PROJECT_ID=t.TOPICS_LIST_COUNT=t.AMP_LIST_COUNT=t.ITEM_LIST_COUNT=void 0,t.ITEM_LIST_COUNT=9,t.AMP_LIST_COUNT=5,t.TOPICS_LIST_COUNT=10,t.TIKTOK_PROJECT_ID="0",t.SCENE_GOOGLEBOT_TYPE={5:23,1:24,3:25,4:26,0:22,104:70,117:48,16:77,113:79}},94287:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERIFY_CODE=t.EFFECT_NOT_EXIST=t.LIVE_NOT_EXIST=t.GAME_NOT_EXIST=t.MUSIC_NO_COPYRIGHT=t.MUSIC_UNSHELVE=t.MUSIC_NOT_EXIST=t.USER_UNIQUE_SENSITIVITY=t.USER_FTC=t.USER_NOT_LOGIN=t.USER_PRIVATE=t.USER_BAN=t.USER_NOT_EXIST=t.HASHTAG_BLACK_LIST=t.HASHTAG_SENSITIVITY_WORD=t.HASHTAG_UNSHELVE=t.HASHTAG_NOT_EXIST=t.VIDEO_USER_BLOCKED_BY_AUTHOR=t.VIDEO_DELETED=t.VIDEO_FRIENDS_ONLY=t.VIDEO_GEOFENCE_BLOCK=t.VIDEO_PRIVATE_BY_USER=t.VIDEO_FIRST_REVIEW_UNSHELVE=t.VIDEO_LOW_AGE_T=t.VIDEO_LOW_AGE_M=t.VIDEO_ABNORMAL=t.VIDEO_NOT_EXIST=t.VIDEO_UNSHELVE_BY_MUSIC=t.VIDEO_NEED_RECHECK=t.VIDEO_RISK_MASK=t.VIDEO_R_MASK=t.VIDEO_RISK=t.SERVER_ERROR_NOT_500=t.NET_ERROR=t.SHARK_SLIDE=t.SHARK_BLOCK=t.OK=t.CLIENT_PAGE_ERROR=void 0,t.CLIENT_PAGE_ERROR=450,t.OK=0,t.SHARK_BLOCK=10114,t.SHARK_SLIDE=10113,t.NET_ERROR=10111,t.SERVER_ERROR_NOT_500=10101,t.VIDEO_RISK=10228,t.VIDEO_R_MASK=10229,t.VIDEO_RISK_MASK=10230,t.VIDEO_NEED_RECHECK=10227,t.VIDEO_UNSHELVE_BY_MUSIC=10220,t.VIDEO_NOT_EXIST=10204,t.VIDEO_ABNORMAL=10215,t.VIDEO_LOW_AGE_M=10213,t.VIDEO_LOW_AGE_T=10214,t.VIDEO_FIRST_REVIEW_UNSHELVE=10217,t.VIDEO_PRIVATE_BY_USER=10216,t.VIDEO_GEOFENCE_BLOCK=10231,t.VIDEO_FRIENDS_ONLY=10240,t.VIDEO_DELETED=10241,t.VIDEO_USER_BLOCKED_BY_AUTHOR=10242,t.HASHTAG_NOT_EXIST=10205,t.HASHTAG_UNSHELVE=10212,t.HASHTAG_SENSITIVITY_WORD=10211,t.HASHTAG_BLACK_LIST=10209,t.USER_NOT_EXIST=10202,t.USER_BAN=10221,t.USER_PRIVATE=10222,t.USER_NOT_LOGIN=10102,t.USER_FTC=10223,t.USER_UNIQUE_SENSITIVITY=10225,t.MUSIC_NOT_EXIST=10203,t.MUSIC_UNSHELVE=10218,t.MUSIC_NO_COPYRIGHT=10219,t.GAME_NOT_EXIST=10224,t.LIVE_NOT_EXIST=10210,t.EFFECT_NOT_EXIST=10208,t.VERIFY_CODE=1e4},41248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIVE_RECHARGE_KEYWORDS=t.LIVE_EVENT_PATH=t.GO_LIVE_PATH=t.LIVE_DISCOVER_PATH=t.META_ROBOTS=t.KEYWORD_EXPANSION_NAME=t.DIRECT_MESSAGE_URL=t.ORGANIZATION_SAMEAS_LIST_KR=t.ORGANIZATION_SAMEAS_LIST=t.ORGANIZATION_ID=t.DISCOVER_DESC=t.DISCOVER_ID=t.DISCOVER_URL=t.DISCOVER_NAME=t.SEARCH_REFLOW_URL=t.COIN_PATH=t.COIN_URL=t.RECHARGE_PATH=t.RECHARGE_URL=t.FOLLOWING_PATH=t.FOLLOWING_URL=t.TRENDING_DESC=t.TRENDING_ID=t.TRENDING_PATH=t.TRENDING_URL=t.TRENDING_NAME=t.HOME_SEARCH_QUERY=t.HOME_SEARCH_ANDROID_URL=t.HOME_SEARCH_WEB_URL=t.HOME_NAME=t.WEBSITE_DESC=t.WEBSITE_LOGO=t.WEBSITE_ID=t.CANONICAL_PREFIX=t.WEBSITE_URL=t.WEBSITE_NAME=void 0,t.WEBSITE_NAME="TikTok",t.WEBSITE_URL="https://www.tiktok.com",t.CANONICAL_PREFIX="https://www.tiktok.com",t.WEBSITE_ID="https://www.tiktok.com/#website",t.WEBSITE_LOGO="https://sf-tb-sg.ibytedtos.com/obj/eden-sg/uhtyvueh7nulogpoguhm/tiktok-icon2.png",t.WEBSITE_DESC="TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos. Download the app to get started.",t.HOME_NAME="TikTok - Make Your Day",t.HOME_SEARCH_WEB_URL="https://www.tiktok.com/search?q={search_term_string}",t.HOME_SEARCH_ANDROID_URL="tiktok://search?keyword={search_term_string}",t.HOME_SEARCH_QUERY="required name=search_term_string",t.TRENDING_NAME="Watch trending videos for you",t.TRENDING_URL="https://www.tiktok.com/foryou",t.TRENDING_PATH="/foryou",t.TRENDING_ID="https://www.tiktok.com/#foryou",t.TRENDING_DESC="It starts on TikTok. Join the millions of viewers discovering content and creators on TikTok  available on the web or on your mobile device.",t.FOLLOWING_URL="https://www.tiktok.com/following",t.FOLLOWING_PATH="/following",t.RECHARGE_URL="https://www.tiktok.com/recharge",t.RECHARGE_PATH="/recharge",t.COIN_URL="https://www.tiktok.com/coin",t.COIN_PATH="/coin",t.SEARCH_REFLOW_URL="https://www.tiktok.com/search/campaign",t.DISCOVER_NAME="Discover popular videos",t.DISCOVER_URL="https://www.tiktok.com/discover",t.DISCOVER_ID="https://www.tiktok.com/#discover",t.DISCOVER_DESC="On your device or on the web, join millions of viewers on the fastest growing video app. Download TikTok to discover new creators, search popular hashtags, and watch trending videos.",t.ORGANIZATION_ID="https://www.tiktok.com/#organization",t.ORGANIZATION_SAMEAS_LIST=["https://www.instagram.com/tiktok/","https://www.facebook.com/tiktok","https://www.twitter.com/tiktok_us","https://www.youtube.com/channel/UChPd_WHrv3O-XAXXHLixs7g"],t.ORGANIZATION_SAMEAS_LIST_KR=["https://www.instagram.com/tiktok_kr/","https://www.facebook.com/tiktok","https://twitter.com/TiktokKR","https://www.youtube.com/c/tiktokkr","https://post.naver.com/my.naver?memberNo=52184197"],t.DIRECT_MESSAGE_URL="https://www.tiktok.com/messages",t.KEYWORD_EXPANSION_NAME="Discover",t.META_ROBOTS={INDEX:"index, follow",NO_INDEX:"noindex, follow",IMAGE_PREVIEW_LARGE:"max-image-preview:large"},t.LIVE_DISCOVER_PATH="/live",t.GO_LIVE_PATH="/live/producer",t.LIVE_EVENT_PATH="/live/event",t.LIVE_RECHARGE_KEYWORDS="TikTok recharge, How to recharge on TikTok, TikTok top up, TikTok Get coins, How to get coins on TikTok, TikTok refill, TikTok purchase, TikTok coin, TikTok coins, TikTok wallet, TikTok gifts, TikTok LIVE gifts, TikTok live gifts"},64871:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STICKER_TYPE=void 0,t.STICKER_TYPE={TEXT_STICKER:4,COVER_STICKER:9}},14013:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXPERIMENT_CONTENT=t.PAGE_CONTENTS=void 0;const o=i(31191),n=i(5013);t.PAGE_CONTENTS=[...n.FOLLOWING_CONTENTS,...n.FORYOU_CONTENTS,...n.HASHTAG_CONTENTS,...n.HOME_CONTENTS,...n.MUSIC_CONTENTS,...n.QUESTION_CONTENTS,...n.SEARCH_CONTENTS,...n.USER_CONTENTS,...n.VIDEO_CONTENTS,...n.RECHARGE_CONTENTS,...n.SEARCH_REFLOW_CONTENTS,...n.KEYWORD_EXPANSION_CONTENTS,...n.GO_LIVE_CONTENTS,...n.LIVE_DISCOVER_CONTENTS,...n.LIVE_ROOM_CONTENTS,...n.MUSIC_PLAYLIST_CONTENTS,...n.TOPICS_CONTENTS,...n.LIVE_EVENT_CONTENTS,...n.VIDEO_PLAYER_LIST_CONTENT,...n.STICKER_CONTENT],t.EXPERIMENT_CONTENT=[],(0,o.__exportStar)(i(5013),t)},16915:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FOLLOWING_CONTENTS=void 0;const o=i(84911),n=i(3352);t.FOLLOWING_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:11,content:function(e){const{$language:t="en",t:i}=e;return{title:i("SEO_following_title"),keywords:i("TikTok i18n keywords"),description:i("SEO_following_desc"),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}${n.FOLLOWING_PATH}?lang=${t}`,applicableDevice:"pc, mobile"}}}]},77556:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORYOU_CONTENTS=void 0;const o=i(84911),n=i(3352),a=i(22993);t.FORYOU_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:5,content:function(e){const{$language:t="en",t:i}=e,o=["TikTok Trends","TikTok Trending","Trending Videos","Trending Hashtags","TikTok i18n keywords"].map((e=>i(e))).join(",");return{title:i("SEO_trending_title"),keywords:o,description:i("SEO_trending_desc"),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}${n.TRENDING_PATH}?lang=${t}`,applicableDevice:"pc, mobile"}}},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:5,content:function(e){const{seoProps:{itemList:t}={}}=e,i={"@id":n.TRENDING_ID,url:n.TRENDING_URL,name:n.TRENDING_NAME,description:n.TRENDING_DESC,publisher:{"@type":"Organization","@id":n.ORGANIZATION_ID,name:n.WEBSITE_NAME,url:n.WEBSITE_URL,sameAs:n.ORGANIZATION_SAMEAS_LIST,logo:{"@type":"ImageObject",url:n.WEBSITE_LOGO}}},r=(0,a.getBreadcrumbList)([{url:n.WEBSITE_URL,name:n.WEBSITE_NAME},{url:n.TRENDING_URL,name:n.TRENDING_NAME}]);return[[o.StructuredData.JsonldType.WebSite,i],[o.StructuredData.JsonldType.BreadcrumbList,r],[o.StructuredData.JsonldType.ItemList,null!=t?t:{}]]}}]},49476:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GO_LIVE_CONTENTS=void 0;const o=i(84911),n=i(3352);t.GO_LIVE_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:14,content:function(e){var t;const{$language:i="en",t:o,$user:a}=e,r=null!==(t=null==a?void 0:a.uniqueId)&&void 0!==t?t:"",s=[null==a?void 0:a.nickName,`@${r}`,"live","live room","tiktok search",o("TikTok i18n keywords")].join(", ");return{title:o("SEO_live_title",{username:r}),keywords:s,description:o("SEO_live_title",{username:r}),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}${n.GO_LIVE_PATH}?lang=${i}`,applicableDevice:"pc, mobile"}}}]},12508:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HASHTAG_CONTENTS=t.getHashtagSERP=void 0;const o=i(84911),n=i(3352),a=i(22993);function r(e){var t,i;const{challengeInfo:o,statusCode:r,seoProps:s,t:l}=e,{predictedLanguage:d}=null!=s?s:{},c=(0,a.getValidStatus)(e),{challenge:{title:p="",desc:u=""}={},stats:{viewCount:g=0}={}}=null!=o?o:{},{title:m,body:h}=null!==(t=null==o?void 0:o.challengeAnnouncement)&&void 0!==t?t:{},_=null!==(i=null==o?void 0:o.challenge.splitTitle)&&void 0!==i?i:null==s?void 0:s.splitTitle,v=`${(0,a.singleLineString)(null!=m?m:"")} ${(0,a.singleLineString)(null!=h?h:"")}`.trim(),y=`#${p}`,f=null!=_?_:y,b=(0,a.packI18NConfig)(d);let x=l("hashtag_SEO_title2",b({hashtag:y}));const k=[_,p,l("TikTok i18n keywords",b())].filter((e=>Boolean(e))).join(",");let S=`${l("hashtag_SEO_desc1",b({tagText:f,views:(0,a.amountConversion)(Number(g)),hashtag:y}))} ${v?`${v} `:""}${(0,a.singleLineString)(u)}`;const w=c&&p,C=w?`${n.CANONICAL_PREFIX}${(0,a.getPureTagPath)({tagName:p})}`:"",j=w?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX;switch(r){case n.HASHTAG_NOT_EXIST:case n.HASHTAG_BLACK_LIST:case n.HASHTAG_SENSITIVITY_WORD:case n.HASHTAG_UNSHELVE:x=l("err_tag"),S=""}return{title:x,keywords:k,description:S,canonicalHref:C,robotsContent:j,applicableDevice:"pc, mobile"}}t.getHashtagSERP=r,t.HASHTAG_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:3,content:r},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:3,content:function(e){var t,i;const{challengeInfo:r,seoProps:{itemList:s,metaParams:l}={}}=e,{title:d=""}=null!==(t=null==r?void 0:r.challenge)&&void 0!==t?t:{},c=`${n.WEBSITE_URL}${(0,a.getPureTagPath)({tagName:d})}`,p=null!==(i=null==l?void 0:l.title)&&void 0!==i?i:`#${d} | TikTok`,u={"@type":"ItemPage","@id":c},g=(0,a.getBreadcrumbList)([{url:n.WEBSITE_URL,name:n.WEBSITE_NAME},{url:c,name:p}]);return[[o.StructuredData.JsonldType.Page,u],[o.StructuredData.JsonldType.ItemList,null!=s?s:{}],[o.StructuredData.JsonldType.BreadcrumbList,g]]}}]},41764:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOME_CONTENTS=void 0;const o=i(84911),n=i(3352);t.HOME_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:101,content:function(e){const{$language:t="en",t:i}=e,o=[i("SEO TikTok Keyword"),i("TikTok i18n keywords for home")].join(",");return{title:i("SEO_homepage_title"),keywords:o,description:i("SEO_homepage_desc"),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}/${t}/`,applicableDevice:"pc, mobile"}}},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:101,content:function(e){const{$language:t="en"}=e,i=`${n.WEBSITE_URL}/${t}/`,a=/ko/.test(t)?n.ORGANIZATION_SAMEAS_LIST_KR:n.ORGANIZATION_SAMEAS_LIST,r={"@id":n.WEBSITE_ID,url:i,name:n.HOME_NAME,description:n.WEBSITE_DESC,publisher:{"@type":"Organization","@id":n.ORGANIZATION_ID,name:n.WEBSITE_NAME,url:i,sameAs:a,logo:{"@type":"ImageObject",url:n.WEBSITE_LOGO}},potentialAction:[{"@type":"SearchAction",target:n.HOME_SEARCH_WEB_URL,"query-input":n.HOME_SEARCH_QUERY},{"@type":"SearchAction",target:n.HOME_SEARCH_ANDROID_URL,"query-input":n.HOME_SEARCH_QUERY}]};return[[o.StructuredData.JsonldType.WebSite,r]]}}]},5013:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i(31191);(0,o.__exportStar)(i(41764),t),(0,o.__exportStar)(i(77556),t),(0,o.__exportStar)(i(16915),t),(0,o.__exportStar)(i(51323),t),(0,o.__exportStar)(i(76017),t),(0,o.__exportStar)(i(57281),t),(0,o.__exportStar)(i(12508),t),(0,o.__exportStar)(i(65412),t),(0,o.__exportStar)(i(21637),t),(0,o.__exportStar)(i(20691),t),(0,o.__exportStar)(i(98773),t),(0,o.__exportStar)(i(50180),t),(0,o.__exportStar)(i(49476),t),(0,o.__exportStar)(i(68594),t),(0,o.__exportStar)(i(48547),t),(0,o.__exportStar)(i(81566),t),(0,o.__exportStar)(i(71904),t),(0,o.__exportStar)(i(48526),t),(0,o.__exportStar)(i(51211),t),(0,o.__exportStar)(i(10098),t)},98773:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEYWORD_EXPANSION_CONTENTS=t.getKeywordExpansionSERP=void 0;const o=i(84911),n=i(3352),a=i(36237);function r(e,t){var i,o;if(!e)return{};const{keyword:r,itemResponse:s,challengeResponse:l,expansionResponse:d,seoProps:c,$language:p,t:u}=e,{queryLang:g}=null!=c?c:{},{challengeInfoList:m=[]}=null!=l?l:{},{itemList:h=[]}=null!=s?s:{},{currentWord:{language:_=""}={}}=null!=d?d:{},v=(0,a.packI18NConfig)(null!==(o=null!==(i=null!=t?t:g)&&void 0!==i?i:_)&&void 0!==o?o:p),y=(r||"").replace(/-/g," "),f=u("expansion_SEO_title",v({expansion_keywords:y})),b=[u(y,v()),u("TikTok i18n keywords",v())].join(","),x=`${n.DISCOVER_URL}/${r}`,k=h.map((e=>{var t,i,o,n;return`${null!==(i=null===(t=null==e?void 0:e.author)||void 0===t?void 0:t.nickname)&&void 0!==i?i:""}(@${null!==(n=null===(o=null==e?void 0:e.author)||void 0===o?void 0:o.uniqueId)&&void 0!==n?n:""})`})).join(", "),S=m.map((e=>{var t,i;return`#${null!==(i=null===(t=null==e?void 0:e.challenge)||void 0===t?void 0:t.title)&&void 0!==i?i:""}`})).join(", "),w=k&&k.length>0?u("expansion_SEO_desc_num2",v({creatorsText:k})):"",C=S&&S.length>0?u("expansion_SEO_desc_num3",v({hashtagText:S})):"";return{title:f,keywords:b,description:`${u("expansion_SEO_desc_num1",v({expansion_keywords:y}))} ${w} ${C}`,robotsContent:"index, follow",canonicalHref:x,applicableDevice:"pc, mobile"}}t.getKeywordExpansionSERP=r,t.KEYWORD_EXPANSION_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:104,content:r},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:104,content:function(e){const{keyword:t="",seoProps:{itemList:i}={}}=e,a=`${n.DISCOVER_URL}/${t}`,r={"@type":"ItemPage","@id":a},s={itemListElement:[{"@type":"ListItem",position:1,item:{"@type":"Thing","@id":n.WEBSITE_URL,name:n.WEBSITE_NAME}},{"@type":"ListItem",position:2,item:{"@type":"Thing","@id":n.DISCOVER_URL,name:n.KEYWORD_EXPANSION_NAME}},{"@type":"ListItem",position:3,item:{"@type":"Thing","@id":a,name:t}}]};return[[o.StructuredData.JsonldType.Page,r],[o.StructuredData.JsonldType.BreadcrumbList,s],[o.StructuredData.JsonldType.ItemList,null!=i?i:{}]]}}]},68594:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIVE_DISCOVER_CONTENTS=void 0;const o=i(84911),n=i(3352);t.LIVE_DISCOVER_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:15,content:function(e){const{t}=e;return{title:t("SEO_live_discover_title"),keywords:"live, live stream, TikTok, , tik tok, tick tock, tic tok, tic toc, tictok,  , ticktock",description:t("SEO_live_discover_desc"),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}${n.LIVE_DISCOVER_PATH}`,applicableDevice:"pc, mobile"}}}]},48526:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIVE_EVENT_CONTENTS=void 0;const o=i(84911),n=i(3352);t.LIVE_EVENT_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:114,content:function(e){const{t,eventTitle:i="",eventId:o="",subscriberCount:a=""}=e;return{title:t("share_live_event_title",{"Event Topic":i}).replace("{Event Topic}",i),keywords:"live, live event, TikTok, , tik tok, tick tock, tic tok, tic toc, tictok,  , ticktock",description:t("share_live_event_desc",{number:a}),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}${n.LIVE_EVENT_PATH}/eventId=${o}`,applicableDevice:"pc, mobile"}}}]},48547:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIVE_ROOM_CONTENTS=void 0;const o=i(84911),n=i(3352),a=i(22993);t.LIVE_ROOM_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:12,content:function(e){var t,i,o,r;const{t:s,userInfo:l,LiveRoomInfo:d,event:c}=e,p=null!==(t=null==d?void 0:d.title)&&void 0!==t?t:"",u=null==d?void 0:d.status,g=null!==(o=null===(i=null==l?void 0:l.user)||void 0===i?void 0:i.uniqueId)&&void 0!==o?o:"",m=null===(r=null==l?void 0:l.user)||void 0===r?void 0:r.nickname,h=`${m} (@${g})`,_=[m,`@${g}`,"live","live room","tiktok search",s("TikTok i18n keywords")].join(", "),v=(0,a.getPureLivePath)({uniqueId:g}),y=`${n.WEBSITE_URL}${v}`,f=s("SEO_live_title",{username:h});let b=`${p?`${p}. `:""}${s("SEO_live_desc",{username:h})}`;return!(2===u)&&c&&(b=`${s("SEO_live_desc2",{event_name:null==c?void 0:c.title,username:h})}`),{title:f,keywords:_,description:b,robotsContent:n.META_ROBOTS.INDEX,canonicalHref:y,applicableDevice:"pc, mobile"}}},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:12,content:function(e){var t,i,o,r;const{t:s,userInfo:l,seoProps:d,event:c}=e,{videoObject:p}=null!=d?d:{},u=null!==(i=null===(t=null==l?void 0:l.user)||void 0===t?void 0:t.uniqueId)&&void 0!==i?i:"",g=null!==(r=null===(o=null==l?void 0:l.user)||void 0===o?void 0:o.nickname)&&void 0!==r?r:"",m=(0,a.getPureLivePath)({uniqueId:u}),h=`${n.WEBSITE_URL}${m}`,_=(0,a.getPureUserPath)({uniqueId:u}),v=`${n.WEBSITE_URL}${_}`,y=(0,a.isRealUniqueId)(u)?`${g} (@${u})`:`${g}`;return[["Event",c?{"@type":"Event",name:c.title,url:h,description:c.description,startDate:new Date(1e3*Number(c.startTime)).toISOString(),endDate:new Date(1e3*(Number(c.startTime)+Number(c.duration))).toISOString(),eventStatus:"http://schema.org/EventScheduled",eventAttendanceMode:"http://schema.org/OnlineEventAttendanceMode",location:{"@type":"VirtualLocation",url:h},Organizer:{"@type":"Organization",name:g,alternateName:u,url:v}}:{}],["BreadcrumbList",(0,a.getBreadcrumbList)([{url:n.WEBSITE_URL,name:n.WEBSITE_NAME},{url:v,name:y},{url:h,name:"LIVE"}])],["VideoObject",null!=p?p:{}]]}}]},81566:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MUSIC_PLAYLIST_CONTENTS=t.getMusicPlaylistSERP=void 0;const o=i(84911),n=i(3352),a=i(22993);function r(e){const{mc_info:t,status_code:i,seoProps:o,t:r}=e,{predictedLanguage:s}=null!=o?o:{},{id_str:l="",name:d=""}=null!=t?t:{},c=0===i&&""!==d,p=(0,a.packI18NConfig)(s);let u=r("playlist_sharing_metatitle",p({playlist_name:d}));const g=[d,r("TikTok i18n keywords",p())].join(",");let m=r("playlist_sharing_metadescription",p({playlist_name:d}));return c||(u="",m=""),{title:u,keywords:g,description:m,canonicalHref:c?`${n.CANONICAL_PREFIX}/playlist-music/${d}-${l}`:"",robotsContent:c?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX,applicableDevice:"pc, mobile"}}t.getMusicPlaylistSERP=r,t.MUSIC_PLAYLIST_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:17,content:r}]},65412:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MUSIC_CONTENTS=t.getMusicSERP=void 0;const o=i(84911),n=i(3352),a=i(22993);function r(e){var t;const{musicInfo:i,statusCode:o,seoProps:r,t:s}=e,{predictedLanguage:l}=null!=r?r:{},d=(0,a.getValidStatus)(e),{music:{id:c="",title:p="",authorName:u="",scheduleSearchTime:g=0}={}}=null!=i?i:{},{videoCount:m}=null!==(t=null==i?void 0:i.stats)&&void 0!==t?t:{},h=(0,a.packI18NConfig)(l);let _=s("music_SEO_title1",h({musicName:p,authorName:u}));const v=[p,u,s("TikTok i18n keywords",h())].join(",");let y=s("music_SEO_desc3",h({musicName:p,authorName:u,posts:(0,a.amountConversion)(m)})),f=!0;if(0!==g){const e=Number(new Date);f=1e3*Number(g)<=e}const b=d&&p&&c,x=(0,a.getPureMusicPath)({musicName:p,musicId:c}),k=b?`${n.CANONICAL_PREFIX}${x}`:"",S=b&&f?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX;switch(o){case n.MUSIC_NOT_EXIST:case n.MUSIC_UNSHELVE:_=s("err_sound"),y="";break;case n.MUSIC_NO_COPYRIGHT:_=s("err_sound_copy"),y=""}return{title:_,keywords:v,description:y,canonicalHref:k,robotsContent:S,applicableDevice:"pc, mobile"}}t.getMusicSERP=r,t.MUSIC_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:4,content:r},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:4,content:function(e){var t;const{musicInfo:i,seoProps:r,t:s}=e,{itemList:l,metaParams:d}=null!=r?r:{},{title:c="",id:p="",authorName:u="",coverMedium:g="",duration:m=0,album:h=""}=null!==(t=null==i?void 0:i.music)&&void 0!==t?t:{},{title:_,description:v}=null!=d?d:{},y=(0,a.getPureMusicPath)({musicName:c,musicId:p}),f=`${n.WEBSITE_URL}${y}`,b=null!=_?_:`${c}(${u}) | TikTok`,x={"@type":"ItemPage","@id":f},k=(0,a.getBreadcrumbList)([{url:n.WEBSITE_URL,name:n.WEBSITE_NAME},{url:f,name:b}]),S={url:f,name:c,description:null!=v?v:"",image:g,duration:(0,a.formatMusicDuration)(null!=m?m:0),byArtist:{"@type":"Person",name:[null!=u?u:""]},inAlbum:{"@type":"MusicAlbum",name:null!=h?h:""}};return[[o.StructuredData.JsonldType.Page,x],[o.StructuredData.JsonldType.ItemList,null!=l?l:{}],[o.StructuredData.JsonldType.BreadcrumbList,k],[o.StructuredData.JsonldType.MusicRecording,S]]}}]},50180:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QUESTION_CONTENTS=void 0;const o=i(84911),n=i(3352),a=i(22993);function r(e){return!!e&&e.originalItem}function s(e){return!!e&&!(null==e?void 0:e.originalItem)}function l(e){var t,i,o,r,s,l,d;return{"@type":"Answer",text:null!==(i=null===(t=e.stickersOnItem)||void 0===t?void 0:t.map((e=>{var t;return null===(t=e.stickerText)||void 0===t?void 0:t.join(".")})).concat(null==e?void 0:e.desc).filter(Boolean).join("."))&&void 0!==i?i:"",dateCreated:new Date(1e3*Number(e.createTime)).toISOString(),upvoteCount:null!==(r=null===(o=e.stats)||void 0===o?void 0:o.diggCount)&&void 0!==r?r:0,url:`${n.WEBSITE_URL}${(0,a.getPureVideoPath)({secUid:e.authorSecId,uniqueId:null!==(s=e.author)&&void 0!==s?s:"",videoId:e.id})}`,author:{"@type":"Person",alternateName:null!==(l=e.nickname)&&void 0!==l?l:"",name:null!==(d=e.nickname)&&void 0!==d?d:""}}}t.QUESTION_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:16,content:function(e){const{questionInfo:t,seoProps:i,t:o}=e,{predictedLanguage:r}=null!=i?i:{},s=(0,a.getValidStatus)(e),{id:l="",content:d="",videoCount:c}=null!=t?t:{},p=(0,a.packI18NConfig)(r),u=s&&d&&l,g=u?o("SEO_qa_title_1",p({question:d})):"",m=[o("TikTok i18n keywords",p())].join(","),h=u?o("SEO_qa_desc_1",p({question:d,number:(0,a.amountConversion)(c)})):"",_=(0,a.getPureQuestionPath)({questionContent:d,questionId:l});return{title:g,keywords:m,description:h,canonicalHref:u?`${n.WEBSITE_URL}${_}`:"",robotsContent:u?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX,applicableDevice:"pc, mobile"}}},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:16,content:function(e){var t,i,d,c;const{questionInfo:p,seoProps:u,t:g,answers:m}=e,{itemList:h,metaParams:_}=null!=u?u:{},{id:v="",content:y="",videoCount:f,creator:b,createTime:x}=null!=p?p:{},k=(0,a.getValidStatus)(e)&&y&&v,{title:S}=null!=_?_:{},w=(0,a.getPureQuestionPath)({questionContent:y,questionId:v}),C=`${n.WEBSITE_URL}${w}`,j=null!=S?S:`${y} | TikTok Q&A`,T={"@type":"ItemPage","@id":C},O=(0,a.getBreadcrumbList)(k?[{url:n.WEBSITE_URL,name:n.WEBSITE_NAME},{url:C,name:j}]:[{url:n.WEBSITE_URL,name:n.WEBSITE_NAME}]);let I={};if(k){const e=null===(t=m.filter(r))||void 0===t?void 0:t[0],o=[y,null==e?void 0:e.desc].join("."),n=null===(i=m.filter(s))||void 0===i?void 0:i[0],a=n&&l(n),p=m.filter((e=>s(e)&&e.id!==(null==n?void 0:n.id))).slice(0,10);I={mainEntity:{"@type":"Question",name:y,text:o,answerCount:f,dateCreated:x&&new Date(1e3*Number(x)).toISOString(),author:{"@type":"Person",name:null!==(d=null==b?void 0:b.nickname)&&void 0!==d?d:"",alternateName:null!==(c=null==b?void 0:b.nickname)&&void 0!==c?c:""},acceptedAnswer:a,suggestedAnswer:p.map(l)}}}const P=[[o.StructuredData.JsonldType.Page,T],[o.StructuredData.JsonldType.ItemList,null!=h?h:{}],[o.StructuredData.JsonldType.BreadcrumbList,O]];return k&&P.push([o.StructuredData.JsonldType.QAPage,I]),P}}]},21637:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RECHARGE_CONTENTS=void 0;const o=i(84911),n=i(3352);t.RECHARGE_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:116,content:function(e){const{$language:t="en",t:i}=e;return{title:i("SEO_Recharge_title"),keywords:"recharge, coins recharge, get coins, TikTok, , tik tok, tick tock, tic tok, tic toc, tictok,  , ticktock",description:i("SEO_Recharge_desc"),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}${n.COIN_PATH}?lang=${t}`,applicableDevice:"pc, mobile"}}}]},20691:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SEARCH_REFLOW_CONTENTS=void 0;const o=i(84911),n=i(3352);t.SEARCH_REFLOW_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:111,content:function(e){const{$language:t="en",t:i,contentInfo:o,eventName:a}=e;return{title:o?i("search_on_tiktok",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("offline_title",{ns:"MT_Reflow"}),keywords:`${i("landing_page_key_word_1",{ns:"MT_Reflow"})},${null==o?void 0:o.query}`,description:o?i("outapp_copywriter",{eventname:null==o?void 0:o.query,ns:"MT_Reflow"}):i("expiration_reminder",{ns:"MT_Reflow"}),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.SEARCH_REFLOW_URL}/${a}?lang=${t}`,applicableDevice:"pc, mobile"}}}]},51323:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SEARCH_CONTENTS=void 0;const o=i(84911),n=i(3352);t.SEARCH_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:105,content:function(e){var t,i,o;const{pathname:a="/search",input_keyword:r,t:s}=e,l=null!==(t=null==e?void 0:e.user_list)&&void 0!==t?t:[],d=null!==(i=null==e?void 0:e.item_list)&&void 0!==i?i:[],c=null!==(o=null==e?void 0:e.data)&&void 0!==o?o:[],p=0===e.status_code&&(l.length>0||(null==d?void 0:d.length)>0||(null==c?void 0:c.length)>0),u=s("SEO_search_title",{searchkeywords:`'${r}'`}),g=s("SEO_search_desc",{searchkeywords:`'${r}'`});return{title:u,keywords:[r,"tiktok search",s("TikTok i18n keywords")].join(","),description:g,robotsContent:p?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX,canonicalHref:`${n.CANONICAL_PREFIX}${a}?q=${r}`,applicableDevice:"pc, mobile"}}}]},10098:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STICKER_CONTENT=void 0;const o=i(84911),n=i(3352),a=i(22993);t.STICKER_CONTENT=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:6,content:function(e){var t,i,o,r;const{stickerInfo:{sticker:s}={},t:l}=e;return s?{title:l("share_effect_title",{sticker_name:s.name}),description:l("share_sticker_desc",{sticker_desc:s.desc,number:(0,a.amountConversion)(null!==(i=null===(t=s.stickerStats)||void 0===t?void 0:t.useCount)&&void 0!==i?i:0),num:null!==(r=null===(o=s.stickerStats)||void 0===o?void 0:o.useCount)&&void 0!==r?r:0}),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.WEBSITE_URL}/sticker/${s.name}-${s.id}`,applicableDevice:"mobile"}:{title:l("share_sticker_preset"),description:"",robotsContent:n.META_ROBOTS.NO_INDEX,applicableDevice:"mobile"}}}]},71904:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TOPICS_CONTENTS=void 0;const o=i(84911),n=i(3352),{JsonldType:a}=o.StructuredData,r=new Map([["animals",{titleI18NKey:"SEO_foryou_animals_title",descriptionI18NKey:"SEO_foryou_animals_desc"}],["beauty",{titleI18NKey:"SEO_foryou_beauty_title",descriptionI18NKey:"SEO_foryou_beauty_desc"}],["comedy",{titleI18NKey:"SEO_foryou_comedy_title",descriptionI18NKey:"SEO_foryou_comedy_desc"}],["dance",{titleI18NKey:"SEO_foryou_dance_title",descriptionI18NKey:"SEO_foryou_dance_desc"}],["food",{titleI18NKey:"SEO_foryou_food_title",descriptionI18NKey:"SEO_foryou_food_desc"}],["gaming",{titleI18NKey:"SEO_foryou_gaming_title",descriptionI18NKey:"SEO_foryou_gaming_desc"}],["sports",{titleI18NKey:"SEO_foryou_sports_title",descriptionI18NKey:"SEO_foryou_sports_desc"}]]);t.TOPICS_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:113,content:function(e){var t;const{$language:i="en",t:o,topic:a}=e,{titleI18NKey:s="",descriptionI18NKey:l=""}=null!==(t=r.get(a))&&void 0!==t?t:{};return s&&l?{title:o(s),keywords:o("TikTok i18n keywords"),description:o(l),robotsContent:n.META_ROBOTS.INDEX,canonicalHref:`${n.CANONICAL_PREFIX}/topics/${a}?lang=${i}`,applicableDevice:"pc, mobile"}:{}}},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:113,content:function(e){const{seoProps:{itemList:t}={}}=e;return[[a.ItemList,null!=t?t:{}]]}}]},57281:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_CONTENTS=void 0;const o=i(84911),n=i(3352),a=i(41248),r=i(22993);t.USER_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:1,content:function(e){const{userInfo:t={},statusCode:i,seoProps:o,t:s}=e,{predictedLanguage:l}=null!=o?o:{},d=(0,r.getValidStatus)(e),{user:{verified:c=!1,nickname:p="",uniqueId:u="",signature:g=""}={},stats:{heart:m=0,followerCount:h=0}={}}=t,_=(0,r.isRealUniqueId)(u),v=(0,r.formatUserName)(p,u),y=(0,r.packI18NConfig)(l),f=[];p&&f.push(p),_&&f.push(u),f.push(s("TikTok i18n keywords",y()));let b=s(c?"user_SEO_official_title2":"user_SEO_title2",y({username:v,nickName:p}));const x=f.join(","),k=s("user_SEO_desc3",y({username:v})),S=g.length<30?`${g} ${k}`:g;let w=`${s("user_SEO_desc2",y({username:v,heart:(0,r.amountConversion)(Number(m)),follower:(0,r.amountConversion)(h)}))} ${(0,r.singleLineString)(S)}`;const C=(0,r.getPureUserPath)({secUid:"",uniqueId:u}),j=`${a.CANONICAL_PREFIX}${C}`,T=d&&p&&_,O=T?j:"";let I=T?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX;switch(I=[I,n.META_ROBOTS.IMAGE_PREVIEW_LARGE].join(", "),i){case n.USER_NOT_EXIST:case n.USER_BAN:case n.USER_NOT_LOGIN:case n.USER_FTC:b=s("err_user"),w="";break;case n.USER_PRIVATE:b=s("err_user_private"),w=""}return{title:b,keywords:x,description:w,canonicalHref:O,robotsContent:I,applicableDevice:"pc, mobile"}}},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:1,content:function(e){var t;const{userInfo:i,seoProps:{itemList:a}={}}=e,{nickname:s,uniqueId:l="",secUid:d,signature:c}=null!==(t=null==i?void 0:i.user)&&void 0!==t?t:{},p=(0,r.getPureUserPath)({secUid:null!=d?d:"",uniqueId:l}),u=`${n.WEBSITE_URL}${p}`,g=((0,r.isRealUniqueId)(l)?`${s} (@${l})`:`${s}`)+" | TikTok",m=(0,r.getBreadcrumbList)([{url:n.WEBSITE_URL,name:n.WEBSITE_NAME},{url:u,name:g}]),h={name:null!=s?s:"",description:null!=c?c:"",alternateName:l,mainEntityOfPage:{"@type":"ProfilePage","@id":u}};return[[o.StructuredData.JsonldType.ItemList,null!=a?a:{}],[o.StructuredData.JsonldType.BreadcrumbList,m],[o.StructuredData.JsonldType.Person,h]]}}]},51211:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO_PLAYER_LIST_CONTENT=void 0;const o=i(84911),n=i(3352);t.VIDEO_PLAYER_LIST_CONTENT=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:119,content:function(e){var t,i;const{t:o,mixInfo:a,statusCode:r}=e,s=0===r,l="@"+(null===(t=null==a?void 0:a.creator)||void 0===t?void 0:t.uniqueId),d=null!==(i=null==a?void 0:a.name)&&void 0!==i?i:"Untitled playlist";return{title:o("playlist_share_title",{Playlist_name:d,username:l},`Playlist ${d} created by ${l}`),description:o("playlist_share_desc",{},"Enjoy a curated video list and find more videos on TikTok!"),canonicalHref:s?`${n.WEBSITE_URL}/${l}/playlist/${null==a?void 0:a.name}-${null==a?void 0:a.id}`:n.WEBSITE_URL,robotsContent:s?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX,applicableDevice:"mobile"}}}]},76017:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO_CONTENTS=t.getVideoSERP=void 0;const o=i(84911),n=i(3352),a=i(41248),r=i(22993);function s(e){var t,i,o,s,l,d,c;const{itemInfo:p,statusCode:u,seoProps:g,t:m}=e,{predictedLanguage:h}=null!=g?g:{},_=(0,r.getValidStatus)(e);if((0,r.getPrivateStatus)(e))return{};const{id:v,desc:y,stickersOnItem:f=[],challenges:b,stats:x}=null!==(t=null==p?void 0:p.itemStruct)&&void 0!==t?t:{},{diggCount:k=0,commentCount:S=0}=null!=x?x:{},{nickname:w,uniqueId:C}=null!==(o=null===(i=null==p?void 0:p.itemStruct)||void 0===i?void 0:i.author)&&void 0!==o?o:{},{title:j,authorName:T}=null!==(l=null===(s=null==p?void 0:p.itemStruct)||void 0===s?void 0:s.music)&&void 0!==l?l:{},O=null!==(c=null===(d=null==p?void 0:p.itemStruct)||void 0===d?void 0:d.indexEnabled)&&void 0!==c&&c,I=(0,r.isRealUniqueId)(C),P=(null!=b?b:[]).reduce(((e,t)=>(e.push(t.title||""),e)),[]).join(","),E=(0,r.formatUserName)(w,C),L=y?(0,r.singleLineString)(y):"",A=(0,r.formatMusicName)(j,null!=T?T:""),R=(0,r.packI18NConfig)(h);let M=`${m("video_SEO_title1",R({userText:E}))} ${L}`;const D=L.length;D>0&&D<=20?M=m("video_SEO_title2",R({videoText:L,musicName:A})):D>20&&(M=L);const F=[];w&&F.push(w),I&&C&&F.push(C),(null==P?void 0:P.length)&&F.push(P),F.push(m("TikTok i18n keywords",R()));const N=F.join(","),B=(0,r.formatVideoStickerTexts)(f).join(" | "),z=R({username:E,likes:(0,r.amountConversion)(k),comments:(0,r.amountConversion)(S),videoText:L}),$=[m(L?"video_SEO_desc3_2":"video_SEO_desc3_3",z)];k>=50&&S>=5&&$.unshift(m("video_SEO_desc3_1",z));let U=$.join(" ")+" "+[B,j].filter((e=>Boolean(e))).join(". ")+".";const W=_&&w&&I&&v,G=W?`${a.CANONICAL_PREFIX}/@${C}/video/${v}`:void 0;let H=W&&O?n.META_ROBOTS.INDEX:n.META_ROBOTS.NO_INDEX;switch(H=[H,n.META_ROBOTS.IMAGE_PREVIEW_LARGE].join(", "),u){case n.VIDEO_GEOFENCE_BLOCK:M=m("err_vid_geo"),U="";break;case n.VIDEO_PRIVATE_BY_USER:case n.VIDEO_NOT_EXIST:case n.VIDEO_ABNORMAL:case n.VIDEO_FIRST_REVIEW_UNSHELVE:case n.VIDEO_FRIENDS_ONLY:case n.VIDEO_DELETED:case n.VIDEO_USER_BLOCKED_BY_AUTHOR:M=m("err_vid"),U=""}return{title:M,keywords:N,description:U,canonicalHref:G,robotsContent:H,applicableDevice:"pc, mobile"}}t.getVideoSERP=s,t.VIDEO_CONTENTS=[{processType:o.SEO.SERPProcessType.META_PATH,targetId:0,content:s},{processType:o.SEO.SERPProcessType.JSONLD_PATH,targetId:0,content:function(e){var t,i,a,s;if(!(0,r.getValidStatus)(e))return[];const{itemInfo:l,seoProps:d,t:c}=e,{metaParams:p,videoObject:u}=null!=d?d:{},{id:g,desc:m}=null!==(t=null==l?void 0:l.itemStruct)&&void 0!==t?t:{},{nickname:h,uniqueId:_,secUid:v,verified:y}=null!==(a=null===(i=null==l?void 0:l.itemStruct)||void 0===i?void 0:i.author)&&void 0!==a?a:{},f=(0,r.getPureUserPath)({secUid:v,uniqueId:_}),b=`${n.WEBSITE_URL}${f}`,x=c(y?"user_SEO_official_title1":"user_SEO_title1",{username:(0,r.isRealUniqueId)(_)?`${h} (@${_})`:`${h}`}),k=(0,r.getPureVideoPath)({secUid:v,uniqueId:_,videoId:g}),S=`${n.WEBSITE_URL}${k}`,w=null!==(s=null==p?void 0:p.title)&&void 0!==s?s:m,C=(0,r.getBreadcrumbList)([{url:n.WEBSITE_URL,name:n.WEBSITE_NAME},{url:b,name:x},{url:S,name:null!=w?w:""}]);return[[o.StructuredData.JsonldType.BreadcrumbList,C],[o.StructuredData.JsonldType.VideoObject,null!=u?u:{}]]}}]},44200:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=i(31191);(0,o.__exportStar)(i(3352),t),(0,o.__exportStar)(i(14013),t),(0,o.__exportStar)(i(22993),t)},48634:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyJSONLDSERP=t.applyMetaParamsSERP=void 0;const o=i(84911),n=new Set([o.SEO.SERPProcessType.JSONLD_PATH,o.SEO.SERPProcessType.META_PATH]),a=new Set([o.SEO.SERPProcessType.JSONLD_EXP,o.SEO.SERPProcessType.META_EXP]),r=new Set([o.SEO.SERPProcessType.JSONLD_PAGE,o.SEO.SERPProcessType.META_PAGE]),s=new Set([o.SEO.SERPProcessType.META_EXP,o.SEO.SERPProcessType.META_PAGE,o.SEO.SERPProcessType.META_PATH]),l=new Set([o.SEO.SERPProcessType.JSONLD_EXP,o.SEO.SERPProcessType.JSONLD_PAGE,o.SEO.SERPProcessType.JSONLD_PATH]),d=(e,t)=>{const{seoProps:{pageId:i,pageType:o,testId:s}={}}=t;return[...e.filter((e=>n.has(e.processType)&&e.targetId===o)),...e.filter((e=>a.has(e.processType)&&e.targetId===s)),...e.filter((e=>r.has(e.processType)&&e.targetId===i))]};t.applyMetaParamsSERP=function(e,t){return d(t,e).filter((e=>s.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.metaParams)&&void 0!==o?o:{};return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{metaParams:Object.assign(Object.assign({},a),n)})})}),e)},t.applyJSONLDSERP=function(e,t){return d(t,e).filter((e=>l.has(e.processType))).reduce(((e,t)=>{var i,o;const n=t.content(e),a=null!==(o=null===(i=e.seoProps)||void 0===i?void 0:i.jsonldList)&&void 0!==o?o:[];return Object.assign(Object.assign({},e),{seoProps:Object.assign(Object.assign({},e.seoProps),{jsonldList:[...a,...n]})})}),e)}},40475:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertDurationToISO=t.formatMusicDuration=t.formatVideoStickerTextsByTypes=t.formatVideoStickerTexts=t.formatMusicName=t.formatUserName=t.singleLineString=t.amountConversion=t.splitString=void 0;const o=i(764),n=i(64871),{isRealUniqueId:a}=o.Utils;function r(e,t=1){return Math.round(Number(`${Number(e)}e${t}`))/Math.pow(10,t)}t.splitString=function(e="",t=1,i=","){var o;const n=new RegExp(`.{1,${t}}(?=(.{${t}})+(?!.))|.{1,${t}}$`,"g");return(null!==(o=(e=`${e}`).match(n))&&void 0!==o?o:[]).join(i)},t.amountConversion=function(e=0){let t;return t=e<1e3?e.toString():e<999999?`${r(e/1e3)}K`:e<999999999?`${r(e/1e6)}M`:`${r(e/1e9)}B`,t},t.singleLineString=function(e=""){return e.split(/(?:\r\n|\n|\r)/).map((e=>e.replace(/^\s+/gm,""))).join(" ").trim()},t.formatUserName=(e="",t="")=>a(t)?`${e} (@${t})`:`${e}`,t.formatMusicName=function(e="",t=""){return e.replace(` - ${t}`,"")+(t?` - ${t}`:"")},t.formatVideoStickerTexts=function(e=[],t=[n.STICKER_TYPE.TEXT_STICKER]){const i=[];e.forEach((({stickerType:e,stickerText:o=[]})=>{-1!==t.indexOf(null!=e?e:0)&&(null==o?void 0:o.length)&&i.push(...o)}));const o=i.length;return o>3&&(i.splice(3,o-3),i.push("...")),i},t.formatVideoStickerTextsByTypes=function(e=[],t,i=3){const o=[],n=t;e.forEach((e=>{const{stickerType:t,stickerText:i=[]}=e;-1!==n.indexOf(null!=t?t:0)&&(null==i?void 0:i.length)&&o.push(...i)}));const a=o.length;return i>0&&a>i&&(o.splice(i,a-i),o.push("...")),o},t.formatMusicDuration=function(e){if(0===e)return"";const t=e%60,i=Math.floor(e/60),o=i%60,n=Math.floor(i/60),a=n%24,r=Math.floor(n/24);let s="P";return r>0&&(s+=`${r}D`),s+="T",a>0&&(s+=`${a}H`),o>0&&(s+=`${o}M`),s+=`${t}S`,s},t.convertDurationToISO=function(e=0){if(0===e)return"";const t=Math.floor(Number(e)/60),i=Math.floor(Number(e)%60),o=(e,t)=>e?`${e}${t}`:"";return`PT${o(t,"M")}${o(i,"S")}`}},12190:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashCode=void 0,t.hashCode=function(e){return Array.from(e).reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0)}},36237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.packI18NConfig=void 0,t.packI18NConfig=function(e){const t=e?{lng:e}:{};return(e={})=>Object.assign(Object.assign({},e),t)}},22993:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDev=t.getPureQuestionPath=t.getPureLivePath=t.getPureStickerPath=t.getPureMusicPath=t.getPureTagPath=t.getPureVideoPath=t.getPureUserPath=t.purifyMusicName=t.getPureUniqueId=t.isRealUniqueId=t.hasIllegalText=t.isPureNumber=void 0;const o=i(31191),n=(0,o.__importStar)(i(764));(0,o.__exportStar)(i(40475),t),(0,o.__exportStar)(i(12190),t),(0,o.__exportStar)(i(18841),t),(0,o.__exportStar)(i(36237),t),(0,o.__exportStar)(i(28086),t),(0,o.__exportStar)(i(48634),t);const{isPureNumber:a,hasIllegalText:r,isRealUniqueId:s,getPureUniqueId:l,purifyMusicName:d}=n.Utils;t.isPureNumber=a,t.hasIllegalText=r,t.isRealUniqueId=s,t.getPureUniqueId=l,t.purifyMusicName=d;const{getPureUserPath:c,getPureLivePath:p,getPureVideoPath:u,getPureTagPath:g,getPureMusicPath:m,getPureStickerPath:h,getPureQuestionPath:_}=n.default;t.getPureUserPath=c,t.getPureLivePath=p,t.getPureVideoPath=u,t.getPureTagPath=g,t.getPureMusicPath=m,t.getPureStickerPath=h,t.getPureQuestionPath=_,t.isDev=function(){return!1}},28086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBreadcrumbList=void 0,t.getBreadcrumbList=function(e=[]){return{itemListElement:e.reduce(((e,t,i)=>{const{url:o,name:n}=t;return e.push({"@type":"ListItem",position:i+1,item:{"@type":"Thing","@id":o,name:n}}),e}),[])}}},18841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrivateStatus=t.getValidStatus=void 0,t.getValidStatus=function({statusCode:e=0}={}){return 0===e||function(e){return 10229===e||10230===e}(e)},t.getPrivateStatus=function({statusCode:e=0}={}){return 10216===e}},39917:(e,t,i)=>{"use strict";i.d(t,{Q:()=>r});var o=i(8666),n=i(40200),a=i(29984);const r=(0,n.Z)(o.Z,{target:"e1aglo370"})((({theme:{direction:e}})=>(0,a.YJ)({direction:e,marginStart:"4px"})),"label:StyledVerifyBadge;")},29984:(e,t,i)=>{"use strict";i.d(t,{Mz:()=>o,XP:()=>n,gi:()=>a,GI:()=>r,wj:()=>s,FC:()=>l,Ph:()=>d,Cx:()=>c,f1:()=>p,YJ:()=>g,$K:()=>m,VZ:()=>h});const o=60,n=1150,a={":hover, :active, :link":{textDecoration:"none"}};function r({theme:e,typography:t,color:i,fontFamily:o,fontWeight:n,isLink:a=!1}){const r=a&&i?{":hover, :active, :link":{color:e.colors[i]}}:null;return[{color:i&&e.colors[i],fontFamily:o&&e.fontFamilies[o],fontWeight:n&&e.fontWeights[n]},t?e.typography[t]:void 0,r]}const s={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},l=e=>({display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",lineClamp:e,boxOrient:"vertical",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}),d={border:"none",background:"none",outline:"none",padding:0},c=e=>({position:"absolute",left:"0",[e]:"0",width:"100%",height:"1px",transform:"scaleY(0.5)"});function p(...e){return e.map((({max:e,min:t,orientation:i,minAspectRatio:o,aspectRatio:n,maxAspectRatio:a,style:r={}})=>{if(!e&&!t&&!n)return{};let s="@media screen";return"number"==typeof t&&(s+=` and (min-width: ${t}px)`),"number"==typeof e&&(s+=` and (max-width: ${e}px)`),"string"==typeof i&&(s+=` and (orientation: ${i})`),"string"==typeof o&&(s+=` and (min-aspect-ratio: ${o})`),"string"==typeof n&&(s+=` and (aspect-ratio: ${n})`),"string"==typeof a&&(s+=` and (max-aspect-ratio: ${a})`),{[s]:r}}))}const u={ltr:{end:"right",start:"left",marginEnd:"marginRight",marginStart:"marginLeft",paddingEnd:"paddingRight",paddingStart:"paddingLeft"},rtl:{end:"left",start:"right",marginEnd:"marginLeft",marginStart:"marginRight",paddingEnd:"paddingLeft",paddingStart:"paddingRight"}};function g({direction:e,marginEnd:t,marginStart:i,end:o,start:n,textAlign:a,paddingEnd:r,paddingStart:s}){const l=u[e],d={};return a&&(d.textAlign=m(e,a)),t&&(d[l.marginEnd]=t),i&&(d[l.marginStart]=i),n&&(d[l.start]=n),o&&(d[l.end]=o),r&&(d[l.paddingEnd]=r),s&&(d[l.paddingStart]=s),d}function m(e,t){return u[e][t]}function h({theme:e,hover:t=e.colors.BGView,active:i=e.colors.BGInput}){return{transition:"background ease-in-out 200ms",":hover":{background:t},":active":{background:i}}}},18654:(e,t,i)=>{"use strict";i.d(t,{q:()=>u});var o=i(31191),n=i(74512),a=i(32735),r=i(40200);const s=(0,r.Z)("span",{target:"e1e9er4e0"})((({shape:e,empty:t,isShowBackground:i})=>[{display:"inline-block",boxSizing:"border-box",margin:"0",padding:"0",fontFeatureSettings:'"tnum"',position:"relative",overflow:"hidden",color:"#fff",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",lineHeight:"32px",borderRadius:"square"===e?"0":"50%"},i?{backgroundColor:t?"rgba(18, 18, 18, 0.03)":"rgba(136, 136, 136, 0.5)"}:null]),"label:SpanAvatarContainer;"),l=(0,r.Z)("img",{target:"e1e9er4e1"})({width:"100%",height:"100%",objectFit:"cover"},"label:ImgAvatar;"),d=(0,r.Z)("svg",{target:"e1e9er4e2"})({width:"100%",height:"100%"},"label:SvgContainer;"),c={EMPTY:(0,n.jsx)(d,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:(0,n.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0)}),void 0),NON_EMPTY:(0,n.jsxs)(d,Object.assign({width:"300",height:"300",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,n.jsx)("rect",{cx:"150",cy:"150",fill:"#888",fillOpacity:".5"},void 0),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M58.74 269.054C74.383 234.242 109.361 210 150 210s75.617 24.242 91.26 59.054C215.978 288.463 184.336 300 150 300c-34.336 0-65.978-11.537-91.26-30.946z",fill:"#fff",fillOpacity:".75"},void 0),(0,n.jsx)("circle",{cx:"150",cy:"138",r:"55",fill:"#fff",fillOpacity:".75"},void 0)]}),void 0)},p=()=>!0,u=(0,a.memo)((function(e){const{src:t,empty:i=!1,backgroundImage:r,size:d=32,shape:u="circle",style:g={},onError:m=p,alt:h,imageLoading:_="lazy"}=e,v=(0,o.__rest)(e,["src","empty","backgroundImage","size","shape","style","onError","alt","imageLoading"]),[y,f]=(0,a.useState)(!1),b=(0,a.useCallback)((e=>{var t;m&&f(null===(t=m(e))||void 0===t||t)}),[m]),x=t&&!y,k=i?"EMPTY":"NON_EMPTY";return(0,n.jsx)(s,Object.assign({shape:u,isShowBackground:Boolean(x),empty:i,style:Object.assign(Object.assign({},g),{width:d,height:d})},v,{children:x?(0,n.jsx)(l,{loading:_,onError:b,onLoad:e.onLoad,alt:h,src:t},void 0):c[k]}),void 0)}))},48504:(e,t,i)=>{"use strict";i.d(t,{W:()=>h});var o=i(31191),n=i(74512),a=i(32735),r=i(49923),s=i(22110),l=i(40200);const d="rgb(208, 209, 211)",c=({theme:e,buttonTheme:t})=>{switch(t){case"default":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.TextPrimary,borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,":hover":{borderColor:d,backgroundColor:e.colors.BGCreation3},":active":{borderColor:d,backgroundColor:e.colors.BGMessageIcon},":disabled":{borderColor:"rgb(227, 227, 229)",backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary}};case"line":return{borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",color:e.colors.Primary,borderColor:e.colors.Primary,backgroundColor:e.colors.BGSecondary2,":hover":{backgroundColor:"rgba(254, 44, 85, 0.06)"},":active":{backgroundColor:"rgba(254, 44, 85, 0.16)"},":disabled":{borderColor:e.colors.LineSecondary2,backgroundColor:e.colors.BGSecondary2,color:e.colors.TextQuaternary,pointerEvents:"none"}};case"primary":return{borderRadius:"4px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.Primary,":hover":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0.06)), #FE2C55"},":active":{background:"linear-gradient(0deg, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0.12)), #FE2C55"},":disabled":{border:"none",color:e.colors.TextQuaternary,backgroundColor:e.colors.BGInput2,pointerEvents:"none"}};case"round":return{borderRadius:"52px",border:"none",color:e.colors.ConstTextInverse,backgroundColor:e.colors.ToastDefault,":hover":{},":active":{},":disabled":{}};default:return{":hover":{},":active":{},":disabled":{}}}},p="ProximaNova, PingFangSC, sans-serif",u="SofiaPro, PingFangSC, sans-serif",g={largeNew:{minWidth:"120px",minHeight:"46px",fontSize:"16px",lineHeight:"22px",fontWeight:700,fontFamily:p},large:{minWidth:"168px",minHeight:"48px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:u},medium:{minWidth:"164px",minHeight:"36px",fontSize:"18px",lineHeight:"25px",fontWeight:600,fontFamily:u},small:{minWidth:"106px",minHeight:"28px",fontSize:"16px",lineHeight:"22px",fontWeight:600,fontFamily:p},tiny:{minWidth:"96px",minHeight:"28px",fontFamily:p,fontSize:"14px",lineHeight:"17px",fontWeight:600}},m=(0,l.Z)("button",{shouldForwardProp:e=>(0,s.Z)(e)&&"loading"!==e,target:"ehk74z00"})((({buttonTheme:e="default",size:t="large",theme:i,loading:o=!1})=>[c({theme:i,buttonTheme:e}),g[t],{display:"flex",position:"relative",alignItems:"center",justifyContent:"center",padding:"6px 8px",userSelect:"none",cursor:"pointer",boxSizing:"border-box",":focus":{outline:"none"}},Object.assign({},o?{color:"transparent",pointerEvents:"none"}:{})]),"label:Button;"),h=(0,a.memo)((function(e){var{buttonTheme:t,size:i,type:a="button",loading:s=!1,loadingTheme:l="primary",loadingSize:d="medium",children:c}=e,p=(0,o.__rest)(e,["buttonTheme","size","type","loading","loadingTheme","loadingSize","children"]);return(0,n.jsxs)(m,Object.assign({type:a,buttonTheme:t,loading:s,size:i},p,{children:[c,s&&(0,n.jsx)(r.$,{style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},theme:l,size:d},void 0)]}),void 0)}))},49923:(e,t,i)=>{"use strict";i.d(t,{$:()=>u});var o=i(74512),n=i(10207),a=i(32735),r=i(75246),s=i(40200);const l=(0,s.Z)("div",{target:"ef2t4c20"})((({center:e})=>({display:"flex",flexDirection:"column",alignItems:e?"center":"flex-start"})),"label:DivContainer;"),d=(0,r.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),c=(0,s.Z)("svg",{target:"ef2t4c21"})({margin:"0 !important",fill:"none",animation:`${d} 1s linear infinite`},"label:SvgBox;"),p={small:16,medium:18,large:20},u=(0,a.memo)((function({theme:e="primary",size:t="medium",center:i=!1,style:r={},fill:s=""}){const{colors:d}=(0,n.u)(),u=(0,a.useMemo)((()=>{const{BGCreation:t,BGPrimary:i,Primary:o}=d;return s||{white:t,primary:i,transparent:o}[e]}),[d,s,e]),g="string"==typeof t?p[t]:t,m=Object.assign(Object.assign({},r),{width:g,height:g});return(0,o.jsx)(l,Object.assign({center:i,style:m},{children:(0,o.jsx)(c,Object.assign({width:g,height:g,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg"},{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:u,d:"M0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9C18 9.82843 17.3284 10.5 16.5 10.5C15.6716 10.5 15 9.82843 15 9C15 5.68629 12.3137 3 9 3C5.68629 3 3 5.68629 3 9C3 12.3137 5.68629 15 9 15C10.415 15 11.7119 14.512 12.7375 13.6941C13.3852 13.1775 14.329 13.2838 14.8455 13.9315C15.3621 14.5792 15.2558 15.5229 14.6081 16.0395C13.0703 17.266 11.1188 18 9 18C4.02944 18 0 13.9706 0 9Z"},void 0)}),void 0)}),void 0)}))},80829:(e,t,i)=>{"use strict";i.d(t,{g:()=>v,B:()=>b});var o=i(31191),n=i(74512),a=i(32735),r=i(12788),s=i(75246),l=i(40200);const d=36,c=(0,s.F4)({"25%":{cx:100,r:1.2*d},"50%":{cx:140,r:d},"75%":{cx:100,r:.6*d},"100%":{cx:60,r:d}}),p=(0,s.F4)({"25%":{cx:100,r:24},"50%":{cx:60,r:d},"75%":{cx:100,r:1.2*d},"100%":{cx:140,r:d}}),u={strokeWidth:0,r:d,cy:99},g={0:{fill:"#fe2c55",cx:128,animation:`${p} 1s cubic-bezier(.05, 0, 1, 1) infinite`},1:{fill:"#3af2ff",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`},2:{fill:"#0f0f0f",cx:60,animation:`${c} 1s cubic-bezier(.05, 0, 1, 1) infinite`}},m=(0,l.Z)("circle",{target:"e1ugmybf0"})((({circleType:e,isBlack:t})=>[u,g[e],t?{fill:"#000"}:null]),"label:Circle;"),h=(0,l.Z)("svg",{target:"e1ugmybf1"})({display:"block"},(({center:e})=>e?{margin:"6px auto"}:null),"label:SvgContainer;"),_={default:48,small:32},v=(0,a.memo)((0,a.forwardRef)((function(e,t){var{size:i=48,center:a=!1,maskKey:r=Date.now()}=e,s=(0,o.__rest)(e,["size","center","maskKey"]);const l="string"==typeof i?_[i]:i;return(0,n.jsxs)(h,Object.assign({center:a,preserveAspectRatio:"none",viewBox:"0 0 200 200",width:l,height:l},s,{ref:t},{children:[(0,n.jsxs)("defs",{children:[(0,n.jsxs)("mask",Object.assign({id:`redhole-${r}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(m,{circleType:0,isBlack:!0},void 0)]}),void 0),(0,n.jsxs)("mask",Object.assign({id:`greenhole-${r}`},{children:[(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"white"},void 0),(0,n.jsx)(m,{circleType:1,isBlack:!0},void 0)]}),void 0)]},void 0),(0,n.jsx)(m,{strokeWidth:2,stroke:"#3AF2FF",circleType:2},void 0),(0,n.jsx)(m,{circleType:1,mask:`url(#redhole-${r})`},void 0),(0,n.jsx)(m,{circleType:0,mask:`url(#greenhole-${r})`},void 0)]}),void 0)})));let y=null;function f(e){var t;return y||(y=document.createElement("div"),y.style.cssText="display: inline-block; position: fixed; left: calc(50% - 15px); top: 38%;",(e&&null!==(t=document.querySelector(e))&&void 0!==t?t:document.body).appendChild(y)),y}const b={show:e=>r.render((0,n.jsx)(v,{size:30},void 0),f(e)),hide:()=>y?r.unmountComponentAtNode(f()):void 0}},69612:(e,t,i)=>{"use strict";i.d(t,{Od:()=>y,N0:()=>b,kQ:()=>f,Xu:()=>x});var o=i(31191),n=i(74512),a=i(75246),r=i(40200),s=i(29984);const l=(0,a.F4)({"0%":{backgroundPositionX:"200%"},"100%":{backgroundPositionX:"-150%"}}),d=(0,r.Z)("div",{target:"e12rwi320"})({backgroundColor:"#f1f1f1",borderRadius:"4px",backgroundImage:"linear-gradient(90deg, rgba(22, 24, 35, 0) 0%, rgba(22, 24, 35, .04) 50%, rgba(22, 24, 35, 0) 100%)",backgroundSize:"200% 100%",backgroundRepeat:"no-repeat",width:"100%",height:"100%"},"label:DivBaseComponent;"),c=(0,r.Z)("div",{target:"e12rwi321"})({width:"100%"},"label:DivComponent;"),p=(0,r.Z)(d,{target:"e12rwi322"})({borderRadius:"100%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledAvatar;"),u=(0,r.Z)(d,{target:"e12rwi323"})({height:"16px",width:"40%",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTitle;"),g=(0,r.Z)(d,{target:"e12rwi324"})((({theme:e})=>[{backgroundColor:"transparent",backgroundImage:"unset"},(0,s.YJ)({direction:e.direction})]),"label:StyledParagraph;"),m=(0,r.Z)(d,{target:"e12rwi325"})((({shrinkLastLine:e=!0})=>({height:"12px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`,":last-child":{width:e?"60%":"100%",marginTop:"12px"},":not(:last-child)":{marginBottom:"8px"}})),"label:StyledParagraphLine;"),h=(0,r.Z)(d,{target:"e12rwi326"})({minHeight:"100px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledVideoCover;"),_=(0,r.Z)(d,{target:"e12rwi327"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledButton;"),v=(0,r.Z)(d,{target:"e12rwi328"})({height:"36px",width:"164px",animation:`${l} cubic-bezier(0, 0, 1, 1) 1.5s infinite`},"label:StyledTextBox;");function y(e){const{children:t,style:i,className:a}=e,r=(0,o.__rest)(e,["children","style","className"]);return(0,n.jsx)(c,Object.assign({style:i,className:a},r,{children:t}),void 0)}function f(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(u,Object.assign({style:t,className:i},a),void 0)}function b(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(p,Object.assign({style:t,className:i},a),void 0)}function x(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(h,Object.assign({style:t,className:i},a),void 0)}y.Paragraph=function(e){const{lines:t=2,shrinkLastLine:i=!0,style:a,className:r}=e,s=(0,o.__rest)(e,["lines","shrinkLastLine","style","className"]),l=[];for(let e=0;e<t;++e)l.push((0,n.jsx)(m,{shrinkLastLine:i},e));return(0,n.jsx)(g,Object.assign({style:a,className:r},s,{children:l}),void 0)},y.Title=f,y.Avatar=b,y.VideoCover=x,y.Button=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(_,Object.assign({style:t,className:i},a),void 0)},y.TextBox=function(e){const{style:t,className:i}=e,a=(0,o.__rest)(e,["style","className"]);return(0,n.jsx)(v,Object.assign({style:t,className:i},a),void 0)}},55643:(e,t,i)=>{"use strict";i.d(t,{h:()=>f});var o=i(74512),n=(i(13581),i(51091)),a=i(78629),r=i(75246),s=i(40200);const l=(0,r.F4)({"0%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"},"100%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"}}),d=(0,r.F4)({"0%":{transform:"translateY(-100%)",transformOrigin:"0 0",opacity:"0"},"100%":{transform:"translateY(0%)",transformOrigin:"0 0",opacity:"1"}}),c=(0,a.iv)({"&-enter":{opacity:"0"},"&-enter-active":{animationName:d,animationDuration:"0.3s"},"&-leave-active":{animationName:l,animationDuration:"0.3s"}}),p=(0,a.iv)({fontFamily:"ProximaNova, PingFangSC, sans-serif",fontWeight:600,position:"fixed",top:"16px",left:"0px",color:"#fff",zIndex:1002,width:"100%",pointerEvents:"none",userSelect:"none","&-notice":{padding:"8px 0",textAlign:"center",":first-of-type":{marginTop:"-8px"}},"&-notice-content":{backgroundColor:"rgba(84, 84, 84, 0.92)",display:"inline-block",padding:"10px 8px",pointerEvents:"all",maxWidth:"100%",borderRadius:"2px"}}),u={auto:{},full:{width:"100vw",borderRadius:"0"},padding:{width:"calc(100vw - 40px)",margin:"0 auto"},half:{width:"50vw"}},g=(0,s.Z)("div",{target:"e1wz89c90"})((({widthType:e="auto",isRTL:t})=>[u[e],{direction:t?"rtl":"ltr"}]),"label:DivMessageContainer;");let m,h=[],_=1;const v={prefixCls:p,transitionName:c,style:{top:void 0},getContainer:void 0,maxCount:void 0,type:"default"},y={success:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE3Ljg0MDQgNi44NTk4NkMxOC4wMzc3IDYuNjYyMDcgMTguMzU4NyA2LjY2NDI1IDE4LjU1MzMgNi44NjQ3MUwxOS40NTc0IDcuNzk2MjlDMTkuNjQ3NSA3Ljk5MjE3IDE5LjY0NTQgOC4zMDQzMiAxOS40NTI2IDguNDk3NTlMMTAuNTU4MiAxNy40MTYzQzEwLjEwNSAxNy44NzA3IDkuMzczMzMgMTcuODU5NiA4LjkzMzY2IDE3LjM5MTZMNC44MzY4MSAxMy4wMzA2QzQuNjQ5OTEgMTIuODMxNyA0LjY1NzExIDEyLjUxOTYgNC44NTI5OSAxMi4zMjk1TDUuNzgzNzQgMTEuNDI2MUM1Ljk4NDE4IDExLjIzMTUgNi4zMDUxNCAxMS4yMzg5IDYuNDk2MzkgMTEuNDQyNUw5Ljc4MjE0IDE0Ljk0MDFMMTcuODQwNCA2Ljg1OTg2WiIgZmlsbD0iIzBCRTA5QiIvPgo8L3N2Zz4K",fail:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTEuNDY4IDEzTDcuMjAwNCA4LjczMjM4QzYuOTg4ODYgOC41MjA4NSA2Ljk4ODg2IDguMTc3ODggNy4yMDA0IDcuOTY2MzVMNy45NjY0MyA3LjIwMDMyQzguMTc3OTcgNi45ODg3OCA4LjUyMDkzIDYuOTg4NzggOC43MzI0NiA3LjIwMDMyTDEzLjAwMDEgMTEuNDY3OUwxNy4yNjc3IDcuMjAwMzJDMTcuNDc5MiA2Ljk4ODc4IDE3LjgyMjIgNi45ODg3OCAxOC4wMzM3IDcuMjAwMzJMMTguNzk5OCA3Ljk2NjM1QzE5LjAxMTMgOC4xNzc4OCAxOS4wMTEzIDguNTIwODUgMTguNzk5OCA4LjczMjM4TDE0LjUzMjEgMTNMMTguNzk5OCAxNy4yNjc2QzE5LjAxMTMgMTcuNDc5MiAxOS4wMTEzIDE3LjgyMjEgMTguNzk5OCAxOC4wMzM3TDE4LjAzMzcgMTguNzk5N0MxNy44MjIyIDE5LjAxMTIgMTcuNDc5MiAxOS4wMTEyIDE3LjI2NzcgMTguNzk5N0wxMy4wMDAxIDE0LjUzMjFMOC43MzI0NiAxOC43OTk3QzguNTIwOTMgMTkuMDExMiA4LjE3Nzk3IDE5LjAxMTIgNy45NjY0MyAxOC43OTk3TDcuMjAwNCAxOC4wMzM3QzYuOTg4ODYgMTcuODIyMSA2Ljk4ODg2IDE3LjQ3OTIgNy4yMDA0IDE3LjI2NzZMMTEuNDY4IDEzWiIgZmlsbD0iI0ZGNEMzQSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KPHJlY3Qgd2lkdGg9IjI2IiBoZWlnaHQ9IjI2IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},f={open:function(e){const t=void 0!==e.duration?e.duration:3,i=e.key||_++,a=new Promise((a=>{var r;const s={key:i,duration:t,className:e.className,content:(0,o.jsxs)(g,Object.assign({isRTL:e.isRTL,widthType:e.widthType,style:Object.assign({display:"flex",justifyContent:"center",alignItems:"center"},null!==(r=e.style)&&void 0!==r?r:{})},{children:[e.type&&"default"!==e.type&&(0,o.jsx)("img",{src:y[e.type],style:Object.assign({width:"24px",height:"24px"},e.isRTL?{marginLeft:"8px"}:{marginRight:"8px"})},void 0),(0,o.jsx)("span",{children:e.content},void 0)]}),void 0),onClose:()=>("function"==typeof e.onClose&&e.onClose(),a(!0))};var l;e.getContainer?n.Z.newInstance(Object.assign(Object.assign({},v),{style:{position:"absolute",top:void 0},getContainer:e.getContainer}),(e=>{e.notice(s),h.push(e)})):(l=e=>{e.notice(s)},m?l(m):n.Z.newInstance(Object.assign({},v),(e=>{m?l(m):(m=e,l(e),h.push(e))})))})),r=()=>{m&&m.removeNotice(i)};return r.then=(e,t)=>a.then(e,t),r.promise=a,r},destroy(){m&&(m.destroy(),m=null),h.length>0&&(h.forEach((e=>e.destroy())),h=[])}}},32509:(e,t,i)=>{"use strict";i.d(t,{u:()=>y});var o=i(31191),n=i(74512),a=i(10207),r=i(32735),s=i(78629),l=i(15026);const d={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjNTQ1NDU0IiBmaWxsLW9wYWNpdHk9Ii45MiIvPjwvc3ZnPg==",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},c={white:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCA4TDYuNjg2MjkgOEM4LjgwODAyIDggMTAuODQyOSA3LjE1NzE0IDEyLjM0MzEgNS42NTY4NUwxNy4yOTI5IDAuNzA3MTA2QzE3LjY4MzQgMC4zMTY1ODIgMTguMzE2NiAwLjMxNjU4MiAxOC43MDcxIDAuNzA3MTA3TDIzLjY1NjkgNS42NTY4NkMyNS4xNTcxIDcuMTU3MTUgMjcuMTkyIDggMjkuMzEzNyA4TDM2IDhMMCA4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+",black:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjNTQ1NDU0IiBmaWxsLW9wYWNpdHk9Ii45MiIvPjwvc3ZnPg==",blue:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDM2IDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0wIDhoNi42ODZhOCA4IDAgMCAwIDUuNjU3LTIuMzQzbDQuOTUtNC45NWExIDEgMCAwIDEgMS40MTQgMGw0Ljk1IDQuOTVBOCA4IDAgMCAwIDI5LjMxNCA4SDM2IDB6IiBmaWxsPSIjMTBBMkM1Ii8+PC9zdmc+",border:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAAAQCAYAAAC1MDndAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADOSURBVHgB7deLDYIwGATgvxswQkdgAxnBERyBETpKncARcAPdoCPIBuc11pgYNaBF2sKXXICEAL1QHkq+AKDiQodsmU1YT0nP7Jkzc/TbSqle5sLSGsZifh3TSKp4cZo54P+6pIt5xottmQum58/RSo5wu5scpuP8OSRnHEDFnBCfP2YlpUDcB7iVEkUqyUqp8Pt0K2tavRJKchjPFV/OHca/3fy+WpaEA64x/DupliXiwHcDysnzIzAWFmA+lGNk9bYkI6uHMN0cEvu3ugKLPi0ttJ0IVQAAAABJRU5ErkJggg=="},p="rotate(180deg)",u="rotate(90deg)",g="rotate(-90deg)",m={bottom:{top:"-8px",left:"50%",marginLeft:"-18px"},bottomLeft:{top:"-8px",left:"25%",marginLeft:"-18px"},bottomRight:{top:"-8px",right:"25%",marginRight:"-18px"},left:{transform:u,right:"-22px",top:"50%",marginTop:"-5px"},leftBottom:{transform:u,right:"-22px",bottom:"25%",marginTop:"5px"},leftTop:{transform:u,right:"-22px",top:"25%"},right:{transform:g,left:"-22px",top:"50%",marginTop:"-5px"},rightBottom:{transform:g,left:"-22px",bottom:"25%",marginTop:"5px"},rightTop:{transform:g,left:"-22px",top:"25%"},top:{transform:p,bottom:"-8px",left:"50%",marginLeft:"-18px"},topLeft:{transform:p,bottom:"-8px",left:"25%",marginLeft:"-18px"},topRight:{transform:p,bottom:"-8px",right:"25%",marginRight:"-18px"}};function h({tooltipTheme:e,themeCtx:{colors:t,isDark:i}}){return"black"===e?{padding:"7.5px 12px",backgroundColor:t.ToastDefault,color:t.ConstTextInverse}:"white"===e?{backgroundColor:i?t.ToastDefault:t.BGPrimary,color:t.TextPrimary,padding:0}:"blue"===e?{backgroundColor:t.ConstSecondary2,color:t.ConstTextInverse,padding:0}:null}const _=({themeCtx:e,themeCtx:{fontFamilies:t},tooltipTheme:i="black",withPadding:o=!0,arrow:n=!0,rtl:a=!1,placement:r="top",arrowStyle:l={}})=>(0,s.iv)({fontFamily:t.Proxima,boxSizing:"border-box",margin:"0",padding:"0",color:"rgba(0, 0, 0, 0.65)",fontSize:"14px",listStyle:"none",fontFeatureSettings:'"tnum"',position:"absolute",zIndex:1060,display:"block",maxWidth:"250px",visibility:"visible","&-hidden":{display:"none"}},function({themeCtx:e,tooltipTheme:t,withPadding:i}){const{fontWeights:o,typography:n}=e;return{"&-inner":(0,s.iv)({textAlign:"left",textDecoration:"none",borderRadius:"8px",fontWeight:o.semiBold},n.P2,h({themeCtx:e,tooltipTheme:t}),i&&{padding:"8px"})}}({themeCtx:e,tooltipTheme:i,withPadding:o}),function({arrow:e,tooltipTheme:t,placement:i,themeCtx:o,arrowStyle:n}){return{"&-arrow":(0,s.iv)({display:e?"block":"none",position:"absolute",width:"36px",height:"8px",backgroundImage:o.isDark?`url(${c[t]})`:`url(${d[t]})`},m[i],n)}}({themeCtx:e,tooltipTheme:i,placement:r,arrow:n,arrowStyle:l}),a&&{direction:"rtl","& *":{direction:"rtl"}}),v=e=>{var{className:t,themeCtx:i,tooltipTheme:a,withPadding:r,rtl:d,arrow:c,prefixCls:p,placement:u,arrowStyle:g}=e,m=(0,o.__rest)(e,["className","themeCtx","tooltipTheme","withPadding","rtl","arrow","prefixCls","placement","arrowStyle"]);return(0,n.jsx)(l.Z,Object.assign({prefixCls:(0,s.cx)(t,_({themeCtx:i,tooltipTheme:a,withPadding:r,rtl:d,arrow:c,placement:u,arrowStyle:g})),placement:u},m),void 0)},y=(0,r.memo)((function(e){var{children:t,placement:i="top",align:s={}}=e,l=(0,o.__rest)(e,["children","placement","align"]);const d=(0,a.u)(),c=((e,t={})=>(0,r.useMemo)((()=>{let i;switch(e){case"top":case"topLeft":case"topRight":i=[0,-10];break;case"bottom":case"bottomLeft":case"bottomRight":i=[0,10];break;case"leftTop":case"left":case"leftBottom":i=[-10,0];break;default:i=[10,0]}return Object.assign({offset:i},t)}),[t,e]))(i,s);return(0,n.jsx)(v,Object.assign({},l,{themeCtx:d,placement:i,align:c},{children:t}),void 0)}))},21145:(e,t,i)=>{"use strict";e.exports=i.p+"863338800afbd636244a.png"},30008:(e,t,i)=>{"use strict";e.exports=i.p+"c287bca871661e22ee8a.png"},77523:(e,t,i)=>{"use strict";e.exports=i.p+"93d900c259793e998e7a.png"},53995:(e,t,i)=>{"use strict";e.exports=i.p+"5ca8d8eda42d027cbf48.png"},45253:(e,t,i)=>{"use strict";e.exports=i.p+"c4c40812758dc8175106.png"},93483:(e,t,i)=>{"use strict";e.exports=i.p+"0dbff97a224480a207b4.png"},45503:()=>{}},e=>{e.O(0,[1815,8040,8136,118,1192,5294,4736],(()=>(67287,e(e.s=67287)))),e.O()}]);